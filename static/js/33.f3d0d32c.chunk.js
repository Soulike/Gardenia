(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[33],{1008:function(e,t,r){e.exports={PullRequests:"Style_PullRequests__2EzEd",list:"Style_list__2Z9aN",header:"Style_header__bLOXb",statusFilter:"Style_statusFilter__3-bE3",tag:"Style_tag__2Esc7",pageButtonWrapper:"Style_pageButtonWrapper__oo2S4"}},1009:function(e,t,r){e.exports={PullRequests:"Style_PullRequests__2-07Q",emptyWrapper:"Style_emptyWrapper__2PVg3"}},1010:function(e,t,r){e.exports={PullRequest:"Style_PullRequest__2fW0b",titleWrapper:"Style_titleWrapper__1oAuA",iconWrapper:"Style_iconWrapper__MP-ds",info:"Style_info__1lTJJ"}},1292:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Q}));var a=r(2),n=r.n(a),s=r(6),c=r(14),o=r(16),u=r(38),l=r(37),i=r(0),p=r.n(i),m=r(212),d=r(1008),b=r.n(d),h=r(813),j=r(829),x=r(108),O=r(828),P=r(25),f=r(56),E=r(57),g=r(29),R=r(1009),v=r.n(R),N=r(1010),_=r.n(N),S=r(71),y=r(106),k=r(844),A=r(841),q=r(264),C=r(1);function w(e){var t=e.pullRequest,r=t.title,a=t.status,n=t.creationTime,s=t.no,c=t.sourceRepositoryUsername,o=t.targetRepositoryUsername,u=t.targetRepositoryName;return Object(C.jsxs)("div",{className:_.a.PullRequest,children:[Object(C.jsxs)("div",{className:_.a.titleWrapper,children:[Object(C.jsx)("div",{className:_.a.iconWrapper,style:{color:D(a)},children:B(a)}),Object(C.jsx)(q.a,{to:E.Function.generateRepositoryPullRequestRoute({username:o,repositoryName:u,no:s.toString()}),children:Object(C.jsx)("div",{className:_.a.title,children:r})})]}),Object(C.jsxs)("div",{className:_.a.info,children:["#",s," \u7531 ",Object(C.jsx)("b",{children:c})," \u4e8e ",S.b.parseTimestampToDifference(n)," \u521b\u5efa"]})]})}function B(e){switch(e){case g.c.CLOSED:return Object(C.jsx)(y.a,{});case g.c.MERGED:return Object(C.jsx)(k.a,{});case g.c.OPEN:return Object(C.jsx)(A.a,{})}}function D(e){switch(e){case g.c.CLOSED:return"red";case g.c.MERGED:return"purple";case g.c.OPEN:return"green"}}var W=p.a.memo(w),G=r(181);function M(e){var t=e.pullRequests;return Object(C.jsx)("div",{className:v.a.PullRequests,children:t.length>0?t.map((function(e){return Object(C.jsx)(W,{pullRequest:e},e.id)})):Object(C.jsx)("div",{className:v.a.emptyWrapper,children:Object(C.jsx)(G.a,{description:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684 Pull Request"})})})}var Z=p.a.memo(M),I=r(468),L=r(467);function z(e){var t,r=e.branches,a=e.loading,n=e.match.params,s=n.username,c=n.repositoryName,o=e.openAmount,u=e.closedAmount,l=e.mergedAmount,i=e.onStatusButtonClick,p=e.currentStatus,d=e.currentPageNumber,f=e.pullRequests,R=e.onNextButtonClick,v=e.onPrevButtonClick,N=e.noNextPage,_="",S=Object(m.a)(r);try{for(S.s();!(t=S.n()).done;){var q=t.value,w=q.isDefault,B=q.name;w&&(_=B)}}catch(D){S.e(D)}finally{S.f()}return Object(C.jsx)("div",{className:b.a.PullRequests,children:Object(C.jsxs)(h.a,{spinning:a,children:[Object(C.jsxs)("div",{className:b.a.list,children:[Object(C.jsxs)("div",{className:b.a.header,children:[Object(C.jsx)("div",{className:b.a.statusFilter,children:Object(C.jsxs)(j.b,{size:-1,children:[Object(C.jsxs)(x.a,{size:"small",type:"link",style:{color:"unset",fontWeight:void 0===p?"bolder":"inherit"},onClick:i(void 0),children:[Object(C.jsx)(I.a,{})," \u6240\u6709",Object(C.jsx)(O.a,{className:b.a.tag,children:o+u+l})]}),Object(C.jsxs)(x.a,{size:"small",type:"link",style:{color:"green",fontWeight:p===g.c.OPEN?"bolder":"inherit"},onClick:i(g.c.OPEN),children:[Object(C.jsx)(A.a,{})," \u5f00\u542f\u7684",Object(C.jsx)(O.a,{className:b.a.tag,children:o})]}),Object(C.jsxs)(x.a,{size:"small",type:"link",style:{color:"red",fontWeight:p===g.c.CLOSED?"bolder":"inherit"},onClick:i(g.c.CLOSED),children:[Object(C.jsx)(y.a,{})," \u5df2\u5173\u95ed",Object(C.jsx)(O.a,{className:b.a.tag,children:u})]}),Object(C.jsxs)(x.a,{size:"small",type:"link",style:{color:"purple",fontWeight:p===g.c.MERGED?"bolder":"inherit"},onClick:i(g.c.MERGED),children:[Object(C.jsx)(k.a,{})," \u5df2\u5408\u5e76",Object(C.jsx)(O.a,{className:b.a.tag,children:l})]})]})}),Object(C.jsx)("div",{className:b.a.buttonWrapper,children:Object(C.jsx)(P.b,{to:E.Function.generateRepositoryCompareRoute({sourceRepositoryUsername:s,sourceRepositoryName:c,sourceRepositoryBranch:_,targetRepositoryBranch:_,repositoryName:c,username:s}),children:Object(C.jsxs)(x.a,{type:"primary",children:[Object(C.jsx)(L.a,{}),"\u521b\u5efa Pull Request"]})})})]}),Object(C.jsx)("div",{className:b.a.pullRequestListWrapper,children:Object(C.jsx)(Z,{pullRequests:f})})]}),Object(C.jsx)("div",{className:b.a.pageButtonWrapper,children:Object(C.jsxs)(j.b,{size:-1,children:[Object(C.jsx)(x.a,{disabled:0===d,onClick:v,children:"\u4e0a\u4e00\u9875"}),Object(C.jsx)(x.a,{onClick:R,disabled:N,children:"\u4e0b\u4e00\u9875"})]})})]})})}var T=Object(f.j)(p.a.memo(z)),F=r(324),J=r(32),U=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).onStatusButtonClick=function(e){return Object(s.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.setState({currentStatus:e,loading:!0,currentPageNumber:0}),t.t0=e,t.next=t.t0===g.c.OPEN?4:t.t0===g.c.MERGED?7:t.t0===g.c.CLOSED?10:13;break;case 4:return t.next=6,a.loadOpenAmount();case 6:return t.abrupt("break",16);case 7:return t.next=9,a.loadMergedAmount();case 9:return t.abrupt("break",16);case 10:return t.next=12,a.loadClosedAmount();case 12:return t.abrupt("break",16);case 13:return t.next=15,Promise.all([a.loadOpenAmount(),a.loadClosedAmount(),a.loadMergedAmount()]);case 15:return t.abrupt("break",16);case 16:return t.next=18,a.loadPullRequests(e,0,r.SIZE_PER_PAGE);case 18:a.setState({loading:!1});case 19:case"end":return t.stop()}}),t)})))},a.onPrevButtonClick=Object(s.a)(n.a.mark((function e(){var t,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,s=t.currentPageNumber,c=t.currentStatus,!(s>0)){e.next=7;break}return a.setState({loading:!0}),e.next=5,a.loadPullRequests(c,(s-1)*r.SIZE_PER_PAGE,r.SIZE_PER_PAGE);case 5:a.setState({currentPageNumber:s-1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"});case 7:case"end":return e.stop()}}),e)}))),a.onNextButtonClick=Object(s.a)(n.a.mark((function e(){var t,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,s=t.currentPageNumber,c=t.currentStatus,a.setState({loading:!0}),e.next=4,a.loadPullRequests(c,(s+1)*r.SIZE_PER_PAGE,r.SIZE_PER_PAGE);case 4:a.setState({currentPageNumber:s+1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"});case 6:case"end":return e.stop()}}),e)}))),a.loadPullRequests=function(){var e=Object(s.a)(n.a.mark((function e(t,r,s){var c,o,u,l,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.props.match.params,o=c.username,u=c.repositoryName,e.next=3,J.h.getByRepository({username:o,name:u},t,r,s);case 3:null!==(l=e.sent)&&(i=l.pullRequests,a.setState({pullRequests:i}));case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),a.loadBranches=Object(s.a)(n.a.mark((function e(){var t,r,s,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,s=t.repositoryName,e.next=3,F.a.branches({username:r,name:s});case 3:null!==(c=e.sent)&&(o=c.branches,a.setState({branches:o}));case 5:case"end":return e.stop()}}),e)}))),a.loadOpenAmount=Object(s.a)(n.a.mark((function e(){var t,r,s,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,s=t.repositoryName,e.next=3,J.h.getPullRequestAmount({username:r,name:s},g.c.OPEN);case 3:null!==(c=e.sent)&&(o=c.amount,a.setState({openAmount:o}));case 5:case"end":return e.stop()}}),e)}))),a.loadClosedAmount=Object(s.a)(n.a.mark((function e(){var t,r,s,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,s=t.repositoryName,e.next=3,J.h.getPullRequestAmount({username:r,name:s},g.c.CLOSED);case 3:null!==(c=e.sent)&&(o=c.amount,a.setState({closedAmount:o}));case 5:case"end":return e.stop()}}),e)}))),a.loadMergedAmount=Object(s.a)(n.a.mark((function e(){var t,r,s,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,s=t.repositoryName,e.next=3,J.h.getPullRequestAmount({username:r,name:s},g.c.MERGED);case 3:null!==(c=e.sent)&&(o=c.amount,a.setState({mergedAmount:o}));case 5:case"end":return e.stop()}}),e)}))),a.setNoNextPage=function(){var e=a.state,t=e.currentStatus,n=e.currentPageNumber,s=e.openAmount,c=e.closedAmount,o=e.mergedAmount;switch(t){case g.c.CLOSED:return(n+1)*r.SIZE_PER_PAGE>=c;case g.c.MERGED:return(n+1)*r.SIZE_PER_PAGE>=o;case g.c.OPEN:return(n+1)*r.SIZE_PER_PAGE>=s;default:return(n+1)*r.SIZE_PER_PAGE>=s+c+o}},a.state={branches:[],loading:!1,openAmount:0,closedAmount:0,mergedAmount:0,pullRequests:[],currentStatus:g.c.OPEN,currentPageNumber:0},a}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,Promise.all([this.loadBranches(),this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount(),this.loadPullRequests(g.c.OPEN,0,r.SIZE_PER_PAGE)]);case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(n.a.mark((function e(t,r,a){var s,c,o,u,l,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.match.params,c=s.username,o=s.repositoryName,u=t.match.params,l=u.username,i=u.repositoryName,c===l&&o===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.branches,r=e.loading,a=e.closedAmount,n=e.mergedAmount,s=e.openAmount,c=e.pullRequests,o=e.currentStatus,u=e.currentPageNumber;return Object(C.jsx)(T,{branches:t,loading:r,closedAmount:a,mergedAmount:n,openAmount:s,pullRequests:c,currentStatus:o,currentPageNumber:u,onStatusButtonClick:this.onStatusButtonClick,onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick,noNextPage:this.setNoNextPage()})}}]),r}(i.PureComponent);U.SIZE_PER_PAGE=20;var Q=Object(f.j)(U)}}]);
//# sourceMappingURL=33.f3d0d32c.chunk.js.map