(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[19],{1114:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return n}))},1115:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",(function(){return r}))},1116:function(e,t,a){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a.d(t,"a",(function(){return n}))},1117:function(e,t,a){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}a.d(t,"a",(function(){return r}))},1118:function(e,t,a){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}a.d(t,"a",(function(){return r}))},1132:function(e,t,a){e.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},1137:function(e,t,a){"use strict";a(181);var n=a(55),r=a(1138),o=a(0),s=a.n(o),c=a(1132),i=a.n(c);var u=s.a.memo((function(e){var t=e.isPublic,a=Object(r.a)(e,["isPublic"]);return t?s.a.createElement(n.a,Object.assign({className:i.a.AccessibilityTag,color:"blue"},a),"\u516c\u5171"):s.a.createElement(n.a,Object.assign({className:i.a.AccessibilityTag,color:"gold"},a),"\u79c1\u4eba")}));a.d(t,"a",(function(){return u}))},1138:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a.d(t,"a",(function(){return n}))},1260:function(e,t,a){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tag:"Style_tag__2txb4",usernameAndNameWrapper:"Style_usernameAndNameWrapper__zhZl-",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",tab:"Style_tab__2Ycb5"}},1261:function(e,t,a){},1330:function(e,t,a){"use strict";a.r(t);var n,r=a(4),o=a.n(r),s=a(7),c=a(1114),i=a(1115),u=a(1117),l=a(1116),m=a(1118),p=a(0),f=a.n(p),b=(a(181),a(55)),d=(a(263),a(91)),E=a(1260),y=a.n(E),h=a(1137),S=a(14),v=a(32);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(n||(n={}));var g=n,O=(a(95),a(42)),_=a(38),k=a.n(_),T=a(66),A=a(15),P=a(23),R=a(75),I=a(74),C=a(76),N=(a(341),a(156)),w=(a(94),a(26)),j=a(1261),x=a.n(j),U=a(97),F=a(1099);var D=f.a.memo((function(e){var t=e.onClick,a=e.forkAmount,n=e.loading;return f.a.createElement(w.a.Group,{className:x.a.ForkButton,size:"small"},f.a.createElement(w.a,{onClick:t,disabled:n,loading:n},f.a.createElement(F.a,null),"Fork"),f.a.createElement(N.a,{title:a},f.a.createElement(w.a,{disabled:n},U.d.getNumberAbbreviation(a))))})),L=a(45),G=a(132),K=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(R.a)(this,Object(I.a)(t).call(this,e))).loadForkAmount=Object(T.a)(k.a.mark((function e(){var t,n,r,o,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,L.h.forkAmount({username:n,name:r});case 3:null!==(o=e.sent)&&(s=o.amount,a.setState({forkAmount:s}));case 5:case"end":return e.stop()}}),e)}))),a.onClick=Object(T.a)(k.a.mark((function e(){var t,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=a.props.match.params,n=t.username,r=t.repository,e.next=4,L.g.fork({username:n,name:r});case 4:null!==e.sent&&O.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),a.setState({loading:!1});case 7:case"end":return e.stop()}}),e)}))),a.state={forkAmount:0,loading:!1},a}return Object(C.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadForkAmount();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forkAmount,a=e.loading;return f.a.createElement(D,{onClick:this.onClick,forkAmount:t,loading:a})}}]),t}(p.PureComponent),q=Object(G.f)(K),Q=a(1101),z={name:"exclamation-circle",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]}},M=a(12),B=function(e,t){return f.a.createElement(M.a,Object.assign({},e,{ref:t,icon:z}))};B.displayName="ExclamationCircleOutlined";var J=f.a.forwardRef(B),V=a(1105),W=a(1094);var Y=f.a.memo((function(e){var t=e.repository,a=t.username,n=t.name,r=t.isPublic,o=e.forkFrom,s=e.loading,c=e.onTabChange,i=e.tabActiveKey,u=e.showSettings,l=e.children,m=e.openPullRequestAmount,p=e.openIssueAmount;return s?null:f.a.createElement("div",{className:y.a.Repository},f.a.createElement("div",{className:y.a.header},f.a.createElement("div",{className:y.a.basicInfo},f.a.createElement("div",{className:y.a.tag},f.a.createElement(h.a,{isPublic:r})),f.a.createElement("div",{className:y.a.usernameAndNameWrapper},f.a.createElement("div",{className:y.a.usernameAndName},f.a.createElement(S.b,{to:v.Function.generatePersonalCenterRoute({username:a})},a)," / ",f.a.createElement(S.b,{to:v.Function.generateRepositoryCodeRoute({username:a,repository:n})},f.a.createElement("b",null,n))),f.a.createElement("div",{className:y.a.forkFrom},null===o?null:f.a.createElement("div",{className:y.a.forkFrom},f.a.createElement("div",{className:y.a.text},"fork \u81ea"),f.a.createElement(S.b,{to:v.Function.generatePersonalCenterRoute({username:o.username})},o.username)," / ",f.a.createElement(S.b,{to:v.Function.generateRepositoryCodeRoute({username:o.username,repository:o.name})},f.a.createElement("b",null,o.name)))))),f.a.createElement("div",{className:y.a.buttonWrapper},f.a.createElement(q,null))),f.a.createElement(d.a,{defaultActiveKey:g.CODE,type:"card",className:y.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:c,activeKey:i},f.a.createElement(d.a.TabPane,{tab:f.a.createElement(f.a.Fragment,null,f.a.createElement(Q.a,null),"\u4ee3\u7801"),key:g.CODE},f.a.createElement("div",{className:y.a.tabContent},l)),f.a.createElement(d.a.TabPane,{tab:f.a.createElement(f.a.Fragment,null,f.a.createElement(J,null),"Issues ",f.a.createElement(b.a,{className:y.a.tag},p)),key:g.ISSUES},f.a.createElement("div",{className:y.a.tabContent},l)),f.a.createElement(d.a.TabPane,{tab:f.a.createElement(f.a.Fragment,null,f.a.createElement(V.a,null),"Pull Requests ",f.a.createElement(b.a,{className:y.a.tag},m)),key:g.PULL_REQUESTS},f.a.createElement("div",{className:y.a.tabContent},l)),u?f.a.createElement(d.a.TabPane,{tab:f.a.createElement(f.a.Fragment,null,f.a.createElement(W.a,null),"\u8bbe\u7f6e"),key:g.SETTINGS},f.a.createElement("div",{className:y.a.tabContent},l)):null))})),H=a(115),Z=a(1),X=a(47),$=a(215),ee=a(20),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).setTitle=function(){var e=a.props.match.params,t=e.username,n=e.repository;document.title="".concat(t,"/").concat(n," - ").concat($.a.NAME)},a.loadOpenIssueAmount=Object(s.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,L.d.getAmountByRepository({username:n,name:r},ee.a.OPEN);case 3:null!==(s=e.sent)&&(c=s.amount,a.setState({openIssueAmount:c}));case 5:case"end":return e.stop()}}),e)}))),a.loadOpenPullRequestAmount=Object(s.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,L.f.getPullRequestAmount({username:n,name:r},ee.c.OPEN);case 3:null!==(s=e.sent)&&(c=s.amount,a.setState({openPullRequestAmount:c}));case 5:case"end":return e.stop()}}),e)}))),a.loadRepository=Object(s.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,L.h.repository({username:n},{name:r});case 3:null!==(s=e.sent)&&a.setState({repository:s});case 5:case"end":return e.stop()}}),e)}))),a.loadForkFrom=Object(s.a)(o.a.mark((function e(){var t,n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,L.h.forkFrom({username:n,name:r});case 3:null!==(s=e.sent)&&(c=s.repository,a.setState({forkFrom:c}));case 5:case"end":return e.stop()}}),e)}))),a.loadVisitorProfile=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.e.get();case 2:null!==(t=e.sent)&&a.setState({visitorProfile:t});case 4:case"end":return e.stop()}}),e)}))),a.setTabActiveKey=function(){var e=a.props.match.path,t=Z.PAGE_ID.REPOSITORY,n=t.REPOSITORY,r=t.CODE,o=t.ISSUES,s=t.ISSUE,c=t.CREATE_ISSUE,i=t.PULL_REQUESTS,u=t.PULL_REQUEST,l=t.SETTINGS,m=t.CONFLICT;switch(e){case Z.PAGE_ID_TO_ROUTE[r]:case Z.PAGE_ID_TO_ROUTE[n]:a.setState({tabActiveKey:g.CODE});break;case Z.PAGE_ID_TO_ROUTE[c]:case Z.PAGE_ID_TO_ROUTE[s]:case Z.PAGE_ID_TO_ROUTE[o]:a.setState({tabActiveKey:g.ISSUES});break;case Z.PAGE_ID_TO_ROUTE[u]:case Z.PAGE_ID_TO_ROUTE[i]:case Z.PAGE_ID_TO_ROUTE[m]:a.setState({tabActiveKey:g.PULL_REQUESTS});break;case Z.PAGE_ID_TO_ROUTE[l.SETTINGS]:a.setState({tabActiveKey:g.SETTINGS})}},a.onTabChange=function(e){var t=a.props.history,n=a.state.repository,r=n.username,o=n.name;switch(e){case g.CODE:t.push(v.Function.generateRepositoryCodeRoute({username:r,repository:o}));break;case g.ISSUES:t.push(v.Function.generateRepositoryIssuesRoute({username:r,repository:o}));break;case g.PULL_REQUESTS:t.push(v.Function.generateRepositoryPullRequestsRoute({username:r,repository:o}));break;case g.SETTINGS:t.push(v.Function.generateRepositorySettingsRoute({username:r,repository:o}));break;default:return}},a.state={repository:new H.h("","","",!0),loading:!0,tabActiveKey:g.CODE,visitorProfile:null,forkFrom:null,openPullRequestAmount:0,openIssueAmount:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.isLoggedIn,this.setTitle(),this.setTabActiveKey(),this.setState({loading:!0}),e.next=6,Promise.all([this.loadRepository(),this.loadForkFrom(),this.loadOpenPullRequestAmount(),this.loadOpenIssueAmount()]);case 6:if(!t){e.next=9;break}return e.next=9,this.loadVisitorProfile();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a,n){var r,s,c,i,u,l,m,p,f,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,s=r.location.pathname,c=r.isLoggedIn,i=r.match.params,u=i.repository,l=i.username,m=t.location.pathname,p=t.isLoggedIn,f=t.match.params,b=f.repository,d=f.username,u===b&&l===d){e.next=5;break}return e.next=5,this.componentDidMount();case 5:if(s!==m&&this.setTabActiveKey(),!c||p){e.next=9;break}return e.next=9,this.loadVisitorProfile();case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.repository,a=e.loading,n=e.tabActiveKey,r=e.visitorProfile,o=e.forkFrom,s=e.openPullRequestAmount,c=e.openIssueAmount,i=this.props,u=i.children,l=i.isLoggedIn;return f.a.createElement(Y,{showSettings:l&&null!==r&&t.username===r.username,repository:t,loading:a,onTabChange:this.onTabChange,tabActiveKey:n,forkFrom:o,openPullRequestAmount:s,openIssueAmount:c},u)}}]),t}(p.PureComponent),ae=Object(X.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))(te);a.d(t,"default",(function(){return ae}))}}]);
//# sourceMappingURL=19.05798b31.chunk.js.map