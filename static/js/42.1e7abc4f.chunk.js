(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[42],{1084:function(d,p,e){d.exports={Commit:"Style_Commit__1ccZI",diffWrapper:"Style_diffWrapper__1Xmub",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__-rw5j"}},1085:function(d,p,e){d.exports={CommitInfoCard:"Style_CommitInfoCard__1hAXa",messageWrapper:"Style_messageWrapper__3JI_C",message:"Style_message__2pxOG",body:"Style_body__bWu93",infoWrapper:"Style_infoWrapper__1ZWk5",info:"Style_info__29oAa",committerWrapper:"Style_committerWrapper__vzZYZ"}},1404:function(d,p,e){"use strict";e.r(p),e.d(p,"default",function(){return z});var y=e(0),t=e.n(y),g=e(1084),h=e.n(g),W=e(947),E=e(101),F=e(1085),r=e.n(F),M=e(67),I=e(17),S=e(46),P=e(48),j=e(22),B=e(343);function T(m){const{commit:{message:a,body:o,committerName:n,timestamp:i,commitHash:s,committerEmail:f},match:{params:{username:u,repositoryName:l}}}=m;return t.a.createElement("div",{className:r.a.CommitInfoCard},t.a.createElement("div",{className:r.a.messageWrapper},t.a.createElement("div",{className:r.a.message},a),o.length?t.a.createElement("pre",{className:r.a.body},o):null),t.a.createElement("div",{className:r.a.infoWrapper},t.a.createElement("div",{className:r.a.info},t.a.createElement("div",{className:r.a.committerWrapper},t.a.createElement(B.a,{committerEmail:f,committerName:n})),"\u5728 ",M.b.parseTimestampToDifference(i),"\u63D0\u4EA4"),t.a.createElement("div",{className:r.a.hashWrapper},t.a.createElement(I.b,{className:r.a.hash,to:P.Function.generateRepositoryCodeRoute({username:u,repositoryName:l,commitHash:s,objectType:j.b.TREE})},t.a.createElement(E.a,{size:"small"},t.a.createElement("code",null,s))))))}var L=Object(S.j)(t.a.memo(T)),O=e(348);function R(m){const{loading:a,diff:o,commit:n,diffAmount:i,onLoadMoreButtonClick:s}=m;return t.a.createElement("div",{className:h.a.Commit},t.a.createElement(W.a,{spinning:a},t.a.createElement("div",{className:h.a.commitInfoCardWrapper},t.a.createElement(L,{commit:n})),t.a.createElement("div",{className:h.a.diffWrapper},t.a.createElement(O.a,{fileDiffs:o,fileDiffAmount:i}),t.a.createElement("div",{className:h.a.loadMoreButtonWrapper},t.a.createElement(E.a,{disabled:a,loading:a,onClick:s,size:"large",type:"primary"},"\u52A0\u8F7D\u66F4\u591A\u6587\u4EF6\u66F4\u6539")))))}var x=t.a.memo(R),H=e(132),v=e(27),Z=e(339),N,G=typeof N!="undefined"?N:m=>{throw new Error('Dynamic require of "'+m+'" is not supported')},c=(m,a,o)=>new Promise((n,i)=>{var s=l=>{try{u(o.next(l))}catch(C){i(C)}},f=l=>{try{u(o.throw(l))}catch(C){i(C)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,f);u((o=o.apply(m,a)).next())});const D=class extends y.PureComponent{constructor(m){super(m);this.init=()=>c(this,null,function*(){return new Promise(a=>{this.setState({diff:[]},()=>a())})}),this.loadCommit=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,i=yield v.j.commit({username:a,name:o},n);if(i!==null){const{commit:s}=i;this.setState({commit:s})}}),this.loadMoreCommitDiff=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,{diff:i}=this.state,s=yield v.j.commitDiff({username:a,name:o},n,i.length,D.FILE_DIFF_AMOUNT_PER_PAGE);if(s!==null){const{diff:f}=s;f.length===0?Z.a.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u88AB\u4FEE\u6539\u6587\u4EF6"}):this.setState({diff:[...i,...f]})}}),this.loadCommitDiffAmount=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,i=yield v.j.commitDiffAmount({username:a,name:o},n);if(i!==null){const{amount:s}=i;this.setState({diffAmount:s})}}),this.onLoadMoreButtonClick=()=>c(this,null,function*(){this.setState({loading:!0}),yield this.loadMoreCommitDiff(),this.setState({loading:!1})}),this.state={commit:new H.b("","","a@b.com",0,"",""),diff:[],diffAmount:0,loading:!1}}componentDidMount(){return c(this,null,function*(){yield this.init(),this.setState({loading:!0}),yield Promise.all([this.loadCommit(),this.loadCommitDiffAmount(),this.loadMoreCommitDiff()]),this.setState({loading:!1})})}componentDidUpdate(m,a,o){return c(this,null,function*(){const{location:{pathname:n}}=this.props,{location:{pathname:i}}=m;n!==i&&(yield this.componentDidMount())})}render(){const{commit:m,diff:a,loading:o,diffAmount:n}=this.state;return t.a.createElement(x,{commit:m,diff:a,loading:o,diffAmount:n,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}};let A=D;A.FILE_DIFF_AMOUNT_PER_PAGE=10;var z=Object(S.j)(A)}}]);

//# sourceMappingURL=42.1e7abc4f.chunk.js.map