(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[5],{1153:function(e,t,n){e.exports={Profile:"Style_Profile__1P2aC",item:"Style_item__1F9QO",form:"Style_form__1PS4O",inputWrapper:"Style_inputWrapper__fOuXC",saveButtonWrapper:"Style_saveButtonWrapper__2AiWe",emailForm:"Style_emailForm__7P4eQ"}},1154:function(e,t,n){e.exports={Nickname:"Style_Nickname__3gWvC",form:"Style_form__3g0-l",inputWrapper:"Style_inputWrapper__3jj-P",saveButtonWrapper:"Style_saveButtonWrapper__3Sif2"}},1155:function(e,t,n){e.exports={Email:"Style_Email__2JMj1",form:"Style_form__2tgBD",inputWrapper:"Style_inputWrapper__3g6em",emailInput:"Style_emailInput__3T16m",verificationCodeInput:"Style_verificationCodeInput__1vRUB",getVerificationCodeButton:"Style_getVerificationCodeButton__3OBFz",saveButtonWrapper:"Style_saveButtonWrapper__1JiaX"}},1397:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return U}));var a=n(2),i=n.n(a),r=n(4),o=n(14),c=n(15),s=n(39),u=n(38),l=n(1),m=n(0),d=n.n(m),f=n(1153),p=n.n(f),b=n(949),j=n(946),v=n(915),x=n(268),h=n(1154),g=n.n(h),C=n(944),k=n(191),O=n(909),_=n(118),S=n(167);function N(e){var t=e.nickname,n=e.loading,a=e.onNicknameInputChange,i=e.onNicknameSubmit;return Object(l.jsxs)("div",{className:g.a.Nickname,children:[Object(l.jsx)(C.a,{children:"\u6635\u79f0"}),Object(l.jsxs)("div",{className:g.a.form,children:[Object(l.jsx)("div",{className:g.a.inputWrapper,children:Object(l.jsx)(k.a,{title:S.c.Profile.NICKNAME,trigger:"focus",children:Object(l.jsx)(O.a,{onChange:a,value:t,disabled:n})})}),Object(l.jsx)("div",{className:g.a.saveButtonWrapper,children:Object(l.jsx)(_.a,{type:"primary",onClick:i,loading:n,disabled:n,children:"\u4fdd\u5b58"})})]})]})}var y=d.a.memo(N),P=n(112),I=n(340),B=n(336),w=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setStatePromise=Object(P.promisify)(a.setState),a.onNicknameInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setStatePromise({nickname:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onNicknameSubmit=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.nickname,!S.b.Profile.nickname(t)){e.next=12;break}return e.next=4,a.setStatePromise({loading:!0});case 4:return e.next=6,I.a.setNickname(t);case 6:return null!==e.sent&&B.a.success({message:"\u6635\u79f0\u4fee\u6539\u6210\u529f"}),e.next=10,a.setStatePromise({loading:!1});case 10:e.next=13;break;case 12:B.a.warn({message:S.a.Profile.NICKNAME,description:S.c.Profile.NICKNAME});case 13:case"end":return e.stop()}}),e)}))),a.state={nickname:"",loading:!1},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.defaultNickname,o=t.defaultNickname,r===o||void 0===r){e.next=5;break}return e.next=5,this.setStatePromise({nickname:r});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.nickname,n=e.loading,a=this.props.loadingDefaultNickname;return Object(l.jsx)(y,{nickname:t,loading:n||!!a,onNicknameInputChange:this.onNicknameInputChange,onNicknameSubmit:this.onNicknameSubmit})}}]),n}(m.PureComponent),E=n(1155),V=n.n(E);function W(e){var t=e.email,n=e.loading,a=e.onEmailInputChange,i=e.onEmailSubmit,r=e.disableGetVerificationCodeButton,o=e.getVerificationCodeButtonText,c=e.onGetVerificationCodeButtonClick,s=e.onVerificationCodeInputChange,u=e.verificationCode;return Object(l.jsxs)("div",{className:V.a.Email,children:[Object(l.jsx)(C.a,{children:"\u90ae\u7bb1"}),Object(l.jsxs)("div",{className:V.a.form,children:[Object(l.jsxs)("div",{className:V.a.inputWrapper,children:[Object(l.jsx)(O.a,{type:"email",onChange:a,value:t,disabled:n,className:V.a.emailInput}),Object(l.jsx)(O.a,{type:"text",onChange:s,value:u,placeholder:"\u90ae\u7bb1\u9a8c\u8bc1\u7801",addonAfter:Object(l.jsx)(_.a,{type:"link",size:"small",disabled:r||n,className:V.a.getVerificationCodeButton,onClick:c,children:o}),className:V.a.verificationCodeInput})]}),Object(l.jsx)("div",{className:V.a.saveButtonWrapper,children:Object(l.jsx)(_.a,{type:"primary",onClick:i,loading:n,disabled:n,children:"\u4fdd\u5b58"})})]})]})}var T=d.a.memo(W),A=S.b.Profile,D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setStatePromise=Object(P.promisify)(a.setState),a.onEmailInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setStatePromise({email:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onVerificationCodeInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setStatePromise({verificationCode:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onGetVerificationCodeButtonClick=Object(r.a)(i.a.mark((function e(){var t,n,r,o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=30,n=a.state,r=n.getVerificationCodeButtonText,o=n.email,A.email(o)){e.next=6;break}B.a.warn({message:S.a.Profile.EMAIL}),e.next=22;break;case 6:return e.next=8,a.setStatePromise({disableGetVerificationCodeButton:!0});case 8:return c=0,s=setInterval((function(){c++,a.setState({getVerificationCodeButtonText:"".concat(t-c," \u79d2\u540e\u518d\u83b7\u53d6")})}),1e3),u=setTimeout((function(){clearInterval(s),a.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r})}),1e3*t),e.next=13,I.a.sendSetEmailVerificationCodeToEmail(o);case 13:if(null===e.sent){e.next=18;break}B.a.success({message:"\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f",description:"\u8bf7\u5230 ".concat(o," \u67e5\u770b")}),e.next=22;break;case 18:return clearInterval(s),clearTimeout(u),e.next=22,a.setStatePromise({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r});case 22:case"end":return e.stop()}}),e)}))),a.onEmailSubmit=Object(r.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.email,r=t.verificationCode,S.b.Account.verificationCode(r)){e.next=5;break}B.a.warn({message:S.a.Account.VERIFICATION_CODE}),e.next=20;break;case 5:if(S.b.Profile.email(n)){e.next=9;break}B.a.warn({message:S.a.Profile.EMAIL}),e.next=20;break;case 9:return e.next=11,a.setStatePromise({loading:!0});case 11:return e.next=13,I.a.setEmail(n,r);case 13:if(null===e.sent){e.next=18;break}return B.a.success({message:"\u90ae\u7bb1\u4fee\u6539\u6210\u529f"}),e.next=18,a.setStatePromise({verificationCode:""});case 18:return e.next=20,a.setStatePromise({loading:!1});case 20:case"end":return e.stop()}}),e)}))),a.state={email:"",verificationCode:"",getVerificationCodeButtonText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",disableGetVerificationCodeButton:!1,loading:!1},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,n,a){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.defaultEmail,o=t.defaultEmail,r===o||void 0===r){e.next=5;break}return e.next=5,this.setStatePromise({email:r});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.loadingDefaultEmail,t=this.state,n=t.email,a=t.loading,i=t.verificationCode,r=t.disableGetVerificationCodeButton,o=t.getVerificationCodeButtonText;return Object(l.jsx)(T,{email:n,loading:a||!!e,disableGetVerificationCodeButton:r,getVerificationCodeButtonText:o,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,onVerificationCodeInputChange:this.onVerificationCodeInputChange,verificationCode:i,onEmailInputChange:this.onEmailInputChange,onEmailSubmit:this.onEmailSubmit})}}]),n}(m.PureComponent),G=n(3);function M(e){var t=e.defaultNickname,n=e.defaultEmail,a=e.loading;return Object(l.jsxs)("div",{className:p.a.Profile,children:[Object(l.jsx)(b.a,{children:"\u4e2a\u4eba\u8d44\u6599"}),Object(l.jsx)("div",{className:p.a.item,children:Object(l.jsx)(w,{defaultNickname:t,loadingDefaultNickname:a})}),Object(l.jsx)("div",{className:p.a.item,children:Object(l.jsx)(D,{defaultEmail:n,loadingDefaultEmail:a})}),Object(l.jsxs)("div",{className:p.a.item,children:[Object(l.jsx)(j.a,{children:"\u5bc6\u7801"}),Object(l.jsx)(v.a,{type:"info",showIcon:!0,message:Object(l.jsxs)("div",{children:["\u524d\u5f80",Object(l.jsx)(x.a,{to:G.d[G.b.CHANGE_PASSWORD],children:"\u4fee\u6539\u5bc6\u7801\u9875\u9762"}),"\u4fee\u6539\u5bc6\u7801"]})})]})]})}var F=d.a.memo(M),L=n(30),J=n(62),q=n(148),K=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setStatePromise=Object(P.promisify)(a.setState),a.loadProfile=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.g.get();case 2:if(null===(t=e.sent)){e.next=8;break}return e.next=6,a.setStatePromise({currentProfile:t});case 6:e.next=10;break;case 8:return n=a.props.history,e.abrupt("return",n.replace(G.d[G.b.NOT_FOUND]));case 10:case"end":return e.stop()}}),e)}))),a.state={currentProfile:new q.g("","","",""),loading:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,this.loadProfile();case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentProfile,n=t.nickname,a=t.email,i=e.loading;return Object(l.jsx)(F,{defaultNickname:n,defaultEmail:a,loading:i})}}]),n}(m.PureComponent),U=Object(J.j)(K)},944:function(e,t,n){"use strict";var a=n(1),i=n(0),r=n.n(i),o=n(945),c=n.n(o);function s(e){var t=e.children,n=e.required;return Object(a.jsxs)("div",{className:c.a.InputLabel,children:[t,Object(a.jsx)("span",{className:c.a.requiredSign,children:n?" *":""})]})}t.a=r.a.memo(s)},945:function(e,t,n){e.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},946:function(e,t,n){"use strict";var a=n(944);n.d(t,"a",(function(){return a.a}))},948:function(e,t,n){e.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},949:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),i=n(0),r=n.n(i),o=n(948),c=n.n(o);function s(e){var t=e.children;return Object(a.jsx)("h2",{className:c.a.SettingsTitle,children:t})}var u=r.a.memo(s)}}]);
//# sourceMappingURL=5.97f79f13.chunk.js.map