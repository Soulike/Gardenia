(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[20],{1009:function(e,t,a){"use strict";var n=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},r=a(20),s=function(e,t){return n.createElement(r.a,Object.assign({},e,{ref:t,icon:i}))};s.displayName="LockOutlined";t.a=n.forwardRef(s)},1010:function(e,t,a){"use strict";var n=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},r=a(20),s=function(e,t){return n.createElement(r.a,Object.assign({},e,{ref:t,icon:i}))};s.displayName="BarcodeOutlined";t.a=n.forwardRef(s)},1095:function(e,t,a){e.exports={Register:"Style_Register__3noZm",form:"Style_form__3_TRs",inputWrapper:"Style_inputWrapper__lS-dq",logo:"Style_logo__3JrE_",button:"Style_button__1EHxx"}},1377:function(e,t,a){"use strict";var n=a(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},r=a(20),s=function(e,t){return n.createElement(r.a,Object.assign({},e,{ref:t,icon:i}))};s.displayName="MailOutlined";t.a=n.forwardRef(s)},1411:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(4),s=a(14),c=a(15),o=a(39),u=a(38),l=a(1),d=a(0),p=a.n(d),m=a(1095),f=a.n(m),h=a(909),b=a(118),g=a(964),v=a(167),j=a(954),x=a(946),C=a(924),O=a(1009),w=a(1377),S=a(1010);function I(e){var t=e.username,a=e.password,n=e.repeatPassword,i=e.email,r=e.onUsernameInputChange,s=e.onUsernameInputBlur,c=e.onPasswordInputChange,o=e.onRepeatPasswordInputChange,u=e.onEmailInputChange,d=e.onFormSubmit,p=e.onVerificationCodeInputChange,m=e.verificationCode,I=e.onGetVerificationCodeButtonClick,V=e.getVerificationCodeButtonText,_=e.disableGetVerificationCodeButton,B=e.loading;return Object(l.jsx)("main",{className:f.a.Register,children:Object(l.jsxs)("form",{action:"#",className:f.a.form,onSubmit:d,children:[Object(l.jsx)("img",{className:f.a.logo,src:g.a,alt:"web_developer_logo"}),Object(l.jsxs)("div",{className:f.a.inputWrapper,children:[Object(l.jsx)(x.a,{required:!0,children:"\u7528\u6237\u540d"}),Object(l.jsx)(h.a,{type:"text",size:"large",onChange:r,onBlur:s,autoFocus:!0,value:t,prefix:Object(l.jsx)(C.a,{}),disabled:B}),Object(l.jsxs)(j.a,{children:["\u7528\u6237\u540d\u8981\u6c42 ",v.c.Account.USERNAME,"\u3002"]})]}),Object(l.jsxs)("div",{className:f.a.inputWrapper,children:[Object(l.jsx)(x.a,{required:!0,children:"\u5bc6\u7801"}),Object(l.jsx)(h.a,{type:"password",size:"large",onChange:c,value:a,prefix:Object(l.jsx)(O.a,{}),disabled:B}),Object(l.jsxs)(j.a,{children:["\u4e3a\u4e86\u60a8\u7684\u8d26\u6237\u5b89\u5168\uff0c\u5bc6\u7801\u8981\u6c42 ",v.c.Account.PASSWORD,"\u3002"]})]}),Object(l.jsxs)("div",{className:f.a.inputWrapper,children:[Object(l.jsx)(x.a,{required:!0,children:"\u91cd\u590d\u5bc6\u7801"}),Object(l.jsx)(h.a,{type:"password",size:"large",onChange:o,value:n,prefix:Object(l.jsx)(O.a,{}),disabled:B})]}),Object(l.jsxs)("div",{className:f.a.inputWrapper,children:[Object(l.jsx)(x.a,{required:!0,children:"E-Mail"}),Object(l.jsx)(h.a,{type:"email",size:"large",onChange:u,value:i,prefix:Object(l.jsx)(w.a,{}),disabled:B}),Object(l.jsx)(j.a,{children:"\u8be5\u90ae\u7bb1\u5c06\u7528\u4e8e\u7edf\u8ba1\u60a8\u7684\u63d0\u4ea4\u6b21\u6570\u3001\u63a5\u6536\u901a\u77e5\u53ca\u4fee\u6539\u5bc6\u7801\uff0c\u8bf7\u786e\u4fdd\u8be5\u90ae\u7bb1\u53ef\u7528\u3002"})]}),Object(l.jsxs)("div",{className:f.a.inputWrapper,children:[Object(l.jsx)(x.a,{required:!0,children:"\u90ae\u7bb1\u9a8c\u8bc1\u7801"}),Object(l.jsx)(h.a,{type:"text",size:"large",onChange:p,value:m,prefix:Object(l.jsx)(S.a,{}),disabled:B,maxLength:6,addonAfter:Object(l.jsx)(b.a,{disabled:_||B,type:"link",onClick:I,children:V})}),Object(l.jsx)(j.a,{children:"\u5982\u672a\u6536\u5230\u9a8c\u8bc1\u7801\u90ae\u4ef6\uff0c\u8bf7\u67e5\u770b\u5176\u662f\u5426\u88ab\u8bef\u5206\u7c7b\u4e3a\u5783\u573e\u90ae\u4ef6\u3002"})]}),Object(l.jsx)(b.a,{htmlType:"submit",className:f.a.button,size:"large",type:"primary",disabled:B,loading:B,block:!0,children:"\u6ce8\u518c"})]})})}var V=p.a.memo(I),_=a(3),B=a(62),k=a(30),y=a(336),A=a(148),E=a(112),P=v.b.Account,z=v.b.Profile,N=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(E.promisify)(n.setState),n.setTitle=function(){document.title="\u6ce8\u518c - ".concat(_.a)},n.onUsernameInputChange=function(e){n.setState({username:e.target.value})},n.onUsernameInputBlur=Object(r.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(t=n.state.username)){e.next=14;break}if(v.b.Account.username(t)){e.next=6;break}y.a.warn({message:v.a.Account.USERNAME,description:v.c.Account.USERNAME}),e.next=14;break;case 6:return e.next=8,n.setStatePromise({loading:!0});case 8:return e.next=10,k.a.checkIfUsernameAvailable(t);case 10:return null!==(a=e.sent)&&(a.isAvailable||y.a.warn({message:"\u7528\u6237\u540d ".concat(t," \u5df2\u5b58\u5728")})),e.next=14,n.setStatePromise({loading:!1});case 14:case"end":return e.stop()}}),e)}))),n.onPasswordInputChange=function(e){n.setState({password:e.target.value})},n.onRepeatPasswordInputChange=function(e){n.setState({repeatPassword:e.target.value})},n.onEmailInputChange=function(e){n.setState({email:e.target.value})},n.onVerificationCodeInputChange=function(e){n.setState({verificationCode:e.target.value})},n.onFormSubmit=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.validateFormInput()){e.next=4;break}return e.next=4,n.submitForm();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onGetVerificationCodeButtonClick=Object(r.a)(i.a.mark((function e(){var t,a,r,s,c,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=30,a=n.state,r=a.getVerificationCodeButtonText,s=a.email,z.email(s)){e.next=6;break}y.a.warn({message:v.a.Profile.EMAIL}),e.next=14;break;case 6:return n.setState({disableGetVerificationCodeButton:!0}),c=0,o=setInterval((function(){c++,n.setState({getVerificationCodeButtonText:"".concat(t-c," \u79d2\u540e\u518d\u83b7\u53d6")})}),1e3),u=setTimeout((function(){clearInterval(o),n.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r})}),1e3*t),e.next=12,k.a.sendVerificationCodeToEmail({email:s});case 12:null!==e.sent?y.a.success({message:"\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f",description:"\u8bf7\u5230 ".concat(s," \u67e5\u770b")}):(clearInterval(o),clearTimeout(u),n.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r}));case 14:case"end":return e.stop()}}),e)}))),n.validateFormInput=function(){var e=n.state,t=e.username,a=e.password,i=e.repeatPassword,r=e.email,s=e.verificationCode;return P.username(t)?P.password(a)?a!==i?(y.a.warn({message:"\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u76f8\u540c"}),!1):z.email(r)?!!P.verificationCode(s)||(y.a.warn({message:v.a.Account.VERIFICATION_CODE}),!1):(y.a.warn({message:v.a.Profile.EMAIL}),!1):(y.a.warn({message:v.a.Account.PASSWORD,description:v.c.Account.PASSWORD}),!1):(y.a.warn({message:v.a.Account.USERNAME,description:v.c.Account.USERNAME}),!1)},n.submitForm=Object(r.a)(i.a.mark((function e(){var t,a,r,s,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.username,r=t.password,s=t.email,c=t.verificationCode,o=A.a.calculateHash(a,r),n.setState({loading:!0}),e.next=5,k.a.register({username:a,hash:o},{nickname:a,email:s,avatar:""},c);case 5:e.sent&&n.onRegisterSuccess(),n.setState({loading:!1});case 8:case"end":return e.stop()}}),e)}))),n.onRegisterSuccess=function(){return y.a.success({message:"\u6ce8\u518c\u6210\u529f"}),n.props.history.push(_.d[_.b.LOGIN])},n.state={username:"",password:"",repeatPassword:"",email:"",verificationCode:"",getVerificationCodeButtonText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",disableGetVerificationCodeButton:!1,loading:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setTitle()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.disableGetVerificationCodeButton,n=e.username,i=e.password,r=e.repeatPassword,s=e.email,c=e.verificationCode,o=e.getVerificationCodeButtonText;return Object(l.jsx)(V,{loading:t,username:n,password:i,email:s,disableGetVerificationCodeButton:a,verificationCode:c,onVerificationCodeInputChange:this.onVerificationCodeInputChange,onFormSubmit:this.onFormSubmit,onPasswordInputChange:this.onPasswordInputChange,onUsernameInputChange:this.onUsernameInputChange,onUsernameInputBlur:this.onUsernameInputBlur,onEmailInputChange:this.onEmailInputChange,onRepeatPasswordInputChange:this.onRepeatPasswordInputChange,repeatPassword:r,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,getVerificationCodeButtonText:o})}}]),a}(d.PureComponent),R=Object(B.j)(N);t.default=R},944:function(e,t,a){"use strict";var n=a(1),i=a(0),r=a.n(i),s=a(945),c=a.n(s);function o(e){var t=e.children,a=e.required;return Object(n.jsxs)("div",{className:c.a.InputLabel,children:[t,Object(n.jsx)("span",{className:c.a.requiredSign,children:a?" *":""})]})}t.a=r.a.memo(o)},945:function(e,t,a){e.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},946:function(e,t,a){"use strict";var n=a(944);a.d(t,"a",(function(){return n.a}))},951:function(e,t,a){e.exports={InputTip:"Style_InputTip__KsPY_"}},954:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),i=a(0),r=a.n(i),s=a(951),c=a.n(s);function o(e){var t=e.children;return Object(n.jsx)("div",{className:c.a.InputTip,children:t})}var u=r.a.memo(o)},964:function(e,t,a){"use strict";t.a=a.p+"static/media/developing_code.ac8fbd80.svg"}}]);
//# sourceMappingURL=20.da73632e.chunk.js.map