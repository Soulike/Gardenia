(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[21],{1017:function(e,t,a){(function(e){function a(e,t){for(var a=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),a++):a&&(e.splice(r,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var a=[],r=0;r<e.length;r++)t(e[r],r,e)&&a.push(e[r]);return a}t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,n="/"===s.charAt(0))}return(n?"/":"")+(t=a(r(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===n(e,-1);return(e=a(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,a){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var n=r(e.split("/")),i=r(a.split("/")),s=Math.min(n.length,i.length),o=s,c=0;c<s;c++)if(n[c]!==i[c]){o=c;break}var u=[];for(c=o;c<n.length;c++)u.push("..");return(u=u.concat(i.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,r=-1,n=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!n){r=i;break}}else n=!1;return-1===r?a?"/":".":a&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var a=function(e){"string"!==typeof e&&(e+="");var t,a=0,r=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){a=t+1;break}}else-1===r&&(n=!1,r=t+1);return-1===r?"":e.slice(a,r)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,a=0,r=-1,n=!0,i=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===r&&(n=!1,r=s+1),46===o?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!n){a=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===a+1?"":e.slice(t,r)};var n="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(73))},1039:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(a);if(!t)return!1;var i=t[1];if(!i)return!1;if(r.test(i)||n.test(i))return!0;return!1};var a=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,n=/^[^\s\.]+\.\S{2,}$/},1040:function(e,t,a){e.exports={CommitInfoBar:"Style_CommitInfoBar__AogMa",left:"Style_left__3aqnY",right:"Style_right__XNYqn",message:"Style_message__3Jq3M"}},1050:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a(0),n=a.n(r),i=a(1040),s=a.n(i),o=a(15),c=a(118),u=a(23),l=a(231),m=a(80),p=a(324);var f=Object(c.f)(n.a.memo((function(e){var t=e.lastCommit,a=t.committerName,r=t.commitHash,i=t.message,c=t.timestamp,f=t.committerEmail,h=e.match.params,d=h.username,v=h.repository;return n.a.createElement("div",{className:s.a.CommitInfoBar},n.a.createElement("div",{className:s.a.left},n.a.createElement(p.a,{committerEmail:f,committerName:a}),n.a.createElement("div",{className:s.a.message},i)),n.a.createElement("div",{className:s.a.right},n.a.createElement("div",{className:s.a.time},m.b.parseTimestampToDifference(c)),n.a.createElement(l.a,{title:r},n.a.createElement("div",{className:s.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",n.a.createElement(o.b,{to:u.Function.generateRepositoryCommitRoute({username:d,repository:v,commitHash:r})},r.slice(0,7))))))})))},1051:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var r=a(1),n=a.n(r),i=a(322),s=a(3),o=a(9),c=a(10),u=a(17),l=a(18),m=a(0),p=a.n(m),f=a(118),h=a(23),d=a(323),v=a(1039),b=a.n(v),y=a(19),g=a(1017),k=a.n(g),x=a(232),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).objectURLs=[],r.loadMainBranchName=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,o,c,u,l,m,p,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.match.params,s=a.username,o=a.repository,e.next=3,d.a.branches({username:s,name:o});case 3:if(null===(c=e.sent)){e.next=24;break}u=c.branches,l=Object(i.a)(u),e.prev=7,l.s();case 9:if((m=l.n()).done){e.next=16;break}if(p=m.value,f=p.name,!p.isDefault){e.next=14;break}return r.setState({mainBranchName:f},(function(){return t()})),e.abrupt("break",16);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[7,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.processHTML=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,o,c,u,l,m,p,f,h,d,v;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=document.implementation.createHTMLDocument(),(o=a.createElement("div")).innerHTML=t,c=o.getElementsByTagName("a"),u=o.getElementsByTagName("img"),l=[],m=Object(i.a)(c);try{for(f=function(){var e=p.value,t=e.getAttribute("href");null!==t&&l.push(Object(s.a)(n.a.mark((function a(){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=e,a.next=3,r.getCompleteLink(t);case 3:a.t1=a.sent,a.t0.setAttribute.call(a.t0,"href",a.t1);case 5:case"end":return a.stop()}}),a)})))())},m.s();!(p=m.n()).done;)f()}catch(b){m.e(b)}finally{m.f()}h=Object(i.a)(u);try{for(v=function(){var e=d.value,t=e.getAttribute("src");null!==t&&l.push(Object(s.a)(n.a.mark((function a(){var i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.getImageURL(t);case 2:i=a.sent,r.objectURLs.push(i),e.setAttribute("src",i);case 5:case"end":return a.stop()}}),a)})))())},h.s();!(d=h.n()).done;)v()}catch(b){h.e(b)}finally{h.f()}return e.next=12,Promise.all(l);case 12:return e.abrupt("return",o.innerHTML);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getCompleteLink=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,i,s,o,c,u,l,m,p,f,v;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length&&!b()(t)&&!k.a.isAbsolute(t)&&"#"!==t.charAt(0)&&"?"!==t.charAt(0)){e.next=4;break}return e.abrupt("return",t);case 4:return a=r.props.match.params,i=a.username,s=a.repository,o=a.objectType,c=a.branch,u=a.path,l=r.state.mainBranchName,m=u?o===y.b.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,d.a.fileInfo({username:i},{name:s},m,c||l);case 9:if(null===(p=e.sent)){e.next=19;break}if(f=p.exists,v=p.type,f&&v!==y.b.BLOB){e.next=16;break}return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:i,repository:s,branch:c||l,path:m,objectType:y.b.BLOB}));case 16:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:i,repository:s,branch:c||l,path:m,objectType:y.b.TREE}));case 17:e.next=20;break;case 19:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:i,repository:s,branch:c||l,path:m,objectType:y.b.BLOB}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getImageURL=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,i,s,o,c,u,l,m,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()(t)&&!k.a.isAbsolute(t)){e.next=4;break}return e.abrupt("return",t);case 4:return a=r.props.match.params,i=a.username,s=a.repository,o=a.objectType,c=a.branch,u=a.path,l=r.state.mainBranchName,m=u?o===y.b.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,d.a.rawFile({username:i},{name:s},m,c||l);case 9:if(null===(p=e.sent)){e.next=14;break}return e.abrupt("return",URL.createObjectURL(p));case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={mainBranchName:"",loading:!1},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.branch,this.setState({loading:!0}),"string"===typeof t){e.next=5;break}return e.next=5,this.loadMainBranchName();case 5:this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(n.a.mark((function e(t,a,r){var i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.props.markdown,s=t.markdown,i===s){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.objectURLs.forEach((function(e){return URL.revokeObjectURL(e)}))}},{key:"render",value:function(){var e=this.state.loading,t=this.props.markdown;return p.a.createElement(x.a,{markdown:t,processHTML:this.processHTML,loading:e})}}]),a}(m.PureComponent),_=Object(f.f)(w)},1148:function(e,t,a){e.exports={FileReader:"Style_FileReader__3UwbJ",commitInfoBar:"Style_commitInfoBar__Q8via",contentWrapper:"Style_contentWrapper__WXjet",fileInfoBar:"Style_fileInfoBar__2tYVI",fileInfoWrapper:"Style_fileInfoWrapper__Z9ikA",fileNameWrapper:"Style_fileNameWrapper__21rUk",fileName:"Style_fileName__CCvcF",readerWrapper:"Style_readerWrapper__1-Blo",content:"Style_content___R5vO"}},1149:function(e,t,a){e.exports={CodeReader:"Style_CodeReader__yNPpi",line:"Style_line__2xQ8V",lineNumber:"Style_lineNumber__nX9YT",codeWrapper:"Style_codeWrapper__3J8o_",code:"Style_code__19ilK"}},1150:function(e,t,a){e.exports={MarkdownReader:"Style_MarkdownReader__2lNN5"}},1195:function(e,t,a){"use strict";var r=a(0),n={name:"file-text",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]}},i=a(13),s=function(e,t){return r.createElement(i.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="FileTextOutlined";t.a=r.forwardRef(s)},1203:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return H}));var r=a(1),n=a.n(r),i=a(3),s=a(9),o=a(10),c=a(17),u=a(18),l=a(0),m=a.n(l),p=a(1148),f=a.n(p),h=a(965),d=a(86),v=a(1050),b=a(23),y=a(15),g=a(118),k=a(976);var x=m.a.memo((function(){return m.a.createElement(k.a,{type:"warning",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})}));var w=m.a.memo((function(){return m.a.createElement(k.a,{type:"warning",showIcon:!0,message:"\u6587\u4ef6\u8fc7\u5927\uff0c\u4e0d\u80fd\u76f4\u63a5\u67e5\u770b",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})})),_=a(1017),j=a(1149),E=a.n(j),O=a(80);var N=m.a.memo((function(e){var t=e.code,a=O.a.getHighlightedCodeLines(t);return m.a.createElement("table",{className:"".concat(E.a.CodeReader," hljs")},m.a.createElement("tbody",null,a.map((function(e,t){return m.a.createElement("tr",{key:t,className:E.a.line},m.a.createElement("td",null,m.a.createElement("div",{className:E.a.lineNumber},t+1)),m.a.createElement("td",{className:E.a.codeWrapper},m.a.createElement("pre",{className:E.a.code},m.a.createElement("code",{dangerouslySetInnerHTML:{__html:e}}))))}))))})),C=a(1150),B=a.n(C),S=a(1051);var R=m.a.memo((function(e){var t=e.markdown;return m.a.createElement("div",{className:B.a.MarkdownReader},m.a.createElement(S.a,{markdown:t}))})),L=a(1195);var F=Object(g.f)(m.a.memo((function(e){var t=[".json"],a=[".md",".markdown",".mdwn"],r=e.isBinary,n=e.isOversize,i=e.fileName,s=e.lastCommit,o=e.loading,c=e.onRawFileButtonClick,u=e.fileContent,l=e.fileSize,p=e.match.params,g=p.username,k=p.repository,j=p.branch,E=p.path,C=Object(_.extname)(i).toLowerCase();return m.a.createElement("div",{className:f.a.FileReader},m.a.createElement(h.a,{spinning:o},m.a.createElement("div",{className:f.a.commitInfoBar},m.a.createElement(v.a,{lastCommit:s})),m.a.createElement("div",{className:f.a.contentWrapper},m.a.createElement("div",{className:f.a.fileInfoBar},m.a.createElement("div",{className:f.a.fileInfoWrapper},m.a.createElement("div",{className:f.a.fileNameWrapper},m.a.createElement(L.a,null),m.a.createElement("div",{className:f.a.fileName}," ",i)),m.a.createElement("div",{className:f.a.fileSize},O.c.parseFileSize(l))),m.a.createElement(d.a.Group,{className:f.a.buttonWrapper},m.a.createElement(d.a,null,m.a.createElement(y.b,{to:b.Function.generateRepositoryCommitsRoute({username:g,repository:k,branch:j,path:E})},"\u5386\u53f2")),m.a.createElement(d.a,{onClick:c},"\u4e0b\u8f7d"))),m.a.createElement("div",{className:f.a.readerWrapper},r?m.a.createElement(x,null):n?m.a.createElement(w,null):t.includes(C)?m.a.createElement(N,{code:u}):a.includes(C)?m.a.createElement(R,{markdown:u}):m.a.createElement(N,{code:u})))))}))),I=a(127),T=a(31),A=a(90),M=b.CONFIG.PAGE_ID_TO_ROUTE,z=b.CONFIG.PAGE_ID,U=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).setStatePromise=Object(A.promisify)(r.setState),r.loadLastCommit=Object(i.a)(n.a.mark((function e(){var t,a,i,s,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,i=t.repository,s=t.path,o=t.branch,e.next=3,T.h.lastBranchCommit({username:a},{name:i},o,s);case 3:if(null===(c=e.sent)){e.next=7;break}return e.next=7,r.setStatePromise({lastCommit:c});case 7:case"end":return e.stop()}}),e)}))),r.loadFileInfo=Object(i.a)(n.a.mark((function e(){var t,a,i,s,o,c,u,l,m,p,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.lastCommit.commitHash,a=r.props,i=a.match.params,s=i.username,o=i.repository,c=i.path,u=a.history,e.next=4,T.h.fileInfo({username:s},{name:o},c,t);case 4:if(null===(l=e.sent)){e.next=20;break}if(m=l.exists,p=l.size,f=l.isBinary,m){e.next=11;break}return e.abrupt("return",u.replace(M[z.NOT_FOUND]));case 11:return e.next=13,r.setStatePromise({fileSize:p});case 13:if(f||!(p>1048576)){e.next=18;break}return e.next=16,r.setStatePromise({isOversize:!0,isBinary:f});case 16:e.next=20;break;case 18:return e.next=20,r.setStatePromise({isOversize:!1,isBinary:f});case 20:case"end":return e.stop()}}),e)}))),r.loadFileContent=Object(i.a)(n.a.mark((function e(){var t,a,i,s,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,i=t.repository,s=t.path,o=r.state.lastCommit.commitHash,e.next=4,T.h.rawFile({username:a},{name:i},s,o);case 4:if(null===(c=e.sent)){e.next=13;break}return e.t0=r,e.next=9,O.c.transformBlobToString(c);case 9:return e.t1=e.sent,e.t2={fileContent:e.t1},e.next=13,e.t0.setStatePromise.call(e.t0,e.t2);case 13:case"end":return e.stop()}}),e)}))),r.onRawFileButtonClick=Object(i.a)(n.a.mark((function e(){var t,a,i,s,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,i=t.repository,s=t.path,o=r.state.lastCommit.commitHash,e.next=4,T.h.rawFile({username:a},{name:i},s,o);case 4:null!==(c=e.sent)&&r.startDownload(c);case 6:case"end":return e.stop()}}),e)}))),r.startDownload=function(e){var t=r.props.match.params.path,a=URL.createObjectURL(e);O.c.startDownload(a,Object(_.basename)(t)),URL.revokeObjectURL(a)},r.getFileNameFromPath=function(e){var t=e.split("/");return t[t.length-1]},r.state={isBinary:!1,isOversize:!1,lastCommit:new I.b("","","",0,"",""),loading:!0,fileContent:"",fileSize:0},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(n.a.mark((function e(){var t,a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,this.loadLastCommit();case 4:return e.next=6,this.loadFileInfo();case 6:if(t=this.state,a=t.isBinary,r=t.isOversize,a||r){e.next=10;break}return e.next=10,this.loadFileContent();case 10:return e.next=12,this.setStatePromise({loading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.props.location.pathname,s=t.location.pathname,i===s){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,a=t.isBinary,r=t.isOversize,n=t.lastCommit,i=t.loading,s=t.fileContent,o=t.fileSize,c=this.getFileNameFromPath(e);return m.a.createElement(F,{fileSize:o,fileContent:s,isBinary:a,isOversize:r,lastCommit:n,fileName:c,loading:i,onRawFileButtonClick:this.onRawFileButtonClick})}}]),a}(l.PureComponent),H=Object(g.f)(U)}}]);
//# sourceMappingURL=21.8acef656.chunk.js.map