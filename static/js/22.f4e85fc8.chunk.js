(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[22],{1032:function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,s=arguments.length-1;s>=-1&&!a;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),s=n(r.split("/")),i=Math.min(a.length,s.length),o=i,c=0;c<i;c++)if(a[c]!==s[c]){o=c;break}var u=[];for(c=o;c<a.length;c++)u.push("..");return(u=u.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!a){n=s;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!==typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,s=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===n&&(a=!1,n=i+1),46===o?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!a){r=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(75))},1058:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(r);if(!t)return!1;var s=t[1];if(!s)return!1;if(n.test(s)||a.test(s))return!0;return!1};var r=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,a=/^[^\s\.]+\.\S{2,}$/},1059:function(e,t,r){e.exports={CommitInfoBar:"Style_CommitInfoBar__AogMa",left:"Style_left__3aqnY",right:"Style_right__XNYqn",message:"Style_message__3Jq3M"}},1071:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));r(335);var n=r(149),a=r(0),s=r.n(a),i=r(1059),o=r.n(i),c=r(15),u=r(126),l=r(22),m=r(84),p=r(343);var f=Object(u.f)(s.a.memo((function(e){var t=e.lastCommit,r=t.committerName,a=t.commitHash,i=t.message,u=t.timestamp,f=t.committerEmail,h=e.match.params,b=h.username,d=h.repository;return s.a.createElement("div",{className:o.a.CommitInfoBar},s.a.createElement("div",{className:o.a.left},s.a.createElement(p.a,{committerEmail:f,committerName:r}),s.a.createElement("div",{className:o.a.message},i)),s.a.createElement("div",{className:o.a.right},s.a.createElement("div",{className:o.a.time},m.b.parseTimestampToDifference(u)),s.a.createElement(n.a,{title:a},s.a.createElement("div",{className:o.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",s.a.createElement(c.b,{to:l.Function.generateRepositoryCommitRoute({username:b,repository:d,commitHash:a})},a.slice(0,7))))))})))},1072:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r(1),a=r.n(n),s=r(337),i=r(3),o=r(9),c=r(10),u=r(17),l=r(18),m=r(0),p=r.n(m),f=r(126),h=r(22),b=r(339),d=r(1058),v=r.n(d),y=r(19),g=r(1032),w=r.n(g),k=r(243),x=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).objectURLs=[],n.loadMainBranchName=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,o,c,u,l,m,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.match.params,i=r.username,o=r.repository,e.next=3,b.a.branches({username:i,name:o});case 3:if(null===(c=e.sent)){e.next=24;break}u=c.branches,l=Object(s.a)(u),e.prev=7,l.s();case 9:if((m=l.n()).done){e.next=16;break}if(p=m.value,f=p.name,!p.isDefault){e.next=14;break}return n.setState({mainBranchName:f},(function(){return t()})),e.abrupt("break",16);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),l.e(e.t0);case 21:return e.prev=21,l.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[7,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),n.processHTML=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,o,c,u,l,m,p,f,h,b,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.implementation.createHTMLDocument(),(o=r.createElement("div")).innerHTML=t,c=o.getElementsByTagName("a"),u=o.getElementsByTagName("img"),l=[],m=Object(s.a)(c);try{for(f=function(){var e=p.value,t=e.getAttribute("href");null!==t&&l.push(Object(i.a)(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e,r.next=3,n.getCompleteLink(t);case 3:r.t1=r.sent,r.t0.setAttribute.call(r.t0,"href",r.t1);case 5:case"end":return r.stop()}}),r)})))())},m.s();!(p=m.n()).done;)f()}catch(v){m.e(v)}finally{m.f()}h=Object(s.a)(u);try{for(d=function(){var e=b.value,t=e.getAttribute("src");null!==t&&l.push(Object(i.a)(a.a.mark((function r(){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getImageURL(t);case 2:s=r.sent,n.objectURLs.push(s),e.setAttribute("src",s);case 5:case"end":return r.stop()}}),r)})))())},h.s();!(b=h.n()).done;)d()}catch(v){h.e(v)}finally{h.f()}return e.next=12,Promise.all(l);case 12:return e.abrupt("return",o.innerHTML);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCompleteLink=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,s,i,o,c,u,l,m,p,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length&&!v()(t)&&!w.a.isAbsolute(t)&&"#"!==t.charAt(0)&&"?"!==t.charAt(0)){e.next=4;break}return e.abrupt("return",t);case 4:return r=n.props.match.params,s=r.username,i=r.repository,o=r.objectType,c=r.branch,u=r.path,l=n.state.mainBranchName,m=u?o===y.b.BLOB?w.a.join(w.a.dirname(u),t):w.a.join(u,t):w.a.join("",t),e.next=9,b.a.fileInfo({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=19;break}if(f=p.exists,d=p.type,f&&d!==y.b.BLOB){e.next=16;break}return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.b.BLOB}));case 16:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.b.TREE}));case 17:e.next=20;break;case 19:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.b.BLOB}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getImageURL=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,s,i,o,c,u,l,m,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v()(t)&&!w.a.isAbsolute(t)){e.next=4;break}return e.abrupt("return",t);case 4:return r=n.props.match.params,s=r.username,i=r.repository,o=r.objectType,c=r.branch,u=r.path,l=n.state.mainBranchName,m=u?o===y.b.BLOB?w.a.join(w.a.dirname(u),t):w.a.join(u,t):w.a.join("",t),e.next=9,b.a.rawFile({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=14;break}return e.abrupt("return",URL.createObjectURL(p));case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={mainBranchName:"",loading:!1},n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.branch,this.setState({loading:!0}),"string"===typeof t){e.next=5;break}return e.next=5,this.loadMainBranchName();case 5:this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(a.a.mark((function e(t,r,n){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.markdown,i=t.markdown,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.objectURLs.forEach((function(e){return URL.revokeObjectURL(e)}))}},{key:"render",value:function(){var e=this.state.loading,t=this.props.markdown;return p.a.createElement(k.a,{markdown:t,processHTML:this.processHTML,loading:e})}}]),r}(m.PureComponent),j=Object(f.f)(x)},1172:function(e,t,r){e.exports={FileReader:"Style_FileReader__3UwbJ",commitInfoBar:"Style_commitInfoBar__Q8via",contentWrapper:"Style_contentWrapper__WXjet",fileInfoBar:"Style_fileInfoBar__2tYVI",fileName:"Style_fileName__CCvcF",readerWrapper:"Style_readerWrapper__1-Blo",content:"Style_content___R5vO"}},1173:function(e,t,r){e.exports={CodeReader:"Style_CodeReader__yNPpi",line:"Style_line__2xQ8V",lineNumber:"Style_lineNumber__nX9YT",code:"Style_code__19ilK"}},1174:function(e,t,r){e.exports={MarkdownReader:"Style_MarkdownReader__2lNN5"}},1226:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return U}));var n=r(1),a=r.n(n),s=r(3),i=r(9),o=r(10),c=r(17),u=r(18),l=r(0),m=r.n(l),p=(r(108),r(45)),f=(r(73),r(21)),h=r(1172),b=r.n(h),d=r(1071),v=r(22),y=r(15),g=r(126),w=(r(338),r(150));var k=m.a.memo((function(){return m.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})}));var x=m.a.memo((function(){return m.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u6587\u4ef6\u8fc7\u5927\uff0c\u4e0d\u80fd\u76f4\u63a5\u67e5\u770b",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})})),j=r(1032),O=r(1173),_=r.n(O),E=r(84);var C=m.a.memo((function(e){var t=e.code,r=E.a.getHighlightedCodeLines(t);return m.a.createElement("table",{className:"".concat(_.a.CodeReader," hljs")},m.a.createElement("tbody",null,r.map((function(e,t){return m.a.createElement("tr",{key:t,className:_.a.line},m.a.createElement("td",null,m.a.createElement("div",{className:_.a.lineNumber},t+1)),m.a.createElement("td",null,m.a.createElement("pre",{className:_.a.code},m.a.createElement("code",{dangerouslySetInnerHTML:{__html:e}}))))}))))})),N=r(1174),B=r.n(N),R=r(1072);var L=m.a.memo((function(e){var t=e.markdown;return m.a.createElement("div",{className:B.a.MarkdownReader},m.a.createElement(R.a,{markdown:t}))}));var S=Object(g.f)(m.a.memo((function(e){var t=[".json"],r=[".md",".markdown",".mdwn"],n=e.isBinary,a=e.isOversize,s=e.fileName,i=e.lastCommit,o=e.loading,c=e.onRawFileButtonClick,u=e.fileContent,l=e.match.params,h=l.username,g=l.repository,w=l.branch,O=l.path,_=Object(j.extname)(s).toLowerCase();return m.a.createElement("div",{className:b.a.FileReader},m.a.createElement(p.a,{spinning:o},m.a.createElement("div",{className:b.a.commitInfoBar},m.a.createElement(d.a,{lastCommit:i})),m.a.createElement("div",{className:b.a.contentWrapper},m.a.createElement("div",{className:b.a.fileInfoBar},m.a.createElement("div",{className:b.a.fileName},s),m.a.createElement(f.a.Group,{className:b.a.buttonWrapper},m.a.createElement(f.a,null,m.a.createElement(y.b,{to:v.Function.generateRepositoryCommitsRoute({username:h,repository:g,branch:w,path:O})},"\u5386\u53f2")),m.a.createElement(f.a,{onClick:c},"\u4e0b\u8f7d"))),m.a.createElement("div",{className:b.a.readerWrapper},n?m.a.createElement(k,null):a?m.a.createElement(x,null):t.includes(_)?m.a.createElement(C,{code:u}):r.includes(_)?m.a.createElement(L,{markdown:u}):m.a.createElement(C,{code:u})))))}))),F=r(134),T=r(28),I=v.CONFIG.PAGE_ID_TO_ROUTE,A=v.CONFIG.PAGE_ID,M=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).loadLastCommit=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,i,o,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.match.params,s=r.username,i=r.repository,o=r.path,c=r.branch,e.next=3,T.h.lastBranchCommit({username:s},{name:i},c,o);case 3:null!==(u=e.sent)&&n.setState({lastCommit:u},(function(){return t()}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),n.loadFileInfo=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,i,o,c,u,l,m,p,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.lastCommit.commitHash,s=n.props,i=s.match.params,o=i.username,c=i.repository,u=i.path,l=s.history,e.next=4,T.h.fileInfo({username:o},{name:c},u,r);case 4:if(null===(m=e.sent)){e.next=12;break}if(p=m.exists,f=m.size,h=m.isBinary,p){e.next=11;break}return e.abrupt("return",l.replace(I[A.NOT_FOUND]));case 11:!h&&f>1048576?n.setState({isOversize:!0,isBinary:h},(function(){return t()})):n.setState({isOversize:!1,isBinary:h},(function(){return t()}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),n.loadFileContent=Object(s.a)(a.a.mark((function e(){var t,r,s,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,r=t.username,s=t.repository,i=t.path,o=n.state.lastCommit.commitHash,e.next=4,T.h.rawFile({username:r},{name:s},i,o);case 4:if(null===(c=e.sent)){e.next=12;break}return e.t0=n,e.next=9,E.c.transformBlobToString(c);case 9:e.t1=e.sent,e.t2={fileContent:e.t1},e.t0.setState.call(e.t0,e.t2);case 12:case"end":return e.stop()}}),e)}))),n.onRawFileButtonClick=Object(s.a)(a.a.mark((function e(){var t,r,s,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,r=t.username,s=t.repository,i=t.path,o=n.state.lastCommit.commitHash,e.next=4,T.h.rawFile({username:r},{name:s},i,o);case 4:null!==(c=e.sent)&&n.startDownload(c);case 6:case"end":return e.stop()}}),e)}))),n.startDownload=function(e){var t=n.props.match.params.path,r=URL.createObjectURL(e);E.c.startDownload(r,Object(j.basename)(t)),URL.revokeObjectURL(r)},n.getFileNameFromPath=function(e){var t=e.split("/");return t[t.length-1]},n.state={isBinary:!1,isOversize:!1,lastCommit:new F.b("","","",0,"",""),loading:!0,fileContent:""},n}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadLastCommit();case 3:return e.next=5,this.loadFileInfo();case 5:if(t=this.state,r=t.isBinary,n=t.isOversize,r||n){e.next=9;break}return e.next=9,this.loadFileContent();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.location.pathname,i=t.location.pathname,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,r=t.isBinary,n=t.isOversize,a=t.lastCommit,s=t.loading,i=t.fileContent,o=this.getFileNameFromPath(e);return m.a.createElement(S,{fileContent:i,isBinary:r,isOversize:n,lastCommit:a,fileName:o,loading:s,onRawFileButtonClick:this.onRawFileButtonClick})}}]),r}(l.PureComponent),U=Object(g.f)(M)}}]);
//# sourceMappingURL=22.f4e85fc8.chunk.js.map