(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[21],{1001:function(u,o,e){"use strict";e.d(o,"a",function(){return c});var s=e(0),t=e.n(s),C=e(998),n=e.n(C);function g(h){const{children:f}=h;return t.a.createElement("div",{className:n.a.InputTip},f)}var c=t.a.memo(g)},1010:function(u,o,e){"use strict";o.a=e.p+"static/media/developing_code.ac8fbd80.svg"},1032:function(u,o,e){"use strict";var s=e(3),t=e(0),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},n=C,g=e(9),c=function(V,D){return t.createElement(g.a,Object(s.a)(Object(s.a)({},V),{},{ref:D,icon:n}))};c.displayName="LockOutlined";var h=o.a=t.forwardRef(c)},1033:function(u,o,e){"use strict";var s=e(3),t=e(0),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},n=C,g=e(9),c=function(V,D){return t.createElement(g.a,Object(s.a)(Object(s.a)({},V),{},{ref:D,icon:n}))};c.displayName="BarcodeOutlined";var h=o.a=t.forwardRef(c)},1058:function(u,o,e){u.exports={ChangePassword:"Style_ChangePassword__3LmM_",loginTip:"Style_loginTip__2SPZg",form:"Style_form__2Tl8h",inputWrapper:"Style_inputWrapper__3YQNB",logo:"Style_logo__2tCeZ",button:"Style_button__3SEXr"}},1418:function(u,o,e){"use strict";e.r(o),e.d(o,"default",function(){return j});var s=e(0),t=e.n(s),C=e(1058),n=e.n(C),g=e(1010),c=e(17),h=e(993),f=e(962),V=e(103),D=e(979),T=e(1032),F=e(1033),x=e(1001),E=e(151),P=e(1);function N(y){const{username:B,password:a,repeatPassword:r,verificationCode:i,getVerificationCodeButtonText:l,onPasswordChange:d,onUsernameChange:m,onRepeatPasswordChange:v,onVerificationCodeChange:O,onSubmit:A,onGetVerificationCodeButtonClick:H,getVerificationCodeButtonDisabled:G,loading:S}=y;return t.a.createElement("main",{className:n.a.ChangePassword},t.a.createElement("form",{action:"#",className:n.a.form,onSubmit:A},t.a.createElement("img",{className:n.a.logo,src:g.a,alt:"web_developer_logo"}),t.a.createElement("div",{className:n.a.loginTip},"\u4E0D\u9700\u8981\u4FEE\u6539\u5BC6\u7801\uFF1F",t.a.createElement(c.b,{to:P.d[P.b.LOGIN]},"\u70B9\u6B64\u767B\u5F55")),t.a.createElement("div",{className:n.a.inputWrapper},t.a.createElement(h.a,{required:!0},"\u7528\u6237\u540D"),t.a.createElement(f.a,{type:"text",size:"large",autoFocus:!0,value:B,onChange:m,prefix:t.a.createElement(D.a,null),disabled:S})),t.a.createElement("div",{className:n.a.inputWrapper},t.a.createElement(h.a,{required:!0},"\u65B0\u5BC6\u7801"),t.a.createElement(f.a,{type:"password",size:"large",value:a,onChange:d,prefix:t.a.createElement(T.a,null),disabled:S}),t.a.createElement(x.a,null,"\u4E3A\u4E86\u60A8\u7684\u8D26\u6237\u5B89\u5168\uFF0C\u5BC6\u7801\u8981\u6C42 ",E.c.Account.PASSWORD)),t.a.createElement("div",{className:n.a.inputWrapper},t.a.createElement(h.a,{required:!0},"\u91CD\u590D\u65B0\u5BC6\u7801"),t.a.createElement(f.a,{type:"password",size:"large",value:r,onChange:v,prefix:t.a.createElement(T.a,null),disabled:S})),t.a.createElement("div",{className:n.a.inputWrapper},t.a.createElement(h.a,{required:!0},"\u90AE\u7BB1\u9A8C\u8BC1\u7801"),t.a.createElement(f.a,{type:"text",size:"large",value:i,onChange:O,prefix:t.a.createElement(F.a,null),disabled:S,addonAfter:t.a.createElement(V.a,{type:"link",onClick:H,disabled:G||S},l)})),t.a.createElement(V.a,{htmlType:"submit",className:n.a.button,size:"large",type:"primary",block:!0,disabled:S,loading:S},"\u4FEE\u6539\u5BC6\u7801")))}var z=t.a.memo(N),I=e(27),p=e(349),M=e(134),b=e(482),R=e(40),w=e(47),L=(y,B,a)=>new Promise((r,i)=>{var l=v=>{try{m(a.next(v))}catch(O){i(O)}},d=v=>{try{m(a.throw(v))}catch(O){i(O)}},m=v=>v.done?r(v.value):Promise.resolve(v.value).then(l,d);m((a=a.apply(y,B)).next())});class U extends s.PureComponent{constructor(B){super(B);this.setTitle=()=>{document.title=`\u4FEE\u6539\u5BC6\u7801 - ${P.a}`},this.onUsernameChange=a=>{this.setState({username:a.target.value})},this.onPasswordChange=a=>{this.setState({password:a.target.value})},this.onRepeatPasswordChange=a=>{this.setState({repeatPassword:a.target.value})},this.onVerificationCodeChange=a=>{this.setState({verificationCode:a.target.value})},this.onGetVerificationCodeButtonClick=()=>L(this,null,function*(){const a=30;let r=0;const{getVerificationCodeButtonText:i}=this.state,{username:l}=this.state;if(!E.b.Account.username(l))p.a.warn({message:E.a.Account.USERNAME});else{this.setState({getVerificationCodeButtonDisabled:!0});const d=setInterval(()=>{r++,this.setState({getVerificationCodeButtonText:`${a-r} \u79D2\u540E\u518D\u6B21\u83B7\u53D6`})},1e3),m=setTimeout(()=>{clearInterval(d),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:i})},a*1e3);(yield I.a.sendVerificationCodeByUsername({username:l}))!==null?p.a.success({message:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F",description:`\u8BF7\u5230\u7528\u6237\u540D ${l} \u4F7F\u7528\u7684\u90AE\u7BB1\u4E2D\u67E5\u770B`}):(clearInterval(d),clearTimeout(m),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:i}))}}),this.onSubmit=a=>L(this,null,function*(){a.preventDefault();const{username:r,password:i,repeatPassword:l,verificationCode:d}=this.state;if(!E.b.Account.username(r))p.a.warn({message:E.a.Account.USERNAME});else if(!E.b.Account.password(i))p.a.warn({message:E.a.Account.PASSWORD});else if(i!==l)p.a.warn({message:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"});else if(!E.b.Account.verificationCode(d))p.a.warn({message:E.a.Account.VERIFICATION_CODE});else{this.setState({loading:!0});const m=M.a.calculateHash(r,i);if((yield I.a.changePassword({username:r,hash:m},d))!==null){p.a.success({message:"\u4FEE\u6539\u5BC6\u7801\u6210\u529F",description:"\u8BF7\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u5F55"});const{setLoggedOut:O,history:A}=this.props;return yield O(),A.push(P.d[P.b.LOGIN])}this.setState({loading:!1})}}),this.state={username:"",password:"",repeatPassword:"",verificationCode:"",getVerificationCodeButtonText:"\u83B7\u53D6\u9A8C\u8BC1\u7801",getVerificationCodeButtonDisabled:!1,loading:!1}}componentDidMount(){this.setTitle()}render(){const{username:B,password:a,repeatPassword:r,verificationCode:i,getVerificationCodeButtonText:l,loading:d,getVerificationCodeButtonDisabled:m}=this.state;return t.a.createElement(z,{username:B,password:a,repeatPassword:r,verificationCode:i,onUsernameChange:this.onUsernameChange,onPasswordChange:this.onPasswordChange,onRepeatPasswordChange:this.onRepeatPasswordChange,onVerificationCodeChange:this.onVerificationCodeChange,onSubmit:this.onSubmit,getVerificationCodeButtonText:l,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,loading:d,getVerificationCodeButtonDisabled:m})}}const W={setLoggedOut:b.Action.setLoggedOutAction};var j=Object(R.b)(null,W)(Object(w.j)(U))},991:function(u,o,e){"use strict";var s=e(0),t=e.n(s),C=e(992),n=e.n(C);function g(c){const{children:h,required:f}=c;return t.a.createElement("div",{className:n.a.InputLabel},h,t.a.createElement("span",{className:n.a.requiredSign},f?" *":""))}o.a=t.a.memo(g)},992:function(u,o,e){u.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},993:function(u,o,e){"use strict";var s=e(991);e.d(o,"a",function(){return s.a})},998:function(u,o,e){u.exports={InputTip:"Style_InputTip__KsPY_"}}}]);

//# sourceMappingURL=21.7e6dbcff.chunk.js.map