"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[9376],{89376:function(P,y,a){a.r(y),a.d(y,{default:function(){return $}});var t=a(89526),p={Tags:"Style_Tags__ESxOX",tagsWrapper:"Style_tagsWrapper__u6fXq",tagCardWrapper:"Style_tagCardWrapper__pnIs7",showMoreButtonWrapper:"Style_showMoreButtonWrapper__tiwTY"},E=a(34405),C=a(5892),T=a(37109),h=a(30592),d=a(1413),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M483.2 790.3L861.4 412c1.7-1.7 2.5-4 2.3-6.3l-25.5-301.4c-.7-7.8-6.8-13.9-14.6-14.6L522.2 64.3c-2.3-.2-4.7.6-6.3 2.3L137.7 444.8a8.03 8.03 0 000 11.3l334.2 334.2c3.1 3.2 8.2 3.2 11.3 0zm62.6-651.7l224.6 19 19 224.6L477.5 694 233.9 450.5l311.9-311.9zm60.16 186.23a48 48 0 1067.88-67.89 48 48 0 10-67.88 67.89zM889.7 539.8l-39.6-39.5a8.03 8.03 0 00-11.3 0l-362 361.3-237.6-237a8.03 8.03 0 00-11.3 0l-39.6 39.5a8.03 8.03 0 000 11.3l243.2 242.8 39.6 39.5c3.1 3.1 8.2 3.1 11.3 0l407.3-406.6c3.1-3.1 3.1-8.2 0-11.3z"}}]},name:"tags",theme:"outlined"},S=N,v=a(36593),O=function(n,e){return t.createElement(v.Z,(0,d.Z)((0,d.Z)({},n),{},{ref:e,icon:S}))};O.displayName="TagsOutlined";var A=t.forwardRef(O),s={TagCard:"Style_TagCard__1P41b",content:"Style_content__DS8EK",top:"Style_top__0JOeR",bottom:"Style_bottom__XxLYl",showBodyButtonWrapper:"Style_showBodyButtonWrapper__R-Mss",subjectWrapper:"Style_subjectWrapper__tNFMQ",annotationBodyWrapper:"Style_annotationBodyWrapper__MRvdD",commitHashWrapper:"Style_commitHashWrapper__rgvsu",iconWrapper:"Style_iconWrapper__0gwKI"},x=a(43546),B=a(14006),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M112 476h72v72h-72zm182 0h72v72h-72zm364 0h72v72h-72zm182 0h72v72h-72zm-364 0h72v72h-72z"}}]},name:"small-dash",theme:"outlined"},L=D,M=function(n,e){return t.createElement(v.Z,(0,d.Z)((0,d.Z)({},n),{},{ref:e,icon:L}))};M.displayName="SmallDashOutlined";var z=t.forwardRef(M),R=a(30153),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z"}}]},name:"node-index",theme:"outlined"},F=w,W=function(n,e){return t.createElement(v.Z,(0,d.Z)((0,d.Z)({},n),{},{ref:e,icon:F}))};W.displayName="NodeIndexOutlined";var I=t.forwardRef(W),j=a(57428),k=a(18440),Z=a(65092);function G(o){const{showBody:n,tag:{name:e,annotation:{subject:m,body:l},lastCommit:{commitHash:u,timestamp:r}},match:{params:{username:i,repositoryName:c}},onShowBodyButtonClick:f}=o;return t.createElement("div",{className:s.TagCard},t.createElement(E.Z,{title:e},t.createElement("div",{className:s.content},t.createElement("div",{className:s.top},t.createElement("div",{className:s.subjectWrapper},m),l.length>0?t.createElement("div",{className:s.showBodyButtonWrapper},t.createElement(h.Z,{size:"small",onClick:f},t.createElement(z,null))):null),n?t.createElement("div",{className:s.annotationBodyWrapper},t.createElement("pre",{className:s.annotationBody},l)):null,t.createElement("div",{className:s.bottom},t.createElement(x.Z,{title:B.Ej.parseTimestampToDate(r)},t.createElement("span",{className:s.timeWrapper},t.createElement("span",{className:s.iconWrapper},t.createElement(R.Z,null)),B.Ej.parseTimestampToDifference(r))),t.createElement("span",{className:s.commitHashWrapper},t.createElement(j.Z,{to:k.Function.generateRepositoryCommitRoute({username:i,repositoryName:c,commitHash:u})},t.createElement("span",{className:s.iconWrapper},t.createElement(I,null)),u.slice(0,7)))))))}var U=t.memo((0,Z.EN)(G));class H extends t.PureComponent{constructor(n){super(n);this.onShowBodyButtonClick=()=>{const{showBody:e}=this.state;this.setState({showBody:!e})},this.state={showBody:!1}}render(){const{tag:n}=this.props,{showBody:e}=this.state;return t.createElement(U,{tag:n,showBody:e,onShowBodyButtonClick:this.onShowBodyButtonClick})}}var V=H;function X(o){const{tags:n,loading:e,onLoadMoreButtonClick:m}=o;return t.createElement("div",{className:p.Tags},t.createElement(E.Z,{title:t.createElement("span",null,t.createElement(A,null)," \u6807\u7B7E\uFF08Tags\uFF09")},t.createElement(C.Z,{spinning:e},n.length===0?t.createElement(T.Z,{description:"\u5F53\u524D\u4ED3\u5E93\u6CA1\u6709\u6807\u7B7E"}):t.createElement(t.Fragment,null,t.createElement("div",{className:p.tagsWrapper},n.map(l=>t.createElement("div",{className:p.tagCardWrapper,key:l.name},t.createElement(V,{tag:l})))),t.createElement("div",{className:p.showMoreButtonWrapper},t.createElement(h.Z,{type:"primary",loading:e,disabled:e,onClick:m},"\u52A0\u8F7D\u66F4\u591A"))))))}var K=t.memo(X),Y=a(85663),b=a(62371),J=a(24315),g=(o,n,e)=>new Promise((m,l)=>{var u=c=>{try{i(e.next(c))}catch(f){l(f)}},r=c=>{try{i(e.throw(c))}catch(f){l(f)}},i=c=>c.done?m(c.value):Promise.resolve(c.value).then(u,r);i((e=e.apply(o,n)).next())});class Q extends t.PureComponent{constructor(n){super(n);this.TAG_AMOUNT_PER_PAGE=10,this.setStatePromise=(0,Y.promisify)(this.setState),this.loadTags=(e,m)=>g(this,null,function*(){const{match:{params:{username:l,repositoryName:u}}}=this.props;yield this.setStatePromise({loading:!0});const r=yield b.CB.tags({username:l,name:u},e,m);if(r!==null){r.tags.length<this.TAG_AMOUNT_PER_PAGE&&(yield this.setStatePromise({allTagsLoaded:!0}));const{tags:i}=this.state;yield this.setStatePromise({tags:[...i,...r.tags]})}yield this.setStatePromise({loading:!1})}),this.loadMoreTags=()=>g(this,null,function*(){const{nextLoadOffset:e}=this.state;yield Promise.all([this.loadTags(e,this.TAG_AMOUNT_PER_PAGE),this.setStatePromise({nextLoadOffset:e+this.TAG_AMOUNT_PER_PAGE})])}),this.onLoadMoreButtonClick=()=>g(this,null,function*(){const{allTagsLoaded:e}=this.state;e?J.Z.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u6807\u7B7E"}):yield this.loadMoreTags()}),this.state={tags:[],loading:!1,nextLoadOffset:0,allTagsLoaded:!1}}componentDidMount(){return g(this,null,function*(){yield this.loadMoreTags()})}componentDidUpdate(n,e,m){return g(this,null,function*(){const{match:{params:{username:l,repositoryName:u}}}=this.props,{match:{params:{username:r,repositoryName:i}}}=this.props;(l!==r||u!==i)&&(yield this.setStatePromise({nextLoadOffset:0}),yield this.componentDidMount())})}render(){const{tags:n,loading:e}=this.state;return t.createElement(K,{tags:n,loading:e,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}}var $=(0,Z.EN)(Q)},30153:function(P,y,a){a.d(y,{Z:function(){return d}});var t=a(1413),p=a(89526),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},C=E,T=a(36593),h=function(S,v){return p.createElement(T.Z,(0,t.Z)((0,t.Z)({},S),{},{ref:v,icon:C}))};h.displayName="ClockCircleOutlined";var d=p.forwardRef(h)}}]);

//# sourceMappingURL=9376.c1c9ed8c.chunk.js.map