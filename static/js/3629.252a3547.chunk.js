"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[3629],{12030:function(p,a,t){t.d(a,{Z:function(){return h}});var e=t(89526),s={InputLabel:"Style_InputLabel__3UwFN",requiredSign:"Style_requiredSign__4HKr2"};function r(m){const{children:y,required:S}=m;return e.createElement("div",{className:s.InputLabel},y,e.createElement("span",{className:s.requiredSign},S?" *":""))}var h=e.memo(r)},18527:function(p,a,t){t.d(a,{Z:function(){return e.Z}});var e=t(12030)},95715:function(p,a,t){t.d(a,{Z:function(){return h}});var e=t(89526),s={SettingsTitle:"Style_SettingsTitle__2JkD4"};function r(m){const{children:y}=m;return e.createElement("h2",{className:s.SettingsTitle},y)}var h=e.memo(r)},73629:function(p,a,t){t.r(a),t.d(a,{default:function(){return q}});var e=t(89526),s={Profile:"Style_Profile__HSG+T",item:"Style_item__J-+7F",form:"Style_form__nMDaL",inputWrapper:"Style_inputWrapper__WKxNQ",saveButtonWrapper:"Style_saveButtonWrapper__EWlah",emailForm:"Style_emailForm__qUwG8"},r=t(95715),h=t(18527),m=t(53546),y=t(57428),S={Nickname:"Style_Nickname__Qq+Sa",form:"Style_form__j1yU3",inputWrapper:"Style_inputWrapper__HzbKy",saveButtonWrapper:"Style_saveButtonWrapper__mclkS"},P=t(12030),E=t(43546),I=t(32014),A=t(30592);const Z="1~20 \u4F4D";function R(f){const{nickname:o,loading:n,onNicknameInputChange:i,onNicknameSubmit:u}=f;return e.createElement("div",{className:S.Nickname},e.createElement(P.Z,null,"\u6635\u79F0"),e.createElement("div",{className:S.form},e.createElement("div",{className:S.inputWrapper},e.createElement(E.Z,{title:Z,trigger:"focus"},e.createElement(I.Z,{onChange:i,value:o,disabled:n}))),e.createElement("div",{className:S.saveButtonWrapper},e.createElement(A.Z,{type:"primary",onClick:u,loading:n,disabled:n},"\u4FDD\u5B58"))))}var k=e.memo(R),F=t(85663),W=t(41379),V=t(57333),O=t(25249),g=t(24315),T=(f,o,n)=>new Promise((i,u)=>{var c=l=>{try{d(n.next(l))}catch(C){u(C)}},v=l=>{try{d(n.throw(l))}catch(C){u(C)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(c,v);d((n=n.apply(f,o)).next())});class G extends e.PureComponent{constructor(o){super(o);this.setStatePromise=(0,F.promisify)(this.setState),this.onNicknameInputChange=n=>T(this,null,function*(){yield this.setStatePromise({nickname:n.target.value})}),this.onNicknameSubmit=()=>T(this,null,function*(){const{nickname:n}=this.state;W.nickname(n)?(yield this.setStatePromise({loading:!0}),(yield O.N.setNickname(n))!==null&&g.Z.success({message:"\u6635\u79F0\u4FEE\u6539\u6210\u529F"}),yield this.setStatePromise({loading:!1})):g.Z.warn({message:V.O,description:Z})}),this.state={nickname:"",loading:!1}}componentDidUpdate(o,n,i){return T(this,null,function*(){const{defaultNickname:u}=this.props,{defaultNickname:c}=o;u!==c&&u!==void 0&&(yield this.setStatePromise({nickname:u}))})}render(){const{nickname:o,loading:n}=this.state,{loadingDefaultNickname:i}=this.props;return e.createElement(k,{nickname:o,loading:n||!!i,onNicknameInputChange:this.onNicknameInputChange,onNicknameSubmit:this.onNicknameSubmit})}}var L=G,B={Email:"Style_Email__zgetf",form:"Style_form__xxok4",inputWrapper:"Style_inputWrapper__VCOmS",emailInput:"Style_emailInput__OOwtd",verificationCodeInput:"Style_verificationCodeInput__0I9h9",getVerificationCodeButton:"Style_getVerificationCodeButton__-g85L",saveButtonWrapper:"Style_saveButtonWrapper__XLThB"};function U(f){const{email:o,loading:n,onEmailInputChange:i,onEmailSubmit:u,disableGetVerificationCodeButton:c,getVerificationCodeButtonText:v,onGetVerificationCodeButtonClick:d,onVerificationCodeInputChange:l,verificationCode:C}=f;return e.createElement("div",{className:B.Email},e.createElement(P.Z,null,"\u90AE\u7BB1"),e.createElement("div",{className:B.form},e.createElement("div",{className:B.inputWrapper},e.createElement(I.Z,{type:"email",onChange:i,value:o,disabled:n,className:B.emailInput}),e.createElement(I.Z,{type:"text",onChange:l,value:C,placeholder:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",addonAfter:e.createElement(A.Z,{type:"link",size:"small",disabled:c||n,className:B.getVerificationCodeButton,onClick:d},v),className:B.verificationCodeInput})),e.createElement("div",{className:B.saveButtonWrapper},e.createElement(A.Z,{type:"primary",onClick:u,loading:n,disabled:n},"\u4FDD\u5B58"))))}var x=e.memo(U),K=t(99988),$=t(10330),z=t(43245),N=(f,o,n)=>new Promise((i,u)=>{var c=l=>{try{d(n.next(l))}catch(C){u(C)}},v=l=>{try{d(n.throw(l))}catch(C){u(C)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(c,v);d((n=n.apply(f,o)).next())});const{Profile:H}=K;class Q extends e.PureComponent{constructor(o){super(o);this.setStatePromise=(0,F.promisify)(this.setState),this.onEmailInputChange=n=>N(this,null,function*(){yield this.setStatePromise({email:n.target.value})}),this.onVerificationCodeInputChange=n=>N(this,null,function*(){yield this.setStatePromise({verificationCode:n.target.value})}),this.onGetVerificationCodeButtonClick=()=>N(this,null,function*(){const n=30,{getVerificationCodeButtonText:i,email:u}=this.state;if(!H.email(u))g.Z.warn({message:V.x});else{yield this.setStatePromise({disableGetVerificationCodeButton:!0});let c=0;const v=setInterval(()=>{c++,this.setState({getVerificationCodeButtonText:`${n-c} \u79D2\u540E\u518D\u83B7\u53D6`})},1e3),d=setTimeout(()=>{clearInterval(v),this.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:i})},n*1e3);(yield O.N.sendSetEmailVerificationCodeToEmail(u))!==null?g.Z.success({message:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F",description:`\u8BF7\u5230 ${u} \u67E5\u770B`}):(clearInterval(v),clearTimeout(d),yield this.setStatePromise({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:i}))}}),this.onEmailSubmit=()=>N(this,null,function*(){const{email:n,verificationCode:i}=this.state;$.verificationCode(i)?W.email(n)?(yield this.setStatePromise({loading:!0}),(yield O.N.setEmail(n,i))!==null&&(g.Z.success({message:"\u90AE\u7BB1\u4FEE\u6539\u6210\u529F"}),yield this.setStatePromise({verificationCode:""})),yield this.setStatePromise({loading:!1})):g.Z.warn({message:V.x}):g.Z.warn({message:z.FF})}),this.state={email:"",verificationCode:"",getVerificationCodeButtonText:"\u83B7\u53D6\u9A8C\u8BC1\u7801",disableGetVerificationCodeButton:!1,loading:!1}}componentDidUpdate(o,n,i){return N(this,null,function*(){const{defaultEmail:u}=this.props,{defaultEmail:c}=o;u!==c&&u!==void 0&&(yield this.setStatePromise({email:u}))})}render(){const{loadingDefaultEmail:o}=this.props,{email:n,loading:i,verificationCode:u,disableGetVerificationCodeButton:c,getVerificationCodeButtonText:v}=this.state;return e.createElement(x,{email:n,loading:i||!!o,disableGetVerificationCodeButton:c,getVerificationCodeButtonText:v,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,onVerificationCodeInputChange:this.onVerificationCodeInputChange,verificationCode:u,onEmailInputChange:this.onEmailInputChange,onEmailSubmit:this.onEmailSubmit})}}var j=Q,D=t(36393);function J(f){const{defaultNickname:o,defaultEmail:n,loading:i}=f;return e.createElement("div",{className:s.Profile},e.createElement(r.Z,null,"\u4E2A\u4EBA\u8D44\u6599"),e.createElement("div",{className:s.item},e.createElement(L,{defaultNickname:o,loadingDefaultNickname:i})),e.createElement("div",{className:s.item},e.createElement(j,{defaultEmail:n,loadingDefaultEmail:i})),e.createElement("div",{className:s.item},e.createElement(h.Z,null,"\u5BC6\u7801"),e.createElement(m.Z,{type:"info",showIcon:!0,message:e.createElement("div",null,"\u524D\u5F80",e.createElement(y.Z,{to:D.yt[D.DV.CHANGE_PASSWORD]},"\u4FEE\u6539\u5BC6\u7801\u9875\u9762"),"\u4FEE\u6539\u5BC6\u7801")})))}var b=e.memo(J),X=t(62371),w=t(65092),Y=t(60269),M=(f,o,n)=>new Promise((i,u)=>{var c=l=>{try{d(n.next(l))}catch(C){u(C)}},v=l=>{try{d(n.throw(l))}catch(C){u(C)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(c,v);d((n=n.apply(f,o)).next())});class _ extends e.PureComponent{constructor(o){super(o);this.setStatePromise=(0,F.promisify)(this.setState),this.loadProfile=()=>M(this,null,function*(){const n=yield X.NZ.get();if(n!==null)yield this.setStatePromise({currentProfile:n});else{const{history:i}=this.props;return i.replace(D.yt[D.DV.NOT_FOUND])}}),this.state={currentProfile:new Y.NZ("","","",""),loading:!1}}componentDidMount(){return M(this,null,function*(){yield this.setStatePromise({loading:!0}),yield this.loadProfile(),yield this.setStatePromise({loading:!1})})}render(){const{currentProfile:{nickname:o,email:n},loading:i}=this.state;return e.createElement(b,{defaultNickname:o,defaultEmail:n,loading:i})}}var q=(0,w.EN)(_)},43245:function(p,a,t){t.d(a,{id:function(){return e},Qj:function(){return s},FF:function(){return r}});const e="\u7528\u6237\u540D\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",s="\u5BC6\u7801\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",r="\u9A8C\u8BC1\u7801\u4E0D\u6B63\u786E"},57333:function(p,a,t){t.d(a,{O:function(){return e},x:function(){return s}});const e="\u6635\u79F0\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",s="\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1"},10330:function(p,a,t){t.r(a),t.d(a,{hash:function(){return S},password:function(){return y},username:function(){return m},verificationCode:function(){return P}});const e=/^\w{1,20}$/,s=/^\S{6,}$/,r=/^[A-z0-9]{64}$/,h=/^\d{6}$/,m=E=>typeof E!="string"?!1:e.test(E),y=E=>typeof E!="string"?!1:s.test(E),S=E=>typeof E!="string"?!1:r.test(E),P=E=>typeof E!="string"?!1:h.test(E)},38818:function(p,a,t){t.r(a),t.d(a,{code:function(){return s}});const e=/^\w+_\w+_\d+$/,s=r=>typeof r!="string"?!1:e.test(r)},62680:function(p,a,t){t.r(a),t.d(a,{name:function(){return s}});const e=/^\S{1,20}$/,s=r=>typeof r!="string"?!1:e.test(r)},41379:function(p,a,t){t.r(a),t.d(a,{email:function(){return h},nickname:function(){return r}});const e=/^\S{1,20}$/,s=/^([A-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,8})$/,r=m=>typeof m!="string"?!1:e.test(m),h=m=>typeof m!="string"?!1:s.test(m)},99988:function(p,a,t){t.r(a),t.d(a,{Account:function(){return e},Group:function(){return s},Profile:function(){return r},Repository:function(){return h},Collaborator:function(){return m}});var e=t(10330),s=t(62680),r=t(41379),h=t(50526),m=t(38818)}}]);

//# sourceMappingURL=3629.252a3547.chunk.js.map