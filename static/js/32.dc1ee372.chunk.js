(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[32],{1073:function(h,S,a){h.exports={Issues:"Style_Issues__wxh9c",list:"Style_list__1i8bQ",header:"Style_header__2KaVh",statusFilter:"Style_statusFilter__3zE2w",tag:"Style_tag__3Xw8C",pageButtonWrapper:"Style_pageButtonWrapper__P17fr"}},1074:function(h,S,a){h.exports={IssueList:"Style_IssueList__3_LLo",emptyWrapper:"Style_emptyWrapper__3X6HT"}},1075:function(h,S,a){h.exports={Issue:"Style_Issue__3wQKl",titleWrapper:"Style_titleWrapper__3c3D9",iconWrapper:"Style_iconWrapper__3QVF5",info:"Style_info__2PXRc"}},1405:function(h,S,a){"use strict";a.r(S),a.d(S,"default",function(){return H});var g=a(0),e=a.n(g),L=a(1073),d=a.n(L),x=a(953),I=a(970),y=a(102),P=a(969),D=a(17),C=a(47),A=a(49),r=a(22),F=a(272),O=a(176),B=a(987),G=a(504),Z=a(1074),R=a.n(Z),T=a(1075),v=a.n(T),b=a(68),k=a(276);function z(l){const{issue:{status:t,no:s,title:n,repositoryUsername:o,repositoryName:u,username:i,creationTime:c}}=l;return e.a.createElement("div",{className:v.a.Issue},e.a.createElement("div",{className:v.a.titleWrapper},e.a.createElement("div",{className:v.a.iconWrapper,style:{color:j(t)}},V(t)),e.a.createElement(k.a,{to:A.Function.generateRepositoryIssueRoute({username:o,repositoryName:u,no:s.toString()})},e.a.createElement("div",{className:v.a.title},n))),e.a.createElement("div",{className:v.a.info},"#",s," \u7531 ",e.a.createElement("b",null,i)," \u4E8E ",b.b.parseTimestampToDifference(c)," \u521B\u5EFA"))}function V(l){switch(l){case r.a.CLOSED:return e.a.createElement(B.a,null);case r.a.OPEN:return e.a.createElement(O.a,null)}}function j(l){switch(l){case r.a.CLOSED:return"red";case r.a.OPEN:return"green"}}var Q=e.a.memo(z),U=a(180);function X(l){const{issues:t}=l;return e.a.createElement("div",{className:R.a.IssueList},t.length>0?t.map(s=>e.a.createElement(Q,{issue:s,key:s.id})):e.a.createElement("div",{className:R.a.emptyWrapper},e.a.createElement(U.a,{description:"\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684 Issue"})))}var J=e.a.memo(X);function K(l){const{match:{params:{username:t,repositoryName:s}},loading:n,openAmount:o,closedAmount:u,currentStatus:i,onStatusButtonClick:c,currentPageNumber:E,onPrevButtonClick:N,onNextButtonClick:Y,noNextPage:$,issues:w}=l;return e.a.createElement("div",{className:d.a.Issues},e.a.createElement(x.a,{spinning:n},e.a.createElement("div",{className:d.a.list},e.a.createElement("div",{className:d.a.header},e.a.createElement("div",{className:d.a.statusFilter},e.a.createElement(I.b,{size:-1},e.a.createElement(y.a,{size:"small",type:"link",style:{color:"unset",fontWeight:i===void 0?"bolder":"inherit"},onClick:c(void 0)},e.a.createElement(F.a,null)," \u6240\u6709",e.a.createElement(P.a,{className:d.a.tag},o+u)),e.a.createElement(y.a,{size:"small",type:"link",style:{color:"green",fontWeight:i===r.a.OPEN?"bolder":"inherit"},onClick:c(r.a.OPEN)},e.a.createElement(O.a,null)," \u5F00\u542F\u7684",e.a.createElement(P.a,{className:d.a.tag},o)),e.a.createElement(y.a,{size:"small",type:"link",style:{color:"red",fontWeight:i===r.a.CLOSED?"bolder":"inherit"},onClick:c(r.a.CLOSED)},e.a.createElement(B.a,null)," \u5DF2\u5173\u95ED",e.a.createElement(P.a,{className:d.a.tag},u)))),e.a.createElement(D.b,{to:A.Function.generateRepositoryCreateIssueRoute({username:t,repositoryName:s})},e.a.createElement(y.a,{type:"primary"},e.a.createElement(G.a,null),"\u521B\u5EFA Issue"))),e.a.createElement("div",{className:d.a.issueListWrapper},e.a.createElement(J,{issues:w})),e.a.createElement("div",{className:d.a.pageButtonWrapper},e.a.createElement(I.b,{size:-1},e.a.createElement(y.a,{disabled:E===0,onClick:N},"\u4E0A\u4E00\u9875"),e.a.createElement(y.a,{onClick:Y,disabled:$},"\u4E0B\u4E00\u9875"))))))}var M=e.a.memo(Object(C.j)(K)),f=a(27),p=(l,t,s)=>new Promise((n,o)=>{var u=E=>{try{c(s.next(E))}catch(N){o(N)}},i=E=>{try{c(s.throw(E))}catch(N){o(N)}},c=E=>E.done?n(E.value):Promise.resolve(E.value).then(u,i);c((s=s.apply(l,t)).next())});const m=class extends g.PureComponent{constructor(l){super(l);this.loadOpenAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:s}}}=this.props,n=yield f.e.getAmountByRepository({username:t,name:s},r.a.OPEN);if(n!==null){const{amount:o}=n;this.setState({openAmount:o})}}),this.loadClosedAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:s}}}=this.props,n=yield f.e.getAmountByRepository({username:t,name:s},r.a.CLOSED);if(n!==null){const{amount:o}=n;this.setState({closedAmount:o})}}),this.onStatusButtonClick=t=>()=>p(this,null,function*(){switch(this.setState({currentStatus:t,loading:!0,currentPageNumber:0}),t){case r.a.OPEN:{yield this.loadOpenAmount();break}case r.a.CLOSED:{yield this.loadClosedAmount();break}default:{yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount()]);break}}yield this.loadIssues(t,0,m.SIZE_PER_PAGE),this.setState({loading:!1})}),this.loadIssues=(t,s,n)=>p(this,null,function*(){const{match:{params:{username:o,repositoryName:u}}}=this.props,i=yield f.e.getByRepository({username:o,name:u},t,s,n);if(i!==null){const{issues:c}=i;this.setState({issues:c})}}),this.onPrevButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:s}=this.state;t>0&&(this.setState({loading:!0}),yield this.loadIssues(s,(t-1)*m.SIZE_PER_PAGE,m.SIZE_PER_PAGE),this.setState({currentPageNumber:t-1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"}))}),this.onNextButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:s}=this.state;this.setState({loading:!0}),yield this.loadIssues(s,(t+1)*m.SIZE_PER_PAGE,m.SIZE_PER_PAGE),this.setState({currentPageNumber:t+1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"})}),this.setNoNextPage=()=>{const{currentStatus:t,currentPageNumber:s,openAmount:n,closedAmount:o}=this.state;switch(t){case r.a.CLOSED:return(s+1)*m.SIZE_PER_PAGE>=o;case r.a.OPEN:return(s+1)*m.SIZE_PER_PAGE>=n;default:return(s+1)*m.SIZE_PER_PAGE>=n+o}},this.state={loading:!1,openAmount:0,closedAmount:0,currentStatus:r.a.OPEN,issues:[],currentPageNumber:0}}componentDidMount(){return p(this,null,function*(){const{currentStatus:l}=this.state;this.setState({loading:!0}),yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadIssues(l,0,m.SIZE_PER_PAGE)]),this.setState({loading:!1})})}componentDidUpdate(l,t,s){return p(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,{match:{params:{username:u,repositoryName:i}}}=l;(n!==u||o!==i)&&(yield this.componentDidMount())})}render(){const{loading:l,closedAmount:t,currentStatus:s,openAmount:n,issues:o,currentPageNumber:u}=this.state;return e.a.createElement(M,{loading:l,closedAmount:t,currentStatus:s,onStatusButtonClick:this.onStatusButtonClick,openAmount:n,issues:o,currentPageNumber:u,noNextPage:this.setNoNextPage(),onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick})}};let W=m;W.SIZE_PER_PAGE=20;var H=Object(C.j)(W)}}]);

//# sourceMappingURL=32.dc1ee372.chunk.js.map