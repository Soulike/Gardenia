(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[27],{1024:function(B,N,e){"use strict";var s=e(992);e.d(N,"a",function(){return s.a})},1118:function(B,N,e){B.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1119:function(B,N,e){},1399:function(B,N,e){"use strict";e.r(N),e.d(N,"default",function(){return Et});var s=e(0),t=e.n(s),k=e(1118),i=e.n(k),F=e(343),T=e(969),M=e(1024),I=e(17),C=e(49),j;(function(d){d.CODE="CODE",d.ISSUES="ISSUES",d.PULL_REQUESTS="PULL_REQUESTS",d.SETTINGS="SETTINGS"})(j||(j={}));var S=j,G=e(1119),V=e.n(G),u=e(970),c=e(102),m=e(173),v=e(68),$=e(981);function X(d){const{onClick:r,forkAmount:n,loading:o}=d;return t.a.createElement(u.b,{className:V.a.ForkButton,size:-1},t.a.createElement(c.a,{onClick:r,disabled:o,loading:o,size:"small"},t.a.createElement($.a,null),"Fork"),t.a.createElement(m.a,{title:n},t.a.createElement(c.a,{disabled:o,size:"small"},v.d.getNumberAbbreviation(n))))}var K=t.a.memo(X),E=e(27),h=e(47),z=e(345),L=(d,r,n)=>new Promise((o,a)=>{var f=l=>{try{p(n.next(l))}catch(y){a(y)}},O=l=>{try{p(n.throw(l))}catch(y){a(y)}},p=l=>l.done?o(l.value):Promise.resolve(l.value).then(f,O);p((n=n.apply(d,r)).next())});class x extends s.PureComponent{constructor(r){super(r);this.loadForkAmount=()=>L(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield E.j.forkAmount({username:n,name:o});if(a!==null){const{amount:f}=a;this.setState({forkAmount:f})}}),this.onClick=()=>L(this,null,function*(){this.setState({loading:!0});const{match:{params:{username:n,repositoryName:o}}}=this.props;(yield E.i.fork({username:n,name:o}))!==null&&z.a.success({message:"fork \u6210\u529F",description:"\u53EF\u524D\u5F80\u4E2A\u4EBA\u4E2D\u5FC3\u4ED3\u5E93\u5217\u8868\u67E5\u770B"}),this.setState({loading:!1})}),this.state={forkAmount:0,loading:!1}}componentDidMount(){return L(this,null,function*(){this.setState({loading:!0}),yield this.loadForkAmount(),this.setState({loading:!1})})}render(){const{forkAmount:r,loading:n}=this.state;return t.a.createElement(K,{onClick:this.onClick,forkAmount:r,loading:n})}}var Z=Object(h.j)(x),Q=e(982),U=e(148),H=e(984),ot=e(978),lt=e(998),rt=e(97),J=(d,r,n)=>new Promise((o,a)=>{var f=l=>{try{p(n.next(l))}catch(y){a(y)}},O=l=>{try{p(n.throw(l))}catch(y){a(y)}},p=l=>l.done?o(l.value):Promise.resolve(l.value).then(f,O);p((n=n.apply(d,r)).next())});class it extends s.PureComponent{constructor(r){super(r);this.setStatePromise=Object(rt.promisify)(this.setState),this.loadHasStared=()=>J(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield E.k.isStaredRepository({username:n,name:o});if(a!==null){const{isStared:f}=a;yield this.setStatePromise({hasStared:f})}}),this.loadStarAmount=()=>J(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield E.k.getRepositoryStarAmount({username:n,name:o});if(a!==null){const{amount:f}=a;yield this.setStatePromise({starAmount:f})}}),this.onClick=()=>J(this,null,function*(){const{hasStared:n,starAmount:o}=this.state,{match:{params:{username:a,repositoryName:f}}}=this.props;yield this.setStatePromise({loading:!0}),n?(yield E.k.remove({username:a,name:f}))!==null&&(yield this.setStatePromise({hasStared:!1,starAmount:o-1})):(yield E.k.add({username:a,name:f}))!==null&&(yield this.setStatePromise({hasStared:!0,starAmount:o+1})),yield this.setStatePromise({loading:!1})}),this.state={hasStared:!1,starAmount:0,loading:!1}}componentDidMount(){return J(this,null,function*(){yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadHasStared(),this.loadStarAmount()]),yield this.setStatePromise({loading:!1})})}componentDidUpdate(r,n,o){return J(this,null,function*(){const{match:{params:{username:a,repositoryName:f}}}=this.props,{match:{params:{username:O,repositoryName:p}}}=r;(a!==O||f!==p)&&(yield this.componentDidMount())})}render(){const{hasStared:r,loading:n,starAmount:o}=this.state;return t.a.createElement(lt.a,{hasStared:r,loading:n,starAmount:o,onClick:this.onClick})}}var ut=Object(h.j)(it),tt=e(41);function ct(d){const{repository:{username:r,name:n,isPublic:o},forkFrom:a,loading:f,onTabChange:O,tabActiveKey:p,showSettings:l,children:y,openPullRequestAmount:w,openIssueAmount:q,isLoggedIn:_}=d;return f?null:t.a.createElement("div",{className:i.a.Repository},t.a.createElement("div",{className:i.a.header},t.a.createElement("div",{className:i.a.basicInfo},t.a.createElement("div",{className:i.a.tagAndRepository},t.a.createElement("div",{className:i.a.tag},t.a.createElement(M.a,{isPublic:o})),t.a.createElement("div",{className:i.a.usernameAndName},t.a.createElement(I.b,{to:C.Function.generatePersonalCenterRoute({username:r})},r)," / ",t.a.createElement(I.b,{to:C.Function.generateRepositoryCodeRoute({username:r,repositoryName:n})},t.a.createElement("b",null,n)))),a===null?null:t.a.createElement("div",{className:i.a.forkFrom},t.a.createElement("div",{className:i.a.text},"fork \u81EA"),t.a.createElement(I.b,{to:C.Function.generatePersonalCenterRoute({username:a.username})},a.username)," / ",t.a.createElement(I.b,{to:C.Function.generateRepositoryCodeRoute({username:a.username,repositoryName:a.name})},t.a.createElement("b",null,a.name)))),t.a.createElement("div",{className:i.a.buttonArea},_?t.a.createElement(t.a.Fragment,null,t.a.createElement("div",{className:i.a.buttonWrapper},t.a.createElement(ut,null)),t.a.createElement("div",{className:i.a.buttonWrapper},t.a.createElement(Z,null))):null)),t.a.createElement(F.a,{defaultActiveKey:S.CODE,type:"card",className:i.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:O,activeKey:p},t.a.createElement(F.a.TabPane,{tab:t.a.createElement(t.a.Fragment,null,t.a.createElement(Q.a,null),"\u4EE3\u7801"),key:S.CODE},t.a.createElement("div",{className:i.a.tabContent},y)),t.a.createElement(F.a.TabPane,{tab:t.a.createElement(t.a.Fragment,null,t.a.createElement(U.a,null),"Issues ",t.a.createElement(T.a,{className:i.a.tag},q)),key:S.ISSUES},t.a.createElement("div",{className:i.a.tabContent},y)),t.a.createElement(F.a.TabPane,{tab:t.a.createElement(t.a.Fragment,null,t.a.createElement(H.a,null),"Pull Requests ",t.a.createElement(T.a,{className:i.a.tag},w)),key:S.PULL_REQUESTS},t.a.createElement("div",{className:i.a.tabContent},y)),l?t.a.createElement(F.a.TabPane,{tab:t.a.createElement(t.a.Fragment,null,t.a.createElement(ot.a,null),"\u8BBE\u7F6E"),key:S.SETTINGS},t.a.createElement("div",{className:i.a.tabContent},y)):null))}const mt=d=>{const{Root:{isLoggedIn:r}}=d;return{isLoggedIn:r}};var dt=t.a.memo(Object(tt.b)(mt)(ct)),ft=e(134),A=e(1),et=e(22),Y=(d,r,n)=>new Promise((o,a)=>{var f=l=>{try{p(n.next(l))}catch(y){a(y)}},O=l=>{try{p(n.throw(l))}catch(y){a(y)}},p=l=>l.done?o(l.value):Promise.resolve(l.value).then(f,O);p((n=n.apply(d,r)).next())});function St(d){const[r,n]=Object(s.useState)(new ft.i("","","",!0)),[o,a]=Object(s.useState)(!1),[f,O]=Object(s.useState)(S.CODE),[p,l]=Object(s.useState)(null),[y,w]=Object(s.useState)(0),[q,_]=Object(s.useState)(0),[yt,vt]=Object(s.useState)(!1),W=Object(h.f)(),{objectType:at,commitHash:nt,username:g,repositoryName:P}=Object(h.h)(),{path:st}=Object(h.i)(),{isLoggedIn:ht}=Object(tt.d)(({Root:b})=>b);Object(s.useEffect)(()=>{(()=>{at!==void 0&&nt===void 0&&W.replace(A.d[A.b.NOT_FOUND])})()},[at,nt,W]),Object(s.useEffect)(()=>{document.title=`${g}/${P} - ${A.a}`},[g,P]),Object(s.useLayoutEffect)(()=>{const b=()=>Y(this,null,function*(){const R=yield E.i.shouldShowOptions({username:g,name:P});if(R!==null){const{showOptions:D}=R;vt(D)}});a(!0),b().finally(()=>a(!1))},[g,P,ht]),Object(s.useLayoutEffect)(()=>{const{REPOSITORY:{REPOSITORY:b,CODE:R,ISSUES:D,ISSUE:gt,CREATE_ISSUE:Pt,PULL_REQUESTS:bt,PULL_REQUEST:Rt,SETTINGS:At,CONFLICT:Ct}}=A.b;switch(st){case A.d[R]:case A.d[b]:{O(S.CODE);break}case A.d[Pt]:case A.d[gt]:case A.d[D]:{O(S.ISSUES);break}case A.d[Rt]:case A.d[bt]:case A.d[Ct]:{O(S.PULL_REQUESTS);break}case A.d[At.SETTINGS]:{O(S.SETTINGS);break}}},[st]),Object(s.useEffect)(()=>{const b=()=>Y(this,null,function*(){const R=yield E.j.repository({username:g},{name:P});if(R!==null)n(R);else return W.replace(A.d[A.b.NOT_FOUND])});a(!0),b().finally(()=>a(!1))},[g,P,W]),Object(s.useEffect)(()=>{const b=()=>Y(this,null,function*(){const R=yield E.j.forkFrom({username:g,name:P});if(R!==null){const{repository:D}=R;l(D)}});a(!0),b().finally(()=>a(!1))},[g,P]),Object(s.useEffect)(()=>{const b=()=>Y(this,null,function*(){const R=yield E.h.getPullRequestAmount({username:g,name:P},et.c.OPEN);if(R!==null){const{amount:D}=R;w(D)}});a(!0),b().finally(()=>a(!1))},[g,P]),Object(s.useEffect)(()=>{const b=()=>Y(this,null,function*(){const R=yield E.e.getAmountByRepository({username:g,name:P},et.a.OPEN);if(R!==null){const{amount:D}=R;_(D)}});a(!0),b().finally(()=>a(!1))},[g,P]);const pt=b=>{switch(b){case S.CODE:return W.push(C.Function.generateRepositoryCodeRoute({username:g,repositoryName:P}));case S.ISSUES:return W.push(C.Function.generateRepositoryIssuesRoute({username:g,repositoryName:P}));case S.PULL_REQUESTS:return W.push(C.Function.generateRepositoryPullRequestsRoute({username:g,repositoryName:P}));case S.SETTINGS:return W.push(C.Function.generateRepositorySettingsRoute({username:g,repositoryName:P}));default:return}},{children:Ot}=d;return t.a.createElement(dt,{showSettings:yt,repository:r,loading:o,onTabChange:pt,tabActiveKey:f,forkFrom:p,openPullRequestAmount:y,openIssueAmount:q},Ot)}var Et=t.a.memo(St)},992:function(B,N,e){"use strict";var s=e(0),t=e.n(s),k=e(969),i=e(995),F=e.n(i),T=Object.defineProperty,M=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,j=(u,c,m)=>c in u?T(u,c,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[c]=m,S=(u,c)=>{for(var m in c||(c={}))I.call(c,m)&&j(u,m,c[m]);if(M)for(var m of M(c))C.call(c,m)&&j(u,m,c[m]);return u},G=(u,c)=>{var m={};for(var v in u)I.call(u,v)&&c.indexOf(v)<0&&(m[v]=u[v]);if(u!=null&&M)for(var v of M(u))c.indexOf(v)<0&&C.call(u,v)&&(m[v]=u[v]);return m};function V(u){const c=u,{isPublic:m}=c,v=G(c,["isPublic"]);return m?t.a.createElement(k.a,S({className:F.a.AccessibilityTag,color:"blue"},v),"\u516C\u5F00"):t.a.createElement(k.a,S({className:F.a.AccessibilityTag,color:"gold"},v),"\u79C1\u4EBA")}N.a=t.a.memo(V)},995:function(B,N,e){B.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},998:function(B,N,e){"use strict";e.d(N,"a",function(){return X});var s=e(0),t=e.n(s),k=e(970),i=e(102),F=e(173),T=e(3),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},I=M,C=e(9),j=function(E,h){return s.createElement(C.a,Object(T.a)(Object(T.a)({},E),{},{ref:h,icon:I}))};j.displayName="StarFilled";var S=s.forwardRef(j),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},V=G,u=function(E,h){return s.createElement(C.a,Object(T.a)(Object(T.a)({},E),{},{ref:h,icon:V}))};u.displayName="StarOutlined";var c=s.forwardRef(u),m=e(68),v=(K,E,h)=>new Promise((z,L)=>{var x=U=>{try{Q(h.next(U))}catch(H){L(H)}},Z=U=>{try{Q(h.throw(U))}catch(H){L(H)}},Q=U=>U.done?z(U.value):Promise.resolve(U.value).then(x,Z);Q((h=h.apply(K,E)).next())});function $(K){const{hasStared:E,starAmount:h,loading:z,onClick:L}=K;return t.a.createElement(k.b,{size:-1},t.a.createElement(i.a,{size:"small",onClick:x=>v(this,null,function*(){x.preventDefault(),typeof L=="function"&&(yield L(x))}),loading:z,disabled:z},E?t.a.createElement(t.a.Fragment,null,t.a.createElement(S,null)," Unstar"):t.a.createElement(t.a.Fragment,null,t.a.createElement(c,null)," Star")),t.a.createElement(F.a,{title:h},t.a.createElement(i.a,{size:"small",onClick:x=>v(this,null,function*(){return x.preventDefault()})},m.d.getNumberAbbreviation(h))))}var X=t.a.memo($)}}]);

//# sourceMappingURL=27.ae6f2743.chunk.js.map