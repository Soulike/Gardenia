(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[24],{1139:function(e,t,a){(function(e){function a(e,t){for(var a=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),a++):a&&(e.splice(n,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}t.resolve=function(){for(var t="",s=!1,r=arguments.length-1;r>=-1&&!s;r--){var i=r>=0?arguments[r]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,s="/"===i.charAt(0))}return(s?"/":"")+(t=a(n(t.split("/"),(function(e){return!!e})),!s).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),i="/"===s(e,-1);return(e=a(n(e.split("/"),(function(e){return!!e})),!r).join("/"))||r||(e="."),e&&i&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,a){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var s=n(e.split("/")),r=n(a.split("/")),i=Math.min(s.length,r.length),o=i,c=0;c<i;c++)if(s[c]!==r[c]){o=c;break}var m=[];for(c=o;c<s.length;c++)m.push("..");return(m=m.concat(r.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,n=-1,s=!0,r=e.length-1;r>=1;--r)if(47===(t=e.charCodeAt(r))){if(!s){n=r;break}}else s=!1;return-1===n?a?"/":".":a&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var a=function(e){"string"!==typeof e&&(e+="");var t,a=0,n=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){a=t+1;break}}else-1===n&&(s=!1,n=t+1);return-1===n?"":e.slice(a,n)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,a=0,n=-1,s=!0,r=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===n&&(s=!1,n=i+1),46===o?-1===t?t=i:1!==r&&(r=1):-1!==t&&(r=-1);else if(!s){a=i+1;break}}return-1===t||-1===n||0===r||1===r&&t===n-1&&t===a+1?"":e.slice(t,n)};var s="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(96))},1160:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(a);if(!t)return!1;var r=t[1];if(!r)return!1;if(n.test(r)||s.test(r))return!0;return!1};var a=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,s=/^[^\s\.]+\.\S{2,}$/},1161:function(e,t,a){e.exports={CommitInfoBar:"Style_CommitInfoBar__AogMa",left:"Style_left__3aqnY",right:"Style_right__XNYqn",avatar:"Style_avatar__2CYzj",name:"Style_name__3WHXI"}},1172:function(e,t,a){"use strict";a(341);var n=a(156),s=a(0),r=a.n(s),i=a(1161),o=a.n(i),c=a(14),m=a(132),l=a(32),h=a(97);var u=Object(m.f)(r.a.memo((function(e){const{lastCommit:{committerName:t,commitHash:a,message:s,timestamp:i},match:{params:{username:m,repository:u}}}=e;return r.a.createElement("div",{className:o.a.CommitInfoBar},r.a.createElement("div",{className:o.a.left},r.a.createElement(c.b,{className:o.a.name,to:l.Function.generatePersonalCenterRoute({username:t})},t),r.a.createElement("div",{className:o.a.message},s)),r.a.createElement("div",{className:o.a.right},r.a.createElement("div",{className:o.a.time},h.b.parseTimestampToDifference(i)),r.a.createElement(n.a,{title:a},r.a.createElement("div",{className:o.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",r.a.createElement(c.b,{to:l.Function.generateRepositoryCommitRoute({username:m,repository:u,commitHash:a})},a.slice(0,7))))))})));a.d(t,"a",(function(){return u}))},1173:function(e,t,a){"use strict";var n=a(0),s=a.n(n),r=a(132),i=a(32),o=a(343),c=a(1160),m=a.n(c),l=a(20),h=a(1139),u=a.n(h),p=a(249);class f extends n.PureComponent{constructor(e){super(e),this.objectURLs=[],this.loadMainBranchName=async()=>new Promise(async e=>{const{match:{params:{username:t,repository:a}}}=this.props,n=await o.a.branches({username:t,name:a});if(null!==n){const{branches:t}=n;for(const{name:a,isDefault:n}of t)if(n){this.setState({mainBranchName:a},()=>e());break}}}),this.processHTML=async e=>{const t=document.implementation.createHTMLDocument().createElement("div");t.innerHTML=e;const a=t.getElementsByTagName("a"),n=t.getElementsByTagName("img"),s=[];for(const r of a){const e=r.getAttribute("href");null!==e&&s.push((async()=>{r.setAttribute("href",await this.getCompleteLink(e))})())}for(const r of n){const e=r.getAttribute("src");null!==e&&s.push((async()=>{const t=await this.getImageURL(e);this.objectURLs.push(t),r.setAttribute("src",t)})())}return await Promise.all(s),t.innerHTML},this.getCompleteLink=async e=>{if(0===e.length||m()(e)||u.a.isAbsolute(e)||"#"===e.charAt(0)||"?"===e.charAt(0))return e;{const{match:{params:{username:t,repository:a,objectType:n,branch:s,path:r}}}=this.props,{mainBranchName:c}=this.state,m=r?n===l.b.BLOB?u.a.join(u.a.dirname(r),e):u.a.join(r,e):u.a.join("",e),h=await o.a.fileInfo({username:t},{name:a},m,s||c);if(null!==h){const{exists:e,type:n}=h;return e&&n!==l.b.BLOB?i.Function.generateRepositoryCodeRoute({username:t,repository:a,branch:s||c,path:m,objectType:l.b.TREE}):i.Function.generateRepositoryCodeRoute({username:t,repository:a,branch:s||c,path:m,objectType:l.b.BLOB})}return i.Function.generateRepositoryCodeRoute({username:t,repository:a,branch:s||c,path:m,objectType:l.b.BLOB})}},this.getImageURL=async e=>{if(m()(e)||u.a.isAbsolute(e))return e;{const{match:{params:{username:t,repository:a,objectType:n,branch:s,path:r}}}=this.props,{mainBranchName:i}=this.state,c=r?n===l.b.BLOB?u.a.join(u.a.dirname(r),e):u.a.join(r,e):u.a.join("",e),m=await o.a.rawFile({username:t},{name:a},c,s||i);return null!==m?URL.createObjectURL(m):e}},this.state={mainBranchName:"",loading:!1}}async componentDidMount(){const{match:{params:{branch:e}}}=this.props;this.setState({loading:!0}),"string"!==typeof e&&await this.loadMainBranchName(),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{markdown:n}=this.props,{markdown:s}=e;n!==s&&await this.componentDidMount()}componentWillUnmount(){this.objectURLs.forEach(e=>URL.revokeObjectURL(e))}render(){const{loading:e}=this.state,{markdown:t}=this.props;return s.a.createElement(p.a,{markdown:t,processHTML:this.processHTML,loading:e})}}var d=Object(r.f)(f);a.d(t,"a",(function(){return d}))},1267:function(e,t,a){e.exports={FileList:"Style_FileList__3rWIg",lastCommitInfoBar:"Style_lastCommitInfoBar__2XW39",readmeWrapper:"Style_readmeWrapper__25GwL"}},1268:function(e,t,a){e.exports={Item:"Style_Item__2qcqg",icon:"Style_icon__1TlO4",fileName:"Style_fileName__zs9qY",message:"Style_message__1rBHL",time:"Style_time__2cJ9G"}},1269:function(e,t,a){e.exports={Readme:"Style_Readme__2e1Tq",title:"Style_title__2mCc5",contentWrapper:"Style_contentWrapper__3fQZA"}},1324:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=(a(1124),a(1123)),i=(a(339),a(103)),o=a(1267),c=a.n(o),m=a(20),l=a(14),h=a(132),u=a(1268),p=a.n(u),f=a(32),d=a(97),g={name:"file-text",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]}},y=a(12),b=function(e,t){return s.a.createElement(y.a,Object.assign({},e,{ref:t,icon:g}))};b.displayName="FileTextOutlined";var v=s.a.forwardRef(b),w={name:"folder",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]}},E=function(e,t){return s.a.createElement(y.a,Object.assign({},e,{ref:t,icon:w}))};E.displayName="FolderOutlined";var _=s.a.forwardRef(E);var N=Object(h.f)(s.a.memo((function(e){const{masterBranchName:t,fileInfo:{type:a,path:n,commit:{message:i,timestamp:o,commitHash:c}},match:{params:{username:h,repository:u,branch:g}}}=e,y=function(e){const t=e.split("/");return t[t.length-1]}(n);return s.a.createElement(r.a.Item,{className:p.a.Item},a===m.b.BLOB?s.a.createElement(v,{className:p.a.icon}):s.a.createElement(_,{className:p.a.icon}),s.a.createElement("div",{className:p.a.fileName},s.a.createElement(l.b,{to:f.Function.generateRepositoryCodeRoute({username:h,repository:u,objectType:a,branch:g||t,path:n})},y)),s.a.createElement(l.b,{className:p.a.message,to:f.Function.generateRepositoryCommitRoute({username:h,repository:u,commitHash:c})},i),s.a.createElement("div",{className:p.a.time},d.b.parseTimestampToDifference(o)))}))),B=(a(142),a(73)),L=a(1269),S=a.n(L),j=a(1173);var C=s.a.memo((function(e){const{readme:t,exists:a,loading:n}=e;return a?s.a.createElement("div",{className:S.a.Readme},s.a.createElement(B.a,{spinning:n},s.a.createElement("div",{className:S.a.title},"README.md"),s.a.createElement("div",{className:S.a.contentWrapper},s.a.createElement(j.a,{markdown:t})))):null})),R=a(343),H=a(1139);class M extends n.PureComponent{constructor(e){super(e),this.readmeExists=async()=>{const{match:{params:{username:e,repository:t,path:a}},commitHash:n}=this.props,s=await R.a.fileInfo({username:e},{name:t},Object(H.join)(a||"","README.md"),n);return null!==s&&s.exists},this.loadRawReadme=async()=>{const{match:{params:{username:e,repository:t,path:a}},commitHash:n}=this.props,s=await R.a.rawFile({username:e},{name:t},Object(H.join)(a||"","README.md"),n);null!==s&&this.setState({readme:await d.c.transformBlobToString(s),exists:!0})},this.state={exists:!1,readme:"",loading:!0}}async componentDidMount(){const{commitHash:e}=this.props;e&&(this.setState({loading:!0}),await this.readmeExists()?await this.loadRawReadme():this.setState({exists:!1}),this.setState({loading:!1}))}async componentDidUpdate(e,t,a){const{location:{pathname:n},commitHash:s}=this.props,{location:{pathname:r},commitHash:i}=e;n===r&&s===i||await this.componentDidMount()}render(){const{readme:e,exists:t,loading:a}=this.state;return s.a.createElement(C,{exists:t,readme:e,loading:a})}}var T=Object(h.f)(M),x=a(1172);const A=s.a.lazy(()=>a.e(44).then(a.bind(null,1356)));var D=s.a.memo((function(e){const{fileList:t,lastCommit:a,loading:n,showPreviousFolderItem:o,masterBranchName:m}=e,{commitHash:l}=a;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:c.a.FileList},s.a.createElement("div",{className:c.a.lastCommitInfoBar},s.a.createElement(x.a,{lastCommit:a})),s.a.createElement(r.a,{locale:{emptyText:s.a.createElement(i.a,{description:"\u6ca1\u6709\u6587\u4ef6"})},loading:n,className:c.a.fileList},o?s.a.createElement(A,null):null,t.map(e=>s.a.createElement(N,{masterBranchName:m,fileInfo:e,key:e.path})))),s.a.createElement("div",{className:c.a.readmeWrapper},s.a.createElement(T,{commitHash:l})))})),I=a(45),O=a(115);class k extends n.Component{constructor(e){super(e),this.loadMasterBranchName=async()=>new Promise(async e=>{const{match:{params:{username:t,repository:a}}}=this.props,n=await I.h.branches({username:t,name:a});if(null!==n){const{branches:t}=n;let a="";for(const{name:e,isDefault:n}of t)if(n){a=e;break}this.setState({masterBranchName:a},()=>e())}}),this.loadDirectory=async()=>new Promise(async e=>{const{match:{params:{username:t,repository:a,path:n,branch:s}}}=this.props,{masterBranchName:r}=this.state,i=await I.h.directory({username:t},{name:a},s||r,void 0===n?"":n+"/");null!==i?this.setState({fileList:[...i]},()=>e()):e()}),this.loadLastCommit=async()=>new Promise(async e=>{const{match:{params:{username:t,repository:a,branch:n,path:s}}}=this.props,{masterBranchName:r}=this.state,i=await I.h.lastCommit({username:t},{name:a},n||r,s);null!==i?this.setState({lastCommit:i},()=>e()):e()}),this.state={fileList:[],lastCommit:new O.b("","","",0,"",""),loading:!0,masterBranchName:""}}async componentDidMount(){this.setState({loading:!0}),await this.loadMasterBranchName(),await this.loadLastCommit(),await this.loadDirectory(),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{match:{params:{username:n,repository:s,branch:r,path:i}}}=e,{match:{params:{username:o,repository:c,branch:m,path:l}}}=this.props;n!==o||s!==c?await this.componentDidMount():r!==m?(this.setState({loading:!0}),await Promise.all([this.loadDirectory(),this.loadLastCommit()]),this.setState({loading:!1})):i!==l&&(this.setState({loading:!0}),await this.loadDirectory(),this.setState({loading:!1}))}render(){const{fileList:e,lastCommit:t,loading:a,masterBranchName:n}=this.state,{match:{params:{path:r}}}=this.props;return s.a.createElement(D,{fileList:e,masterBranchName:n,lastCommit:t,loading:a,showPreviousFolderItem:void 0!==r})}}var F=Object(h.f)(k);a.d(t,"default",(function(){return F}))}}]);
//# sourceMappingURL=24.2785e8c3.chunk.js.map