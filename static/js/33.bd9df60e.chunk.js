(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[33],{1072:function(y,R,s){y.exports={PullRequests:"Style_PullRequests__2EzEd",list:"Style_list__2Z9aN",header:"Style_header__bLOXb",statusFilter:"Style_statusFilter__3-bE3",tag:"Style_tag__2Esc7",pageButtonWrapper:"Style_pageButtonWrapper__oo2S4"}},1073:function(y,R,s){y.exports={PullRequests:"Style_PullRequests__2-07Q",emptyWrapper:"Style_emptyWrapper__2PVg3"}},1074:function(y,R,s){y.exports={PullRequest:"Style_PullRequest__2fW0b",titleWrapper:"Style_titleWrapper__1oAuA",iconWrapper:"Style_iconWrapper__MP-ds",info:"Style_info__1lTJJ"}},1401:function(y,R,s){"use strict";s.r(R),s.d(R,"default",function(){return w});var f=s(0),e=s.n(f),x=s(1072),d=s.n(x),F=s(947),A=s(964),P=s(101),N=s(963),I=s(17),C=s(46),O=s(48),o=s(22),L=s(1073),B=s.n(L),M=s(1074),v=s.n(M),Z=s(67),D=s(99),W=s(978),q=s(975),T=s(271);function k(r){const{pullRequest:{title:t,status:a,creationTime:n,no:l,sourceRepositoryUsername:u,targetRepositoryUsername:i,targetRepositoryName:c}}=r;return e.a.createElement("div",{className:v.a.PullRequest},e.a.createElement("div",{className:v.a.titleWrapper},e.a.createElement("div",{className:v.a.iconWrapper,style:{color:U(a)}},z(a)),e.a.createElement(T.a,{to:O.Function.generateRepositoryPullRequestRoute({username:i,repositoryName:c,no:l.toString()})},e.a.createElement("div",{className:v.a.title},t))),e.a.createElement("div",{className:v.a.info},"#",l," \u7531 ",e.a.createElement("b",null,u)," \u4E8E ",Z.b.parseTimestampToDifference(n)," \u521B\u5EFA"))}function z(r){switch(r){case o.c.CLOSED:return e.a.createElement(D.a,null);case o.c.MERGED:return e.a.createElement(W.a,null);case o.c.OPEN:return e.a.createElement(q.a,null)}}function U(r){switch(r){case o.c.CLOSED:return"red";case o.c.MERGED:return"purple";case o.c.OPEN:return"green"}}var j=e.a.memo(k),J=s(177);function V(r){const{pullRequests:t}=r;return e.a.createElement("div",{className:B.a.PullRequests},t.length>0?t.map(a=>e.a.createElement(j,{pullRequest:a,key:a.id})):e.a.createElement("div",{className:B.a.emptyWrapper},e.a.createElement(J.a,{description:"\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684 Pull Request"})))}var Q=e.a.memo(V),X=s(267),H=s(498);function K(r){const{branches:t,loading:a,match:{params:{username:n,repositoryName:l}},openAmount:u,closedAmount:i,mergedAmount:c,onStatusButtonClick:m,currentStatus:h,currentPageNumber:_,pullRequests:ee,onNextButtonClick:te,onPrevButtonClick:ae,noNextPage:se}=r;let g="";for(const{isDefault:ne,name:le}of t)ne&&(g=le);return e.a.createElement("div",{className:d.a.PullRequests},e.a.createElement(F.a,{spinning:a},e.a.createElement("div",{className:d.a.list},e.a.createElement("div",{className:d.a.header},e.a.createElement("div",{className:d.a.statusFilter},e.a.createElement(A.b,{size:-1},e.a.createElement(P.a,{size:"small",type:"link",style:{color:"unset",fontWeight:h===void 0?"bolder":"inherit"},onClick:m(void 0)},e.a.createElement(X.a,null)," \u6240\u6709",e.a.createElement(N.a,{className:d.a.tag},u+i+c)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"green",fontWeight:h===o.c.OPEN?"bolder":"inherit"},onClick:m(o.c.OPEN)},e.a.createElement(q.a,null)," \u5F00\u542F\u7684",e.a.createElement(N.a,{className:d.a.tag},u)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"red",fontWeight:h===o.c.CLOSED?"bolder":"inherit"},onClick:m(o.c.CLOSED)},e.a.createElement(D.a,null)," \u5DF2\u5173\u95ED",e.a.createElement(N.a,{className:d.a.tag},i)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"purple",fontWeight:h===o.c.MERGED?"bolder":"inherit"},onClick:m(o.c.MERGED)},e.a.createElement(W.a,null)," \u5DF2\u5408\u5E76",e.a.createElement(N.a,{className:d.a.tag},c)))),e.a.createElement("div",{className:d.a.buttonWrapper},e.a.createElement(I.b,{to:O.Function.generateRepositoryCompareRoute({sourceRepositoryUsername:n,sourceRepositoryName:l,sourceRepositoryBranch:g,targetRepositoryBranch:g,repositoryName:l,username:n})},e.a.createElement(P.a,{type:"primary"},e.a.createElement(H.a,null),"\u521B\u5EFA Pull Request")))),e.a.createElement("div",{className:d.a.pullRequestListWrapper},e.a.createElement(Q,{pullRequests:ee}))),e.a.createElement("div",{className:d.a.pageButtonWrapper},e.a.createElement(A.b,{size:-1},e.a.createElement(P.a,{disabled:_===0,onClick:ae},"\u4E0A\u4E00\u9875"),e.a.createElement(P.a,{onClick:te,disabled:se},"\u4E0B\u4E00\u9875")))))}var Y=Object(C.j)(e.a.memo(K)),$=s(340),S=s(27),G,oe=typeof G!="undefined"?G:r=>{throw new Error('Dynamic require of "'+r+'" is not supported')},E=(r,t,a)=>new Promise((n,l)=>{var u=m=>{try{c(a.next(m))}catch(h){l(h)}},i=m=>{try{c(a.throw(m))}catch(h){l(h)}},c=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,i);c((a=a.apply(r,t)).next())});const p=class extends f.PureComponent{constructor(r){super(r);this.onStatusButtonClick=t=>()=>E(this,null,function*(){switch(this.setState({currentStatus:t,loading:!0,currentPageNumber:0}),t){case o.c.OPEN:{yield this.loadOpenAmount();break}case o.c.MERGED:{yield this.loadMergedAmount();break}case o.c.CLOSED:{yield this.loadClosedAmount();break}default:{yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount()]);break}}yield this.loadPullRequests(t,0,p.SIZE_PER_PAGE),this.setState({loading:!1})}),this.onPrevButtonClick=()=>E(this,null,function*(){const{currentPageNumber:t,currentStatus:a}=this.state;t>0&&(this.setState({loading:!0}),yield this.loadPullRequests(a,(t-1)*p.SIZE_PER_PAGE,p.SIZE_PER_PAGE),this.setState({currentPageNumber:t-1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"}))}),this.onNextButtonClick=()=>E(this,null,function*(){const{currentPageNumber:t,currentStatus:a}=this.state;this.setState({loading:!0}),yield this.loadPullRequests(a,(t+1)*p.SIZE_PER_PAGE,p.SIZE_PER_PAGE),this.setState({currentPageNumber:t+1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"})}),this.loadPullRequests=(t,a,n)=>E(this,null,function*(){const{match:{params:{username:l,repositoryName:u}}}=this.props,i=yield S.h.getByRepository({username:l,name:u},t,a,n);if(i!==null){const{pullRequests:c}=i;this.setState({pullRequests:c})}}),this.loadBranches=()=>E(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield $.a.branches({username:t,name:a});if(n!==null){const{branches:l}=n;this.setState({branches:l})}}),this.loadOpenAmount=()=>E(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield S.h.getPullRequestAmount({username:t,name:a},o.c.OPEN);if(n!==null){const{amount:l}=n;this.setState({openAmount:l})}}),this.loadClosedAmount=()=>E(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield S.h.getPullRequestAmount({username:t,name:a},o.c.CLOSED);if(n!==null){const{amount:l}=n;this.setState({closedAmount:l})}}),this.loadMergedAmount=()=>E(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield S.h.getPullRequestAmount({username:t,name:a},o.c.MERGED);if(n!==null){const{amount:l}=n;this.setState({mergedAmount:l})}}),this.setNoNextPage=()=>{const{currentStatus:t,currentPageNumber:a,openAmount:n,closedAmount:l,mergedAmount:u}=this.state;switch(t){case o.c.CLOSED:return(a+1)*p.SIZE_PER_PAGE>=l;case o.c.MERGED:return(a+1)*p.SIZE_PER_PAGE>=u;case o.c.OPEN:return(a+1)*p.SIZE_PER_PAGE>=n;default:return(a+1)*p.SIZE_PER_PAGE>=n+l+u}},this.state={branches:[],loading:!1,openAmount:0,closedAmount:0,mergedAmount:0,pullRequests:[],currentStatus:o.c.OPEN,currentPageNumber:0}}componentDidMount(){return E(this,null,function*(){this.setState({loading:!0}),yield Promise.all([this.loadBranches(),this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount(),this.loadPullRequests(o.c.OPEN,0,p.SIZE_PER_PAGE)]),this.setState({loading:!1})})}componentDidUpdate(r,t,a){return E(this,null,function*(){const{match:{params:{username:n,repositoryName:l}}}=this.props,{match:{params:{username:u,repositoryName:i}}}=r;(n!==u||l!==i)&&(yield this.componentDidMount())})}render(){const{branches:r,loading:t,closedAmount:a,mergedAmount:n,openAmount:l,pullRequests:u,currentStatus:i,currentPageNumber:c}=this.state;return e.a.createElement(Y,{branches:r,loading:t,closedAmount:a,mergedAmount:n,openAmount:l,pullRequests:u,currentStatus:i,currentPageNumber:c,onStatusButtonClick:this.onStatusButtonClick,onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick,noNextPage:this.setNoNextPage()})}};let b=p;b.SIZE_PER_PAGE=20;var w=Object(C.j)(b)}}]);

//# sourceMappingURL=33.bd9df60e.chunk.js.map