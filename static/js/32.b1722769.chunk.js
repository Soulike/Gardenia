(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[32],{1068:function(h,v,a){h.exports={Issues:"Style_Issues__wxh9c",list:"Style_list__1i8bQ",header:"Style_header__2KaVh",statusFilter:"Style_statusFilter__3zE2w",tag:"Style_tag__3Xw8C",pageButtonWrapper:"Style_pageButtonWrapper__P17fr"}},1069:function(h,v,a){h.exports={IssueList:"Style_IssueList__3_LLo",emptyWrapper:"Style_emptyWrapper__3X6HT"}},1070:function(h,v,a){h.exports={Issue:"Style_Issue__3wQKl",titleWrapper:"Style_titleWrapper__3c3D9",iconWrapper:"Style_iconWrapper__3QVF5",info:"Style_info__2PXRc"}},1400:function(h,v,a){"use strict";a.r(v),a.d(v,"default",function(){return Y});var g=a(0),e=a.n(g),x=a(1068),d=a.n(x),D=a(947),I=a(964),y=a(101),P=a(963),F=a(17),C=a(46),A=a(48),l=a(22),G=a(267),O=a(173),B=a(981),Z=a(498),T=a(1069),R=a.n(T),b=a(1070),S=a.n(b),k=a(67),z=a(271);function V(n){const{issue:{status:t,no:s,title:o,repositoryUsername:r,repositoryName:u,username:i,creationTime:c}}=n;return e.a.createElement("div",{className:S.a.Issue},e.a.createElement("div",{className:S.a.titleWrapper},e.a.createElement("div",{className:S.a.iconWrapper,style:{color:Q(t)}},j(t)),e.a.createElement(z.a,{to:A.Function.generateRepositoryIssueRoute({username:r,repositoryName:u,no:s.toString()})},e.a.createElement("div",{className:S.a.title},o))),e.a.createElement("div",{className:S.a.info},"#",s," \u7531 ",e.a.createElement("b",null,i)," \u4E8E ",k.b.parseTimestampToDifference(c)," \u521B\u5EFA"))}function j(n){switch(n){case l.a.CLOSED:return e.a.createElement(B.a,null);case l.a.OPEN:return e.a.createElement(O.a,null)}}function Q(n){switch(n){case l.a.CLOSED:return"red";case l.a.OPEN:return"green"}}var U=e.a.memo(V),X=a(177);function J(n){const{issues:t}=n;return e.a.createElement("div",{className:R.a.IssueList},t.length>0?t.map(s=>e.a.createElement(U,{issue:s,key:s.id})):e.a.createElement("div",{className:R.a.emptyWrapper},e.a.createElement(X.a,{description:"\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684 Issue"})))}var K=e.a.memo(J);function M(n){const{match:{params:{username:t,repositoryName:s}},loading:o,openAmount:r,closedAmount:u,currentStatus:i,onStatusButtonClick:c,currentPageNumber:E,onPrevButtonClick:N,onNextButtonClick:$,noNextPage:w,issues:q}=n;return e.a.createElement("div",{className:d.a.Issues},e.a.createElement(D.a,{spinning:o},e.a.createElement("div",{className:d.a.list},e.a.createElement("div",{className:d.a.header},e.a.createElement("div",{className:d.a.statusFilter},e.a.createElement(I.b,{size:-1},e.a.createElement(y.a,{size:"small",type:"link",style:{color:"unset",fontWeight:i===void 0?"bolder":"inherit"},onClick:c(void 0)},e.a.createElement(G.a,null)," \u6240\u6709",e.a.createElement(P.a,{className:d.a.tag},r+u)),e.a.createElement(y.a,{size:"small",type:"link",style:{color:"green",fontWeight:i===l.a.OPEN?"bolder":"inherit"},onClick:c(l.a.OPEN)},e.a.createElement(O.a,null)," \u5F00\u542F\u7684",e.a.createElement(P.a,{className:d.a.tag},r)),e.a.createElement(y.a,{size:"small",type:"link",style:{color:"red",fontWeight:i===l.a.CLOSED?"bolder":"inherit"},onClick:c(l.a.CLOSED)},e.a.createElement(B.a,null)," \u5DF2\u5173\u95ED",e.a.createElement(P.a,{className:d.a.tag},u)))),e.a.createElement(F.b,{to:A.Function.generateRepositoryCreateIssueRoute({username:t,repositoryName:s})},e.a.createElement(y.a,{type:"primary"},e.a.createElement(Z.a,null),"\u521B\u5EFA Issue"))),e.a.createElement("div",{className:d.a.issueListWrapper},e.a.createElement(K,{issues:q})),e.a.createElement("div",{className:d.a.pageButtonWrapper},e.a.createElement(I.b,{size:-1},e.a.createElement(y.a,{disabled:E===0,onClick:N},"\u4E0A\u4E00\u9875"),e.a.createElement(y.a,{onClick:$,disabled:w},"\u4E0B\u4E00\u9875"))))))}var H=e.a.memo(Object(C.j)(M)),f=a(27),W,_=typeof W!="undefined"?W:n=>{throw new Error('Dynamic require of "'+n+'" is not supported')},p=(n,t,s)=>new Promise((o,r)=>{var u=E=>{try{c(s.next(E))}catch(N){r(N)}},i=E=>{try{c(s.throw(E))}catch(N){r(N)}},c=E=>E.done?o(E.value):Promise.resolve(E.value).then(u,i);c((s=s.apply(n,t)).next())});const m=class extends g.PureComponent{constructor(n){super(n);this.loadOpenAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:s}}}=this.props,o=yield f.e.getAmountByRepository({username:t,name:s},l.a.OPEN);if(o!==null){const{amount:r}=o;this.setState({openAmount:r})}}),this.loadClosedAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:s}}}=this.props,o=yield f.e.getAmountByRepository({username:t,name:s},l.a.CLOSED);if(o!==null){const{amount:r}=o;this.setState({closedAmount:r})}}),this.onStatusButtonClick=t=>()=>p(this,null,function*(){switch(this.setState({currentStatus:t,loading:!0,currentPageNumber:0}),t){case l.a.OPEN:{yield this.loadOpenAmount();break}case l.a.CLOSED:{yield this.loadClosedAmount();break}default:{yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount()]);break}}yield this.loadIssues(t,0,m.SIZE_PER_PAGE),this.setState({loading:!1})}),this.loadIssues=(t,s,o)=>p(this,null,function*(){const{match:{params:{username:r,repositoryName:u}}}=this.props,i=yield f.e.getByRepository({username:r,name:u},t,s,o);if(i!==null){const{issues:c}=i;this.setState({issues:c})}}),this.onPrevButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:s}=this.state;t>0&&(this.setState({loading:!0}),yield this.loadIssues(s,(t-1)*m.SIZE_PER_PAGE,m.SIZE_PER_PAGE),this.setState({currentPageNumber:t-1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"}))}),this.onNextButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:s}=this.state;this.setState({loading:!0}),yield this.loadIssues(s,(t+1)*m.SIZE_PER_PAGE,m.SIZE_PER_PAGE),this.setState({currentPageNumber:t+1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"})}),this.setNoNextPage=()=>{const{currentStatus:t,currentPageNumber:s,openAmount:o,closedAmount:r}=this.state;switch(t){case l.a.CLOSED:return(s+1)*m.SIZE_PER_PAGE>=r;case l.a.OPEN:return(s+1)*m.SIZE_PER_PAGE>=o;default:return(s+1)*m.SIZE_PER_PAGE>=o+r}},this.state={loading:!1,openAmount:0,closedAmount:0,currentStatus:l.a.OPEN,issues:[],currentPageNumber:0}}componentDidMount(){return p(this,null,function*(){const{currentStatus:n}=this.state;this.setState({loading:!0}),yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadIssues(n,0,m.SIZE_PER_PAGE)]),this.setState({loading:!1})})}componentDidUpdate(n,t,s){return p(this,null,function*(){const{match:{params:{username:o,repositoryName:r}}}=this.props,{match:{params:{username:u,repositoryName:i}}}=n;(o!==u||r!==i)&&(yield this.componentDidMount())})}render(){const{loading:n,closedAmount:t,currentStatus:s,openAmount:o,issues:r,currentPageNumber:u}=this.state;return e.a.createElement(H,{loading:n,closedAmount:t,currentStatus:s,onStatusButtonClick:this.onStatusButtonClick,openAmount:o,issues:r,currentPageNumber:u,noNextPage:this.setNoNextPage(),onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick})}};let L=m;L.SIZE_PER_PAGE=20;var Y=Object(C.j)(L)}}]);

//# sourceMappingURL=32.b1722769.chunk.js.map