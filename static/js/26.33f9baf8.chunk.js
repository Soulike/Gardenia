(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{1157:function(e,t,a){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1158:function(e,t,a){},1390:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ee}));var n,r=a(2),s=a.n(r),c=a(4),o=a(71),i=a(1),u=a(0),l=a.n(u),m=a(1157),b=a.n(m),d=a(334),j=a(916),f=a(989),p=a(22),h=a(66);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(n||(n={}));var O=n,x=a(14),S=a(15),v=a(39),g=a(38),y=a(1158),k=a.n(y),N=a(917),E=a(118),_=a(191),w=a(81),A=a(930);function R(e){var t=e.onClick,a=e.forkAmount,n=e.loading;return Object(i.jsxs)(N.b,{className:k.a.ForkButton,size:-1,children:[Object(i.jsxs)(E.a,{onClick:t,disabled:n,loading:n,size:"small",children:[Object(i.jsx)(A.a,{}),"Fork"]}),Object(i.jsx)(_.a,{title:a,children:Object(i.jsx)(E.a,{disabled:n,size:"small",children:w.d.getNumberAbbreviation(a)})})]})}var C=l.a.memo(R),P=a(30),T=a(62),I=a(336),L=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).loadForkAmount=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.j.forkAmount({username:a,name:r});case 3:null!==(c=e.sent)&&(o=c.amount,n.setState({forkAmount:o}));case 5:case"end":return e.stop()}}),e)}))),n.onClick=Object(c.a)(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=4,P.i.fork({username:a,name:r});case 4:null!==e.sent&&I.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),n.setState({loading:!1});case 7:case"end":return e.stop()}}),e)}))),n.state={forkAmount:0,loading:!1},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadForkAmount();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forkAmount,a=e.loading;return Object(i.jsx)(C,{onClick:this.onClick,forkAmount:t,loading:a})}}]),a}(u.PureComponent),F=Object(T.j)(L),U=a(932),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},z=a(20),M=function(e,t){return u.createElement(z.a,Object.assign({},e,{ref:t,icon:D}))};M.displayName="ExclamationCircleOutlined";var G=u.forwardRef(M),Q=a(936),q=a(925),B=a(953),K=a(112),W=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(K.promisify)(n.setState),n.loadHasStared=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.k.isStaredRepository({username:a,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.isStared,e.next=8,n.setStatePromise({hasStared:o});case 8:case"end":return e.stop()}}),e)}))),n.loadStarAmount=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.k.getRepositoryStarAmount({username:a,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.amount,e.next=8,n.setStatePromise({starAmount:o});case 8:case"end":return e.stop()}}),e)}))),n.onClick=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.hasStared,r=t.starAmount,c=n.props.match.params,o=c.username,i=c.repositoryName,e.next=4,n.setStatePromise({loading:!0});case 4:if(!a){e.next=13;break}return e.next=7,P.k.remove({username:o,name:i});case 7:if(null===e.sent){e.next=11;break}return e.next=11,n.setStatePromise({hasStared:!1,starAmount:r-1});case 11:e.next=19;break;case 13:return e.next=15,P.k.add({username:o,name:i});case 15:if(null===e.sent){e.next=19;break}return e.next=19,n.setStatePromise({hasStared:!0,starAmount:r+1});case 19:return e.next=21,n.setStatePromise({loading:!1});case 21:case"end":return e.stop()}}),e)}))),n.state={hasStared:!1,starAmount:0,loading:!1},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadHasStared(),this.loadStarAmount()]);case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a,n){var r,c,o,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match.params,c=r.username,o=r.repositoryName,i=t.match.params,u=i.username,l=i.repositoryName,c===u&&o===l){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasStared,a=e.loading,n=e.starAmount;return Object(i.jsx)(B.a,{hasStared:t,loading:a,starAmount:n,onClick:this.onClick})}}]),a}(u.PureComponent),H=Object(T.j)(W),J=a(50);var Y=l.a.memo(Object(J.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))((function(e){var t=e.repository,a=t.username,n=t.name,r=t.isPublic,s=e.forkFrom,c=e.loading,o=e.onTabChange,u=e.tabActiveKey,l=e.showSettings,m=e.children,x=e.openPullRequestAmount,S=e.openIssueAmount,v=e.isLoggedIn;return c?null:Object(i.jsxs)("div",{className:b.a.Repository,children:[Object(i.jsxs)("div",{className:b.a.header,children:[Object(i.jsxs)("div",{className:b.a.basicInfo,children:[Object(i.jsxs)("div",{className:b.a.tagAndRepository,children:[Object(i.jsx)("div",{className:b.a.tag,children:Object(i.jsx)(f.a,{isPublic:r})}),Object(i.jsxs)("div",{className:b.a.usernameAndName,children:[Object(i.jsx)(p.b,{to:h.Function.generatePersonalCenterRoute({username:a}),children:a})," / ",Object(i.jsx)(p.b,{to:h.Function.generateRepositoryCodeRoute({username:a,repositoryName:n}),children:Object(i.jsx)("b",{children:n})})]})]}),null===s?null:Object(i.jsxs)("div",{className:b.a.forkFrom,children:[Object(i.jsx)("div",{className:b.a.text,children:"fork \u81ea"}),Object(i.jsx)(p.b,{to:h.Function.generatePersonalCenterRoute({username:s.username}),children:s.username})," / ",Object(i.jsx)(p.b,{to:h.Function.generateRepositoryCodeRoute({username:s.username,repositoryName:s.name}),children:Object(i.jsx)("b",{children:s.name})})]})]}),Object(i.jsx)("div",{className:b.a.buttonArea,children:v?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:b.a.buttonWrapper,children:Object(i.jsx)(H,{})}),Object(i.jsx)("div",{className:b.a.buttonWrapper,children:Object(i.jsx)(F,{})})]}):null})]}),Object(i.jsxs)(d.a,{defaultActiveKey:O.CODE,type:"card",className:b.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:o,activeKey:u,children:[Object(i.jsx)(d.a.TabPane,{tab:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(U.a,{}),"\u4ee3\u7801"]}),children:Object(i.jsx)("div",{className:b.a.tabContent,children:m})},O.CODE),Object(i.jsx)(d.a.TabPane,{tab:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(G,{}),"Issues ",Object(i.jsx)(j.a,{className:b.a.tag,children:S})]}),children:Object(i.jsx)("div",{className:b.a.tabContent,children:m})},O.ISSUES),Object(i.jsx)(d.a.TabPane,{tab:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Q.a,{}),"Pull Requests ",Object(i.jsx)(j.a,{className:b.a.tag,children:x})]}),children:Object(i.jsx)("div",{className:b.a.tabContent,children:m})},O.PULL_REQUESTS),l?Object(i.jsx)(d.a.TabPane,{tab:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(q.a,{}),"\u8bbe\u7f6e"]}),children:Object(i.jsx)("div",{className:b.a.tabContent,children:m})},O.SETTINGS):null]})]})}))),V=a(148),X=a(3),Z=a(26);function $(e){var t=Object(u.useState)(new V.i("","","",!0)),a=Object(o.a)(t,2),n=a[0],r=a[1],l=Object(u.useState)(!1),m=Object(o.a)(l,2),b=m[0],d=m[1],j=Object(u.useState)(O.CODE),f=Object(o.a)(j,2),p=f[0],x=f[1],S=Object(u.useState)(null),v=Object(o.a)(S,2),g=v[0],y=v[1],k=Object(u.useState)(0),N=Object(o.a)(k,2),E=N[0],_=N[1],w=Object(u.useState)(0),A=Object(o.a)(w,2),R=A[0],C=A[1],I=Object(u.useState)(!1),L=Object(o.a)(I,2),F=L[0],U=L[1],D=Object(T.f)(),z=Object(T.h)(),M=z.objectType,G=z.commitHash,Q=z.username,q=z.repositoryName,B=Object(T.i)().path,K=Object(J.d)((function(e){return e.Root})).isLoggedIn;Object(u.useEffect)((function(){void 0!==M&&void 0===G&&D.replace(X.d[X.b.NOT_FOUND])}),[M,G,D]),Object(u.useEffect)((function(){document.title="".concat(Q,"/").concat(q," - ").concat(X.a)}),[Q,q]),Object(u.useLayoutEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.i.shouldShowOptions({username:Q,name:q});case 2:null!==(t=e.sent)&&(a=t.showOptions,U(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(!0),e().finally((function(){return d(!1)}))}),[Q,q,K]),Object(u.useLayoutEffect)((function(){var e=X.b.REPOSITORY,t=e.REPOSITORY,a=e.CODE,n=e.ISSUES,r=e.ISSUE,s=e.CREATE_ISSUE,c=e.PULL_REQUESTS,o=e.PULL_REQUEST,i=e.SETTINGS,u=e.CONFLICT;switch(B){case X.d[a]:case X.d[t]:x(O.CODE);break;case X.d[s]:case X.d[r]:case X.d[n]:x(O.ISSUES);break;case X.d[o]:case X.d[c]:case X.d[u]:x(O.PULL_REQUESTS);break;case X.d[i.SETTINGS]:x(O.SETTINGS)}}),[B]),Object(u.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.repository({username:Q},{name:q});case 2:if(null===(t=e.sent)){e.next=7;break}r(t),e.next=8;break;case 7:return e.abrupt("return",D.replace(X.d[X.b.NOT_FOUND]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(!0),e().finally((function(){return d(!1)}))}),[Q,q,D]),Object(u.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.forkFrom({username:Q,name:q});case 2:null!==(t=e.sent)&&(a=t.repository,y(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(!0),e().finally((function(){return d(!1)}))}),[Q,q]),Object(u.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.h.getPullRequestAmount({username:Q,name:q},Z.c.OPEN);case 2:null!==(t=e.sent)&&(a=t.amount,_(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(!0),e().finally((function(){return d(!1)}))}),[Q,q]),Object(u.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.e.getAmountByRepository({username:Q,name:q},Z.a.OPEN);case 2:null!==(t=e.sent)&&(a=t.amount,C(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d(!0),e().finally((function(){return d(!1)}))}),[Q,q]);var W=e.children;return Object(i.jsx)(Y,{showSettings:F,repository:n,loading:b,onTabChange:function(e){switch(e){case O.CODE:return D.push(h.Function.generateRepositoryCodeRoute({username:Q,repositoryName:q}));case O.ISSUES:return D.push(h.Function.generateRepositoryIssuesRoute({username:Q,repositoryName:q}));case O.PULL_REQUESTS:return D.push(h.Function.generateRepositoryPullRequestsRoute({username:Q,repositoryName:q}));case O.SETTINGS:return D.push(h.Function.generateRepositorySettingsRoute({username:Q,repositoryName:q}));default:return}},tabActiveKey:p,forkFrom:g,openPullRequestAmount:E,openIssueAmount:R,children:W})}var ee=l.a.memo($)},947:function(e,t,a){"use strict";var n=a(19),r=a(226),s=a(1),c=a(0),o=a.n(c),i=a(916),u=a(950),l=a.n(u);function m(e){var t=e.isPublic,a=Object(r.a)(e,["isPublic"]);return t?Object(s.jsx)(i.a,Object(n.a)(Object(n.a)({className:l.a.AccessibilityTag,color:"blue"},a),{},{children:"\u516c\u5f00"})):Object(s.jsx)(i.a,Object(n.a)(Object(n.a)({className:l.a.AccessibilityTag,color:"gold"},a),{},{children:"\u79c1\u4eba"}))}t.a=o.a.memo(m)},950:function(e,t,a){e.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},953:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(2),r=a.n(n),s=a(4),c=a(1),o=a(0),i=a.n(o),u=a(917),l=a(118),m=a(191),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},d=a(20),j=function(e,t){return o.createElement(d.a,Object.assign({},e,{ref:t,icon:b}))};j.displayName="StarFilled";var f=o.forwardRef(j),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},h=function(e,t){return o.createElement(d.a,Object.assign({},e,{ref:t,icon:p}))};h.displayName="StarOutlined";var O=o.forwardRef(h),x=a(81);function S(e){var t=e.hasStared,a=e.starAmount,n=e.loading,o=e.onClick;return Object(c.jsxs)(u.b,{size:-1,children:[Object(c.jsx)(l.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"function"!==typeof o){e.next=4;break}return e.next=4,o(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loading:n,disabled:n,children:t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(f,{})," Unstar"]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(O,{})," Star"]})}),Object(c.jsx)(m.a,{title:a,children:Object(c.jsx)(l.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preventDefault());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:x.d.getNumberAbbreviation(a)})})]})}var v=i.a.memo(S)},989:function(e,t,a){"use strict";var n=a(947);a.d(t,"a",(function(){return n.a}))}}]);
//# sourceMappingURL=26.33f9baf8.chunk.js.map