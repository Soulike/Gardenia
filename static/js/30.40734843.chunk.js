(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[30],{1024:function(e,t,a){e.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},1025:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),i=a(1024),l=a.n(i);var c=r.a.memo((function(e){var t=e.children;return r.a.createElement("h2",{className:l.a.SettingsTitle},t)}))},1042:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),i=a(212);var l=r.a.memo((function(){return r.a.createElement(i.a,{avatar:""})}))},1159:function(e,t,a){e.exports={Avatar:"Style_Avatar__2TmQb",body:"Style_body__eN9Pm",avatarWrapper:"Style_avatarWrapper__3wqvg",avatar:"Style_avatar__hT7wZ",fileInput:"Style_fileInput__1gSjB",buttonWrapper:"Style_buttonWrapper__1rFvY"}},1251:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));a(62);var n=a(29),r=a(1),i=a.n(r),l=a(3),c=a(9),o=a(10),s=a(17),u=a(18),p=a(0),v=a.n(p),f=(a(73),a(21)),m=(a(108),a(45)),d=(a(335),a(149)),g=a(1159),h=a.n(g),_=a(1025),b=a(1042);var k=v.a.memo((function(e){var t=e.avatar,a=e.loading,n=e.fileInputRef,r=e.onAvatarClick,i=e.onAvatarInputChange,l=e.fileChanged,c=e.onUploadButtonClick;return v.a.createElement("div",{className:h.a.Avatar},v.a.createElement(_.a,null,"\u5934\u50cf"),v.a.createElement("div",{className:h.a.body},v.a.createElement(m.a,{spinning:a},v.a.createElement(d.a,{title:"\u70b9\u51fb\u66f4\u6362\u5934\u50cf"},v.a.createElement("div",{className:h.a.avatarWrapper,onClick:r},t?v.a.createElement("img",{src:t,alt:"avatar",className:h.a.avatar}):v.a.createElement(b.a,null)))),v.a.createElement("input",{type:"file",accept:"image/*",multiple:!1,className:h.a.fileInput,ref:n,onChange:i}),v.a.createElement("div",{className:h.a.buttonWrapper},v.a.createElement(f.a,{type:"primary",block:!0,disabled:a||!l,loading:a,onClick:c},"\u4e0a\u4f20"))))})),C=a(28),S=a(22),y=a(94),E=S.CONFIG.PAGE_ID,A=S.CONFIG.PAGE_ID_TO_ROUTE,I=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).fileInputRef=v.a.createRef(),r.setStatePromise=Object(y.promisify)(r.setState),r.loadAvatar=Object(l.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.e.get();case 2:if(null===(t=e.sent)){e.next=9;break}return a=t.avatar,e.next=7,r.setStatePromise({avatar:a});case 7:e.next=11;break;case 9:return n=r.props.history,e.abrupt("return",n.replace(A[E.NOT_FOUND]));case 11:case"end":return e.stop()}}),e)}))),r.onAvatarClick=function(){var e=r.fileInputRef.current;null!==e&&e.click()},r.onAvatarInputChange=function(e){var t=e.target.files;if(null!==t&&t.length>0){var a=t[0];r.setState({file:a,avatar:URL.createObjectURL(a)})}},r.onUploadButtonClick=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=r.state.file)){e.next=5;break}n.a.warn({message:"\u8bf7\u5148\u9009\u62e9\u5934\u50cf"}),e.next=11;break;case 5:return r.setState({loading:!0}),e.next=8,C.e.uploadAvatar(t);case 8:null!==e.sent&&(n.a.success({message:"\u4e0a\u4f20\u5934\u50cf\u6210\u529f"}),setTimeout((function(){window.location.reload()}),1e3)),r.setState({loading:!1});case 11:case"end":return e.stop()}}),e)}))),r.state={avatar:"",loading:!1,file:null},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,this.loadAvatar();case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.avatar,a=e.loading,n=e.file;return v.a.createElement(k,{onAvatarInputChange:this.onAvatarInputChange,onAvatarClick:this.onAvatarClick,fileInputRef:this.fileInputRef,avatar:t,loading:a,fileChanged:null!==n,onUploadButtonClick:this.onUploadButtonClick})}}]),a}(p.PureComponent)}}]);
//# sourceMappingURL=30.40734843.chunk.js.map