(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[17],{1113:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},1114:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},1115:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},1116:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",(function(){return a}))},1117:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return a}))},1119:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(15);t.a=a.a.memo((function(e){return a.a.createElement(o.b,Object.assign({},e,{target:"_blank",rel:"noopener norefferrer"}))}))},1120:function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])y(c)||!O(c)?i+=" "+c:i+=" "+u(c);return i},t.deprecate=function(n,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}};var o,i={};function u(e,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&t._extend(r,n),h(r.showHidden)&&(r.showHidden=!1),h(r.depth)&&(r.depth=2),h(r.colors)&&(r.colors=!1),h(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function s(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&A(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return v(a)||(a=l(e,a,r)),a}var o=function(e,t){if(h(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,n);if(o)return o;var i=Object.keys(n),u=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),S(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(n);if(0===i.length){if(A(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(g(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var s,O="",w=!1,x=["{","}"];(m(n)&&(w=!0,x=["[","]"]),A(n))&&(O=" [Function"+(n.name?": "+n.name:"")+"]");return g(n)&&(O=" "+RegExp.prototype.toString.call(n)),E(n)&&(O=" "+Date.prototype.toUTCString.call(n)),S(n)&&(O=" "+f(n)),0!==i.length||w&&0!=n.length?r<0?g(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),s=w?function(e,t,n,r,a){for(var o=[],i=0,u=t.length;i<u;++i)k(t,String(i))?o.push(p(e,t,n,r,String(i),!0)):o.push("");return a.forEach((function(a){a.match(/^\d+$/)||o.push(p(e,t,n,r,a,!0))})),o}(e,n,r,u,i):i.map((function(t){return p(e,n,r,u,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(s,O,x)):x[0]+O+x[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,a,o){var i,u,c;if((c=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),k(r,a)||(i="["+a+"]"),u||(e.seen.indexOf(c.value)<0?(u=y(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),h(i)){if(o&&a.match(/^\d+$/))return u;(i=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+u}function m(e){return Array.isArray(e)}function d(e){return"boolean"===typeof e}function y(e){return null===e}function b(e){return"number"===typeof e}function v(e){return"string"===typeof e}function h(e){return void 0===e}function g(e){return O(e)&&"[object RegExp]"===w(e)}function O(e){return"object"===typeof e&&null!==e}function E(e){return O(e)&&"[object Date]"===w(e)}function S(e){return O(e)&&("[object Error]"===w(e)||e instanceof Error)}function A(e){return"function"===typeof e}function w(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(h(o)&&(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG||""),n=n.toUpperCase(),!i[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;i[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else i[n]=function(){};return i[n]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=d,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=v,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=h,t.isRegExp=g,t.isObject=O,t.isDate=E,t.isError=S,t.isFunction=A,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(1124);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=n(1125),t._extend=function(e,t){if(!t||!O(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var _="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(_&&e[_]){var t;if("function"!==typeof(t=e[_]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,a)}catch(i){n(i)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),_&&Object.defineProperty(t,_,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=_,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if("function"!==typeof a)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return a.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(P,t,i)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(96))},1121:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"USERNAME",(function(){return x})),n.d(r,"PASSWORD",(function(){return j})),n.d(r,"VERIFICATION_CODE",(function(){return C}));var a={};n.r(a),n.d(a,"NAME",(function(){return k}));var o={};n.r(o),n.d(o,"NICKNAME",(function(){return _})),n.d(o,"EMAIL",(function(){return P}));var i={};n.r(i),n.d(i,"NAME",(function(){return M}));var u={};n.r(u),n.d(u,"CODE",(function(){return N}));var c={};n.r(c),n.d(c,"username",(function(){return D})),n.d(c,"password",(function(){return I})),n.d(c,"verificationCode",(function(){return R}));var s={};n.r(s),n.d(s,"name",(function(){return T}));var l={};n.r(l),n.d(l,"nickname",(function(){return z})),n.d(l,"email",(function(){return U}));var f={};n.r(f),n.d(f,"name",(function(){return W}));var p={};n.r(p),n.d(p,"code",(function(){return F}));var m={};n.r(m),n.d(m,"Account",(function(){return c})),n.d(m,"Group",(function(){return s})),n.d(m,"Profile",(function(){return l})),n.d(m,"Repository",(function(){return f})),n.d(m,"Collaborator",(function(){return p}));var d={};n.r(d),n.d(d,"USERNAME",(function(){return $})),n.d(d,"PASSWORD",(function(){return L}));var y={};n.r(y),n.d(y,"NAME",(function(){return G}));var b={};n.r(b),n.d(b,"NICKNAME",(function(){return J}));var v={};n.r(v),n.d(v,"NAME",(function(){return B}));var h={};n.r(h),n.d(h,"Account",(function(){return d})),n.d(h,"Group",(function(){return y})),n.d(h,"Profile",(function(){return b})),n.d(h,"Repository",(function(){return v}));var g={};n.r(g),n.d(g,"USERNAME",(function(){return H})),n.d(g,"PASSWORD",(function(){return K})),n.d(g,"VERIFICATION_CODE",(function(){return V}));var O={};n.r(O),n.d(O,"NAME",(function(){return Z}));var E={};n.r(E),n.d(E,"NICKNAME",(function(){return X})),n.d(E,"EMAIL",(function(){return q}));var S={};n.r(S),n.d(S,"NAME",(function(){return Q}));var A={};n.r(A),n.d(A,"CODE",(function(){return Y}));var w={};n.r(w),n.d(w,"Account",(function(){return g})),n.d(w,"Group",(function(){return O})),n.d(w,"Profile",(function(){return E})),n.d(w,"Repository",(function(){return S})),n.d(w,"Collaborator",(function(){return A}));const x=/^\w{1,20}$/,j=/^\S{6,}$/,C=/^\d{6}$/;var k=/^\S{1,20}$/,_=/^\S{1,20}$/,P=/^([A-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,8})$/,M=/^\w{1,20}$/,N=/^\w+_\w+_\d+$/;function D(e){return r.USERNAME.test(e)}function I(e){return r.PASSWORD.test(e)}function R(e){return r.VERIFICATION_CODE.test(e)}function T(e){return a.NAME.test(e)}function z(e){return o.NICKNAME.test(e)}function U(e){return o.EMAIL.test(e)}function W(e){return i.NAME.test(e)}function F(e){return u.CODE.test(e)}var $="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf",L="6 \u4f4d\u4ee5\u4e0a",G="1~20 \u4f4d",J="1~20 \u4f4d",B="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf";const H="\u7528\u6237\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",K="\u5bc6\u7801\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",V="\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e";var Z="\u5c0f\u7ec4\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",X="\u6635\u79f0\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",q="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1",Q="\u4ed3\u5e93\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",Y="\u9080\u8bf7\u7801\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return h}))},1123:function(e,t,n){"use strict";var r=n(1119);n.d(t,"a",(function(){return r.a}))},1124:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},1125:function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},1127:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return r}))},1141:function(e,t,n){e.exports={DefaultAvatar:"Style_DefaultAvatar__1F6EL",img:"Style_img__2bePj"}},1143:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1141),i=n.n(o),u=n(345),c=n.n(u);var s=a.a.memo((function(){return a.a.createElement("div",{className:i.a.DefaultAvatar},a.a.createElement("img",{src:c.a,alt:"default_avatar",className:i.a.img}))}));n.d(t,"a",(function(){return s}))},1262:function(e,t,n){e.exports={Members:"Style_Members__1A1TA",topArea:"Style_topArea__2Rqcb",cardContent:"Style_cardContent__3XM0M",titleWrapper:"Style_titleWrapper__30lrm",name:"Style_name__35BXt",isAdminTagWrapper:"Style_isAdminTagWrapper__h56El",isAdminTag:"Style_isAdminTag__3vPt2",avatarWrapper:"Style_avatarWrapper__31DG6",avatar:"Style_avatar__39V_0"}},1263:function(e,t,n){e.exports={modalContent:"Style_modalContent__2QoB9",usernameInput:"Style_usernameInput__2TSrf"}},1338:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"addMember",(function(){return W}));n(95);var a=n(42),o=n(3),i=n.n(o),u=n(7),c=n(1113),s=n(1114),l=n(1116),f=n(1115),p=n(1117),m=n(0),d=n.n(m),y=(n(1129),n(1128)),b=(n(505),n(343)),v=(n(344),n(150)),h=(n(94),n(25)),g=(n(181),n(56)),O=n(1127),E=(n(340),n(103)),S=(n(341),n(157)),A=n(1262),w=n.n(A),x=n(32),j=n(1123),C=n(1143),k=(n(506),n(346)),_=(n(504),n(338)),P=n(1091),M=n(1263),N=n.n(M);var D=d.a.memo((function(e){var t=e.onClick,n=e.showModal,r=e.username,a=e.loading,o=e.onModalCancelClick,i=e.onModalOkClick,u=e.onUsernameChange;return d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{type:"primary",onClick:t,loading:a,disabled:a},d.a.createElement(P.a,null),"\u6dfb\u52a0\u6210\u5458"),d.a.createElement(k.a,{destroyOnClose:!0,width:300,title:"\u6dfb\u52a0\u5c0f\u7ec4\u6210\u5458",visible:n,onOk:i,onCancel:o,confirmLoading:a},d.a.createElement("div",{className:N.a.modalContent},d.a.createElement(_.a,{value:r,onChange:u,autoFocus:!0,placeholder:"\u65b0\u5c0f\u7ec4\u6210\u5458\u7684\u7528\u6237\u540d",className:N.a.usernameInput}))))})),I=n(1120),R=n(132),T=n(45),z=n(1121),U=new(n(264).EventEmitter),W="addMember",F=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(f.a)(t).call(this,e))).setStatePromise=Object(I.promisify)(n.setState),n.initModal=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setStatePromise({username:""});case 1:case"end":return e.stop()}}),e)}))),n.onClick=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({showModal:!0});case 2:return e.next=4,n.initModal();case 4:case"end":return e.stop()}}),e)}))),n.onModalOkClick=Object(u.a)(i.a.mark((function e(){var t,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.match.params.id,o=n.state.username,z.b.Account.username(o)){e.next=6;break}a.a.error({message:"\u7528\u6237 ".concat(o," \u4e0d\u5b58\u5728")}),e.next=18;break;case 6:return e.next=8,n.setStatePromise({loading:!0});case 8:return e.next=10,T.c.addAccounts({id:Number.parseInt(t)},[o]);case 10:if(null===e.sent){e.next=16;break}return a.a.success({message:"\u6dfb\u52a0\u6210\u5458 ".concat(o," \u6210\u529f")}),e.next=15,n.setStatePromise({showModal:!1});case 15:U.emit(r.addMember);case 16:return e.next=18,n.setStatePromise({loading:!1});case 18:case"end":return e.stop()}}),e)}))),n.onModalCancelClick=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({showModal:!1});case 2:case"end":return e.stop()}}),e)}))),n.onUsernameChange=function(e){n.setState({username:e.target.value})},n.state={showModal:!1,username:"",loading:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showModal,n=e.username,r=e.loading;return d.a.createElement(D,{loading:r,showModal:t,username:n,onClick:this.onClick,onModalCancelClick:this.onModalCancelClick,onModalOkClick:this.onModalOkClick,onUsernameChange:this.onUsernameChange})}}]),t}(m.PureComponent),$=Object(R.f)(F);var L=d.a.memo((function(e){var t=e.profiles,n=e.loading,r=e.isAdmin,a=e.adminUsernames,o=e.onSetAdminConfirm,i=e.onRemoveAccountConfirm,u=e.onRemoveAdminConfirm;return d.a.createElement("div",{className:w.a.Members},d.a.createElement("div",{className:w.a.topArea},d.a.createElement(S.a,{type:"info",showIcon:!0,message:"\u53ea\u6709\u5c0f\u7ec4\u6210\u5458\u53ef\u5c06\u4ed3\u5e93\u52a0\u5165\u5c0f\u7ec4"}),d.a.createElement("div",{className:w.a.addMemberButtonWrapper},r?d.a.createElement($,null):null)),d.a.createElement(y.a,{loading:n,locale:{emptyText:d.a.createElement(E.a,{description:"\u6ca1\u6709\u6210\u5458"})},dataSource:Object(O.a)(t),renderItem:function(e){if(null!==e){var t=e.nickname,c=e.username,s=e.avatar;return d.a.createElement(b.a,{size:"small",key:c},d.a.createElement("div",{className:w.a.cardContent},d.a.createElement(j.a,{className:w.a.titleWrapper,to:x.Function.generatePersonalCenterRoute({username:c})},d.a.createElement("div",{className:w.a.avatarWrapper},0===s.length?d.a.createElement(C.a,null):d.a.createElement("img",{src:s,alt:"avatar",className:w.a.avatar})),d.a.createElement("div",{className:w.a.name},t,"(",c,")"),d.a.createElement("div",{className:w.a.isAdminTagWrapper},a.includes(c)?d.a.createElement(g.a,{color:"blue",className:w.a.isAdminTag},"\u7ba1\u7406\u5458"):null)),r?d.a.createElement("div",{className:w.a.buttonWrapper},d.a.createElement(h.a.Group,null,a.includes(c)?d.a.createElement(v.a,{title:"\u786e\u8ba4\u64a4\u9500\u6210\u5458 ".concat(c," \u7684\u7ba1\u7406\u5458\u6743\u9650\uff1f"),onConfirm:u(c),disabled:n},d.a.createElement(h.a,{loading:n,disabled:n},"\u64a4\u9500\u7ba1\u7406\u5458")):d.a.createElement(v.a,{title:"\u786e\u8ba4\u8bbe\u7f6e\u6210\u5458 ".concat(c," \u4e3a\u7ba1\u7406\u5458\uff1f"),onConfirm:o(c),disabled:n},d.a.createElement(h.a,{type:"primary",loading:n,disabled:n},"\u8bbe\u4e3a\u7ba1\u7406\u5458")),d.a.createElement(v.a,{title:"\u786e\u8ba4\u79fb\u9664\u6210\u5458 ".concat(c,"\uff1f"),onConfirm:i(c),disabled:n},d.a.createElement(h.a,{type:"danger",loading:n,disabled:n},"\u79fb\u9664")))):null))}return null}}))})),G=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(f.a)(t).call(this,e))).setStatePromise=Object(I.promisify)(n.setState),n.onAddMemberListener=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.componentDidMount();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),n.removeAccount=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,o,u,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state,a=r.accounts,o=r.profiles,u=r.admins,c=a.filter((function(e){return e.username!==t})),s=o.filter((function(e){return null!==e&&e.username!==t})),l=u.filter((function(e){return e.username!==t})),e.next=6,n.setStatePromise({accounts:c,profiles:s,admins:l});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.addAdmin=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a,o,u,c,s,l,f,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state,a=r.accounts,o=r.admins,u=Array.from(o),c=!0,s=!1,l=void 0,e.prev=5,f=a[Symbol.iterator]();case 7:if(c=(p=f.next()).done){e.next=15;break}if((m=p.value).username!==t){e.next=12;break}return u.push(m),e.abrupt("break",15);case 12:c=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),s=!0,l=e.t0;case 21:e.prev=21,e.prev=22,c||null==f.return||f.return();case 24:if(e.prev=24,!s){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,n.setStatePromise({admins:u});case 31:case"end":return e.stop()}}),e,null,[[5,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),n.removeAdmin=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.admins,a=r.filter((function(e){return e.username!==t})),e.next=4,n.setStatePromise({admins:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadIsAdmin=Object(u.a)(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,e.next=3,T.c.isAdmin({id:Number.parseInt(t)});case 3:if(null===(r=e.sent)){e.next=8;break}return a=r.isAdmin,e.next=8,n.setStatePromise({isAdmin:a});case 8:case"end":return e.stop()}}),e)}))),n.loadAccounts=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,e.next=3,T.c.accounts({id:Number.parseInt(t)});case 3:if(null===(r=e.sent)){e.next=7;break}return e.next=7,n.setStatePromise({accounts:r});case 7:case"end":return e.stop()}}),e)}))),n.loadAdmins=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.id,e.next=3,T.c.admins({id:Number.parseInt(t)});case 3:if(null===(r=e.sent)){e.next=7;break}return e.next=7,n.setStatePromise({admins:r});case 7:case"end":return e.stop()}}),e)}))),n.loadProfiles=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.accounts,e.next=3,Promise.all(t.map((function(e){var t=e.username;return T.e.get({username:t})})));case 3:return r=e.sent,e.next=6,n.setStatePromise({profiles:r});case 6:case"end":return e.stop()}}),e)}))),n.onRemoveAccountConfirm=function(e){var t=n.props.match.params.id;return(Object(u.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.setStatePromise({loading:!0});case 2:return r.next=4,T.c.removeAccounts({id:Number.parseInt(t)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u79fb\u9664\u6210\u5458\u6210\u529f"}),r.next=9,n.removeAccount(e);case 9:return r.next=11,n.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},n.onSetAdminConfirm=function(e){var t=n.props.match.params.id;return(Object(u.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.setStatePromise({loading:!0});case 2:return r.next=4,T.c.addAdmins({id:Number.parseInt(t)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u6210\u529f\u8bbe\u7f6e ".concat(e," \u4e3a\u7ba1\u7406\u5458")}),r.next=9,n.addAdmin(e);case 9:return r.next=11,n.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},n.onRemoveAdminConfirm=function(e){var t=n.props.match.params.id;return(Object(u.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.setStatePromise({loading:!0});case 2:return r.next=4,T.c.removeAdmins({id:Number.parseInt(t)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u6210\u529f\u64a4\u9500 ".concat(e," \u7684\u7ba1\u7406\u5458\u8eab\u4efd")}),r.next=9,n.removeAdmin(e);case 9:return r.next=11,n.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},n.state={accounts:[],admins:[],profiles:[],loading:!0,isAdmin:!1},U.on(r.addMember,n.onAddMemberListener),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadAccounts(),this.loadAdmins(),this.loadIsAdmin()]);case 4:return e.next=6,this.loadProfiles();case 6:return e.next=8,this.setStatePromise({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n,r){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.match.params.id,o=t.match.params.id,a===o){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){U.removeListener(r.addMember,this.onAddMemberListener)}},{key:"render",value:function(){var e=this.state,t=e.profiles,n=e.loading,r=e.isAdmin,a=e.admins;return d.a.createElement(L,{profiles:t,loading:n,isAdmin:r,adminUsernames:a.map((function(e){return e.username})),onRemoveAccountConfirm:this.onRemoveAccountConfirm,onSetAdminConfirm:this.onSetAdminConfirm,onRemoveAdminConfirm:this.onRemoveAdminConfirm})}}]),t}(m.PureComponent),J=Object(R.f)(G);n.d(t,"default",(function(){return J}))}}]);
//# sourceMappingURL=17.49af461e.chunk.js.map