(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[33],{1166:function(e,a,t){e.exports={BranchMenu:"Style_BranchMenu__2s6dB",branchName:"Style_branchName__YisEW",branchTagWrapper:"Style_branchTagWrapper__Cq2Vq",branchNameInButton:"Style_branchNameInButton__2kCc8"}},1181:function(e,a,t){"use strict";t(1186);var n=t(1192),r=(t(91),t(20)),o=(t(273),t(59)),i=(t(188),t(61)),s=t(0),c=t.n(s),l=t(1166),m=t.n(l),h=t(1107);var p=c.a.memo((function(e){var a=e.branches,t=e.currentBranch,s=e.onBranchClick,l=!1,p=!0,u=!1,d=void 0;try{for(var y,b=a[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){if(y.value.name===t){l=!0;break}}}catch(f){u=!0,d=f}finally{try{p||null==b.return||b.return()}finally{if(u)throw d}}return c.a.createElement(n.a,{trigger:["click"],overlay:c.a.createElement(o.a,{className:m.a.BranchMenu},a.map((function(e){return c.a.createElement(o.a.Item,{key:e.name,onClick:s(e)},c.a.createElement("div",{className:m.a.branchName,style:e.name===t?{fontWeight:"bold"}:{}},e.name),c.a.createElement("div",{className:m.a.branchTagWrapper},e.isDefault?c.a.createElement(i.a,{color:"blue"},"\u9ed8\u8ba4"):null))})))},c.a.createElement(r.a,null,l?"\u5206\u652f\uff1a":"Tree: ",c.a.createElement("div",{className:m.a.branchNameInButton},t),c.a.createElement(h.a,null)))}));t.d(a,"a",(function(){return p}))},1241:function(e,a,t){e.exports={Commits:"Style_Commits__2OB1b",infoWrapper:"Style_infoWrapper__1B-0-",path:"Style_path__3KqyH",timeLineWrapper:"Style_timeLineWrapper__3aFXu",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__MQq-F"}},1345:function(e,a,t){"use strict";t.r(a);t(80);var n=t(34),r=t(0),o=t.n(r),i=(t(121),t(60)),s=(t(91),t(20)),c=t(1241),l=t.n(c),m=t(47),h=t(48),p=t(50),u=t(49),d=t(51),y=t(139),b=t(25),f=t(1181),_=function(e){function a(){var e,t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(p.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).onBranchClick=function(e){return function(){var a=t.props,n=a.history,r=a.match.params,o=r.username,i=r.repository,s=r.path;return n.replace(b.Function.generateRepositoryCommitsRoute({username:o,repository:i,branch:e.name,path:s}))}},t}return Object(d.a)(a,e),Object(h.a)(a,[{key:"render",value:function(){var e=this.props,a=e.match.params.branch,t=e.branches,n="";if(void 0===a){var r=!0,i=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var m=c.value;m.isDefault&&(n=m.name)}}catch(h){i=!0,s=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw s}}}return o.a.createElement(f.a,{branches:t,currentBranch:a||n,onBranchClick:this.onBranchClick})}}]),a}(r.PureComponent),v=Object(y.f)(_),E=t(364);var g=o.a.memo((function(e){const{branches:a,loading:t,commits:n,path:r,repositoryName:c,onLoadMoreButtonClick:m}=e;return o.a.createElement("div",{className:l.a.Commits},o.a.createElement(i.a,{spinning:t},o.a.createElement("div",{className:l.a.infoWrapper},o.a.createElement(v,{branches:a}),"string"===typeof r?o.a.createElement("div",{className:l.a.path},c,"/",r):null),o.a.createElement("div",{className:l.a.timeLineWrapper},o.a.createElement(E.a,{commits:n})),o.a.createElement("div",{className:l.a.loadMoreButtonWrapper},o.a.createElement(s.a,{disabled:t,loading:t,onClick:m},"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"))))})),C=t(33);class M extends r.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({branches:[],commits:[]},()=>e())}),this.loadBranches=async()=>{const{match:{params:{username:e,repository:a}}}=this.props,t=await C.h.branches({username:e,name:a});if(null!==t){const{branches:e}=t;this.setState({branches:e})}},this.loadMoreCommits=async()=>{const{match:{params:{username:e,repository:a,branch:t,path:r}}}=this.props;let o;const{commits:i}=this.state;if(o="string"===typeof r?await C.h.fileCommitHistory({username:e,name:a},r,t,i.length,M.COMMIT_AMOUNT_PER_PAGE):await C.h.commitHistory({username:e,name:a},t,i.length,M.COMMIT_AMOUNT_PER_PAGE),null!==o){const{commits:e}=o;0===e.length?n.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}):this.setState({commits:[...i,...e]})}},this.onLoadMoreButtonClick=async()=>{await this.setState({loading:!0}),await this.loadMoreCommits(),await this.setState({loading:!1})},this.state={branches:[],loading:!1,commits:[]}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await this.loadBranches(),await this.loadMoreCommits(),this.setState({loading:!1})}async componentDidUpdate(e,a,t){const{location:{pathname:n}}=e,{location:{pathname:r}}=this.props;n!==r&&await this.componentDidMount()}render(){const{branches:e,loading:a,commits:t}=this.state,{match:{params:{repository:n,path:r}}}=this.props;return o.a.createElement(g,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:e,loading:a,commits:t,path:r,repositoryName:n})}}M.COMMIT_AMOUNT_PER_PAGE=50;var B=Object(y.f)(M);t.d(a,"default",(function(){return B}))}}]);
//# sourceMappingURL=33.baa88ae5.chunk.js.map