(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[21],{1187:function(e,t,n){"use strict";var a=n(0),r=n.n(a),s=n(1188),o=n.n(s);t.a=r.a.memo((function(e){var t=e.children,n=e.required;return r.a.createElement("div",{className:o.a.InputLabel},t,r.a.createElement("span",{className:o.a.requiredSign},n?" *":""))}))},1188:function(e,t,n){e.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},1195:function(e,t,n){e.exports={InputTip:"Style_InputTip__KsPY_"}},1197:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),s=n(1195),o=n.n(s);var i=r.a.memo((function(e){var t=e.children;return r.a.createElement("div",{className:o.a.InputTip},t)}))},1205:function(e,t,n){e.exports=n.p+"static/media/developing_code.240e8e0f.svg"},1224:function(e,t,n){"use strict";var a=n(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},s=n(26),o=function(e,t){return a.createElement(s.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName="LockOutlined";t.a=a.forwardRef(o)},1261:function(e,t,n){e.exports={Login:"Style_Login__2bEsG",registerTip:"Style_registerTip__10XWI",form:"Style_form__1Yzdr",inputWrapper:"Style_inputWrapper__2aFQQ",logo:"Style_logo__3bWtv",button:"Style_button__3L0sa"}},1419:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(4),o=n(17),i=n(19),c=n(33),u=n(32),l=n(0),p=n.n(l),m=n(1261),g=n.n(m),d=n(1152),f=n(118),h=n(1205),v=n.n(h),b=n(1187),_=n(31),I=n(36),E=n(1167),S=n(1224),w=n(1197),O=I.CONFIG.PAGE_ID,x=I.CONFIG.PAGE_ID_TO_ROUTE;var L=p.a.memo((function(e){var t=e.username,n=e.password,a=e.onUsernameInputChange,r=e.onPasswordInputChange,s=e.onLoginFormSubmit,o=e.loading;return p.a.createElement("main",{className:g.a.Login},p.a.createElement("form",{action:"#",className:g.a.form,onSubmit:s},p.a.createElement("img",{className:g.a.logo,src:v.a,alt:"web_developer_logo"}),p.a.createElement("div",{className:g.a.registerTip},"\u6ca1\u6709\u8d26\u53f7\uff1f",p.a.createElement(_.b,{to:x[O.REGISTER]},"\u70b9\u6b64\u6ce8\u518c")),p.a.createElement("div",{className:g.a.inputWrapper},p.a.createElement(b.a,null,"\u7528\u6237\u540d"),p.a.createElement(d.a,{type:"text",size:"large",onChange:a,autoFocus:!0,value:t,disabled:o,prefix:p.a.createElement(E.a,null)})),p.a.createElement("div",{className:g.a.inputWrapper},p.a.createElement(b.a,null,"\u5bc6\u7801"),p.a.createElement(d.a,{type:"password",size:"large",onChange:r,value:n,disabled:o,prefix:p.a.createElement(S.a,null)}),p.a.createElement(w.a,null,"\u5fd8\u8bb0\u5bc6\u7801\uff1f",p.a.createElement(_.b,{to:x[O.CHANGE_PASSWORD]},"\u70b9\u6b64\u4fee\u6539\u5bc6\u7801"))),p.a.createElement(f.a,{htmlType:"submit",className:g.a.button,size:"large",type:"primary",disabled:o,loading:o,block:!0},"\u767b\u5f55")))})),k=n(73),y=n(44),N=n(350),C=n(168),T=n(65),P=n(159),F=n(229),G=n.n(F),j=n(228),A=n(175),D=I.CONFIG.PAGE_ID,R=I.CONFIG.PAGE_ID_TO_ROUTE,z=A.b.Account,W=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).setTitle=function(){document.title="\u767b\u5f55 - ".concat(j.a.NAME)},a.checkSession=Object(s.a)(r.a.mark((function e(){var t,n,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.setLoggedOut,s=t.setLoggedIn,e.next=3,y.a.checkSession();case 3:if(null===(o=e.sent)){e.next=15;break}if(!o.isValid){e.next=11;break}return e.next=9,s();case 9:e.next=13;break;case 11:return e.next=13,n();case 13:e.next=17;break;case 15:return e.next=17,n();case 17:case"end":return e.stop()}}),e)}))),a.onUsernameInputChange=function(e){a.setState({username:e.target.value})},a.onPasswordInputChange=function(e){a.setState({password:e.target.value})},a.onLoginFormSubmit=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!a.loginFormInputCheck()){e.next=4;break}return e.next=4,a.submitLoginForm();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loginFormInputCheck=function(){var e=a.state,t=e.username,n=e.password;return!(!z.username(t)||!z.password(n))||(N.a.warn({message:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"}),!1)},a.submitLoginForm=Object(s.a)(r.a.mark((function e(){var t,n,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.username,s=t.password,o=P.a.calculateHash(n,s),a.setState({loading:!0}),e.next=5,y.a.login(new P.a(n,o));case 5:if(!e.sent){e.next=9;break}return e.next=9,a.onLoginSuccess();case 9:a.setState({loading:!1});case 10:case"end":return e.stop()}}),e)}))),a.onLoginSuccess=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.props.setLoggedIn)(),N.a.success({message:"\u767b\u5f55\u6210\u529f"}),a.returnToPreviousPage();case 4:case"end":return e.stop()}}),e)}))),a.returnToPreviousPage=function(){var e=a.props.location.search,t=G.a.parse(e.slice(1)).prev;return"string"===typeof t&&t!==R[D.LOGIN]&&t!==R[D.REGISTER]&&t!==R[D.NOT_FOUND]&&t!==R[D.CHANGE_PASSWORD]?a.props.history.push(t):a.props.history.push(R[D.INDEX])},a.state={username:"",password:"",loading:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setTitle(),e.next=3,this.checkSession();case 3:if(!this.props.isLoggedIn){e.next=6;break}return e.abrupt("return",this.props.history.push(R[D.INDEX]));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.loading;return p.a.createElement(L,{username:t,password:n,loading:a,onLoginFormSubmit:this.onLoginFormSubmit,onPasswordInputChange:this.onPasswordInputChange,onUsernameInputChange:this.onUsernameInputChange})}}]),n}(l.PureComponent),U={setLoggedIn:C.setLoggedInAction,setLoggedOut:C.setLoggedOutAction},H=Object(k.h)(Object(T.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}),U)(W));t.default=H}}]);
//# sourceMappingURL=21.e55398dc.chunk.js.map