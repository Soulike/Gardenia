(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[30],{1017:function(B,v,t){B.exports={menuWrapper:"Style_menuWrapper__2m-La",menu:"Style_menu__1IHB3",menuItem:"Style_menuItem__3fZXi",checkIconWrapper:"Style_checkIconWrapper__e6U-7",name:"Style_name__1yAds",fullListLinkWrapper:"Style_fullListLinkWrapper__11lpU"}},1025:function(B,v,t){"use strict";t.d(v,"a",function(){return c});var h=t(0),e=t.n(h),C=t(1017),o=t.n(C),N=t(483),l=t(956),E=t(177),M=t(101),T=t(1044),g=t(3),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},R=j,z=t(9),A=function(a,n){return h.createElement(z.a,Object(g.a)(Object(g.a)({},a),{},{ref:n,icon:R}))};A.displayName="TagOutlined";var S=h.forwardRef(A),D=t(1027),H=t(948),L=t(966),V=t(48),f=t(17),I=t(46);function F(s){const a=e.a.createElement(T.a,null),n=e.a.createElement(S,null),r=e.a.createElement(D.a,null),i=10,u=10,{branches:p,tagNames:O,visible:Q,currentBranchOrTagOrCommitHash:y,onButtonClick:Z,onBranchOrTagClickFactory:k,match:{params:{username:G,repositoryName:K}}}=s,U=p.map(m=>m.name),J=U.includes(y),X=O.includes(y),Y=J?a:X?n:r,W=[],b=[];if(J){W.push(y);let m=1;for(const P of U){if(m===u)break;P!==y&&(W.push(P),m++)}}else W.push(...U.slice(0,u));if(X){b.push(y);let m=1;for(const P of O){if(m===i)break;P!==y&&(b.push(P),m++)}}else b.push(...O.slice(0,i));return e.a.createElement("div",{className:o.a.BranchOrTagMenu},e.a.createElement(N.a,{placement:"bottomLeft",visible:Q,trigger:["click"],content:e.a.createElement("div",{className:o.a.menuWrapper},e.a.createElement(l.a,{defaultOpenKeys:["branch"],selectedKeys:[y],selectable:!1,className:o.a.menu,mode:"inline",inlineIndent:12,forceSubMenuRender:!0},e.a.createElement(l.a.SubMenu,{title:e.a.createElement("b",null,"\u5206\u652F"),key:"branch",icon:a},p.length===0?e.a.createElement(E.a,{description:"\u6682\u65E0\u5206\u652F",image:E.a.PRESENTED_IMAGE_SIMPLE}):W.map(m=>e.a.createElement(l.a.Item,{onClick:k(m),key:m},e.a.createElement("div",{className:o.a.menuItem},e.a.createElement("span",{className:o.a.checkIconWrapper},y===m?e.a.createElement(H.a,null):null),e.a.createElement("span",{className:o.a.name},m))))),e.a.createElement(l.a.Divider,null),e.a.createElement(l.a.Item,null,e.a.createElement("div",{className:o.a.fullListLinkWrapper},e.a.createElement(f.b,{to:V.Function.generateRepositoryBranchesRoute({username:G,repositoryName:K})},"\u67E5\u770B\u6240\u6709\u5206\u652F"))),e.a.createElement(l.a.Divider,null),e.a.createElement(l.a.SubMenu,{title:e.a.createElement("b",null,"\u6807\u7B7E"),key:"tag",icon:n},O.length===0?e.a.createElement(E.a,{description:"\u6682\u65E0\u6807\u7B7E",image:E.a.PRESENTED_IMAGE_SIMPLE}):b.map(m=>e.a.createElement(l.a.Item,{onClick:k(m),key:m},e.a.createElement("div",{className:o.a.menuItem},e.a.createElement("span",{className:o.a.checkIconWrapper},y===m?e.a.createElement(H.a,null):null),e.a.createElement("span",{className:o.a.name},m))))),e.a.createElement(l.a.Item,null,e.a.createElement("div",{className:o.a.fullListLinkWrapper},e.a.createElement(f.b,{to:V.Function.generateRepositoryTagsRoute({username:G,repositoryName:K})},"\u67E5\u770B\u6240\u6709\u6807\u7B7E")))))},e.a.createElement(M.a,{onClick:Z},Y,y,e.a.createElement(L.a,null))))}var x=e.a.memo(Object(I.j)(F));class d extends h.PureComponent{constructor(a){super(a);this.onButtonClick=()=>{const{visible:n}=this.state;this.setState({visible:!n})},this.onBranchOrTagClickFactory=n=>{const{onBranchOrTagClickFactory:r}=this.props;return i=>{this.setState({visible:!1});const u=r(n);u&&u(i)}},this.state={visible:!1}}render(){const{branches:a,tagNames:n,currentBranchOrTagOrCommitHash:r}=this.props,{visible:i}=this.state;return e.a.createElement(x,{visible:i,tagNames:n,branches:a,currentBranchOrTagOrCommitHash:r,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory,onButtonClick:this.onButtonClick})}}var c=d},1027:function(B,v,t){"use strict";var h=t(3),e=t(0),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},o=C,N=t(9),l=function(T,g){return e.createElement(N.a,Object(h.a)(Object(h.a)({},T),{},{ref:g,icon:o}))};l.displayName="BarcodeOutlined";var E=v.a=e.forwardRef(l)},1044:function(B,v,t){"use strict";var h=t(3),e=t(0),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},o=C,N=t(9),l=function(T,g){return e.createElement(N.a,Object(h.a)(Object(h.a)({},T),{},{ref:g,icon:o}))};l.displayName="BranchesOutlined";var E=v.a=e.forwardRef(l)},1083:function(B,v,t){B.exports={Commits:"Style_Commits__2OB1b",infoWrapper:"Style_infoWrapper__1B-0-",path:"Style_path__3KqyH",timeLineWrapper:"Style_timeLineWrapper__3aFXu",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__MQq-F"}},1403:function(B,v,t){"use strict";t.r(v),t.d(v,"default",function(){return x});var h=t(0),e=t.n(h),C=t(1083),o=t.n(C),N=t(947),l=t(101),E=t(349),M=t(46),T=t(48),g=t(1025);class j extends h.PureComponent{constructor(){super(...arguments);this.onBranchOrTagClickFactory=c=>()=>{const{history:s,match:{params:{username:a,repositoryName:n,path:r}}}=this.props;return s.replace(T.Function.generateRepositoryCommitsRoute({username:a,repositoryName:n,commitHash:c,path:r}))}}render(){const{match:{params:{commitHash:c}},branches:s,tagNames:a}=this.props;let n="";if(c===void 0)for(const r of s)r.isDefault&&(n=r.name);return e.a.createElement(g.a,{branches:s,tagNames:a,currentBranchOrTagOrCommitHash:c||n,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory})}}var R=Object(M.j)(j);function z(d){const{branches:c,tagNames:s,loading:a,commits:n,path:r,repository:i,repository:{name:u},onLoadMoreButtonClick:p}=d;return e.a.createElement("div",{className:o.a.Commits},e.a.createElement(N.a,{spinning:a},e.a.createElement("div",{className:o.a.infoWrapper},e.a.createElement(R,{branches:c,tagNames:s}),typeof r=="string"?e.a.createElement("div",{className:o.a.path},u,"/",r):null),e.a.createElement("div",{className:o.a.timeLineWrapper},e.a.createElement(E.a,{commits:n,repository:i})),e.a.createElement("div",{className:o.a.loadMoreButtonWrapper},e.a.createElement(l.a,{disabled:a,loading:a,onClick:p},"\u52A0\u8F7D\u66F4\u65E9\u7684\u63D0\u4EA4\u5386\u53F2"))))}var A=e.a.memo(z),S=t(27),D=t(339),H=t(96),L,V=typeof L!="undefined"?L:d=>{throw new Error('Dynamic require of "'+d+'" is not supported')},f=(d,c,s)=>new Promise((a,n)=>{var r=p=>{try{u(s.next(p))}catch(O){n(O)}},i=p=>{try{u(s.throw(p))}catch(O){n(O)}},u=p=>p.done?a(p.value):Promise.resolve(p.value).then(r,i);u((s=s.apply(d,c)).next())});const I=class extends h.PureComponent{constructor(d){super(d);this.setStatePromise=Object(H.promisify)(this.setState),this.init=()=>f(this,null,function*(){yield this.setStatePromise({branches:[],tagNames:[],commits:[]})}),this.loadBranches=()=>f(this,null,function*(){const{match:{params:{username:c,repositoryName:s}}}=this.props,a=yield S.j.branches({username:c,name:s});if(a!==null){const{branches:n}=a;yield this.setStatePromise({branches:n})}}),this.loadTagNames=()=>f(this,null,function*(){const{match:{params:{username:c,repositoryName:s}}}=this.props,a=yield S.j.tagNames({username:c,name:s});if(a!==null){const{tagNames:n}=a;yield this.setStatePromise({tagNames:n})}}),this.loadMoreCommits=()=>f(this,null,function*(){const{match:{params:{username:c,repositoryName:s,commitHash:a,path:n}}}=this.props;let r;const{commits:i}=this.state;if(typeof n=="string"?r=yield S.j.fileCommitHistory({username:c,name:s},n,a,i.length,I.COMMIT_AMOUNT_PER_PAGE):r=yield S.j.commitHistory({username:c,name:s},a,i.length,I.COMMIT_AMOUNT_PER_PAGE),r!==null){const{commits:u}=r;u.length===0?D.a.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u63D0\u4EA4\u5386\u53F2"}):yield this.setStatePromise({commits:[...i,...u]})}}),this.onLoadMoreButtonClick=()=>f(this,null,function*(){yield this.setStatePromise({loading:!0}),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1})}),this.state={branches:[],tagNames:[],loading:!1,commits:[]}}componentDidMount(){return f(this,null,function*(){yield this.init(),yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadBranches(),this.loadTagNames()]),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1})})}componentDidUpdate(d,c,s){return f(this,null,function*(){const{match:{params:{username:a,repositoryName:n,commitHash:r}}}=this.props,{match:{params:{username:i,repositoryName:u,commitHash:p}}}=d;a!==i||n!==u?yield this.componentDidMount():r!==p&&(yield this.setStatePromise({loading:!0,commits:[]}),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1}))})}render(){const{branches:d,loading:c,commits:s,tagNames:a}=this.state,{match:{params:{repositoryName:n,path:r,username:i}}}=this.props;return e.a.createElement(A,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:d,loading:c,commits:s,tagNames:a,path:r,repository:{username:i,name:n}})}};let F=I;F.COMMIT_AMOUNT_PER_PAGE=50;var x=Object(M.j)(F)}}]);

//# sourceMappingURL=30.ce211c63.chunk.js.map