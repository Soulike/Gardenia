(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[5],{1115:function(c,m,t){c.exports={Profile:"Style_Profile__1P2aC",item:"Style_item__1F9QO",form:"Style_form__1PS4O",inputWrapper:"Style_inputWrapper__fOuXC",saveButtonWrapper:"Style_saveButtonWrapper__2AiWe",emailForm:"Style_emailForm__7P4eQ"}},1116:function(c,m,t){c.exports={Nickname:"Style_Nickname__3gWvC",form:"Style_form__3g0-l",inputWrapper:"Style_inputWrapper__3jj-P",saveButtonWrapper:"Style_saveButtonWrapper__3Sif2"}},1117:function(c,m,t){c.exports={Email:"Style_Email__2JMj1",form:"Style_form__2tgBD",inputWrapper:"Style_inputWrapper__3g6em",emailInput:"Style_emailInput__3T16m",verificationCodeInput:"Style_verificationCodeInput__1vRUB",getVerificationCodeButton:"Style_getVerificationCodeButton__3OBFz",saveButtonWrapper:"Style_saveButtonWrapper__1JiaX"}},1403:function(c,m,t){"use strict";t.r(m),t.d(m,"default",function(){return w});var v=t(0),a=t.n(v),S=t(1115),E=t.n(S),y=t(996),g=t(993),P=t(970),B=t(279),M=t(1116),I=t.n(M),x=t(991),k=t(174),D=t(962),A=t(103),p=t(151);function L(u){const{nickname:n,loading:e,onNicknameInputChange:i,onNicknameSubmit:l}=u;return a.a.createElement("div",{className:I.a.Nickname},a.a.createElement(x.a,null,"\u6635\u79F0"),a.a.createElement("div",{className:I.a.form},a.a.createElement("div",{className:I.a.inputWrapper},a.a.createElement(k.a,{title:p.c.Profile.NICKNAME,trigger:"focus"},a.a.createElement(D.a,{onChange:i,value:n,disabled:e}))),a.a.createElement("div",{className:I.a.saveButtonWrapper},a.a.createElement(A.a,{type:"primary",onClick:l,loading:e,disabled:e},"\u4FDD\u5B58"))))}var G=a.a.memo(L),O=t(98),T=t(354),h=t(349),W=(u,n,e)=>new Promise((i,l)=>{var s=o=>{try{r(e.next(o))}catch(d){l(d)}},f=o=>{try{r(e.throw(o))}catch(d){l(d)}},r=o=>o.done?i(o.value):Promise.resolve(o.value).then(s,f);r((e=e.apply(u,n)).next())});class b extends v.PureComponent{constructor(n){super(n);this.setStatePromise=Object(O.promisify)(this.setState),this.onNicknameInputChange=e=>W(this,null,function*(){yield this.setStatePromise({nickname:e.target.value})}),this.onNicknameSubmit=()=>W(this,null,function*(){const{nickname:e}=this.state;p.b.Profile.nickname(e)?(yield this.setStatePromise({loading:!0}),(yield T.a.setNickname(e))!==null&&h.a.success({message:"\u6635\u79F0\u4FEE\u6539\u6210\u529F"}),yield this.setStatePromise({loading:!1})):h.a.warn({message:p.a.Profile.NICKNAME,description:p.c.Profile.NICKNAME})}),this.state={nickname:"",loading:!1}}componentDidUpdate(n,e,i){return W(this,null,function*(){const{defaultNickname:l}=this.props,{defaultNickname:s}=n;l!==s&&l!==void 0&&(yield this.setStatePromise({nickname:l}))})}render(){const{nickname:n,loading:e}=this.state,{loadingDefaultNickname:i}=this.props;return a.a.createElement(G,{nickname:n,loading:e||!!i,onNicknameInputChange:this.onNicknameInputChange,onNicknameSubmit:this.onNicknameSubmit})}}var K=b,U=t(1117),C=t.n(U);function j(u){const{email:n,loading:e,onEmailInputChange:i,onEmailSubmit:l,disableGetVerificationCodeButton:s,getVerificationCodeButtonText:f,onGetVerificationCodeButtonClick:r,onVerificationCodeInputChange:o,verificationCode:d}=u;return a.a.createElement("div",{className:C.a.Email},a.a.createElement(x.a,null,"\u90AE\u7BB1"),a.a.createElement("div",{className:C.a.form},a.a.createElement("div",{className:C.a.inputWrapper},a.a.createElement(D.a,{type:"email",onChange:i,value:n,disabled:e,className:C.a.emailInput}),a.a.createElement(D.a,{type:"text",onChange:o,value:d,placeholder:"\u90AE\u7BB1\u9A8C\u8BC1\u7801",addonAfter:a.a.createElement(A.a,{type:"link",size:"small",disabled:s||e,className:C.a.getVerificationCodeButton,onClick:r},f),className:C.a.verificationCodeInput})),a.a.createElement("div",{className:C.a.saveButtonWrapper},a.a.createElement(A.a,{type:"primary",onClick:l,loading:e,disabled:e},"\u4FDD\u5B58"))))}var R=a.a.memo(j),N=(u,n,e)=>new Promise((i,l)=>{var s=o=>{try{r(e.next(o))}catch(d){l(d)}},f=o=>{try{r(e.throw(o))}catch(d){l(d)}},r=o=>o.done?i(o.value):Promise.resolve(o.value).then(s,f);r((e=e.apply(u,n)).next())});const{Profile:J}=p.b;class z extends v.PureComponent{constructor(n){super(n);this.setStatePromise=Object(O.promisify)(this.setState),this.onEmailInputChange=e=>N(this,null,function*(){yield this.setStatePromise({email:e.target.value})}),this.onVerificationCodeInputChange=e=>N(this,null,function*(){yield this.setStatePromise({verificationCode:e.target.value})}),this.onGetVerificationCodeButtonClick=()=>N(this,null,function*(){const e=30,{getVerificationCodeButtonText:i,email:l}=this.state;if(!J.email(l))h.a.warn({message:p.a.Profile.EMAIL});else{yield this.setStatePromise({disableGetVerificationCodeButton:!0});let s=0;const f=setInterval(()=>{s++,this.setState({getVerificationCodeButtonText:`${e-s} \u79D2\u540E\u518D\u83B7\u53D6`})},1e3),r=setTimeout(()=>{clearInterval(f),this.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:i})},e*1e3);(yield T.a.sendSetEmailVerificationCodeToEmail(l))!==null?h.a.success({message:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F",description:`\u8BF7\u5230 ${l} \u67E5\u770B`}):(clearInterval(f),clearTimeout(r),yield this.setStatePromise({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:i}))}}),this.onEmailSubmit=()=>N(this,null,function*(){const{email:e,verificationCode:i}=this.state;p.b.Account.verificationCode(i)?p.b.Profile.email(e)?(yield this.setStatePromise({loading:!0}),(yield T.a.setEmail(e,i))!==null&&(h.a.success({message:"\u90AE\u7BB1\u4FEE\u6539\u6210\u529F"}),yield this.setStatePromise({verificationCode:""})),yield this.setStatePromise({loading:!1})):h.a.warn({message:p.a.Profile.EMAIL}):h.a.warn({message:p.a.Account.VERIFICATION_CODE})}),this.state={email:"",verificationCode:"",getVerificationCodeButtonText:"\u83B7\u53D6\u9A8C\u8BC1\u7801",disableGetVerificationCodeButton:!1,loading:!1}}componentDidUpdate(n,e,i){return N(this,null,function*(){const{defaultEmail:l}=this.props,{defaultEmail:s}=n;l!==s&&l!==void 0&&(yield this.setStatePromise({email:l}))})}render(){const{loadingDefaultEmail:n}=this.props,{email:e,loading:i,verificationCode:l,disableGetVerificationCodeButton:s,getVerificationCodeButtonText:f}=this.state;return a.a.createElement(R,{email:e,loading:i||!!n,disableGetVerificationCodeButton:s,getVerificationCodeButtonText:f,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,onVerificationCodeInputChange:this.onVerificationCodeInputChange,verificationCode:l,onEmailInputChange:this.onEmailInputChange,onEmailSubmit:this.onEmailSubmit})}}var Q=z,V=t(1);function X(u){const{defaultNickname:n,defaultEmail:e,loading:i}=u;return a.a.createElement("div",{className:E.a.Profile},a.a.createElement(y.a,null,"\u4E2A\u4EBA\u8D44\u6599"),a.a.createElement("div",{className:E.a.item},a.a.createElement(K,{defaultNickname:n,loadingDefaultNickname:i})),a.a.createElement("div",{className:E.a.item},a.a.createElement(Q,{defaultEmail:e,loadingDefaultEmail:i})),a.a.createElement("div",{className:E.a.item},a.a.createElement(g.a,null,"\u5BC6\u7801"),a.a.createElement(P.a,{type:"info",showIcon:!0,message:a.a.createElement("div",null,"\u524D\u5F80",a.a.createElement(B.a,{to:V.d[V.b.CHANGE_PASSWORD]},"\u4FEE\u6539\u5BC6\u7801\u9875\u9762"),"\u4FEE\u6539\u5BC6\u7801")})))}var $=a.a.memo(X),H=t(27),_=t(47),Y=t(134),F=(u,n,e)=>new Promise((i,l)=>{var s=o=>{try{r(e.next(o))}catch(d){l(d)}},f=o=>{try{r(e.throw(o))}catch(d){l(d)}},r=o=>o.done?i(o.value):Promise.resolve(o.value).then(s,f);r((e=e.apply(u,n)).next())});class Z extends v.PureComponent{constructor(n){super(n);this.setStatePromise=Object(O.promisify)(this.setState),this.loadProfile=()=>F(this,null,function*(){const e=yield H.g.get();if(e!==null)yield this.setStatePromise({currentProfile:e});else{const{history:i}=this.props;return i.replace(V.d[V.b.NOT_FOUND])}}),this.state={currentProfile:new Y.g("","","",""),loading:!1}}componentDidMount(){return F(this,null,function*(){yield this.setStatePromise({loading:!0}),yield this.loadProfile(),yield this.setStatePromise({loading:!1})})}render(){const{currentProfile:{nickname:n,email:e},loading:i}=this.state;return a.a.createElement($,{defaultNickname:n,defaultEmail:e,loading:i})}}var w=Object(_.j)(Z)},991:function(c,m,t){"use strict";var v=t(0),a=t.n(v),S=t(992),E=t.n(S);function y(g){const{children:P,required:B}=g;return a.a.createElement("div",{className:E.a.InputLabel},P,a.a.createElement("span",{className:E.a.requiredSign},B?" *":""))}m.a=a.a.memo(y)},992:function(c,m,t){c.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},993:function(c,m,t){"use strict";var v=t(991);t.d(m,"a",function(){return v.a})},995:function(c,m,t){c.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},996:function(c,m,t){"use strict";t.d(m,"a",function(){return g});var v=t(0),a=t.n(v),S=t(995),E=t.n(S);function y(P){const{children:B}=P;return a.a.createElement("h2",{className:E.a.SettingsTitle},B)}var g=a.a.memo(y)}}]);

//# sourceMappingURL=5.febb014e.chunk.js.map