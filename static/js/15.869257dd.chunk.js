(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[15],{1038:function(e,a,t){e.exports={Options:"Style_Options__162uQ",itemWrapper:"Style_itemWrapper__3pX3S"}},1039:function(e,a,t){e.exports={RepositoryName:"Style_RepositoryName__1WTF0",label:"Style_label__K0aLr",input:"Style_input__LnETk"}},1040:function(e,a,t){e.exports={SettingLabel:"Style_SettingLabel__27G0I"}},1041:function(e,a,t){e.exports={Description:"Style_Description__3N46g",textarea:"Style_textarea__324Su",buttonWrapper:"Style_buttonWrapper__1ug3r"}},1042:function(e,a,t){},1043:function(e,a,t){e.exports={CriticalOperationConfirmModal:"Style_CriticalOperationConfirmModal__1LREa",content:"Style_content__15AF6",warningWrapper:"Style_warningWrapper__1Wnxv",input:"Style_input__dIid9"}},1256:function(e,a,t){"use strict";t.r(a);var n=t(4),o=t.n(n),r=t(52),s=t(70),i=t(273),l=t(272),c=t(274),u=t(0),m=t.n(u),p=t(1038),d=t.n(p),h=t(999),b=(t(101),t(14)),g=(t(991),t(992)),f=(t(417),t(127)),y=(t(950),t(951)),v=t(1039),C=t.n(v),w=t(1040),E=t.n(w);var k=m.a.memo((function(e){var a=e.children;return m.a.createElement("div",{className:E.a.SettingLabel},a)}));function S(e,a){return 0===e.length||a}var N=m.a.memo((function(e){var a=e.repositoryName,t=e.onRenameConfirm,n=e.onRepositoryNameInputChange,o=e.submitting;return m.a.createElement("div",{className:C.a.RepositoryName},m.a.createElement("label",{className:C.a.label},m.a.createElement(k,null,"\u4ed3\u5e93\u540d"),m.a.createElement(y.a,{className:C.a.input,value:a,onChange:n,disabled:o}),m.a.createElement(g.a,{title:"\u91cd\u547d\u540d\u4ed3\u5e93\u4f1a\u5bfc\u81f4\u539f\u4ed3\u5e93\u7f51\u5740\u4e0e\u514b\u9686\u8def\u5f84\u5931\u6548\uff0c\u786e\u5b9a\u7ee7\u7eed\uff1f",onConfirm:t},m.a.createElement(f.a,{className:C.a.button,loading:o,disabled:S(a,o)},"\u91cd\u547d\u540d"))))})),x=t(94),O=t(115),P=t(277),_=function(e){function a(e){var t;Object(r.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onRepositoryNameInputChange=function(e){t.setState({repositoryName:e.target.value})},t.onRenameConfirm=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.validateParameters()){e.next=5;break}return t.setState({submitting:!0}),e.next=4,o.a.awrap(t.submit());case 4:t.setState({submitting:!1});case 5:case"end":return e.stop()}}))},t.validateParameters=function(){return 0!==t.state.repositoryName.length||(b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u80fd\u4e3a\u7a7a"}),!1)},t.submit=function(){var e,a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.state.repositoryName,a=t.props.match.params.repository,n.next=4,o.a.awrap(P.a.setName({name:a},{name:e}));case 4:null!==n.sent&&t.onSubmitSuccess();case 6:case"end":return n.stop()}}))},t.onSubmitSuccess=function(){b.a.success({message:"\u4ed3\u5e93\u91cd\u547d\u540d\u6210\u529f"});var e=t.props.history,a=t.props.match.params.username,n=t.state.repositoryName;e.replace(O.b.generateRepositorySettingsOptionsRoute({username:a,repository:n}))};var n=e.match.params.repository;return t.state={repositoryName:n,submitting:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.repositoryName,t=e.submitting;return m.a.createElement(N,{repositoryName:a,onRenameConfirm:this.onRenameConfirm,onRepositoryNameInputChange:this.onRepositoryNameInputChange,submitting:t})}}]),a}(u.PureComponent),R=Object(x.f)(_),I=(t(972),t(975)),M=t(1041),j=t.n(M);var V=m.a.memo((function(e){var a=e.description,t=e.onSubmit,n=e.onTextareaChange,o=e.loading,r=e.submitting;return m.a.createElement("div",{className:j.a.Description},m.a.createElement("label",null,m.a.createElement(k,null,"\u4ed3\u5e93\u63cf\u8ff0"),m.a.createElement(I.a,{spinning:o},m.a.createElement(y.a.TextArea,{disabled:o||r,value:a,className:j.a.textarea,onChange:n}))),m.a.createElement("div",{className:j.a.buttonWrapper},m.a.createElement(f.a,{loading:r,disabled:o||r,className:j.a.button,onClick:t},"\u786e\u5b9a")))})),L=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onTextareaChange=function(e){t.setState({description:e.target.value})},t.onSubmit=function(){var e,a,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.state.description,a=t.props.match.params.repository,t.setState({submitting:!0}),r.next=5,o.a.awrap(P.a.setDescription({name:a,description:e}));case 5:n=r.sent,t.setState({submitting:!1}),null!==n&&b.a.success({message:"\u4ed3\u5e93\u63cf\u8ff0\u4fee\u6539\u6210\u529f"});case 8:case"end":return r.stop()}}))},t.state={description:"",submitting:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,a,t){var n=this.props,o=n.repository.description,r=n.loading;e.loading&&r&&this.setState({description:o})}},{key:"render",value:function(){var e=this.props.loading,a=this.state,t=a.description,n=a.submitting;return m.a.createElement(V,{submitting:n,loading:e,description:t,onTextareaChange:this.onTextareaChange,onSubmit:this.onSubmit})}}]),a}(u.PureComponent),T=Object(x.f)(L),W=(t(982),t(984)),B=(t(418),t(23)),D=t(1042),F=t.n(D),A=(t(420),t(283)),H=t(1043),J=t.n(H);var U=m.a.memo((function(e){var a=e.warning,t=e.validateText,n=e.password,o=e.validateInputPlaceholder,r=e.onValidateInputChange,s=e.onPasswordInputChange,i=e.visible,l=e.onOk,c=e.onCancel,u=e.title,p=e.confirmLoading;return m.a.createElement(A.a,{confirmLoading:p,title:u,className:J.a.CriticalOperationConfirmModal,visible:i,onOk:l,onCancel:c},m.a.createElement("div",{className:J.a.content},m.a.createElement("div",{className:J.a.warningWrapper},a),m.a.createElement(y.a,{className:J.a.input,value:t,onChange:r,placeholder:o,autoFocus:!0}),m.a.createElement(y.a,{className:J.a.input,placeholder:"\u8d26\u6237\u5bc6\u7801",type:"password",value:n,onChange:s})))}));var X=m.a.memo((function(e){var a=e.loading,t=e.isPublic,n=e.onSwitchChange,o=e.modalRepositoryName,r=e.modalPassword,s=e.onModalRepositoryNameInputChange,i=e.onModalPasswordInputChange,l=e.modalVisible,c=e.onModalOk,u=e.onModalCancel;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:F.a.AccessibilitySwitch},m.a.createElement(k,null,"\u662f\u5426\u516c\u5f00"),m.a.createElement(W.a,{loading:a,checked:t,disabled:a,onChange:n,checkedChildren:m.a.createElement(m.a.Fragment,null,m.a.createElement(B.a,{type:"unlock"})," \u516c\u5f00"),unCheckedChildren:m.a.createElement(m.a.Fragment,null,m.a.createElement(B.a,{type:"lock"})," \u79c1\u6709")})),m.a.createElement(U,{confirmLoading:a,title:"\u53ef\u89c1\u6027\u5207\u6362\u786e\u8ba4",warning:m.a.createElement("strong",null,"\u5c06\u4ed3\u5e93\u6539\u4e3a\u516c\u6709\u5c06\u4f1a\u8ba9",m.a.createElement("span",{style:{color:"red"}},"\u6240\u6709\u4eba"),"\u770b\u5230\u4ed3\u5e93\u5185\u7684\u4ee3\u7801\uff0c\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u672c\u4ed3\u5e93\u7684\u540d\u5b57\u548c\u60a8\u7684\u5bc6\u7801\u4ee5\u786e\u8ba4\u64cd\u4f5c\u3002"),validateInputPlaceholder:"\u4ed3\u5e93\u540d",validateText:o,password:r,visible:l,onPasswordInputChange:i,onValidateInputChange:s,onOk:c,onCancel:u}))})),G=t(162),K=t(275),Q=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onSwitchChange=function(e){var a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=t.state.isPublic)||!e){n.next=5;break}t.setState({modalVisible:!0}),n.next=8;break;case 5:if(!a||e){n.next=8;break}return n.next=8,o.a.awrap(t.setIsPublic(e));case 8:case"end":return n.stop()}}))},t.onModalRepositoryNameInputChange=function(e){t.setState({modalRepositoryName:e.target.value})},t.onModalPasswordInputChange=function(e){t.setState({modalPassword:e.target.value})},t.onModalOk=function(){var e,a,n,r,s,i,l,c,u;return o.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=t.props.match.params,a=e.repository,n=e.username,r=t.state,s=r.modalRepositoryName,i=r.modalPassword,l=r.isPublic,a===s){m.next=6;break}b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u6b63\u786e"}),m.next=19;break;case 6:return c=K.a.calculateHash(n,i),m.next=9,o.a.awrap(G.a.checkPassword({hash:c}));case 9:if(null===(u=m.sent)){m.next=19;break}if(!u.isCorrect){m.next=18;break}return m.next=15,o.a.awrap(t.setIsPublic(!l));case 15:t.setState({modalVisible:!1,modalRepositoryName:"",modalPassword:""}),m.next=19;break;case 18:b.a.warn({message:"\u5bc6\u7801\u4e0d\u6b63\u786e"});case 19:case"end":return m.stop()}}))},t.onModalCancel=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({modalVisible:!1,modalRepositoryName:"",modalPassword:""});case 1:case"end":return e.stop()}}))},t.setIsPublic=function(e){var a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.props.match.params.repository,t.state.isPublic===e){n.next=9;break}return t.setState({submitting:!0}),n.next=6,o.a.awrap(G.e.setIsPublic({name:a,isPublic:e}));case 6:null!==n.sent&&window.location.reload(),t.setState({submitting:!1});case 9:case"end":return n.stop()}}))},t.state={submitting:!1,isPublic:!0,modalRepositoryName:"",modalPassword:"",modalVisible:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,a,t){var n=this.props,o=n.repository.isPublic,r=n.loading;e.loading&&r&&this.setState({isPublic:o})}},{key:"render",value:function(){var e=this.state,a=e.submitting,t=e.isPublic,n=e.modalRepositoryName,o=e.modalPassword,r=e.modalVisible,s=this.props.loading;return m.a.createElement(X,{loading:a||s,isPublic:t,modalRepositoryName:n,modalPassword:o,modalVisible:r,onSwitchChange:this.onSwitchChange,onModalOk:this.onModalOk,onModalCancel:this.onModalCancel,onModalPasswordInputChange:this.onModalPasswordInputChange,onModalRepositoryNameInputChange:this.onModalRepositoryNameInputChange})}}]),a}(u.PureComponent),q=Object(x.f)(Q),z=(t(949),t(948));var Y=m.a.memo((function(e){var a=e.title,t=e.description,n=e.onButtonClick;return m.a.createElement(z.a.Item,{extra:m.a.createElement(f.a,{type:"danger",onClick:n},a)},m.a.createElement(z.a.Item.Meta,{title:a,description:t}))}));var Z=m.a.memo((function(e){var a=e.onButtonClick,t=e.modalRepositoryName,n=e.modalPassword,o=e.onModalRepositoryNameInputChange,r=e.onModalPasswordInputChange,s=e.onModalOk,i=e.onModalCancel,l=e.modalVisible,c=e.modalConfirmLoading;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Y,{title:"\u5220\u9664\u4ed3\u5e93",description:"\u5220\u9664\u4ed3\u5e93\u7684\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u3002",onButtonClick:a}),m.a.createElement(U,{warning:m.a.createElement("strong",null,"\u5982\u679c\u4ed3\u5e93\u88ab\u5220\u9664\uff0c\u60a8\u5c06\u4e22\u5931\u4ed3\u5e93\u7684\u6587\u4ef6\u3001\u63d0\u4ea4\u8bb0\u5f55\u7b49",m.a.createElement("span",{style:{color:"red"}},"\u6240\u6709\u4fe1\u606f"),"\uff0c\u4e14\u5220\u9664\u6210\u529f\u540e\u6ca1\u6709\u6062\u590d\u7684\u53ef\u80fd\u3002\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u672c\u4ed3\u5e93\u7684\u540d\u5b57\u548c\u60a8\u7684\u5bc6\u7801\u4ee5\u786e\u8ba4\u64cd\u4f5c\u3002"),validateInputPlaceholder:"\u4ed3\u5e93\u7684\u540d\u5b57",title:"\u5220\u9664\u4ed3\u5e93\u786e\u8ba4",validateText:t,password:n,onValidateInputChange:o,onPasswordInputChange:r,onOk:s,onCancel:i,visible:l,confirmLoading:c}))})),$=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onButtonClick=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({modalRepositoryName:"",modalPassword:"",modalVisible:!0});case 1:case"end":return e.stop()}}))},t.onModalRepositoryNameInputChange=function(e){t.setState({modalRepositoryName:e.target.value})},t.onModalPasswordInputChange=function(e){t.setState({modalPassword:e.target.value})},t.onModalOk=function(){var e,a,n,r,s,i,l,c,u,m;return o.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=t.props,a=e.match.params,n=a.repository,r=a.username,s=e.history,i=t.state,l=i.modalRepositoryName,c=i.modalPassword,n===l){p.next=6;break}b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u6b63\u786e"}),p.next=22;break;case 6:return u=K.a.calculateHash(r,c),t.setState({modalConfirmLoading:!0}),p.next=10,o.a.awrap(G.a.checkPassword({hash:u}));case 10:if(null===(m=p.sent)){p.next=21;break}if(!m.isCorrect){p.next=20;break}return p.next=16,o.a.awrap(G.d.del({name:n}));case 16:null!==p.sent&&(b.a.success({message:"\u4ed3\u5e93\u5220\u9664\u6210\u529f"}),t.setState({modalVisible:!1}),s.replace(O.b.generatePersonalCenterRoute({username:r}))),p.next=21;break;case 20:b.a.warn({message:"\u5bc6\u7801\u4e0d\u6b63\u786e"});case 21:t.setState({modalConfirmLoading:!1});case 22:case"end":return p.stop()}}))},t.onModalCancel=function(){t.setState({modalVisible:!1})},t.state={modalRepositoryName:"",modalPassword:"",modalVisible:!1,modalConfirmLoading:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.modalConfirmLoading,t=e.modalVisible,n=e.modalPassword,o=e.modalRepositoryName;return m.a.createElement(Z,{onButtonClick:this.onButtonClick,modalConfirmLoading:a,modalVisible:t,modalPassword:n,modalRepositoryName:o,onModalOk:this.onModalOk,onModalCancel:this.onModalCancel,onModalPasswordInputChange:this.onModalPasswordInputChange,onModalRepositoryNameInputChange:this.onModalRepositoryNameInputChange})}}]),a}(u.PureComponent),ee=Object(x.f)($);var ae=m.a.memo((function(e){var a=e.onButtonClick;return m.a.createElement(Y,{title:"\u8f6c\u79fb\u4ed3\u5e93\u6240\u6709\u4eba",description:"\u5c06\u4ed3\u5e93\u6240\u6709\u4eba\u8f6c\u79fb\u4e3a\u5176\u4ed6\u4eba\u3002",onButtonClick:a})})),te=function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(s)))).onButtonClick=function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement(ae,{onButtonClick:this.onButtonClick})}}]),a}(u.PureComponent),ne=Object(x.f)(te);var oe=m.a.memo((function(){return m.a.createElement(z.a,{bordered:!0,split:!0},m.a.createElement(ne,null),m.a.createElement(ee,null))}));var re=m.a.memo((function(e){var a=e.repository,t=e.loading;return m.a.createElement("div",{className:d.a.Options},m.a.createElement(h.a,null,"\u9009\u9879"),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(R,null)),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(q,{repository:a,loading:t})),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(T,{repository:a,loading:t})),m.a.createElement(h.a,null,m.a.createElement("span",{style:{color:"red"}},"\u5371\u9669\u533a")),m.a.createElement(oe,null))})),se=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).loadRepository=function(){var e,a,n,r;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=t.props.match.params,a=e.repository,n=e.username,s.next=3,o.a.awrap(P.a.repository({username:n},{name:a}));case 3:null!==(r=s.sent)&&t.setState({repository:r});case 5:case"end":return s.stop()}}))},t.state={repository:new K.e("","","",!0),loading:!0},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,o.a.awrap(this.loadRepository());case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,a=e.repository,t=e.loading;return m.a.createElement(re,{repository:a,loading:t})}}]),a}(u.PureComponent),ie=Object(x.f)(se);t.d(a,"default",(function(){return ie}))},990:function(e,a,t){e.exports={SettingsTitle:"Style_SettingsTitle__387Xe"}},999:function(e,a,t){"use strict";var n=t(0),o=t.n(n),r=t(990),s=t.n(r);var i=o.a.memo((function(e){var a=e.children;return o.a.createElement("h2",{className:s.a.SettingsTitle},a)}));t.d(a,"a",(function(){return i}))}}]);
//# sourceMappingURL=15.869257dd.chunk.js.map