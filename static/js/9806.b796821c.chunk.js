"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[9806],{18527:function(E,l,t){t.d(l,{Z:function(){return e.Z}});var e=t(12030)},50732:function(E,l,t){t.r(l),t.d(l,{default:function(){return b}});var e=t(89526),u={ChangePassword:"Style_ChangePassword__23jPI",loginTip:"Style_loginTip__eTad-",form:"Style_form__yfd5N",inputWrapper:"Style_inputWrapper__B1Vw4",logo:"Style_logo__5N58d",button:"Style_button__-QUtu"},B=t(49004),A=t(565),v=t(18527),d=t(32014),p=t(30592),P=t(54846),D=t(15675),Z=t(26190),w=t(59807),T=t(7320),g=t(36393);function R(V){const{username:m,password:n,repeatPassword:o,verificationCode:a,getVerificationCodeButtonText:s,onPasswordChange:i,onUsernameChange:r,onRepeatPasswordChange:c,onVerificationCodeChange:h,onSubmit:y,onGetVerificationCodeButtonClick:M,getVerificationCodeButtonDisabled:H,loading:f}=V;return e.createElement("main",{className:u.ChangePassword},e.createElement("form",{action:"#",className:u.form,onSubmit:y},e.createElement("img",{className:u.logo,src:B.Z,alt:"web_developer_logo"}),e.createElement("div",{className:u.loginTip},"\u4E0D\u9700\u8981\u4FEE\u6539\u5BC6\u7801\uFF1F",e.createElement(A.rU,{to:g.yt[g.DV.LOGIN]},"\u70B9\u6B64\u767B\u5F55")),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u7528\u6237\u540D"),e.createElement(d.Z,{type:"text",size:"large",autoFocus:!0,value:m,onChange:r,prefix:e.createElement(P.Z,null),disabled:f})),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u65B0\u5BC6\u7801"),e.createElement(d.Z,{type:"password",size:"large",value:n,onChange:i,prefix:e.createElement(D.Z,null),disabled:f}),e.createElement(w.Z,null,"\u4E3A\u4E86\u60A8\u7684\u8D26\u6237\u5B89\u5168\uFF0C\u5BC6\u7801\u8981\u6C42 ",T.Q)),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u91CD\u590D\u65B0\u5BC6\u7801"),e.createElement(d.Z,{type:"password",size:"large",value:o,onChange:c,prefix:e.createElement(D.Z,null),disabled:f})),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u90AE\u7BB1\u9A8C\u8BC1\u7801"),e.createElement(d.Z,{type:"text",size:"large",value:a,onChange:h,prefix:e.createElement(Z.Z,null),disabled:f,addonAfter:e.createElement(p.Z,{type:"link",onClick:M,disabled:H||f},s)})),e.createElement(p.Z,{htmlType:"submit",className:u.button,size:"large",type:"primary",block:!0,disabled:f,loading:f},"\u4FEE\u6539\u5BC6\u7801")))}var I=e.memo(R),O=t(62371),F=t(10330),S=t(43245),C=t(24315),x=t(60269),z=t(60353),L=t(92070),U=t(65092),N=(V,m,n)=>new Promise((o,a)=>{var s=c=>{try{r(n.next(c))}catch(h){a(h)}},i=c=>{try{r(n.throw(c))}catch(h){a(h)}},r=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,i);r((n=n.apply(V,m)).next())});class G extends e.PureComponent{constructor(m){super(m);this.setTitle=()=>{document.title=`\u4FEE\u6539\u5BC6\u7801 - ${g.A1}`},this.onUsernameChange=n=>{this.setState({username:n.target.value})},this.onPasswordChange=n=>{this.setState({password:n.target.value})},this.onRepeatPasswordChange=n=>{this.setState({repeatPassword:n.target.value})},this.onVerificationCodeChange=n=>{this.setState({verificationCode:n.target.value})},this.onGetVerificationCodeButtonClick=()=>N(this,null,function*(){let o=0;const{getVerificationCodeButtonText:a}=this.state,{username:s}=this.state;if(!F.username(s))C.Z.warn({message:S.id});else{this.setState({getVerificationCodeButtonDisabled:!0});const i=setInterval(()=>{o++,this.setState({getVerificationCodeButtonText:`${30-o} \u79D2\u540E\u518D\u6B21\u83B7\u53D6`})},1e3),r=setTimeout(()=>{clearInterval(i),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:a})},30*1e3);(yield O.mR.sendVerificationCodeByUsername({username:s}))!==null?C.Z.success({message:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F",description:`\u8BF7\u5230\u7528\u6237\u540D ${s} \u4F7F\u7528\u7684\u90AE\u7BB1\u4E2D\u67E5\u770B`}):(clearInterval(i),clearTimeout(r),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:a}))}}),this.onSubmit=n=>N(this,null,function*(){n.preventDefault();const{username:o,password:a,repeatPassword:s,verificationCode:i}=this.state;if(!F.username(o))C.Z.warn({message:S.id});else if(!F.password(a))C.Z.warn({message:S.Qj});else if(a!==s)C.Z.warn({message:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"});else if(!F.verificationCode(i))C.Z.warn({message:S.FF});else{this.setState({loading:!0});const r=x.mR.calculateHash(o,a);if((yield O.mR.changePassword({username:o,hash:r},i))!==null){C.Z.success({message:"\u4FEE\u6539\u5BC6\u7801\u6210\u529F",description:"\u8BF7\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u5F55"});const{setLoggedOut:h,history:y}=this.props;return yield h(),y.push(g.yt[g.DV.LOGIN])}this.setState({loading:!1})}}),this.state={username:"",password:"",repeatPassword:"",verificationCode:"",getVerificationCodeButtonText:"\u83B7\u53D6\u9A8C\u8BC1\u7801",getVerificationCodeButtonDisabled:!1,loading:!1}}componentDidMount(){this.setTitle()}render(){const{username:m,password:n,repeatPassword:o,verificationCode:a,getVerificationCodeButtonText:s,loading:i,getVerificationCodeButtonDisabled:r}=this.state;return e.createElement(I,{username:m,password:n,repeatPassword:o,verificationCode:a,onUsernameChange:this.onUsernameChange,onPasswordChange:this.onPasswordChange,onRepeatPasswordChange:this.onRepeatPasswordChange,onVerificationCodeChange:this.onVerificationCodeChange,onSubmit:this.onSubmit,getVerificationCodeButtonText:s,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,loading:i,getVerificationCodeButtonDisabled:r})}}const W={setLoggedOut:z.Action.setLoggedOutAction};var b=(0,L.$j)(null,W)((0,U.EN)(G))},43245:function(E,l,t){t.d(l,{id:function(){return e},Qj:function(){return u},FF:function(){return B}});const e="\u7528\u6237\u540D\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",u="\u5BC6\u7801\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",B="\u9A8C\u8BC1\u7801\u4E0D\u6B63\u786E"},7320:function(E,l,t){t.d(l,{i:function(){return e},Q:function(){return u}});const e="1~20 \u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u53CA\u4E0B\u5212\u7EBF",u="6 \u4F4D\u53CA\u4EE5\u4E0A"},26190:function(E,l,t){t.d(l,{Z:function(){return p}});var e=t(1413),u=t(89526),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},A=B,v=t(36593),d=function(D,Z){return u.createElement(v.Z,(0,e.Z)((0,e.Z)({},D),{},{ref:Z,icon:A}))};d.displayName="BarcodeOutlined";var p=u.forwardRef(d)}}]);

//# sourceMappingURL=9806.b796821c.chunk.js.map