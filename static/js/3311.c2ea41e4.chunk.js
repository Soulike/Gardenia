"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[3311],{1011:function(f,o,t){t.d(o,{Z:function(){return C}});var e=t(89526),a={CriticalOperationConfirmModal:"Style_CriticalOperationConfirmModal__vCdv9",content:"Style_content__0N+tT",fuckAutocomplete:"Style_fuckAutocomplete__ZZAuh",warningWrapper:"Style_warningWrapper__rNjPo",input:"Style_input__OMIJw"},l=t(13317),d=t(32014);function c(E){const{warning:I,validateText:r,password:Z,validateInputPlaceholder:F,onValidateInputChange:y,onPasswordInputChange:D,visible:M,onOk:B,onCancel:N,title:P,confirmLoading:A}=E;return e.createElement(l.Z,{confirmLoading:A,title:P,className:a.CriticalOperationConfirmModal,visible:M,onOk:B,onCancel:N,destroyOnClose:!0},e.createElement("div",{className:a.content},e.createElement("div",{className:a.fuckAutocomplete},e.createElement(d.Z,{type:"text",value:"fuck autocomplete"}),e.createElement(d.Z.Password,{value:"fuck autocomplete"})),e.createElement("div",{className:a.warningWrapper},I),e.createElement(d.Z,{className:a.input,value:r,onChange:y,placeholder:F,autoFocus:!0,autoComplete:"off"}),e.createElement(d.Z.Password,{className:a.input,placeholder:"\u8D26\u6237\u5BC6\u7801",value:Z,onChange:D,autoComplete:"off"})))}var C=e.memo(c)},2620:function(f,o,t){t.d(o,{Z:function(){return d}});var e=t(89526),a=t(39207);function l(c){const{children:C}=c;return e.createElement(a.ZP,{bordered:!0,split:!0},C)}var d=e.memo(l)},65142:function(f,o,t){t.d(o,{Z:function(){return c}});var e=t(89526),a=t(39207),l=t(30592);function d(C){const{title:E,description:I,onButtonClick:r,buttonText:Z}=C;return e.createElement(a.ZP.Item,{extra:e.createElement(l.Z,{type:"primary",danger:!0,onClick:r},Z)},e.createElement(a.ZP.Item.Meta,{title:E,description:I}))}var c=e.memo(d)},12030:function(f,o,t){t.d(o,{Z:function(){return d}});var e=t(89526),a={InputLabel:"Style_InputLabel__3UwFN",requiredSign:"Style_requiredSign__4HKr2"};function l(c){const{children:C,required:E}=c;return e.createElement("div",{className:a.InputLabel},C,e.createElement("span",{className:a.requiredSign},E?" *":""))}var d=e.memo(l)},18527:function(f,o,t){t.d(o,{Z:function(){return e.Z}});var e=t(12030)},95715:function(f,o,t){t.d(o,{Z:function(){return d}});var e=t(89526),a={SettingsTitle:"Style_SettingsTitle__2JkD4"};function l(c){const{children:C}=c;return e.createElement("h2",{className:a.SettingsTitle},C)}var d=e.memo(l)},13311:function(f,o,t){t.r(o),t.d(o,{default:function(){return X}});var e=t(89526),a={Options:"Style_Options__7waBa",itemWrapper:"Style_itemWrapper__aXQpD",dangerZoneWrapper:"Style_dangerZoneWrapper__zTHWR"},l=t(95715),d=t(2620),c=t(1011),C=t(65142),E=t(53546);function I(g){const{onButtonClick:m,modalGroupId:n,modalPassword:i,onModalGroupIdInputChange:u,onModalPasswordInputChange:v,onModalOk:S,onModalCancel:p,modalVisible:s,modalConfirmLoading:h}=g;return e.createElement(e.Fragment,null,e.createElement(C.Z,{buttonText:"\u89E3\u6563\u5C0F\u7EC4",title:"\u89E3\u6563\u5C0F\u7EC4",description:"\u89E3\u6563\u5C0F\u7EC4\u7684\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u614E\u91CD\u3002",onButtonClick:m}),e.createElement(c.Z,{warning:e.createElement(e.Fragment,null,e.createElement(E.Z,{showIcon:!0,banner:!0,type:"warning",message:"\u5C0F\u7EC4\u88AB\u89E3\u6563\u540E\u65E0\u6CD5\u6062\u590D\uFF0C\u5C0F\u7EC4\u4E0B\u7684\u4ED3\u5E93\u5C06\u6062\u590D\u65E0\u5C0F\u7EC4\u72B6\u6001"}),e.createElement(E.Z,{showIcon:!0,banner:!0,type:"info",message:"\u8BF7\u5728\u4E0B\u65B9\u8F93\u5165\u672C\u5C0F\u7EC4\u7684 ID \u548C\u60A8\u7684\u5BC6\u7801\u4EE5\u786E\u8BA4\u64CD\u4F5C"})),validateInputPlaceholder:"\u5C0F\u7EC4\u7684 ID",title:"\u89E3\u6563\u5C0F\u7EC4\u786E\u8BA4",validateText:n,password:i,onValidateInputChange:u,onPasswordInputChange:v,onOk:S,onCancel:p,visible:s,confirmLoading:h}))}var r=e.memo(I),Z=t(65092),F=t(85663),y=t(24315),D=t(62371),M=t(60269),B=t(10330),N=t(36393),P=(g,m,n)=>new Promise((i,u)=>{var v=s=>{try{p(n.next(s))}catch(h){u(h)}},S=s=>{try{p(n.throw(s))}catch(h){u(h)}},p=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,S);p((n=n.apply(g,m)).next())});class A extends e.PureComponent{constructor(m){super(m);this.setStatePromise=(0,F.promisify)(this.setState),this.onButtonClick=()=>P(this,null,function*(){yield this.initModal(),yield this.setStatePromise({modalVisible:!0})}),this.initModal=()=>P(this,null,function*(){yield this.setStatePromise({modalGroupId:"",modalPassword:""})}),this.onModalGroupIdInputChange=n=>{this.setState({modalGroupId:n.target.value})},this.onModalPasswordInputChange=n=>{this.setState({modalPassword:n.target.value})},this.onModalOk=()=>P(this,null,function*(){const{modalGroupId:n,modalPassword:i}=this.state,{match:{params:{id:u}},history:v}=this.props;if(n!==u)y.Z.warn({message:"\u5C0F\u7EC4 ID \u4E0D\u6B63\u786E"});else if(!B.password(i))y.Z.warn({message:"\u5BC6\u7801\u4E0D\u6B63\u786E"});else{yield this.setStatePromise({modalConfirmLoading:!0});const S=yield D.NZ.get();if(S!==null){const{username:p}=S,s=yield D.mR.checkPassword({hash:M.mR.calculateHash(p,i)});if(s!==null){const{isCorrect:h}=s;if(!h)y.Z.warn({message:"\u5BC6\u7801\u4E0D\u6B63\u786E"});else if((yield D.ZA.dismiss({id:Number.parseInt(u)}))!==null)return y.Z.success({message:`\u5C0F\u7EC4 #${u} \u5DF2\u89E3\u6563`}),yield this.setStatePromise({modalVisible:!1}),v.push(N.yt[N.DV.INDEX])}}else return v.replace(N.yt[N.DV.LOGIN]);yield this.setStatePromise({modalConfirmLoading:!1})}}),this.onModalCancel=()=>{this.setState({modalVisible:!1})},this.state={modalGroupId:"",modalPassword:"",modalVisible:!1,modalConfirmLoading:!1}}render(){const{modalConfirmLoading:m,modalVisible:n,modalPassword:i,modalGroupId:u}=this.state;return e.createElement(r,{onButtonClick:this.onButtonClick,modalConfirmLoading:m,modalVisible:n,modalPassword:i,modalGroupId:u,onModalOk:this.onModalOk,onModalCancel:this.onModalCancel,onModalPasswordInputChange:this.onModalPasswordInputChange,onModalGroupIdInputChange:this.onModalGroupIdInputChange})}}var V=(0,Z.EN)(A),T=t(18527),L=t(43546),W=t(32014),R=t(30592),O={ChangeName:"Style_ChangeName__A0iWU",input:"Style_input__-4DNe",button:"Style_button__ypKtE"},G=t(458);function $(g){const{groupName:m,onButtonClick:n,onGroupNameChange:i,loading:u}=g;return e.createElement("div",{className:O.ChangeName},e.createElement(T.Z,null,"\u5C0F\u7EC4\u540D"),e.createElement(L.Z,{trigger:"focus",title:G.A},e.createElement(W.Z,{disabled:u,className:O.input,value:m,onChange:i})),e.createElement(R.Z,{disabled:u,loading:u,className:O.button,onClick:n},"\u91CD\u547D\u540D"))}var x=e.memo($),H=t(62680),U=t(87318),w=(g,m,n)=>new Promise((i,u)=>{var v=s=>{try{p(n.next(s))}catch(h){u(h)}},S=s=>{try{p(n.throw(s))}catch(h){u(h)}},p=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,S);p((n=n.apply(g,m)).next())});class b extends e.PureComponent{constructor(m){super(m);this.setStatePromise=(0,F.promisify)(this.setState),this.loadGroupName=()=>w(this,null,function*(){const{match:{params:{id:n}},history:i}=this.props,u=yield D.ZA.info({id:Number.parseInt(n)});if(u!==null){const{name:v}=u;yield this.setStatePromise({groupName:v})}else return i.replace(N.yt[N.DV.NOT_FOUND])}),this.onGroupNameChange=n=>{this.setState({groupName:n.target.value})},this.onButtonClick=()=>w(this,null,function*(){const{match:{params:{id:n}}}=this.props,{groupName:i}=this.state;H.name(i)?(yield this.setStatePromise({loading:!0}),(yield D.ZA.changeName({id:Number.parseInt(n),name:i}))!==null&&(y.Z.success({message:`\u5C0F\u7EC4 #${n} \u91CD\u547D\u540D\u6210\u529F`}),setTimeout(()=>{window.location.reload()},1e3)),yield this.setStatePromise({loading:!1})):y.Z.warn({message:U.A,description:G.A})}),this.state={groupName:"",loading:!1}}componentDidMount(){return w(this,null,function*(){yield this.setStatePromise({loading:!0}),yield this.loadGroupName(),yield this.setStatePromise({loading:!1})})}render(){const{groupName:m,loading:n}=this.state;return e.createElement(x,{loading:n,groupName:m,onButtonClick:this.onButtonClick,onGroupNameChange:this.onGroupNameChange})}}var k=(0,Z.EN)(b);function K(){return e.createElement("div",{className:a.Options},e.createElement("div",{className:a.settingsWrapper},e.createElement(l.Z,null,"\u8BBE\u7F6E"),e.createElement("div",{className:a.itemWrapper},e.createElement(k,null))),e.createElement("div",{className:a.dangerZoneWrapper},e.createElement(l.Z,null,e.createElement("span",{style:{color:"red"}},"\u5371\u9669\u533A")),e.createElement(d.Z,null,e.createElement(V,null))))}var z=e.memo(K);class J extends e.PureComponent{render(){return e.createElement(z,null)}}var X=J},87318:function(f,o,t){t.d(o,{A:function(){return e}});const e="\u5C0F\u7EC4\u540D\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"},10330:function(f,o,t){t.r(o),t.d(o,{hash:function(){return E},password:function(){return C},username:function(){return c},verificationCode:function(){return I}});const e=/^\w{1,20}$/,a=/^\S{6,}$/,l=/^[A-z0-9]{64}$/,d=/^\d{6}$/,c=r=>typeof r!="string"?!1:e.test(r),C=r=>typeof r!="string"?!1:a.test(r),E=r=>typeof r!="string"?!1:l.test(r),I=r=>typeof r!="string"?!1:d.test(r)},62680:function(f,o,t){t.r(o),t.d(o,{name:function(){return a}});const e=/^\S{1,20}$/,a=l=>typeof l!="string"?!1:e.test(l)},458:function(f,o,t){t.d(o,{A:function(){return e}});const e="1~20 \u4F4D"}}]);

//# sourceMappingURL=3311.c2ea41e4.chunk.js.map