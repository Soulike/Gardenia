(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{1094:function(e,t,a){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1095:function(e,t,a){},1378:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return X}));var n,r=a(2),s=a.n(r),c=a(7),o=a(61),i=a(0),u=a.n(i),l=a(1094),b=a.n(l),m=a(341),d=a(923),j=a(984),f=a(23),p=a(57);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(n||(n={}));var O=n,h=a(15),x=a(16),S=a(40),v=a(39),y=a(1095),g=a.n(y),k=a(924),N=a(111),E=a(176),_=a(72),A=a(935),R=a(1);function w(e){var t=e.onClick,a=e.forkAmount,n=e.loading;return Object(R.jsxs)(k.b,{className:g.a.ForkButton,size:-1,children:[Object(R.jsxs)(N.a,{onClick:t,disabled:n,loading:n,size:"small",children:[Object(R.jsx)(A.a,{}),"Fork"]}),Object(R.jsx)(E.a,{title:a,children:Object(R.jsx)(N.a,{disabled:n,size:"small",children:_.d.getNumberAbbreviation(a)})})]})}var C=u.a.memo(w),P=a(34),T=a(55),I=a(343),L=function(e){Object(S.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).loadForkAmount=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.j.forkAmount({username:a,name:r});case 3:null!==(c=e.sent)&&(o=c.amount,n.setState({forkAmount:o}));case 5:case"end":return e.stop()}}),e)}))),n.onClick=Object(c.a)(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=4,P.i.fork({username:a,name:r});case 4:null!==e.sent&&I.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),n.setState({loading:!1});case 7:case"end":return e.stop()}}),e)}))),n.state={forkAmount:0,loading:!1},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadForkAmount();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forkAmount,a=e.loading;return Object(R.jsx)(C,{onClick:this.onClick,forkAmount:t,loading:a})}}]),a}(i.PureComponent),F=Object(T.j)(L),U=a(936),D=a(151),z=a(938),G=a(932),Q=a(952),q=a(104),K=function(e){Object(S.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(q.promisify)(n.setState),n.loadHasStared=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.k.isStaredRepository({username:a,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.isStared,e.next=8,n.setStatePromise({hasStared:o});case 8:case"end":return e.stop()}}),e)}))),n.loadStarAmount=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,P.k.getRepositoryStarAmount({username:a,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.amount,e.next=8,n.setStatePromise({starAmount:o});case 8:case"end":return e.stop()}}),e)}))),n.onClick=Object(c.a)(s.a.mark((function e(){var t,a,r,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.hasStared,r=t.starAmount,c=n.props.match.params,o=c.username,i=c.repositoryName,e.next=4,n.setStatePromise({loading:!0});case 4:if(!a){e.next=13;break}return e.next=7,P.k.remove({username:o,name:i});case 7:if(null===e.sent){e.next=11;break}return e.next=11,n.setStatePromise({hasStared:!1,starAmount:r-1});case 11:e.next=19;break;case 13:return e.next=15,P.k.add({username:o,name:i});case 15:if(null===e.sent){e.next=19;break}return e.next=19,n.setStatePromise({hasStared:!0,starAmount:r+1});case 19:return e.next=21,n.setStatePromise({loading:!1});case 21:case"end":return e.stop()}}),e)}))),n.state={hasStared:!1,starAmount:0,loading:!1},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadHasStared(),this.loadStarAmount()]);case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a,n){var r,c,o,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match.params,c=r.username,o=r.repositoryName,i=t.match.params,u=i.username,l=i.repositoryName,c===u&&o===l){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasStared,a=e.loading,n=e.starAmount;return Object(R.jsx)(Q.a,{hasStared:t,loading:a,starAmount:n,onClick:this.onClick})}}]),a}(i.PureComponent),M=Object(T.j)(K),B=a(46);var W=u.a.memo(Object(B.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))((function(e){var t=e.repository,a=t.username,n=t.name,r=t.isPublic,s=e.forkFrom,c=e.loading,o=e.onTabChange,i=e.tabActiveKey,u=e.showSettings,l=e.children,h=e.openPullRequestAmount,x=e.openIssueAmount,S=e.isLoggedIn;return c?null:Object(R.jsxs)("div",{className:b.a.Repository,children:[Object(R.jsxs)("div",{className:b.a.header,children:[Object(R.jsxs)("div",{className:b.a.basicInfo,children:[Object(R.jsxs)("div",{className:b.a.tagAndRepository,children:[Object(R.jsx)("div",{className:b.a.tag,children:Object(R.jsx)(j.a,{isPublic:r})}),Object(R.jsxs)("div",{className:b.a.usernameAndName,children:[Object(R.jsx)(f.b,{to:p.Function.generatePersonalCenterRoute({username:a}),children:a})," / ",Object(R.jsx)(f.b,{to:p.Function.generateRepositoryCodeRoute({username:a,repositoryName:n}),children:Object(R.jsx)("b",{children:n})})]})]}),null===s?null:Object(R.jsxs)("div",{className:b.a.forkFrom,children:[Object(R.jsx)("div",{className:b.a.text,children:"fork \u81ea"}),Object(R.jsx)(f.b,{to:p.Function.generatePersonalCenterRoute({username:s.username}),children:s.username})," / ",Object(R.jsx)(f.b,{to:p.Function.generateRepositoryCodeRoute({username:s.username,repositoryName:s.name}),children:Object(R.jsx)("b",{children:s.name})})]})]}),Object(R.jsx)("div",{className:b.a.buttonArea,children:S?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:b.a.buttonWrapper,children:Object(R.jsx)(M,{})}),Object(R.jsx)("div",{className:b.a.buttonWrapper,children:Object(R.jsx)(F,{})})]}):null})]}),Object(R.jsxs)(m.a,{defaultActiveKey:O.CODE,type:"card",className:b.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:o,activeKey:i,children:[Object(R.jsx)(m.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(U.a,{}),"\u4ee3\u7801"]}),children:Object(R.jsx)("div",{className:b.a.tabContent,children:l})},O.CODE),Object(R.jsx)(m.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(D.a,{}),"Issues ",Object(R.jsx)(d.a,{className:b.a.tag,children:x})]}),children:Object(R.jsx)("div",{className:b.a.tabContent,children:l})},O.ISSUES),Object(R.jsx)(m.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(z.a,{}),"Pull Requests ",Object(R.jsx)(d.a,{className:b.a.tag,children:h})]}),children:Object(R.jsx)("div",{className:b.a.tabContent,children:l})},O.PULL_REQUESTS),u?Object(R.jsx)(m.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(G.a,{}),"\u8bbe\u7f6e"]}),children:Object(R.jsx)("div",{className:b.a.tabContent,children:l})},O.SETTINGS):null]})]})}))),H=a(138),J=a(3),Y=a(29);function V(e){var t=Object(i.useState)(new H.i("","","",!0)),a=Object(o.a)(t,2),n=a[0],r=a[1],u=Object(i.useState)(!1),l=Object(o.a)(u,2),b=l[0],m=l[1],d=Object(i.useState)(O.CODE),j=Object(o.a)(d,2),f=j[0],h=j[1],x=Object(i.useState)(null),S=Object(o.a)(x,2),v=S[0],y=S[1],g=Object(i.useState)(0),k=Object(o.a)(g,2),N=k[0],E=k[1],_=Object(i.useState)(0),A=Object(o.a)(_,2),w=A[0],C=A[1],I=Object(i.useState)(!1),L=Object(o.a)(I,2),F=L[0],U=L[1],D=Object(T.f)(),z=Object(T.h)(),G=z.objectType,Q=z.commitHash,q=z.username,K=z.repositoryName,M=Object(T.i)().path,V=Object(B.d)((function(e){return e.Root})).isLoggedIn;Object(i.useEffect)((function(){void 0!==G&&void 0===Q&&D.replace(J.d[J.b.NOT_FOUND])}),[G,Q,D]),Object(i.useEffect)((function(){document.title="".concat(q,"/").concat(K," - ").concat(J.a)}),[q,K]),Object(i.useLayoutEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.i.shouldShowOptions({username:q,name:K});case 2:null!==(t=e.sent)&&(a=t.showOptions,U(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m(!0),e().finally((function(){return m(!1)}))}),[q,K,V]),Object(i.useLayoutEffect)((function(){var e=J.b.REPOSITORY,t=e.REPOSITORY,a=e.CODE,n=e.ISSUES,r=e.ISSUE,s=e.CREATE_ISSUE,c=e.PULL_REQUESTS,o=e.PULL_REQUEST,i=e.SETTINGS,u=e.CONFLICT;switch(M){case J.d[a]:case J.d[t]:h(O.CODE);break;case J.d[s]:case J.d[r]:case J.d[n]:h(O.ISSUES);break;case J.d[o]:case J.d[c]:case J.d[u]:h(O.PULL_REQUESTS);break;case J.d[i.SETTINGS]:h(O.SETTINGS)}}),[M]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.repository({username:q},{name:K});case 2:if(null===(t=e.sent)){e.next=7;break}r(t),e.next=8;break;case 7:return e.abrupt("return",D.replace(J.d[J.b.NOT_FOUND]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m(!0),e().finally((function(){return m(!1)}))}),[q,K,D]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.forkFrom({username:q,name:K});case 2:null!==(t=e.sent)&&(a=t.repository,y(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m(!0),e().finally((function(){return m(!1)}))}),[q,K]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.h.getPullRequestAmount({username:q,name:K},Y.c.OPEN);case 2:null!==(t=e.sent)&&(a=t.amount,E(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m(!0),e().finally((function(){return m(!1)}))}),[q,K]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.e.getAmountByRepository({username:q,name:K},Y.a.OPEN);case 2:null!==(t=e.sent)&&(a=t.amount,C(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m(!0),e().finally((function(){return m(!1)}))}),[q,K]);var X=e.children;return Object(R.jsx)(W,{showSettings:F,repository:n,loading:b,onTabChange:function(e){switch(e){case O.CODE:return D.push(p.Function.generateRepositoryCodeRoute({username:q,repositoryName:K}));case O.ISSUES:return D.push(p.Function.generateRepositoryIssuesRoute({username:q,repositoryName:K}));case O.PULL_REQUESTS:return D.push(p.Function.generateRepositoryPullRequestsRoute({username:q,repositoryName:K}));case O.SETTINGS:return D.push(p.Function.generateRepositorySettingsRoute({username:q,repositoryName:K}));default:return}},tabActiveKey:f,forkFrom:v,openPullRequestAmount:N,openIssueAmount:w,children:X})}var X=u.a.memo(V)},946:function(e,t,a){"use strict";var n=a(19),r=a(217),s=a(0),c=a.n(s),o=a(923),i=a(949),u=a.n(i),l=a(1),b=["isPublic"];function m(e){var t=e.isPublic,a=Object(r.a)(e,b);return t?Object(l.jsx)(o.a,Object(n.a)(Object(n.a)({className:u.a.AccessibilityTag,color:"blue"},a),{},{children:"\u516c\u5f00"})):Object(l.jsx)(o.a,Object(n.a)(Object(n.a)({className:u.a.AccessibilityTag,color:"gold"},a),{},{children:"\u79c1\u4eba"}))}t.a=c.a.memo(m)},949:function(e,t,a){e.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},952:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(2),r=a.n(n),s=a(7),c=a(0),o=a.n(c),i=a(924),u=a(111),l=a(176),b=a(5),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},d=a(13),j=function(e,t){return c.createElement(d.a,Object(b.a)(Object(b.a)({},e),{},{ref:t,icon:m}))};j.displayName="StarFilled";var f=c.forwardRef(j),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},O=function(e,t){return c.createElement(d.a,Object(b.a)(Object(b.a)({},e),{},{ref:t,icon:p}))};O.displayName="StarOutlined";var h=c.forwardRef(O),x=a(72),S=a(1);function v(e){var t=e.hasStared,a=e.starAmount,n=e.loading,c=e.onClick;return Object(S.jsxs)(i.b,{size:-1,children:[Object(S.jsx)(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"function"!==typeof c){e.next=4;break}return e.next=4,c(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loading:n,disabled:n,children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f,{})," Unstar"]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(h,{})," Star"]})}),Object(S.jsx)(l.a,{title:a,children:Object(S.jsx)(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preventDefault());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:x.d.getNumberAbbreviation(a)})})]})}var y=o.a.memo(v)},984:function(e,t,a){"use strict";var n=a(946);a.d(t,"a",(function(){return n.a}))}}]);
//# sourceMappingURL=26.362b3efe.chunk.js.map