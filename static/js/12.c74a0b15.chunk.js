(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[12],{1114:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},1115:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return o}))},1116:function(e,t,r){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return n}))},1117:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}r.d(t,"a",(function(){return o}))},1118:function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}r.d(t,"a",(function(){return o}))},1126:function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!d(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,a=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),c=n[r];r<a;c=n[++r])y(c)||!v(c)?s+=" "+c:s+=" "+i(c);return s},t.deprecate=function(r,n){if("undefined"!==typeof e&&!0===e.noDeprecation)return r;if("undefined"===typeof e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var a,s={};function i(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),l(n,e,n.depth)}function c(e,t){var r=i.styles[t];return r?"\x1b["+i.colors[r][0]+"m"+e+"\x1b["+i.colors[r][1]+"m":e}function u(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&_(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return d(o)||(o=l(e,o,n)),o}var a=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(d(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,r);if(a)return a;var s=Object.keys(r),i=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),E(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(_(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(R(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return e.stylize(Date.prototype.toString.call(r),"date");if(E(r))return p(r)}var u,v="",C=!1,O=["{","}"];(f(r)&&(C=!0,O=["[","]"]),_(r))&&(v=" [Function"+(r.name?": "+r.name:"")+"]");return R(r)&&(v=" "+RegExp.prototype.toString.call(r)),S(r)&&(v=" "+Date.prototype.toUTCString.call(r)),E(r)&&(v=" "+p(r)),0!==s.length||C&&0!=r.length?n<0?R(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=C?function(e,t,r,n,o){for(var a=[],s=0,i=t.length;s<i;++s)P(t,String(s))?a.push(m(e,t,r,n,String(s),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(m(e,t,r,n,o,!0))})),a}(e,r,n,i,s):s.map((function(t){return m(e,r,n,i,t,C)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,v,O)):O[0]+v+O[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,o,a){var s,i,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?i=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(i=e.stylize("[Setter]","special")),P(n,o)||(s="["+o+"]"),i||(e.seen.indexOf(c.value)<0?(i=y(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")>-1&&(i=a?i.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+i.split("\n").map((function(e){return"   "+e})).join("\n")):i=e.stylize("[Circular]","special")),b(s)){if(a&&o.match(/^\d+$/))return i;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+i}function f(e){return Array.isArray(e)}function h(e){return"boolean"===typeof e}function y(e){return null===e}function g(e){return"number"===typeof e}function d(e){return"string"===typeof e}function b(e){return void 0===e}function R(e){return v(e)&&"[object RegExp]"===C(e)}function v(e){return"object"===typeof e&&null!==e}function S(e){return v(e)&&"[object Date]"===C(e)}function E(e){return v(e)&&("[object Error]"===C(e)||e instanceof Error)}function _(e){return"function"===typeof e}function C(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(b(a)&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=h,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=d,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=b,t.isRegExp=R,t.isObject=v,t.isDate=S,t.isError=E,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(1130);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),w[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",N(),t.format.apply(t,arguments))},t.inherits=r(1131),t._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var B="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(B&&e[B]){var t;if("function"!==typeof(t=e[B]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(s){r(s)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),B&&Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=B,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!==typeof o)throw new TypeError("The last argument must be of type Function");var a=this,s=function(){return o.apply(a,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(D,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(96))},1130:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},1131:function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},1134:function(e,t,r){e.exports={PageTitle:"Style_PageTitle__3R_vY"}},1136:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1134),s=r.n(a);var i=function(e){var t=e.children;return o.a.createElement("h1",{className:s.a.PageTitle},t)};r.d(t,"a",(function(){return i}))},1156:function(e,t,r){e.exports={TopicPoster:"Style_TopicPoster__3QRvq",commentPosterWrapper:"Style_commentPosterWrapper__7KgUY"}},1168:function(e,t,r){"use strict";r(505);var n=r(342),o=(r(504),r(338)),a=r(0),s=r.n(a),i=r(1156),c=r.n(i),u=r(353);var l=s.a.memo((function(e){const{title:t,onTitleChange:r,content:a,onContentChange:i,onTabChange:l,contentToPreview:p,submitting:m,onSubmitButtonClick:f,buttonText:h}=e;return s.a.createElement(n.a,{size:"small"},s.a.createElement("div",{className:c.a.TopicPoster},s.a.createElement("div",{className:c.a.titleWrapper},s.a.createElement(o.a,{placeholder:"\u6807\u9898\uff08\u5fc5\u586b\uff09",size:"large",autoFocus:!0,value:t,onChange:r,disabled:m,maxLength:255})),s.a.createElement("div",{className:c.a.commentPosterWrapper},s.a.createElement(u.a,{placeholder:"\u8865\u5145\u8bf4\u660e\uff08\u9009\u586b\uff09",content:a,buttonText:h,onContentChange:i,onSubmitButtonClick:f,onTabChange:l,submitting:m,contentToPreview:p}))))}));r.d(t,"a",(function(){return l}))},1224:function(e,t,r){e.exports={Compare:"Style_Compare__39h1m",detailWrapper:"Style_detailWrapper__2Azv5",detailTabs:"Style_detailTabs__2XZoZ",pullRequestCommitsWrapper:"Style_pullRequestCommitsWrapper__3A57w",tag:"Style_tag__97nnJ"}},1225:function(e,t,r){e.exports={CompareCard:"Style_CompareCard__tE84-",selectorWrapper:"Style_selectorWrapper__zgG0r",repositoriesSelectorWrapper:"Style_repositoriesSelectorWrapper__2Dvff",isMergeableIndicatorWrapper:"Style_isMergeableIndicatorWrapper__1W1oO"}},1226:function(e,t,r){e.exports={RepositoriesSelector:"Style_RepositoriesSelector__2lAeB",arrow:"Style_arrow__15L4a",target:"Style_target__2vqYE",source:"Style_source__2RAOj",targetRepositorySelectWrapper:"Style_targetRepositorySelectWrapper__DxL1j",sourceRepository:"Style_sourceRepository__1i5O8"}},1227:function(e,t,r){},1228:function(e,t,r){e.exports={PullRequestCommits:"Style_PullRequestCommits__22rzd",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__3ig_5"}},1229:function(e,t,r){e.exports={PullRequestDiffs:"Style_PullRequestDiffs__2UqKE",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__2hqbq"}},1320:function(e,t,r){"use strict";r.r(t);var n=r(4),o=r.n(n),a=r(7),s=r(1114),i=r(1115),c=r(1117),u=r(1116),l=r(1118),p=r(0),m=r.n(p),f=(r(142),r(73)),h=(r(263),r(91)),y=(r(181),r(55)),g=(r(339),r(103)),d=r(1224),b=r.n(d),R=r(1136),v=(r(505),r(342)),S=r(1225),E=r.n(S),_=(r(1174),r(1164)),C=r(1226),O=r.n(C),w=r(132),N={name:"arrow-left",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]}},P=r(12),B=function(e,t){return m.a.createElement(P.a,Object.assign({},e,{ref:t,icon:N}))};B.displayName="ArrowLeftOutlined";var D=m.a.forwardRef(B);var T=Object(w.f)(m.a.memo((function(e){const{sourceRepositoryBranchNames:t,targetRepositoryBranchNames:r,onSourceRepositoryBranchSelectorChange:n,onTargetRepositoryBranchSelectorChange:o,loading:a,targetRepositories:s,onTargetRepositorySelectorChange:i,match:{params:{sourceRepositoryUsername:c,sourceRepositoryName:u,sourceRepositoryBranch:l,targetRepositoryBranch:p,username:f,repository:h}}}=e;return m.a.createElement("div",{className:O.a.RepositoriesSelector},m.a.createElement("div",{className:O.a.target},m.a.createElement("div",{className:O.a.targetRepositorySelectWrapper},m.a.createElement(_.a,{loading:a,disabled:a,onChange:i,value:"".concat(f,"/").concat(h)},s.map(({username:e,name:t})=>m.a.createElement(_.a.Option,{value:"".concat(e,"/").concat(t),key:"".concat(e,"/").concat(t)},e," / ",t)))),m.a.createElement(_.a,{loading:a,disabled:a,onChange:o,value:p},r.map(e=>m.a.createElement(_.a.Option,{value:e,key:e},e)))),m.a.createElement("div",{className:O.a.arrow},m.a.createElement(D,null)),m.a.createElement("div",{className:O.a.source},m.a.createElement("div",{className:O.a.sourceRepository},c," / ",u),m.a.createElement(_.a,{loading:a,disabled:a,onChange:n,value:l},t.map(e=>m.a.createElement(_.a.Option,{value:e,key:e},e)))))}))),j=r(32),x=r(45);class A extends p.PureComponent{constructor(e){super(e),this.loadSourceRepositoryBranchNames=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t}}}=this.props,r={username:e,name:t},n=await x.h.branchNames(r);if(null!==n){const{branchNames:e}=n;this.setState({sourceRepositoryBranchNames:e})}},this.loadTargetRepositories=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t}}}=this.props,r={username:e,name:t},n=await x.h.forkFrom(r);if(null!==n){const{repository:e}=n;null!==e?this.setState({targetRepositories:[e,r]}):this.setState({targetRepositories:[r]})}},this.loadTargetRepositoryBranchNames=async()=>{const{match:{params:{repository:e,username:t}}}=this.props,r={username:t,name:e},n=await x.h.branchNames(r);if(null!==n){const{branchNames:e}=n;this.setState({targetRepositoryBranchNames:e})}},this.onTargetRepositorySelectorChange=e=>{const{match:{params:t},history:r}=this.props,[n,o]=e.toString().split("/");r.push(j.Function.generateRepositoryCompareRoute({...t,username:n,repository:o}))},this.onSourceRepositoryBranchSelectorChange=e=>{const{match:{params:t},history:r}=this.props;r.push(j.Function.generateRepositoryCompareRoute({...t,sourceRepositoryBranch:e.toString()}))},this.onTargetRepositoryBranchSelectorChange=e=>{const{match:{params:t},history:r}=this.props;r.push(j.Function.generateRepositoryCompareRoute({...t,targetRepositoryBranch:e.toString()}))},this.state={sourceRepositoryBranchNames:[],targetRepositoryBranchNames:[],targetRepositories:[],loading:!1}}async componentDidMount(){this.setState({loading:!0}),await Promise.all([this.loadSourceRepositoryBranchNames(),this.loadTargetRepositories(),this.loadTargetRepositoryBranchNames()]),this.setState({loading:!1})}render(){const{sourceRepositoryBranchNames:e,targetRepositoryBranchNames:t,loading:r,targetRepositories:n}=this.state;return m.a.createElement(T,{sourceRepositoryBranchNames:e,targetRepositoryBranchNames:t,loading:r,targetRepositories:n,onTargetRepositorySelectorChange:this.onTargetRepositorySelectorChange,onSourceRepositoryBranchSelectorChange:this.onSourceRepositoryBranchSelectorChange,onTargetRepositoryBranchSelectorChange:this.onTargetRepositoryBranchSelectorChange})}}var k=Object(w.f)(A),M=(r(340),r(157)),U=r(1227),F=r.n(U),W=r(1088);var z=m.a.memo((function(e){const{isMergeable:t,loading:r}=e;return m.a.createElement("div",{className:F.a.IsMergeableIndicator},r?m.a.createElement(M.a,{showIcon:!0,icon:m.a.createElement(W.a,null),type:"info",message:"\u6b63\u5728\u68c0\u67e5\u662f\u5426\u53ef\u81ea\u52a8\u5408\u5e76"}):t?m.a.createElement(M.a,{showIcon:!0,type:"success",message:"\u53ef\u4ee5\u81ea\u52a8\u5408\u5e76"}):m.a.createElement(M.a,{showIcon:!0,type:"error",message:"\u4e0d\u80fd\u81ea\u52a8\u5408\u5e76\uff0c\u4f46\u60a8\u4ecd\u53ef\u521b\u5efa Pull Request"}))}));class I extends p.PureComponent{constructor(e){super(e),this.loadIsMergeable=async()=>{const{match:{params:{username:e,repository:t,targetRepositoryBranch:r,sourceRepositoryUsername:n,sourceRepositoryName:o,sourceRepositoryBranch:a}}}=this.props,s=await x.g.isMergeable({username:n,name:o},a,{username:e,name:t},r);if(null!==s){const{isMergeable:e}=s;this.setState({isMergeable:e})}},this.state={isMergeable:!0,loading:!1}}async componentDidMount(){this.setState({loading:!0}),await this.loadIsMergeable(),this.setState({loading:!1})}async componentDidUpdate(e,t,r){const{match:{params:{username:n,repository:o,targetRepositoryBranch:a,sourceRepositoryUsername:s,sourceRepositoryName:i,sourceRepositoryBranch:c}}}=this.props,{match:{params:{username:u,repository:l,targetRepositoryBranch:p,sourceRepositoryUsername:m,sourceRepositoryName:f,sourceRepositoryBranch:h}}}=e;n===u&&o===l&&a===p&&s===m&&i===f&&c===h||await this.componentDidMount()}render(){const{isMergeable:e,loading:t}=this.state;return m.a.createElement(z,{isMergeable:e,loading:t})}}var q=Object(w.f)(I),L=r(1105);var G=Object(w.f)(m.a.memo((function(e){const{match:{params:{sourceRepositoryUsername:t,sourceRepositoryName:r,sourceRepositoryBranch:n,username:o,repository:a,targetRepositoryBranch:s}}}=e,i=t===o&&r===a&&n===s;return m.a.createElement(v.a,{size:"small"},m.a.createElement("div",{className:E.a.CompareCard},m.a.createElement("div",{className:E.a.selectorWrapper},m.a.createElement("div",{className:E.a.iconWrapper},m.a.createElement(L.a,null)),m.a.createElement("div",{className:E.a.repositoriesSelectorWrapper},m.a.createElement(k,null))),i?null:m.a.createElement("div",{className:E.a.isMergeableIndicatorWrapper},m.a.createElement(q,null))))})));class H extends p.PureComponent{render(){return m.a.createElement(G,null)}}var J=H,K=(r(95),r(42)),$=r(1168);class Z extends p.PureComponent{constructor(e){super(e),this.onTitleChange=e=>{this.setState({title:e.target.value})},this.onContentChange=e=>{this.setState({content:e.target.value})},this.onTabChange=e=>{if("preview"===e){const{content:e}=this.state;this.setState({contentToPreview:e})}},this.onSubmitButtonClick=async()=>{const{title:e,content:t}=this.state;if(0===e.length)K.a.warn({message:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"});else{const{history:r,match:{params:{sourceRepositoryUsername:n,sourceRepositoryName:o,sourceRepositoryBranch:a,repository:s,username:i,targetRepositoryBranch:c}}}=this.props;this.setState({submitting:!0}),null!==await x.f.add({title:e,content:t,sourceRepositoryUsername:n,sourceRepositoryName:o,sourceRepositoryBranchName:a,targetRepositoryUsername:i,targetRepositoryName:s,targetRepositoryBranchName:c})&&(K.a.success({message:"\u521b\u5efa Pull Request \u6210\u529f"}),r.replace(j.Function.generateRepositoryPullRequestsRoute({username:i,repository:s}))),this.setState({submitting:!1})}},this.state={title:"",content:"",contentToPreview:"",submitting:!1}}render(){const{title:e,content:t,contentToPreview:r,submitting:n}=this.state;return m.a.createElement($.a,{title:e,content:t,contentToPreview:r,onTitleChange:this.onTitleChange,onContentChange:this.onContentChange,onTabChange:this.onTabChange,submitting:n,onSubmitButtonClick:this.onSubmitButtonClick,buttonText:"\u521b\u5efa Pull Request"})}}var Y=Object(w.f)(Z),Q=(r(94),r(26)),V=r(351),X=r(1228),ee=r.n(X);var te=m.a.memo((function(e){const{commits:t,loading:r,onLoadMoreButtonClick:n}=e;return m.a.createElement("div",{className:ee.a.PullRequestCommits},m.a.createElement(f.a,{spinning:r},m.a.createElement(V.a,{commits:t}),m.a.createElement("div",{className:ee.a.loadMoreButtonWrapper},m.a.createElement(Q.a,{disabled:r,loading:r,onClick:n},"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"))))}));class re extends p.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({commits:[]},()=>e())}),this.loadMoreCommits=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:r,username:n,repository:o,targetRepositoryBranch:a}}}=this.props,{commits:s}=this.state,i=await x.h.forkCommitHistory({username:e,name:t},r,{username:n,name:o},a,s.length,re.COMMIT_AMOUNT_PER_PAGE);if(null!==i){const{commits:e}=i;0===e.length?K.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}):this.setState({commits:[...s,...e]})}},this.onLoadMoreButtonClick=async()=>{await this.setState({loading:!0}),await this.loadMoreCommits(),await this.setState({loading:!1})},this.state={commits:[],loading:!1}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await this.loadMoreCommits(),this.setState({loading:!1})}async componentDidUpdate(e,t,r){const{location:{pathname:n}}=e,{location:{pathname:o}}=this.props;n!==o&&await this.componentDidMount()}render(){const{commits:e,loading:t}=this.state;return m.a.createElement(te,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,commits:e,loading:t})}}re.COMMIT_AMOUNT_PER_PAGE=50;var ne=Object(w.f)(re),oe=r(350),ae=r(1229),se=r.n(ae);var ie=m.a.memo((function(e){const{fileDiffs:t,loading:r,fileDiffAmount:n,onLoadMoreButtonClick:o}=e;return m.a.createElement("div",{className:se.a.PullRequestDiffs},m.a.createElement(f.a,{spinning:r},m.a.createElement(oe.a,{fileDiffs:t,fileDiffAmount:n}),m.a.createElement("div",{className:se.a.loadMoreButtonWrapper},m.a.createElement(Q.a,{disabled:r,loading:r,onClick:o,size:"large",type:"primary"},"\u52a0\u8f7d\u66f4\u591a\u6587\u4ef6\u66f4\u6539"))))}));class ce extends p.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({fileDiffs:[]},()=>e())}),this.loadFileDiffAmount=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:r,username:n,repository:o,targetRepositoryBranch:a}}}=this.props,s=await x.h.forkFileDiffAmount({username:e,name:t},r,{username:n,name:o},a);if(null!==s){const{amount:e}=s;this.setState({fileDiffAmount:e})}},this.loadMoreFileDiffs=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:r,username:n,repository:o,targetRepositoryBranch:a}}}=this.props,{fileDiffs:s}=this.state,i=await x.h.forkFileDiff({username:e,name:t},r,{username:n,name:o},a,s.length,ce.FILE_DIFF_AMOUNT_PER_PAGE);if(null!==i){const{fileDiffs:e}=i;0===e.length?K.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u88ab\u4fee\u6539\u6587\u4ef6"}):this.setState({fileDiffs:[...s,...e]})}},this.onLoadMoreButtonClick=async()=>{this.setState({loading:!0}),await this.loadMoreFileDiffs(),this.setState({loading:!1})},this.state={fileDiffs:[],fileDiffAmount:0,loading:!1}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await Promise.all([this.loadFileDiffAmount(),this.loadMoreFileDiffs()]),this.setState({loading:!1})}async componentDidUpdate(e,t,r){const{location:{pathname:n}}=this.props,{location:{pathname:o}}=e;n!==o&&await this.componentDidMount()}render(){const{fileDiffs:e,loading:t,fileDiffAmount:r}=this.state;return m.a.createElement(ie,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,fileDiffs:e,loading:t,fileDiffAmount:r})}}ce.FILE_DIFF_AMOUNT_PER_PAGE=10;var ue=Object(w.f)(ce);var le=Object(w.f)(m.a.memo((function(e){var t=e.match.params,r=t.sourceRepositoryUsername,n=t.sourceRepositoryName,o=t.sourceRepositoryBranch,a=t.username,s=t.repository,i=t.targetRepositoryBranch,c=e.commitAmount,u=e.fileDiffAmount,l=e.loading,p=e.hasCommonAncestor,d=r===a&&n===s&&o===i;return m.a.createElement("div",{className:b.a.Compare},m.a.createElement(R.a,null,"\u521b\u5efa Pull Request"),m.a.createElement("div",{className:b.a.compareCardWrapper},m.a.createElement(J,null)),m.a.createElement("div",{className:b.a.detailWrapper},m.a.createElement(f.a,{spinning:l},p?d?m.a.createElement(g.a,{description:"\u5fc5\u987b\u662f\u4e0d\u540c\u5206\u652f\u624d\u53ef\u521b\u5efa Pull Request"}):m.a.createElement("div",{className:b.a.detail},m.a.createElement("div",{className:b.a.commentPosterWrapper},m.a.createElement(Y,null)),m.a.createElement("div",{className:b.a.detailTabs},m.a.createElement(h.a,{defaultActiveKey:"commits",type:"card"},m.a.createElement(h.a.TabPane,{tab:m.a.createElement(m.a.Fragment,null,"\u63d0\u4ea4",m.a.createElement(y.a,{className:b.a.tag},c)),key:"commits"},m.a.createElement("div",{className:b.a.pullRequestCommitsWrapper},m.a.createElement(ne,null))),m.a.createElement(h.a.TabPane,{tab:m.a.createElement(m.a.Fragment,null,"\u4fee\u6539\u7684\u6587\u4ef6",m.a.createElement(y.a,{className:b.a.tag},u)),key:"fileChanged"},m.a.createElement("div",{className:b.a.pullRequestFileDiffsWrapper},m.a.createElement(ue,null)))))):m.a.createElement(g.a,{description:"".concat(r,"/").concat(n,":").concat(o," \u4e0e ").concat(a,"/").concat(s,":").concat(i," \u4e4b\u95f4\u6ca1\u6709\u63d0\u4ea4\u5386\u53f2\u5173\u8054")}))))}))),pe=r(1126),me=j.CONFIG.PAGE_ID_TO_ROUTE,fe=j.CONFIG.PAGE_ID,he=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).setStatePromise=Object(pe.promisify)(r.setState),r.checkURLParameters=function(){var e=r.props,t=e.match.params,n=t.sourceRepositoryUsername,o=t.sourceRepositoryName,a=t.sourceRepositoryBranch,s=t.targetRepositoryBranch,i=e.history;void 0!==n&&void 0!==o&&void 0!==a&&void 0!==s||i.replace(me[fe.NOT_FOUND])},r.loadHasCommonAncestor=Object(a.a)(o.a.mark((function e(){var t,n,a,s,i,c,u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.match.params,n=t.sourceRepositoryUsername,a=t.sourceRepositoryName,s=t.sourceRepositoryBranch,i=t.username,c=t.repository,u=t.targetRepositoryBranch,n!==i||a!==c||s!==u){e.next=6;break}return e.next=4,r.setStatePromise({hasCommonAncestor:!0});case 4:e.next=13;break;case 6:return e.next=8,x.h.hasCommonAncestor({username:n,name:a},s,{username:i,name:c},u);case 8:if(null===(l=e.sent)){e.next=13;break}return p=l.hasCommonAncestor,e.next=13,r.setStatePromise({hasCommonAncestor:p});case 13:case"end":return e.stop()}}),e)}))),r.loadCommitAmount=Object(a.a)(o.a.mark((function e(){var t,n,a,s,i,c,u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.match.params,n=t.sourceRepositoryUsername,a=t.sourceRepositoryName,s=t.sourceRepositoryBranch,i=t.username,c=t.repository,u=t.targetRepositoryBranch,n!==i||a!==c||s!==u){e.next=5;break}r.setState({commitAmount:0}),e.next=9;break;case 5:return e.next=7,x.h.forkCommitAmount({username:n,name:a},s,{username:i,name:c},u);case 7:null!==(l=e.sent)&&(p=l.commitAmount,r.setState({commitAmount:p}));case 9:case"end":return e.stop()}}),e)}))),r.loadFileDiffAmount=Object(a.a)(o.a.mark((function e(){var t,n,a,s,i,c,u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.match.params,n=t.sourceRepositoryUsername,a=t.sourceRepositoryName,s=t.sourceRepositoryBranch,i=t.username,c=t.repository,u=t.targetRepositoryBranch,n!==i||a!==c||s!==u){e.next=5;break}r.setState({fileDiffAmount:0}),e.next=9;break;case 5:return e.next=7,x.h.forkFileDiffAmount({username:n,name:a},s,{username:i,name:c},u);case 7:null!==(l=e.sent)&&(p=l.amount,r.setState({fileDiffAmount:p}));case 9:case"end":return e.stop()}}),e)}))),r.state={commitAmount:0,fileDiffAmount:0,loading:!1,hasCommonAncestor:!1},r}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkURLParameters(),e.next=3,this.setStatePromise({loading:!0});case 3:return e.next=5,this.loadHasCommonAncestor();case 5:if(!this.state.hasCommonAncestor){e.next=9;break}return e.next=9,Promise.all([this.loadCommitAmount(),this.loadFileDiffAmount()]);case 9:return e.next=11,this.setStatePromise({loading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(a.a)(o.a.mark((function e(t,r,n){var a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.location.pathname,s=t.location.pathname,a===s){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.commitAmount,r=e.fileDiffAmount,n=e.loading,o=e.hasCommonAncestor;return m.a.createElement(le,{hasCommonAncestor:o,fileDiffAmount:r,loading:n,commitAmount:t})}}]),t}(p.PureComponent),ye=Object(w.f)(he);r.d(t,"default",(function(){return ye}))}}]);
//# sourceMappingURL=12.c74a0b15.chunk.js.map