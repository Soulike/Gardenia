"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[2693],{82198:function(v,r,t){t.r(r),t.d(r,{default:function(){return K}});var e=t(89526),u={Login:"Style_Login__50icR",registerTip:"Style_registerTip__hOTh1",form:"Style_form__4f2Nw",inputWrapper:"Style_inputWrapper__AJavJ",logo:"Style_logo__Q+DvD",button:"Style_button__J8WAL"},i=t(98001),f=t(30592),l=t(49004),C=t(12030),D=t(565),F=t(54846),O=t(15675),N=t(59807),o=t(36393);function T(d){const{username:a,password:n,onUsernameInputChange:s,onPasswordInputChange:c,onLoginFormSubmit:g,loading:h}=d;return e.createElement("main",{className:u.Login},e.createElement("form",{action:"#",className:u.form,onSubmit:g},e.createElement("img",{className:u.logo,src:l.Z,alt:"web_developer_logo"}),e.createElement("div",{className:u.registerTip},"\u6CA1\u6709\u8D26\u53F7\uFF1F",e.createElement(D.rU,{to:o.yt[o.DV.REGISTER]},"\u70B9\u6B64\u6CE8\u518C")),e.createElement("div",{className:u.inputWrapper},e.createElement(C.Z,null,"\u7528\u6237\u540D"),e.createElement(i.Z,{type:"text",size:"large",onChange:s,autoFocus:!0,value:a,disabled:h,prefix:e.createElement(F.Z,null)})),e.createElement("div",{className:u.inputWrapper},e.createElement(C.Z,null,"\u5BC6\u7801"),e.createElement(i.Z,{type:"password",size:"large",onChange:c,value:n,disabled:h,prefix:e.createElement(O.Z,null)}),e.createElement(N.Z,null,"\u5FD8\u8BB0\u5BC6\u7801\uFF1F",e.createElement(D.rU,{to:o.yt[o.DV.CHANGE_PASSWORD]},"\u70B9\u6B64\u4FEE\u6539\u5BC6\u7801"))),e.createElement(f.Z,{htmlType:"submit",className:u.button,size:"large",type:"primary",disabled:h,loading:h,block:!0},"\u767B\u5F55")))}var B=e.memo(T),R=t(65092),L=t(62371),S=t(24315),I=t(16057),M=t(92070),P=t(60269),U=t(85582),V=t(99988),p=(d,a,n)=>new Promise((s,c)=>{var g=m=>{try{E(n.next(m))}catch(y){c(y)}},h=m=>{try{E(n.throw(m))}catch(y){c(y)}},E=m=>m.done?s(m.value):Promise.resolve(m.value).then(g,h);E((n=n.apply(d,a)).next())});const{Account:A}=V;class Z extends e.PureComponent{constructor(a){super(a);this.setTitle=()=>{document.title=`\u767B\u5F55 - ${o.A1}`},this.checkSession=()=>p(this,null,function*(){const{setLoggedOut:n,setLoggedIn:s}=this.props,c=yield L.mR.checkSession();if(c!==null){const{isValid:g}=c;g?yield s():yield n()}else yield n()}),this.onUsernameInputChange=n=>{this.setState({username:n.target.value})},this.onPasswordInputChange=n=>{this.setState({password:n.target.value})},this.onLoginFormSubmit=n=>p(this,null,function*(){n.preventDefault(),this.loginFormInputCheck()&&(yield this.submitLoginForm())}),this.loginFormInputCheck=()=>{const{username:n,password:s}=this.state;return!A.username(n)||!A.password(s)?(S.Z.warn({message:"\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"}),!1):!0},this.submitLoginForm=()=>p(this,null,function*(){const{username:n,password:s}=this.state,c=P.mR.calculateHash(n,s);this.setState({loading:!0}),(yield L.mR.login(new P.mR(n,c)))&&(yield this.onLoginSuccess()),this.setState({loading:!1})}),this.onLoginSuccess=()=>p(this,null,function*(){const{setLoggedIn:n}=this.props;n(),S.Z.success({message:"\u767B\u5F55\u6210\u529F"}),this.returnToPreviousPage()}),this.returnToPreviousPage=()=>{const{location:{search:n}}=this.props,{prev:s}=U.parse(n.slice(1));return typeof s=="string"&&s!==o.yt[o.DV.LOGIN]&&s!==o.yt[o.DV.REGISTER]&&s!==o.yt[o.DV.NOT_FOUND]&&s!==o.yt[o.DV.CHANGE_PASSWORD]?this.props.history.push(s):this.props.history.push(o.yt[o.DV.INDEX])},this.state={username:"",password:"",loading:!1}}componentDidMount(){return p(this,null,function*(){this.setTitle(),yield this.checkSession();const{isLoggedIn:a}=this.props;if(a)return this.props.history.push(o.yt[o.DV.INDEX])})}render(){const{username:a,password:n,loading:s}=this.state;return e.createElement(B,{username:a,password:n,loading:s,onLoginFormSubmit:this.onLoginFormSubmit,onPasswordInputChange:this.onPasswordInputChange,onUsernameInputChange:this.onUsernameInputChange})}}const W=d=>{const{Root:{isLoggedIn:a}}=d;return{isLoggedIn:a}},G={setLoggedIn:I.setLoggedInAction,setLoggedOut:I.setLoggedOutAction};var z=(0,R.EN)((0,M.$j)(W,G)(Z)),K=z},38818:function(v,r,t){t.r(r),t.d(r,{code:function(){return u}});const e=/^\w+_\w+_\d+$/,u=i=>typeof i!="string"?!1:e.test(i)},62680:function(v,r,t){t.r(r),t.d(r,{name:function(){return u}});const e=/^\S{1,20}$/,u=i=>typeof i!="string"?!1:e.test(i)},41379:function(v,r,t){t.r(r),t.d(r,{email:function(){return f},nickname:function(){return i}});const e=/^\S{1,20}$/,u=/^([A-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,8})$/,i=l=>typeof l!="string"?!1:e.test(l),f=l=>typeof l!="string"?!1:u.test(l)},99988:function(v,r,t){t.r(r),t.d(r,{Account:function(){return e},Collaborator:function(){return l},Group:function(){return u},Profile:function(){return i},Repository:function(){return f}});var e=t(10330),u=t(62680),i=t(41379),f=t(50526),l=t(38818)}}]);

//# sourceMappingURL=2693.e9f001e9.chunk.js.map