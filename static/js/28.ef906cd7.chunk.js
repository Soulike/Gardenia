(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[28],{1128:function(e,n,t){"use strict";var r=t(0),a=t.n(r),o=t(15);n.a=a.a.memo((function(e){return a.a.createElement(o.b,Object.assign({},e,{target:"_blank",rel:"noopener norefferrer"}))}))},1129:function(e,n,t){"use strict";var r={};t.r(r),t.d(r,"USERNAME",(function(){return g})),t.d(r,"PASSWORD",(function(){return O})),t.d(r,"VERIFICATION_CODE",(function(){return M}));var a={};t.r(a),t.d(a,"NAME",(function(){return y}));var o={};t.r(o),t.d(o,"NICKNAME",(function(){return N})),t.d(o,"EMAIL",(function(){return _}));var c={};t.r(c),t.d(c,"NAME",(function(){return P}));var i={};t.r(i),t.d(i,"CODE",(function(){return j}));var s={};t.r(s),t.d(s,"username",(function(){return I})),t.d(s,"password",(function(){return R})),t.d(s,"verificationCode",(function(){return W}));var u={};t.r(u),t.d(u,"name",(function(){return D}));var m={};t.r(m),t.d(m,"nickname",(function(){return T})),t.d(m,"email",(function(){return U}));var d={};t.r(d),t.d(d,"name",(function(){return L}));var l={};t.r(l),t.d(l,"code",(function(){return $}));var f={};t.r(f),t.d(f,"Account",(function(){return s})),t.d(f,"Group",(function(){return u})),t.d(f,"Profile",(function(){return m})),t.d(f,"Repository",(function(){return d})),t.d(f,"Collaborator",(function(){return l}));var p={};t.r(p),t.d(p,"USERNAME",(function(){return F})),t.d(p,"PASSWORD",(function(){return G}));var v={};t.r(v),t.d(v,"NAME",(function(){return z}));var b={};t.r(b),t.d(b,"NICKNAME",(function(){return K}));var A={};t.r(A),t.d(A,"NAME",(function(){return V}));var h={};t.r(h),t.d(h,"Account",(function(){return p})),t.d(h,"Group",(function(){return v})),t.d(h,"Profile",(function(){return b})),t.d(h,"Repository",(function(){return A}));var x={};t.r(x),t.d(x,"USERNAME",(function(){return B})),t.d(x,"PASSWORD",(function(){return J})),t.d(x,"VERIFICATION_CODE",(function(){return X}));var E={};t.r(E),t.d(E,"NAME",(function(){return Z}));var k={};t.r(k),t.d(k,"NICKNAME",(function(){return q})),t.d(k,"EMAIL",(function(){return Q}));var C={};t.r(C),t.d(C,"NAME",(function(){return H}));var S={};t.r(S),t.d(S,"CODE",(function(){return Y}));var w={};t.r(w),t.d(w,"Account",(function(){return x})),t.d(w,"Group",(function(){return E})),t.d(w,"Profile",(function(){return k})),t.d(w,"Repository",(function(){return C})),t.d(w,"Collaborator",(function(){return S}));const g=/^\w{1,20}$/,O=/^\S{6,}$/,M=/^\d{6}$/;var y=/^\S{1,20}$/,N=/^\S{1,20}$/,_=/^([A-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,8})$/,P=/^\w{1,20}$/,j=/^\w+_\w+_\d+$/;function I(e){return r.USERNAME.test(e)}function R(e){return r.PASSWORD.test(e)}function W(e){return r.VERIFICATION_CODE.test(e)}function D(e){return a.NAME.test(e)}function T(e){return o.NICKNAME.test(e)}function U(e){return o.EMAIL.test(e)}function L(e){return c.NAME.test(e)}function $(e){return i.CODE.test(e)}var F="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf",G="6 \u4f4d\u4ee5\u4e0a",z="1~20 \u4f4d",K="1~20 \u4f4d",V="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf";const B="\u7528\u6237\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",J="\u5bc6\u7801\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",X="\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e";var Z="\u5c0f\u7ec4\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",q="\u6635\u79f0\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",Q="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1",H="\u4ed3\u5e93\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",Y="\u9080\u8bf7\u7801\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165";t.d(n,"b",(function(){return f})),t.d(n,"a",(function(){return w})),t.d(n,"c",(function(){return h}))},1131:function(e,n,t){"use strict";var r=t(1128);t.d(n,"a",(function(){return r.a}))},1133:function(e,n,t){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(n,"a",(function(){return r}))},1263:function(e,n,t){e.exports={Members:"Style_Members__1A1TA",topArea:"Style_topArea__2Rqcb",cardContent:"Style_cardContent__3XM0M",titleWrapper:"Style_titleWrapper__30lrm",name:"Style_name__35BXt",isAdminTagWrapper:"Style_isAdminTagWrapper__h56El",isAdminTag:"Style_isAdminTag__3vPt2",avatarWrapper:"Style_avatarWrapper__31DG6",avatar:"Style_avatar__39V_0"}},1264:function(e,n,t){e.exports={modalContent:"Style_modalContent__2QoB9",usernameInput:"Style_usernameInput__2TSrf"}},1340:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"addMember",(function(){return U}));t(96);var a=t(43),o=t(3),c=t.n(o),i=t(7),s=t(341),u=t(342),m=t(344),d=t(343),l=t(345),f=t(0),p=t.n(f),v=(t(1135),t(1134)),b=(t(517),t(352)),A=(t(353),t(150)),h=(t(95),t(25)),x=(t(181),t(56)),E=t(1133),k=(t(349),t(103)),C=(t(350),t(157)),S=t(1263),w=t.n(S),g=t(30),O=t(1131),M=(t(518),t(355)),y=(t(516),t(347)),N=t(1105),_=t(1264),P=t.n(_);var j=p.a.memo((function(e){var n=e.onClick,t=e.showModal,r=e.username,a=e.loading,o=e.onModalCancelClick,c=e.onModalOkClick,i=e.onUsernameChange;return p.a.createElement(p.a.Fragment,null,p.a.createElement(h.a,{type:"primary",onClick:n,loading:a,disabled:a},p.a.createElement(N.a,null),"\u6dfb\u52a0\u6210\u5458"),p.a.createElement(M.a,{destroyOnClose:!0,width:300,title:"\u6dfb\u52a0\u5c0f\u7ec4\u6210\u5458",visible:t,onOk:c,onCancel:o,confirmLoading:a},p.a.createElement("div",{className:P.a.modalContent},p.a.createElement(y.a,{value:r,onChange:i,autoFocus:!0,placeholder:"\u65b0\u5c0f\u7ec4\u6210\u5458\u7684\u7528\u6237\u540d",className:P.a.usernameInput}))))})),I=t(346),R=t(133),W=t(39),D=t(1129),T=new(t(266).EventEmitter),U="addMember",L=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(m.a)(this,Object(d.a)(n).call(this,e))).setStatePromise=Object(I.promisify)(t.setState),t.initModal=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setStatePromise({username:""});case 1:case"end":return e.stop()}}),e)}))),t.onClick=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setStatePromise({showModal:!0});case 2:return e.next=4,t.initModal();case 4:case"end":return e.stop()}}),e)}))),t.onModalOkClick=Object(i.a)(c.a.mark((function e(){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.match.params.id,o=t.state.username,D.b.Account.username(o)){e.next=6;break}a.a.error({message:"\u7528\u6237 ".concat(o," \u4e0d\u5b58\u5728")}),e.next=18;break;case 6:return e.next=8,t.setStatePromise({loading:!0});case 8:return e.next=10,W.c.addAccounts({id:Number.parseInt(n)},[o]);case 10:if(null===e.sent){e.next=16;break}return a.a.success({message:"\u6dfb\u52a0\u6210\u5458 ".concat(o," \u6210\u529f")}),e.next=15,t.setStatePromise({showModal:!1});case 15:T.emit(r.addMember);case 16:return e.next=18,t.setStatePromise({loading:!1});case 18:case"end":return e.stop()}}),e)}))),t.onModalCancelClick=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setStatePromise({showModal:!1});case 2:case"end":return e.stop()}}),e)}))),t.onUsernameChange=function(e){t.setState({username:e.target.value})},t.state={showModal:!1,username:"",loading:!1},t}return Object(l.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this.state,n=e.showModal,t=e.username,r=e.loading;return p.a.createElement(j,{loading:r,showModal:n,username:t,onClick:this.onClick,onModalCancelClick:this.onModalCancelClick,onModalOkClick:this.onModalOkClick,onUsernameChange:this.onUsernameChange})}}]),n}(f.PureComponent),$=Object(R.f)(L),F=t(357);var G=p.a.memo((function(e){var n=e.profiles,t=e.loading,r=e.isAdmin,a=e.adminUsernames,o=e.onSetAdminConfirm,c=e.onRemoveAccountConfirm,i=e.onRemoveAdminConfirm;return p.a.createElement("div",{className:w.a.Members},p.a.createElement("div",{className:w.a.topArea},p.a.createElement(C.a,{type:"info",showIcon:!0,message:"\u53ea\u6709\u5c0f\u7ec4\u6210\u5458\u53ef\u5c06\u4ed3\u5e93\u52a0\u5165\u5c0f\u7ec4"}),p.a.createElement("div",{className:w.a.addMemberButtonWrapper},r?p.a.createElement($,null):null)),p.a.createElement(v.a,{loading:t,locale:{emptyText:p.a.createElement(k.a,{description:"\u6ca1\u6709\u6210\u5458"})},dataSource:Object(E.a)(n),renderItem:function(e){if(null!==e){var n=e.nickname,s=e.username,u=e.avatar;return p.a.createElement(b.a,{size:"small",key:s},p.a.createElement("div",{className:w.a.cardContent},p.a.createElement(O.a,{className:w.a.titleWrapper,to:g.Function.generatePersonalCenterRoute({username:s})},p.a.createElement("div",{className:w.a.avatarWrapper},p.a.createElement(F.a,{avatar:u})),p.a.createElement("div",{className:w.a.name},n,"(",s,")"),p.a.createElement("div",{className:w.a.isAdminTagWrapper},a.includes(s)?p.a.createElement(x.a,{color:"blue",className:w.a.isAdminTag},"\u7ba1\u7406\u5458"):null)),r?p.a.createElement("div",{className:w.a.buttonWrapper},p.a.createElement(h.a.Group,null,a.includes(s)?p.a.createElement(A.a,{title:"\u786e\u8ba4\u64a4\u9500\u6210\u5458 ".concat(s," \u7684\u7ba1\u7406\u5458\u6743\u9650\uff1f"),onConfirm:i(s),disabled:t},p.a.createElement(h.a,{loading:t,disabled:t},"\u64a4\u9500\u7ba1\u7406\u5458")):p.a.createElement(A.a,{title:"\u786e\u8ba4\u8bbe\u7f6e\u6210\u5458 ".concat(s," \u4e3a\u7ba1\u7406\u5458\uff1f"),onConfirm:o(s),disabled:t},p.a.createElement(h.a,{type:"primary",loading:t,disabled:t},"\u8bbe\u4e3a\u7ba1\u7406\u5458")),p.a.createElement(A.a,{title:"\u786e\u8ba4\u79fb\u9664\u6210\u5458 ".concat(s,"\uff1f"),onConfirm:c(s),disabled:t},p.a.createElement(h.a,{type:"danger",loading:t,disabled:t},"\u79fb\u9664")))):null))}return null}}))})),z=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(m.a)(this,Object(d.a)(n).call(this,e))).setStatePromise=Object(I.promisify)(t.setState),t.onAddMemberListener=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.componentDidMount();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),t.removeAccount=function(){var e=Object(i.a)(c.a.mark((function e(n){var r,a,o,i,s,u,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,a=r.accounts,o=r.profiles,i=r.admins,s=a.filter((function(e){return e.username!==n})),u=o.filter((function(e){return null!==e&&e.username!==n})),m=i.filter((function(e){return e.username!==n})),e.next=6,t.setStatePromise({accounts:s,profiles:u,admins:m});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.addAdmin=function(){var e=Object(i.a)(c.a.mark((function e(n){var r,a,o,i,s,u,m,d,l,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,a=r.accounts,o=r.admins,i=Array.from(o),s=!0,u=!1,m=void 0,e.prev=5,d=a[Symbol.iterator]();case 7:if(s=(l=d.next()).done){e.next=15;break}if((f=l.value).username!==n){e.next=12;break}return i.push(f),e.abrupt("break",15);case 12:s=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),u=!0,m=e.t0;case 21:e.prev=21,e.prev=22,s||null==d.return||d.return();case 24:if(e.prev=24,!u){e.next=27;break}throw m;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,t.setStatePromise({admins:i});case 31:case"end":return e.stop()}}),e,null,[[5,17,21,29],[22,,24,28]])})));return function(n){return e.apply(this,arguments)}}(),t.removeAdmin=function(){var e=Object(i.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.admins,a=r.filter((function(e){return e.username!==n})),e.next=4,t.setStatePromise({admins:a});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),t.loadIsAdmin=Object(i.a)(c.a.mark((function e(){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,W.c.isAdmin({id:Number.parseInt(n)});case 3:if(null===(r=e.sent)){e.next=8;break}return a=r.isAdmin,e.next=8,t.setStatePromise({isAdmin:a});case 8:case"end":return e.stop()}}),e)}))),t.loadAccounts=Object(i.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,W.c.accounts({id:Number.parseInt(n)});case 3:if(null===(r=e.sent)){e.next=7;break}return e.next=7,t.setStatePromise({accounts:r});case 7:case"end":return e.stop()}}),e)}))),t.loadAdmins=Object(i.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,W.c.admins({id:Number.parseInt(n)});case 3:if(null===(r=e.sent)){e.next=7;break}return e.next=7,t.setStatePromise({admins:r});case 7:case"end":return e.stop()}}),e)}))),t.loadProfiles=Object(i.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.accounts,e.next=3,Promise.all(n.map((function(e){var n=e.username;return W.e.get({username:n})})));case 3:return r=e.sent,e.next=6,t.setStatePromise({profiles:r});case 6:case"end":return e.stop()}}),e)}))),t.onRemoveAccountConfirm=function(e){var n=t.props.match.params.id;return(Object(i.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.setStatePromise({loading:!0});case 2:return r.next=4,W.c.removeAccounts({id:Number.parseInt(n)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u79fb\u9664\u6210\u5458\u6210\u529f"}),r.next=9,t.removeAccount(e);case 9:return r.next=11,t.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},t.onSetAdminConfirm=function(e){var n=t.props.match.params.id;return(Object(i.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.setStatePromise({loading:!0});case 2:return r.next=4,W.c.addAdmins({id:Number.parseInt(n)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u6210\u529f\u8bbe\u7f6e ".concat(e," \u4e3a\u7ba1\u7406\u5458")}),r.next=9,t.addAdmin(e);case 9:return r.next=11,t.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},t.onRemoveAdminConfirm=function(e){var n=t.props.match.params.id;return(Object(i.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.setStatePromise({loading:!0});case 2:return r.next=4,W.c.removeAdmins({id:Number.parseInt(n)},[e]);case 4:if(null===r.sent){r.next=9;break}return a.a.success({message:"\u6210\u529f\u64a4\u9500 ".concat(e," \u7684\u7ba1\u7406\u5458\u8eab\u4efd")}),r.next=9,t.removeAdmin(e);case 9:return r.next=11,t.setStatePromise({loading:!1});case 11:case"end":return r.stop()}}),r)}))))},t.state={accounts:[],admins:[],profiles:[],loading:!0,isAdmin:!1},T.on(r.addMember,t.onAddMemberListener),t}return Object(l.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadAccounts(),this.loadAdmins(),this.loadIsAdmin()]);case 4:return e.next=6,this.loadProfiles();case 6:return e.next=8,this.setStatePromise({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(c.a.mark((function e(n,t,r){var a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.match.params.id,o=n.match.params.id,a===o){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(n,t,r){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){T.removeListener(r.addMember,this.onAddMemberListener)}},{key:"render",value:function(){var e=this.state,n=e.profiles,t=e.loading,r=e.isAdmin,a=e.admins;return p.a.createElement(G,{profiles:n,loading:t,isAdmin:r,adminUsernames:a.map((function(e){return e.username})),onRemoveAccountConfirm:this.onRemoveAccountConfirm,onSetAdminConfirm:this.onSetAdminConfirm,onRemoveAdminConfirm:this.onRemoveAdminConfirm})}}]),n}(f.PureComponent),K=Object(R.f)(z);t.d(n,"default",(function(){return K}))}}]);
//# sourceMappingURL=28.ef906cd7.chunk.js.map