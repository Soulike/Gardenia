"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[9806],{18527:function(E,l,t){t.d(l,{Z:function(){return e.Z}});var e=t(12030)},50732:function(E,l,t){t.r(l),t.d(l,{default:function(){return b}});var e=t(89526),u={ChangePassword:"Style_ChangePassword__23jPI",loginTip:"Style_loginTip__eTad-",form:"Style_form__yfd5N",inputWrapper:"Style_inputWrapper__B1Vw4",logo:"Style_logo__5N58d",button:"Style_button__-QUtu"},g=t(49004),Z=t(565),v=t(18527),d=t(32014),p=t(30592),P=t(54846),D=t(15675),y=t(26190),T=t(59807),N=t(7320),B=t(36393);function R(S){const{username:C,password:n,repeatPassword:o,verificationCode:a,getVerificationCodeButtonText:s,onPasswordChange:i,onUsernameChange:r,onRepeatPasswordChange:c,onVerificationCodeChange:h,onSubmit:A,onGetVerificationCodeButtonClick:M,getVerificationCodeButtonDisabled:H,loading:f}=S;return e.createElement("main",{className:u.ChangePassword},e.createElement("form",{action:"#",className:u.form,onSubmit:A},e.createElement("img",{className:u.logo,src:g.Z,alt:"web_developer_logo"}),e.createElement("div",{className:u.loginTip},"\u4E0D\u9700\u8981\u4FEE\u6539\u5BC6\u7801\uFF1F",e.createElement(Z.rU,{to:B.yt[B.DV.LOGIN]},"\u70B9\u6B64\u767B\u5F55")),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u7528\u6237\u540D"),e.createElement(d.Z,{type:"text",size:"large",autoFocus:!0,value:C,onChange:r,prefix:e.createElement(P.Z,null),disabled:f})),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u65B0\u5BC6\u7801"),e.createElement(d.Z,{type:"password",size:"large",value:n,onChange:i,prefix:e.createElement(D.Z,null),disabled:f}),e.createElement(T.Z,null,"\u4E3A\u4E86\u60A8\u7684\u8D26\u6237\u5B89\u5168\uFF0C\u5BC6\u7801\u8981\u6C42 ",N.Q)),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u91CD\u590D\u65B0\u5BC6\u7801"),e.createElement(d.Z,{type:"password",size:"large",value:o,onChange:c,prefix:e.createElement(D.Z,null),disabled:f})),e.createElement("div",{className:u.inputWrapper},e.createElement(v.Z,{required:!0},"\u90AE\u7BB1\u9A8C\u8BC1\u7801"),e.createElement(d.Z,{type:"text",size:"large",value:a,onChange:h,prefix:e.createElement(y.Z,null),disabled:f,addonAfter:e.createElement(p.Z,{type:"link",onClick:M,disabled:H||f},s)})),e.createElement(p.Z,{htmlType:"submit",className:u.button,size:"large",type:"primary",block:!0,disabled:f,loading:f},"\u4FEE\u6539\u5BC6\u7801")))}var x=e.memo(R),O=t(62371),F=t(10330),V=t(43245),m=t(24315),z=t(60269),I=t(60353),U=t(92070),G=t(65092),w=(S,C,n)=>new Promise((o,a)=>{var s=c=>{try{r(n.next(c))}catch(h){a(h)}},i=c=>{try{r(n.throw(c))}catch(h){a(h)}},r=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,i);r((n=n.apply(S,C)).next())});class L extends e.PureComponent{constructor(C){super(C);this.setTitle=()=>{document.title=`\u4FEE\u6539\u5BC6\u7801 - ${B.A1}`},this.onUsernameChange=n=>{this.setState({username:n.target.value})},this.onPasswordChange=n=>{this.setState({password:n.target.value})},this.onRepeatPasswordChange=n=>{this.setState({repeatPassword:n.target.value})},this.onVerificationCodeChange=n=>{this.setState({verificationCode:n.target.value})},this.onGetVerificationCodeButtonClick=()=>w(this,null,function*(){const n=30;let o=0;const{getVerificationCodeButtonText:a}=this.state,{username:s}=this.state;if(!F.username(s))m.Z.warn({message:V.id});else{this.setState({getVerificationCodeButtonDisabled:!0});const i=setInterval(()=>{o++,this.setState({getVerificationCodeButtonText:`${n-o} \u79D2\u540E\u518D\u6B21\u83B7\u53D6`})},1e3),r=setTimeout(()=>{clearInterval(i),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:a})},n*1e3);(yield O.mR.sendVerificationCodeByUsername({username:s}))!==null?m.Z.success({message:"\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F",description:`\u8BF7\u5230\u7528\u6237\u540D ${s} \u4F7F\u7528\u7684\u90AE\u7BB1\u4E2D\u67E5\u770B`}):(clearInterval(i),clearTimeout(r),this.setState({getVerificationCodeButtonDisabled:!1,getVerificationCodeButtonText:a}))}}),this.onSubmit=n=>w(this,null,function*(){n.preventDefault();const{username:o,password:a,repeatPassword:s,verificationCode:i}=this.state;if(!F.username(o))m.Z.warn({message:V.id});else if(!F.password(a))m.Z.warn({message:V.Qj});else if(a!==s)m.Z.warn({message:"\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"});else if(!F.verificationCode(i))m.Z.warn({message:V.FF});else{this.setState({loading:!0});const r=z.mR.calculateHash(o,a);if((yield O.mR.changePassword({username:o,hash:r},i))!==null){m.Z.success({message:"\u4FEE\u6539\u5BC6\u7801\u6210\u529F",description:"\u8BF7\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u5F55"});const{setLoggedOut:h,history:A}=this.props;return yield h(),A.push(B.yt[B.DV.LOGIN])}this.setState({loading:!1})}}),this.state={username:"",password:"",repeatPassword:"",verificationCode:"",getVerificationCodeButtonText:"\u83B7\u53D6\u9A8C\u8BC1\u7801",getVerificationCodeButtonDisabled:!1,loading:!1}}componentDidMount(){this.setTitle()}render(){const{username:C,password:n,repeatPassword:o,verificationCode:a,getVerificationCodeButtonText:s,loading:i,getVerificationCodeButtonDisabled:r}=this.state;return e.createElement(x,{username:C,password:n,repeatPassword:o,verificationCode:a,onUsernameChange:this.onUsernameChange,onPasswordChange:this.onPasswordChange,onRepeatPasswordChange:this.onRepeatPasswordChange,onVerificationCodeChange:this.onVerificationCodeChange,onSubmit:this.onSubmit,getVerificationCodeButtonText:s,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,loading:i,getVerificationCodeButtonDisabled:r})}}const W={setLoggedOut:I.Action.setLoggedOutAction};var b=(0,U.$j)(null,W)((0,G.EN)(L))},43245:function(E,l,t){t.d(l,{id:function(){return e},Qj:function(){return u},FF:function(){return g}});const e="\u7528\u6237\u540D\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",u="\u5BC6\u7801\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165",g="\u9A8C\u8BC1\u7801\u4E0D\u6B63\u786E"},7320:function(E,l,t){t.d(l,{i:function(){return e},Q:function(){return u}});const e="1~20 \u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u53CA\u4E0B\u5212\u7EBF",u="6 \u4F4D\u53CA\u4EE5\u4E0A"},26190:function(E,l,t){t.d(l,{Z:function(){return p}});var e=t(1413),u=t(89526),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},Z=g,v=t(36593),d=function(D,y){return u.createElement(v.Z,(0,e.Z)((0,e.Z)({},D),{},{ref:y,icon:Z}))};d.displayName="BarcodeOutlined";var p=u.forwardRef(d)}}]);

//# sourceMappingURL=9806.ab5fe651.chunk.js.map