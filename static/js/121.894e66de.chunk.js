"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[121],{23782:function($,L,t){t.d(L,{Z:function(){return z}});var e=t(89526),l=t(75113),O={AccessibilityTag:"Style_AccessibilityTag__GwIoI"},V=Object.defineProperty,F=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,D=(i,u,d)=>u in i?V(i,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[u]=d,m=(i,u)=>{for(var d in u||(u={}))b.call(u,d)&&D(i,d,u[d]);if(F)for(var d of F(u))R.call(u,d)&&D(i,d,u[d]);return i},W=(i,u)=>{var d={};for(var S in i)b.call(i,S)&&u.indexOf(S)<0&&(d[S]=i[S]);if(i!=null&&F)for(var S of F(i))u.indexOf(S)<0&&R.call(i,S)&&(d[S]=i[S]);return d};function j(i){const u=i,{isPublic:d}=u,S=W(u,["isPublic"]);return d?e.createElement(l.Z,m({className:O.AccessibilityTag,color:"blue"},S),"\u516C\u5F00"):e.createElement(l.Z,m({className:O.AccessibilityTag,color:"gold"},S),"\u79C1\u4EBA")}var z=e.memo(j)},18503:function($,L,t){t.d(L,{Z:function(){return e.Z}});var e=t(23782)},66049:function($,L,t){t.d(L,{Z:function(){return A}});var e=t(89526),l=t(65293),O=t(30592),V=t(43546),F=t(1413),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},R=b,D=t(36593),m=function(U,N){return e.createElement(D.Z,(0,F.Z)((0,F.Z)({},U),{},{ref:N,icon:R}))};m.displayName="StarFilled";var W=e.forwardRef(m),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},z=j,i=function(U,N){return e.createElement(D.Z,(0,F.Z)((0,F.Z)({},U),{},{ref:N,icon:z}))};i.displayName="StarOutlined";var u=e.forwardRef(i),d=t(14006),S=(T,U,N)=>new Promise((G,x)=>{var k=I=>{try{M(N.next(I))}catch(Q){x(Q)}},X=I=>{try{M(N.throw(I))}catch(Q){x(Q)}},M=I=>I.done?G(I.value):Promise.resolve(I.value).then(k,X);M((N=N.apply(T,U)).next())});function K(T){const{hasStared:U,starAmount:N,loading:G,onClick:x}=T;return e.createElement(l.Z,{size:-1},e.createElement(O.Z,{size:"small",onClick:k=>S(this,null,function*(){k.preventDefault(),typeof x=="function"&&(yield x(k))}),loading:G,disabled:G},U?e.createElement(e.Fragment,null,e.createElement(W,null)," Unstar"):e.createElement(e.Fragment,null,e.createElement(u,null)," Star")),e.createElement(V.Z,{title:N},e.createElement(O.Z,{size:"small",onClick:k=>S(this,null,function*(){return k.preventDefault()})},d.Ld.getNumberAbbreviation(N))))}var A=e.memo(K)},60121:function($,L,t){t.r(L),t.d(L,{default:function(){return me}});var e=t(89526),l={Repository:"Style_Repository__HpNaH",header:"Style_header__VlSao",tabContent:"Style_tabContent__Z5P69",basicInfo:"Style_basicInfo__31xCv",tagAndRepository:"Style_tagAndRepository__hOkJ0",tag:"Style_tag__MWOhO",usernameAndName:"Style_usernameAndName__tz1oX",forkFrom:"Style_forkFrom__s4HrK",text:"Style_text__NaGtX",buttonArea:"Style_buttonArea__zmkkC",buttonWrapper:"Style_buttonWrapper__1Ov2+",tab:"Style_tab__LgAV6"},O=t(35034),V=t(75113),F=t(18503),b=t(565),R=t(18440),D=(c=>(c.CODE="CODE",c.ISSUES="ISSUES",c.PULL_REQUESTS="PULL_REQUESTS",c.SETTINGS="SETTINGS",c))(D||{}),m=D,W={},j=t(65293),z=t(30592),i=t(43546),u=t(14006),d=t(70281);function S(c){const{onClick:r,forkAmount:a,loading:s}=c;return e.createElement(j.Z,{className:W.ForkButton,size:-1},e.createElement(z.Z,{onClick:r,disabled:s,loading:s,size:"small"},e.createElement(d.Z,null),"Fork"),e.createElement(i.Z,{title:a},e.createElement(z.Z,{disabled:s,size:"small"},u.Ld.getNumberAbbreviation(a))))}var K=e.memo(S),A=t(62371),T=t(65092),U=t(24315),N=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});class G extends e.PureComponent{constructor(r){super(r);this.loadForkAmount=()=>N(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.CB.forkAmount({username:a,name:s});if(n!==null){const{amount:f}=n;this.setState({forkAmount:f})}}),this.onClick=()=>N(this,null,function*(){this.setState({loading:!0});const{match:{params:{username:a,repositoryName:s}}}=this.props;(yield A._j.fork({username:a,name:s}))!==null&&U.Z.success({message:"fork \u6210\u529F",description:"\u53EF\u524D\u5F80\u4E2A\u4EBA\u4E2D\u5FC3\u4ED3\u5E93\u5217\u8868\u67E5\u770B"}),this.setState({loading:!1})}),this.state={forkAmount:0,loading:!1}}componentDidMount(){return N(this,null,function*(){this.setState({loading:!0}),yield this.loadForkAmount(),this.setState({loading:!1})})}render(){const{forkAmount:r,loading:a}=this.state;return e.createElement(K,{onClick:this.onClick,forkAmount:r,loading:a})}}var x=(0,T.EN)(G),k=t(49645),X=t(30431),M=t(90566),I=t(48425),Q=t(66049),w=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});class se extends e.PureComponent{constructor(r){super(r);this.setStatePromise=a=>new Promise(s=>{this.setState(a,()=>{s()})}),this.loadHasStared=()=>w(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.Ux.isStaredRepository({username:a,name:s});if(n!==null){const{isStared:f}=n;yield this.setStatePromise({hasStared:f})}}),this.loadStarAmount=()=>w(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.Ux.getRepositoryStarAmount({username:a,name:s});if(n!==null){const{amount:f}=n;yield this.setStatePromise({starAmount:f})}}),this.onClick=()=>w(this,null,function*(){const{hasStared:a,starAmount:s}=this.state,{match:{params:{username:n,repositoryName:f}}}=this.props;yield this.setStatePromise({loading:!0}),a?(yield A.Ux.remove({username:n,name:f}))!==null&&(yield this.setStatePromise({hasStared:!1,starAmount:s-1})):(yield A.Ux.add({username:n,name:f}))!==null&&(yield this.setStatePromise({hasStared:!0,starAmount:s+1})),yield this.setStatePromise({loading:!1})}),this.state={hasStared:!1,starAmount:0,loading:!1}}componentDidMount(){return w(this,null,function*(){yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadHasStared(),this.loadStarAmount()]),yield this.setStatePromise({loading:!1})})}componentDidUpdate(r,a,s){return w(this,null,function*(){const{match:{params:{username:n,repositoryName:f}}}=this.props,{match:{params:{username:v,repositoryName:E}}}=r;(n!==v||f!==E)&&(yield this.componentDidMount())})}render(){const{hasStared:r,loading:a,starAmount:s}=this.state;return e.createElement(Q.Z,{hasStared:r,loading:a,starAmount:s,onClick:this.onClick})}}var oe=(0,T.EN)(se),_=t(92070);function re(c){const{repository:{username:r,name:a,isPublic:s},forkFrom:n,loading:f,onTabChange:v,tabActiveKey:E,showSettings:o,children:y,openPullRequestAmount:J,openIssueAmount:Y,isLoggedIn:q}=c;return f?null:e.createElement("div",{className:l.Repository},e.createElement("div",{className:l.header},e.createElement("div",{className:l.basicInfo},e.createElement("div",{className:l.tagAndRepository},e.createElement("div",{className:l.tag},e.createElement(F.Z,{isPublic:s})),e.createElement("div",{className:l.usernameAndName},e.createElement(b.rU,{to:R.Function.generatePersonalCenterRoute({username:r})},r)," / ",e.createElement(b.rU,{to:R.Function.generateRepositoryCodeRoute({username:r,repositoryName:a})},e.createElement("b",null,a)))),n===null?null:e.createElement("div",{className:l.forkFrom},e.createElement("div",{className:l.text},"fork \u81EA"),e.createElement(b.rU,{to:R.Function.generatePersonalCenterRoute({username:n.username})},n.username)," / ",e.createElement(b.rU,{to:R.Function.generateRepositoryCodeRoute({username:n.username,repositoryName:n.name})},e.createElement("b",null,n.name)))),e.createElement("div",{className:l.buttonArea},q?e.createElement(e.Fragment,null,e.createElement("div",{className:l.buttonWrapper},e.createElement(oe,null)),e.createElement("div",{className:l.buttonWrapper},e.createElement(x,null))):null)),e.createElement(O.Z,{defaultActiveKey:m.CODE,type:"card",className:l.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:v,activeKey:E},e.createElement(O.Z.TabPane,{tab:e.createElement(e.Fragment,null,e.createElement(k.Z,null),"\u4EE3\u7801"),key:m.CODE},e.createElement("div",{className:l.tabContent},y)),e.createElement(O.Z.TabPane,{tab:e.createElement(e.Fragment,null,e.createElement(X.Z,null),"Issues ",e.createElement(V.Z,{className:l.tag},Y)),key:m.ISSUES},e.createElement("div",{className:l.tabContent},y)),e.createElement(O.Z.TabPane,{tab:e.createElement(e.Fragment,null,e.createElement(M.Z,null),"Pull Requests ",e.createElement(V.Z,{className:l.tag},J)),key:m.PULL_REQUESTS},e.createElement("div",{className:l.tabContent},y)),o?e.createElement(O.Z.TabPane,{tab:e.createElement(e.Fragment,null,e.createElement(I.Z,null),"\u8BBE\u7F6E"),key:m.SETTINGS},e.createElement("div",{className:l.tabContent},y)):null))}const le=c=>{const{Root:{isLoggedIn:r}}=c;return{isLoggedIn:r}};var ie=e.memo((0,_.$j)(le)(re)),ue=t(60269),C=t(36393),ee=t(76320),H=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});function ce(c){const[r,a]=(0,e.useState)(new ue._j("","","",!0)),[s,n]=(0,e.useState)(!1),[f,v]=(0,e.useState)(m.CODE),[E,o]=(0,e.useState)(null),[y,J]=(0,e.useState)(0),[Y,q]=(0,e.useState)(0),[de,fe]=(0,e.useState)(!1),B=(0,T.k6)(),{objectType:te,commitHash:ne,username:h,repositoryName:p}=(0,T.UO)(),{path:ae}=(0,T.$B)(),{isLoggedIn:ye}=(0,_.v9)(({Root:g})=>g);(0,e.useEffect)(()=>{(()=>{te!==void 0&&ne===void 0&&B.replace(C.yt[C.DV.NOT_FOUND])})()},[te,ne,B]),(0,e.useEffect)(()=>{document.title=`${h}/${p} - ${C.A1}`},[h,p]),(0,e.useLayoutEffect)(()=>{const g=()=>H(this,null,function*(){const P=yield A._j.shouldShowOptions({username:h,name:p});if(P!==null){const{showOptions:Z}=P;fe(Z)}});n(!0),g().finally(()=>n(!1))},[h,p,ye]),(0,e.useLayoutEffect)(()=>{const{REPOSITORY:{REPOSITORY:g,CODE:P,ISSUES:Z,ISSUE:ve,CREATE_ISSUE:he,PULL_REQUESTS:pe,PULL_REQUEST:ge,SETTINGS:Pe,CONFLICT:Ne}}=C.DV;switch(ae){case C.yt[P]:case C.yt[g]:{v(m.CODE);break}case C.yt[he]:case C.yt[ve]:case C.yt[Z]:{v(m.ISSUES);break}case C.yt[ge]:case C.yt[pe]:case C.yt[Ne]:{v(m.PULL_REQUESTS);break}case C.yt[Pe.SETTINGS]:{v(m.SETTINGS);break}}},[ae]),(0,e.useEffect)(()=>{const g=()=>H(this,null,function*(){const P=yield A.CB.repository({username:h},{name:p});if(P!==null)a(P);else return B.replace(C.yt[C.DV.NOT_FOUND])});n(!0),g().finally(()=>n(!1))},[h,p,B]),(0,e.useEffect)(()=>{const g=()=>H(this,null,function*(){const P=yield A.CB.forkFrom({username:h,name:p});if(P!==null){const{repository:Z}=P;o(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]),(0,e.useEffect)(()=>{const g=()=>H(this,null,function*(){const P=yield A.i7.getPullRequestAmount({username:h,name:p},ee.El.OPEN);if(P!==null){const{amount:Z}=P;J(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]),(0,e.useEffect)(()=>{const g=()=>H(this,null,function*(){const P=yield A.$9.getAmountByRepository({username:h,name:p},ee.dG.OPEN);if(P!==null){const{amount:Z}=P;q(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]);const Se=g=>{switch(g){case m.CODE:return B.push(R.Function.generateRepositoryCodeRoute({username:h,repositoryName:p}));case m.ISSUES:return B.push(R.Function.generateRepositoryIssuesRoute({username:h,repositoryName:p}));case m.PULL_REQUESTS:return B.push(R.Function.generateRepositoryPullRequestsRoute({username:h,repositoryName:p}));case m.SETTINGS:return B.push(R.Function.generateRepositorySettingsRoute({username:h,repositoryName:p}));default:return}},{children:Ee}=c;return e.createElement(ie,{showSettings:de,repository:r,loading:s,onTabChange:Se,tabActiveKey:f,forkFrom:E,openPullRequestAmount:y,openIssueAmount:Y},Ee)}var me=e.memo(ce)}}]);

//# sourceMappingURL=121.894e66de.chunk.js.map