(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[27],{1019:function(x,F,t){"use strict";var r=t(986);t.d(F,"a",function(){return r.a})},1113:function(x,F,t){x.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1114:function(x,F,t){},1394:function(x,F,t){"use strict";t.r(F),t.d(F,"default",function(){return he});var r=t(0),e=t.n(r),k=t(1113),u=t.n(k),I=t(337),j=t(963),Q=t(1019),T=t(17),R=t(48),L;(function(l){l.CODE="CODE",l.ISSUES="ISSUES",l.PULL_REQUESTS="PULL_REQUESTS",l.SETTINGS="SETTINGS"})(L||(L={}));var f=L,z=t(1114),X=t.n(z),G=t(964),V=t(101),c=t(170),m=t(67),E=t(975);function S(l){const{onClick:i,forkAmount:n,loading:o}=l;return e.a.createElement(G.b,{className:X.a.ForkButton,size:-1},e.a.createElement(V.a,{onClick:i,disabled:o,loading:o,size:"small"},e.a.createElement(E.a,null),"Fork"),e.a.createElement(c.a,{title:n},e.a.createElement(V.a,{disabled:o,size:"small"},m.d.getNumberAbbreviation(n))))}var Z=e.a.memo(S),A=t(27),N=t(46),D=t(339),C,w=typeof C!="undefined"?C:l=>{throw new Error('Dynamic require of "'+l+'" is not supported')},U=(l,i,n)=>new Promise((o,a)=>{var d=s=>{try{v(n.next(s))}catch(y){a(y)}},p=s=>{try{v(n.throw(s))}catch(y){a(y)}},v=s=>s.done?o(s.value):Promise.resolve(s.value).then(d,p);v((n=n.apply(l,i)).next())});class W extends r.PureComponent{constructor(i){super(i);this.loadForkAmount=()=>U(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield A.j.forkAmount({username:n,name:o});if(a!==null){const{amount:d}=a;this.setState({forkAmount:d})}}),this.onClick=()=>U(this,null,function*(){this.setState({loading:!0});const{match:{params:{username:n,repositoryName:o}}}=this.props;(yield A.i.fork({username:n,name:o}))!==null&&D.a.success({message:"fork \u6210\u529F",description:"\u53EF\u524D\u5F80\u4E2A\u4EBA\u4E2D\u5FC3\u4ED3\u5E93\u5217\u8868\u67E5\u770B"}),this.setState({loading:!1})}),this.state={forkAmount:0,loading:!1}}componentDidMount(){return U(this,null,function*(){this.setState({loading:!0}),yield this.loadForkAmount(),this.setState({loading:!1})})}render(){const{forkAmount:i,loading:n}=this.state;return e.a.createElement(Z,{onClick:this.onClick,forkAmount:i,loading:n})}}var q=Object(N.j)(W),H=t(976),B=t(144),J=t(978),ue=t(972),ce=t(992),me=t(96),ae,je=typeof ae!="undefined"?ae:l=>{throw new Error('Dynamic require of "'+l+'" is not supported')},Y=(l,i,n)=>new Promise((o,a)=>{var d=s=>{try{v(n.next(s))}catch(y){a(y)}},p=s=>{try{v(n.throw(s))}catch(y){a(y)}},v=s=>s.done?o(s.value):Promise.resolve(s.value).then(d,p);v((n=n.apply(l,i)).next())});class de extends r.PureComponent{constructor(i){super(i);this.setStatePromise=Object(me.promisify)(this.setState),this.loadHasStared=()=>Y(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield A.k.isStaredRepository({username:n,name:o});if(a!==null){const{isStared:d}=a;yield this.setStatePromise({hasStared:d})}}),this.loadStarAmount=()=>Y(this,null,function*(){const{match:{params:{username:n,repositoryName:o}}}=this.props,a=yield A.k.getRepositoryStarAmount({username:n,name:o});if(a!==null){const{amount:d}=a;yield this.setStatePromise({starAmount:d})}}),this.onClick=()=>Y(this,null,function*(){const{hasStared:n,starAmount:o}=this.state,{match:{params:{username:a,repositoryName:d}}}=this.props;yield this.setStatePromise({loading:!0}),n?(yield A.k.remove({username:a,name:d}))!==null&&(yield this.setStatePromise({hasStared:!1,starAmount:o-1})):(yield A.k.add({username:a,name:d}))!==null&&(yield this.setStatePromise({hasStared:!0,starAmount:o+1})),yield this.setStatePromise({loading:!1})}),this.state={hasStared:!1,starAmount:0,loading:!1}}componentDidMount(){return Y(this,null,function*(){yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadHasStared(),this.loadStarAmount()]),yield this.setStatePromise({loading:!1})})}componentDidUpdate(i,n,o){return Y(this,null,function*(){const{match:{params:{username:a,repositoryName:d}}}=this.props,{match:{params:{username:p,repositoryName:v}}}=i;(a!==p||d!==v)&&(yield this.componentDidMount())})}render(){const{hasStared:i,loading:n,starAmount:o}=this.state;return e.a.createElement(ce.a,{hasStared:i,loading:n,starAmount:o,onClick:this.onClick})}}var fe=Object(N.j)(de),ne=t(39);function Ee(l){const{repository:{username:i,name:n,isPublic:o},forkFrom:a,loading:d,onTabChange:p,tabActiveKey:v,showSettings:s,children:y,openPullRequestAmount:_,openIssueAmount:ee,isLoggedIn:te}=l;return d?null:e.a.createElement("div",{className:u.a.Repository},e.a.createElement("div",{className:u.a.header},e.a.createElement("div",{className:u.a.basicInfo},e.a.createElement("div",{className:u.a.tagAndRepository},e.a.createElement("div",{className:u.a.tag},e.a.createElement(Q.a,{isPublic:o})),e.a.createElement("div",{className:u.a.usernameAndName},e.a.createElement(T.b,{to:R.Function.generatePersonalCenterRoute({username:i})},i)," / ",e.a.createElement(T.b,{to:R.Function.generateRepositoryCodeRoute({username:i,repositoryName:n})},e.a.createElement("b",null,n)))),a===null?null:e.a.createElement("div",{className:u.a.forkFrom},e.a.createElement("div",{className:u.a.text},"fork \u81EA"),e.a.createElement(T.b,{to:R.Function.generatePersonalCenterRoute({username:a.username})},a.username)," / ",e.a.createElement(T.b,{to:R.Function.generateRepositoryCodeRoute({username:a.username,repositoryName:a.name})},e.a.createElement("b",null,a.name)))),e.a.createElement("div",{className:u.a.buttonArea},te?e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:u.a.buttonWrapper},e.a.createElement(fe,null)),e.a.createElement("div",{className:u.a.buttonWrapper},e.a.createElement(q,null))):null)),e.a.createElement(I.a,{defaultActiveKey:f.CODE,type:"card",className:u.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:p,activeKey:v},e.a.createElement(I.a.TabPane,{tab:e.a.createElement(e.a.Fragment,null,e.a.createElement(H.a,null),"\u4EE3\u7801"),key:f.CODE},e.a.createElement("div",{className:u.a.tabContent},y)),e.a.createElement(I.a.TabPane,{tab:e.a.createElement(e.a.Fragment,null,e.a.createElement(B.a,null),"Issues ",e.a.createElement(j.a,{className:u.a.tag},ee)),key:f.ISSUES},e.a.createElement("div",{className:u.a.tabContent},y)),e.a.createElement(I.a.TabPane,{tab:e.a.createElement(e.a.Fragment,null,e.a.createElement(J.a,null),"Pull Requests ",e.a.createElement(j.a,{className:u.a.tag},_)),key:f.PULL_REQUESTS},e.a.createElement("div",{className:u.a.tabContent},y)),s?e.a.createElement(I.a.TabPane,{tab:e.a.createElement(e.a.Fragment,null,e.a.createElement(ue.a,null),"\u8BBE\u7F6E"),key:f.SETTINGS},e.a.createElement("div",{className:u.a.tabContent},y)):null))}const ye=l=>{const{Root:{isLoggedIn:i}}=l;return{isLoggedIn:i}};var Se=e.a.memo(Object(ne.b)(ye)(Ee)),ve=t(132),b=t(1),re=t(22),oe,Le=typeof oe!="undefined"?oe:l=>{throw new Error('Dynamic require of "'+l+'" is not supported')},$=(l,i,n)=>new Promise((o,a)=>{var d=s=>{try{v(n.next(s))}catch(y){a(y)}},p=s=>{try{v(n.throw(s))}catch(y){a(y)}},v=s=>s.done?o(s.value):Promise.resolve(s.value).then(d,p);v((n=n.apply(l,i)).next())});function pe(l){const[i,n]=Object(r.useState)(new ve.i("","","",!0)),[o,a]=Object(r.useState)(!1),[d,p]=Object(r.useState)(f.CODE),[v,s]=Object(r.useState)(null),[y,_]=Object(r.useState)(0),[ee,te]=Object(r.useState)(0),[Oe,ge]=Object(r.useState)(!1),K=Object(N.f)(),{objectType:se,commitHash:le,username:h,repositoryName:O}=Object(N.h)(),{path:ie}=Object(N.i)(),{isLoggedIn:Pe}=Object(ne.d)(({Root:g})=>g);Object(r.useEffect)(()=>{(()=>{se!==void 0&&le===void 0&&K.replace(b.d[b.b.NOT_FOUND])})()},[se,le,K]),Object(r.useEffect)(()=>{document.title=`${h}/${O} - ${b.a}`},[h,O]),Object(r.useLayoutEffect)(()=>{const g=()=>$(this,null,function*(){const P=yield A.i.shouldShowOptions({username:h,name:O});if(P!==null){const{showOptions:M}=P;ge(M)}});a(!0),g().finally(()=>a(!1))},[h,O,Pe]),Object(r.useLayoutEffect)(()=>{const{REPOSITORY:{REPOSITORY:g,CODE:P,ISSUES:M,ISSUE:Ce,CREATE_ISSUE:Ae,PULL_REQUESTS:Ne,PULL_REQUEST:Fe,SETTINGS:Te,CONFLICT:Ie}}=b.b;switch(ie){case b.d[P]:case b.d[g]:{p(f.CODE);break}case b.d[Ae]:case b.d[Ce]:case b.d[M]:{p(f.ISSUES);break}case b.d[Fe]:case b.d[Ne]:case b.d[Ie]:{p(f.PULL_REQUESTS);break}case b.d[Te.SETTINGS]:{p(f.SETTINGS);break}}},[ie]),Object(r.useEffect)(()=>{const g=()=>$(this,null,function*(){const P=yield A.j.repository({username:h},{name:O});if(P!==null)n(P);else return K.replace(b.d[b.b.NOT_FOUND])});a(!0),g().finally(()=>a(!1))},[h,O,K]),Object(r.useEffect)(()=>{const g=()=>$(this,null,function*(){const P=yield A.j.forkFrom({username:h,name:O});if(P!==null){const{repository:M}=P;s(M)}});a(!0),g().finally(()=>a(!1))},[h,O]),Object(r.useEffect)(()=>{const g=()=>$(this,null,function*(){const P=yield A.h.getPullRequestAmount({username:h,name:O},re.c.OPEN);if(P!==null){const{amount:M}=P;_(M)}});a(!0),g().finally(()=>a(!1))},[h,O]),Object(r.useEffect)(()=>{const g=()=>$(this,null,function*(){const P=yield A.e.getAmountByRepository({username:h,name:O},re.a.OPEN);if(P!==null){const{amount:M}=P;te(M)}});a(!0),g().finally(()=>a(!1))},[h,O]);const be=g=>{switch(g){case f.CODE:return K.push(R.Function.generateRepositoryCodeRoute({username:h,repositoryName:O}));case f.ISSUES:return K.push(R.Function.generateRepositoryIssuesRoute({username:h,repositoryName:O}));case f.PULL_REQUESTS:return K.push(R.Function.generateRepositoryPullRequestsRoute({username:h,repositoryName:O}));case f.SETTINGS:return K.push(R.Function.generateRepositorySettingsRoute({username:h,repositoryName:O}));default:return}},{children:Re}=l;return e.a.createElement(Se,{showSettings:Oe,repository:i,loading:o,onTabChange:be,tabActiveKey:d,forkFrom:v,openPullRequestAmount:y,openIssueAmount:ee},Re)}var he=e.a.memo(pe)},986:function(x,F,t){"use strict";var r=t(0),e=t.n(r),k=t(963),u=t(989),I=t.n(u),j,Q=Object.defineProperty,T=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,f=(c,m,E)=>m in c?Q(c,m,{enumerable:!0,configurable:!0,writable:!0,value:E}):c[m]=E,z=(c,m)=>{for(var E in m||(m={}))R.call(m,E)&&f(c,E,m[E]);if(T)for(var E of T(m))L.call(m,E)&&f(c,E,m[E]);return c},X=typeof j!="undefined"?j:c=>{throw new Error('Dynamic require of "'+c+'" is not supported')},G=(c,m)=>{var E={};for(var S in c)R.call(c,S)&&m.indexOf(S)<0&&(E[S]=c[S]);if(c!=null&&T)for(var S of T(c))m.indexOf(S)<0&&L.call(c,S)&&(E[S]=c[S]);return E};function V(c){const m=c,{isPublic:E}=m,S=G(m,["isPublic"]);return E?e.a.createElement(k.a,z({className:I.a.AccessibilityTag,color:"blue"},S),"\u516C\u5F00"):e.a.createElement(k.a,z({className:I.a.AccessibilityTag,color:"gold"},S),"\u79C1\u4EBA")}F.a=e.a.memo(V)},989:function(x,F,t){x.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},992:function(x,F,t){"use strict";t.d(F,"a",function(){return A});var r=t(0),e=t.n(r),k=t(964),u=t(101),I=t(170),j=t(3),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},T=Q,R=t(9),L=function(D,C){return r.createElement(R.a,Object(j.a)(Object(j.a)({},D),{},{ref:C,icon:T}))};L.displayName="StarFilled";var f=r.forwardRef(L),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},X=z,G=function(D,C){return r.createElement(R.a,Object(j.a)(Object(j.a)({},D),{},{ref:C,icon:X}))};G.displayName="StarOutlined";var V=r.forwardRef(G),c=t(67),m,E=typeof m!="undefined"?m:N=>{throw new Error('Dynamic require of "'+N+'" is not supported')},S=(N,D,C)=>new Promise((w,U)=>{var W=B=>{try{H(C.next(B))}catch(J){U(J)}},q=B=>{try{H(C.throw(B))}catch(J){U(J)}},H=B=>B.done?w(B.value):Promise.resolve(B.value).then(W,q);H((C=C.apply(N,D)).next())});function Z(N){const{hasStared:D,starAmount:C,loading:w,onClick:U}=N;return e.a.createElement(k.b,{size:-1},e.a.createElement(u.a,{size:"small",onClick:W=>S(this,null,function*(){W.preventDefault(),typeof U=="function"&&(yield U(W))}),loading:w,disabled:w},D?e.a.createElement(e.a.Fragment,null,e.a.createElement(f,null)," Unstar"):e.a.createElement(e.a.Fragment,null,e.a.createElement(V,null)," Star")),e.a.createElement(I.a,{title:C},e.a.createElement(u.a,{size:"small",onClick:W=>S(this,null,function*(){return W.preventDefault()})},c.d.getNumberAbbreviation(C))))}var A=e.a.memo(Z)}}]);

//# sourceMappingURL=27.8b5ac1b2.chunk.js.map