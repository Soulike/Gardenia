(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{1129:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(15);t.a=n.a.memo((function(e){return n.a.createElement(r.b,Object.assign({},e,{target:"_blank",rel:"noopener norefferrer"}))}))},1132:function(e,t,a){"use strict";var s=a(1129);a.d(t,"a",(function(){return s.a}))},1225:function(e,t,a){e.exports={Issues:"Style_Issues__wxh9c",list:"Style_list__1i8bQ",header:"Style_header__2KaVh",statusFilter:"Style_statusFilter__3zE2w",tag:"Style_tag__3Xw8C",pageButtonWrapper:"Style_pageButtonWrapper__P17fr"}},1226:function(e,t,a){e.exports={IssueList:"Style_IssueList__3_LLo",emptyWrapper:"Style_emptyWrapper__3X6HT"}},1227:function(e,t,a){e.exports={Issue:"Style_Issue__3wQKl",titleWrapper:"Style_titleWrapper__3c3D9",iconWrapper:"Style_iconWrapper__3QVF5",info:"Style_info__2PXRc"}},1327:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r={name:"ellipsis",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]}},o=a(12),i=function(e,t){return n.a.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};i.displayName="EllipsisOutlined";t.a=n.a.forwardRef(i)},1343:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=(a(120),a(60)),o=(a(96),a(25)),i=(a(187),a(61)),l=a(1225),u=a.n(l),c=a(15),m=a(137),p=a(24),E=a(19),d=a(1327),h=a(1126),_=a(1125),g=a(1106),S=(a(351),a(104)),y=a(1226),P=a.n(y),N=a(1227),f=a.n(N),A=a(98),C=a(1132);function b(e){switch(e){case E.a.CLOSED:return"red";case E.a.OPEN:return"green"}}var v=n.a.memo((function(e){const{issue:{status:t,no:a,title:s,repositoryUsername:r,repositoryName:o,username:i,creationTime:l}}=e;return n.a.createElement("div",{className:f.a.Issue},n.a.createElement("div",{className:f.a.titleWrapper},n.a.createElement("div",{className:f.a.iconWrapper,style:{color:b(t)}},function(e){switch(e){case E.a.CLOSED:return n.a.createElement(_.a,null);case E.a.OPEN:return n.a.createElement(h.a,null)}}(t)),n.a.createElement(C.a,{to:p.Function.generateRepositoryIssueRoute({username:r,repository:o,no:a.toString()})},n.a.createElement("div",{className:f.a.title},s))),n.a.createElement("div",{className:f.a.info},"#",a," \u7531 ",n.a.createElement("b",null,i)," \u4e8e ",A.b.parseTimestampToDifference(l)," \u521b\u5efa"))}));var k=n.a.memo((function(e){const{issues:t}=e;return n.a.createElement("div",{className:P.a.IssueList},t.length>0?t.map(e=>n.a.createElement(v,{issue:e,key:e.id})):n.a.createElement("div",{className:P.a.emptyWrapper},n.a.createElement(S.a,{description:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684 Issue"})))}));var I=n.a.memo(Object(m.f)((function(e){const{match:{params:{username:t,repository:a}},loading:s,openAmount:l,closedAmount:m,currentStatus:S,onStatusButtonClick:y,currentPageNumber:P,onPrevButtonClick:N,onNextButtonClick:f,noNextPage:A,issues:C}=e;return n.a.createElement("div",{className:u.a.Issues},n.a.createElement(r.a,{spinning:s},n.a.createElement("div",{className:u.a.list},n.a.createElement("div",{className:u.a.header},n.a.createElement("div",{className:u.a.statusFilter},n.a.createElement(o.a.Group,{size:"small"},n.a.createElement(o.a,{type:"link",style:{color:"unset",fontWeight:void 0===S?"bolder":"inherit"},onClick:y(void 0)},n.a.createElement(d.a,null)," \u6240\u6709",n.a.createElement(i.a,{className:u.a.tag},l+m)),n.a.createElement(o.a,{type:"link",style:{color:"green",fontWeight:S===E.a.OPEN?"bolder":"inherit"},onClick:y(E.a.OPEN)},n.a.createElement(h.a,null)," \u5f00\u542f\u7684",n.a.createElement(i.a,{className:u.a.tag},l)),n.a.createElement(o.a,{type:"link",style:{color:"red",fontWeight:S===E.a.CLOSED?"bolder":"inherit"},onClick:y(E.a.CLOSED)},n.a.createElement(_.a,null)," \u5df2\u5173\u95ed",n.a.createElement(i.a,{className:u.a.tag},m)))),n.a.createElement(c.b,{to:p.Function.generateRepositoryCreateIssueRoute({username:t,repository:a})},n.a.createElement(o.a,{type:"primary"},n.a.createElement(g.a,null),"\u521b\u5efa Issue"))),n.a.createElement("div",{className:u.a.issueListWrapper},n.a.createElement(k,{issues:C})),n.a.createElement("div",{className:u.a.pageButtonWrapper},n.a.createElement(o.a.Group,null,n.a.createElement(o.a,{disabled:0===P,onClick:N},"\u4e0a\u4e00\u9875"),n.a.createElement(o.a,{onClick:f,disabled:A},"\u4e0b\u4e00\u9875"))))))}))),O=a(37);class w extends s.PureComponent{constructor(e){super(e),this.loadOpenAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await O.d.getAmountByRepository({username:e,name:t},E.a.OPEN);if(null!==a){const{amount:e}=a;this.setState({openAmount:e})}},this.loadClosedAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await O.d.getAmountByRepository({username:e,name:t},E.a.CLOSED);if(null!==a){const{amount:e}=a;this.setState({closedAmount:e})}},this.onStatusButtonClick=e=>async()=>{switch(this.setState({currentStatus:e,loading:!0,currentPageNumber:0}),e){case E.a.OPEN:await this.loadOpenAmount();break;case E.a.CLOSED:await this.loadClosedAmount();break;default:await Promise.all([this.loadOpenAmount(),this.loadClosedAmount()])}await this.loadIssues(e,0,w.SIZE_PER_PAGE),this.setState({loading:!1})},this.loadIssues=async(e,t,a)=>{const{match:{params:{username:s,repository:n}}}=this.props,r=await O.d.getByRepository({username:s,name:n},e,t,a);if(null!==r){const{issues:e}=r;this.setState({issues:e})}},this.onPrevButtonClick=async()=>{const{currentPageNumber:e,currentStatus:t}=this.state;e>0&&(this.setState({loading:!0}),await this.loadIssues(t,(e-1)*w.SIZE_PER_PAGE,w.SIZE_PER_PAGE),this.setState({currentPageNumber:e-1,loading:!1}))},this.onNextButtonClick=async()=>{const{currentPageNumber:e,currentStatus:t}=this.state;this.setState({loading:!0}),await this.loadIssues(t,(e+1)*w.SIZE_PER_PAGE,w.SIZE_PER_PAGE),this.setState({currentPageNumber:e+1,loading:!1})},this.setNoNextPage=()=>{const{currentStatus:e,currentPageNumber:t,openAmount:a,closedAmount:s}=this.state;switch(e){case E.a.CLOSED:return(t+1)*w.SIZE_PER_PAGE>=s;case E.a.OPEN:return(t+1)*w.SIZE_PER_PAGE>=a;default:return(t+1)*w.SIZE_PER_PAGE>=a+s}},this.state={loading:!1,openAmount:0,closedAmount:0,currentStatus:E.a.OPEN,issues:[],currentPageNumber:0}}async componentDidMount(){const{currentStatus:e}=this.state;this.setState({loading:!0}),await Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadIssues(e,0,w.SIZE_PER_PAGE)]),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{match:{params:{username:s,repository:n}}}=this.props,{match:{params:{username:r,repository:o}}}=e;s===r&&n===o||await this.componentDidMount()}render(){const{loading:e,closedAmount:t,currentStatus:a,openAmount:s,issues:r,currentPageNumber:o}=this.state;return n.a.createElement(I,{loading:e,closedAmount:t,currentStatus:a,onStatusButtonClick:this.onStatusButtonClick,openAmount:s,issues:r,currentPageNumber:o,noNextPage:this.setNoNextPage(),onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick})}}w.SIZE_PER_PAGE=20;var B=Object(m.f)(w);a.d(t,"default",(function(){return B}))}}]);
//# sourceMappingURL=26.e52094a0.chunk.js.map