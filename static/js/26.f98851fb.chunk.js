(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{659:function(e,t,a){"use strict";a(118);var n=a(30),s=a(0),o=a.n(s);var r=o.a.memo((function(e){const{isPublic:t,...a}=e;return t?o.a.createElement(n.a,Object.assign({color:"blue"},a),"\u516c\u5171"):o.a.createElement(n.a,Object.assign({color:"gold"},a),"\u79c1\u4eba")}));a.d(t,"a",(function(){return r}))},761:function(e,t,a){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",usernameAndNameWrapper:"Style_usernameAndNameWrapper__zhZl-",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",tab:"Style_tab__2Ycb5",tag:"Style_tag__2txb4"}},762:function(e,t,a){},789:function(e,t,a){"use strict";a.r(t);var n,s=a(0),o=a.n(s),r=(a(118),a(30)),i=(a(162),a(48)),l=a(761),c=a.n(l),m=a(659),u=a(7),p=a(20);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(n||(n={}));var E=n,h=(a(52),a(22)),d=(a(212),a(96)),S=(a(51),a(14)),y=a(762),g=a.n(y),b=a(53),_=a(634);var A=o.a.memo((function(e){const{onClick:t,forkAmount:a,loading:n}=e;return o.a.createElement(S.a.Group,{className:g.a.ForkButton,size:"small"},o.a.createElement(S.a,{onClick:t,disabled:n,loading:n},o.a.createElement(_.a,null),"Fork"),o.a.createElement(d.a,{title:a},o.a.createElement(S.a,{disabled:n},b.d.getNumberAbbreviation(a))))})),f=a(23),R=a(76);class T extends s.PureComponent{constructor(e){super(e),this.loadForkAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await f.h.forkAmount({username:e,name:t});if(null!==a){const{amount:e}=a;this.setState({forkAmount:e})}},this.onClick=async()=>{this.setState({loading:!0});const{match:{params:{username:e,repository:t}}}=this.props;null!==await f.g.fork({username:e,name:t})&&h.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),this.setState({loading:!1})},this.state={forkAmount:0,loading:!1}}async componentDidMount(){this.setState({loading:!0}),await this.loadForkAmount(),this.setState({loading:!1})}render(){const{forkAmount:e,loading:t}=this.state;return o.a.createElement(A,{onClick:this.onClick,forkAmount:e,loading:t})}}var P=Object(R.f)(T),k=a(636),I={name:"exclamation-circle",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]}},v=a(6),O=function(e,t){return o.a.createElement(v.a,Object.assign({},e,{ref:t,icon:I}))};O.displayName="ExclamationCircleOutlined";var C=o.a.forwardRef(O),N=a(640),U=a(629);var F=o.a.memo((function(e){const{repository:{username:t,name:a,isPublic:n},forkFrom:s,loading:l,onTabChange:h,tabActiveKey:d,showSettings:S,children:y,openPullRequestAmount:g,openIssueAmount:b}=e;return l?null:o.a.createElement("div",{className:c.a.Repository},o.a.createElement("div",{className:c.a.header},o.a.createElement("div",{className:c.a.basicInfo},o.a.createElement(m.a,{isPublic:n}),o.a.createElement("div",{className:c.a.usernameAndNameWrapper},o.a.createElement("div",{className:c.a.usernameAndName},o.a.createElement(u.b,{to:p.Function.generatePersonalCenterRoute({username:t})},t)," / ",o.a.createElement(u.b,{to:p.Function.generateRepositoryCodeRoute({username:t,repository:a})},o.a.createElement("b",null,a))),o.a.createElement("div",{className:c.a.forkFrom},null===s?null:o.a.createElement("div",{className:c.a.forkFrom},o.a.createElement("div",{className:c.a.text},"fork \u81ea"),o.a.createElement(u.b,{to:p.Function.generatePersonalCenterRoute({username:s.username})},s.username)," / ",o.a.createElement(u.b,{to:p.Function.generateRepositoryCodeRoute({username:s.username,repository:s.name})},o.a.createElement("b",null,s.name)))))),o.a.createElement("div",{className:c.a.buttonWrapper},o.a.createElement(P,null))),o.a.createElement(i.a,{defaultActiveKey:E.CODE,type:"card",className:c.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:h,activeKey:d},o.a.createElement(i.a.TabPane,{tab:o.a.createElement(o.a.Fragment,null,o.a.createElement(k.a,null),"\u4ee3\u7801"),key:E.CODE},o.a.createElement("div",{className:c.a.tabContent},y)),o.a.createElement(i.a.TabPane,{tab:o.a.createElement(o.a.Fragment,null,o.a.createElement(C,null),"Issues ",o.a.createElement(r.a,{className:c.a.tag},b)),key:E.ISSUES},o.a.createElement("div",{className:c.a.tabContent},y)),o.a.createElement(i.a.TabPane,{tab:o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,null),"Pull Requests ",o.a.createElement(r.a,{className:c.a.tag},g)),key:E.PULL_REQUESTS},o.a.createElement("div",{className:c.a.tabContent},y)),S?o.a.createElement(i.a.TabPane,{tab:o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,null),"\u8bbe\u7f6e"),key:E.SETTINGS},o.a.createElement("div",{className:c.a.tabContent},y)):null))})),D=a(65),w=a(1),L=a(24),G=a(134),K=a(11);class x extends s.PureComponent{constructor(e){super(e),this.setTitle=()=>{const{match:{params:{username:e,repository:t}}}=this.props;document.title="".concat(e,"/").concat(t," - ").concat(G.a.NAME)},this.loadOpenIssueAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await f.d.getAmountByRepository({username:e,name:t},K.a.OPEN);if(null!==a){const{amount:e}=a;this.setState({openIssueAmount:e})}},this.loadOpenPullRequestAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await f.f.getPullRequestAmount({username:e,name:t},K.c.OPEN);if(null!==a){const{amount:e}=a;this.setState({openPullRequestAmount:e})}},this.loadRepository=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await f.h.repository({username:e},{name:t});null!==a&&this.setState({repository:a})},this.loadForkFrom=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await f.h.forkFrom({username:e,name:t});if(null!==a){const{repository:e}=a;this.setState({forkFrom:e})}},this.loadVisitorProfile=async()=>{const e=await f.e.get();null!==e&&this.setState({visitorProfile:e})},this.setTabActiveKey=()=>{const{match:{path:e}}=this.props,{REPOSITORY:{REPOSITORY:t,CODE:a,ISSUES:n,ISSUE:s,CREATE_ISSUE:o,PULL_REQUESTS:r,PULL_REQUEST:i,SETTINGS:l}}=w.PAGE_ID;switch(e){case w.PAGE_ID_TO_ROUTE[a]:case w.PAGE_ID_TO_ROUTE[t]:this.setState({tabActiveKey:E.CODE});break;case w.PAGE_ID_TO_ROUTE[o]:case w.PAGE_ID_TO_ROUTE[s]:case w.PAGE_ID_TO_ROUTE[n]:this.setState({tabActiveKey:E.ISSUES});break;case w.PAGE_ID_TO_ROUTE[i]:case w.PAGE_ID_TO_ROUTE[r]:this.setState({tabActiveKey:E.PULL_REQUESTS});break;case w.PAGE_ID_TO_ROUTE[l.SETTINGS]:this.setState({tabActiveKey:E.SETTINGS})}},this.onTabChange=e=>{const{history:t}=this.props,{repository:{username:a,name:n}}=this.state;switch(e){case E.CODE:t.push(p.Function.generateRepositoryCodeRoute({username:a,repository:n}));break;case E.ISSUES:t.push(p.Function.generateRepositoryIssuesRoute({username:a,repository:n}));break;case E.PULL_REQUESTS:t.push(p.Function.generateRepositoryPullRequestsRoute({username:a,repository:n}));break;case E.SETTINGS:t.push(p.Function.generateRepositorySettingsRoute({username:a,repository:n}));break;default:return}},this.state={repository:new D.g("","","",!0),loading:!0,tabActiveKey:E.CODE,visitorProfile:null,forkFrom:null,openPullRequestAmount:0,openIssueAmount:0}}async componentDidMount(){const{isLoggedIn:e}=this.props;this.setTitle(),this.setTabActiveKey(),this.setState({loading:!0}),await Promise.all([this.loadRepository(),this.loadForkFrom(),this.loadOpenPullRequestAmount(),this.loadOpenIssueAmount()]),e&&await this.loadVisitorProfile(),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{location:{pathname:n},isLoggedIn:s,match:{params:{repository:o,username:r}}}=this.props,{location:{pathname:i},isLoggedIn:l,match:{params:{repository:c,username:m}}}=e;o===c&&r===m||await this.componentDidMount(),n!==i&&this.setTabActiveKey(),s&&!l&&await this.loadVisitorProfile()}render(){const{repository:e,loading:t,tabActiveKey:a,visitorProfile:n,forkFrom:s,openPullRequestAmount:r,openIssueAmount:i}=this.state,{children:l,isLoggedIn:c}=this.props;return o.a.createElement(F,{showSettings:c&&null!==n&&e.username===n.username,repository:e,loading:t,onTabChange:this.onTabChange,tabActiveKey:a,forkFrom:s,openPullRequestAmount:r,openIssueAmount:i},l)}}var q=Object(L.b)(e=>{const{Root:{isLoggedIn:t}}=e;return{isLoggedIn:t}})(x);a.d(t,"default",(function(){return q}))}}]);
//# sourceMappingURL=26.f98851fb.chunk.js.map