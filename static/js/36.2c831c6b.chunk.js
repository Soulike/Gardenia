(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[36],{1246:function(e,t,a){e.exports={Commit:"Style_Commit__1ccZI",diffWrapper:"Style_diffWrapper__1Xmub",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__-rw5j"}},1247:function(e,t,a){e.exports={CommitInfoCard:"Style_CommitInfoCard__1hAXa",messageWrapper:"Style_messageWrapper__3JI_C",message:"Style_message__2pxOG",body:"Style_body__bWu93",infoWrapper:"Style_infoWrapper__1ZWk5",info:"Style_info__29oAa",committerWrapper:"Style_committerWrapper__vzZYZ"}},1346:function(e,t,a){"use strict";a.r(t);a(96);var i=a(43),o=a(0),m=a.n(o),s=(a(126),a(65)),n=(a(95),a(25)),r=a(1246),c=a.n(r),l=a(1247),f=a.n(l),p=a(97),d=a(15),u=a(133),h=a(30),_=a(20),E=a(356);var y=Object(u.f)(m.a.memo((function(e){var t=e.commit,a=t.message,i=t.body,o=t.committerName,s=t.timestamp,r=t.commitHash,c=t.committerEmail,l=e.match.params,u=l.username,y=l.repository;return m.a.createElement("div",{className:f.a.CommitInfoCard},m.a.createElement("div",{className:f.a.messageWrapper},m.a.createElement("div",{className:f.a.message},a),i.length?m.a.createElement("pre",{className:f.a.body},i):null),m.a.createElement("div",{className:f.a.infoWrapper},m.a.createElement("div",{className:f.a.info},m.a.createElement("div",{className:f.a.committerWrapper},m.a.createElement(E.a,{committerEmail:c,committerName:o})),"\u5728 ",p.b.parseTimestampToDifference(s),"\u63d0\u4ea4"),m.a.createElement("div",{className:f.a.hashWrapper},m.a.createElement(d.b,{className:f.a.hash,to:h.Function.generateRepositoryCodeRoute({username:u,repository:y,branch:r,objectType:_.b.TREE})},m.a.createElement(n.a,{size:"small"},m.a.createElement("code",null,r))))))}))),g=a(361);var C=m.a.memo((function(e){const{loading:t,diff:a,commit:i,diffAmount:o,onLoadMoreButtonClick:r}=e;return m.a.createElement("div",{className:c.a.Commit},m.a.createElement(s.a,{spinning:t},m.a.createElement("div",{className:c.a.commitInfoCardWrapper},m.a.createElement(y,{commit:i})),m.a.createElement("div",{className:c.a.diffWrapper},m.a.createElement(g.a,{fileDiffs:a,fileDiffAmount:o}),m.a.createElement("div",{className:c.a.loadMoreButtonWrapper},m.a.createElement(n.a,{disabled:t,loading:t,onClick:r,size:"large",type:"primary"},"\u52a0\u8f7d\u66f4\u591a\u6587\u4ef6\u66f4\u6539")))))})),W=a(115),b=a(39);class S extends o.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({diff:[]},()=>e())}),this.loadCommit=async()=>{const{match:{params:{username:e,repository:t,commitHash:a}}}=this.props,i=await b.h.commit({username:e,name:t},a);if(null!==i){const{commit:e}=i;this.setState({commit:e})}},this.loadMoreCommitDiff=async()=>{const{match:{params:{username:e,repository:t,commitHash:a}}}=this.props,{diff:o}=this.state,m=await b.h.commitDiff({username:e,name:t},a,o.length,S.FILE_DIFF_AMOUNT_PER_PAGE);if(null!==m){const{diff:e}=m;0===e.length?i.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u88ab\u4fee\u6539\u6587\u4ef6"}):this.setState({diff:[...o,...e]})}},this.loadCommitDiffAmount=async()=>{const{match:{params:{username:e,repository:t,commitHash:a}}}=this.props,i=await b.h.commitDiffAmount({username:e,name:t},a);if(null!==i){const{amount:e}=i;this.setState({diffAmount:e})}},this.onLoadMoreButtonClick=async()=>{this.setState({loading:!0}),await this.loadMoreCommitDiff(),this.setState({loading:!1})},this.state={commit:new W.b("","","a@b.com",0,"",""),diff:[],diffAmount:0,loading:!1}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await Promise.all([this.loadCommit(),this.loadCommitDiffAmount(),this.loadMoreCommitDiff()]),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{location:{pathname:i}}=this.props,{location:{pathname:o}}=e;i!==o&&await this.componentDidMount()}render(){const{commit:e,diff:t,loading:a,diffAmount:i}=this.state;return m.a.createElement(C,{commit:e,diff:t,loading:a,diffAmount:i,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}}S.FILE_DIFF_AMOUNT_PER_PAGE=10;var v=Object(u.f)(S);a.d(t,"default",(function(){return v}))}}]);
//# sourceMappingURL=36.2c831c6b.chunk.js.map