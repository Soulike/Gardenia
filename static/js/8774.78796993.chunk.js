"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[8774],{29188:function(R,g,t){t.d(g,{Z:function(){return o}});var e=t(89526),s={menuWrapper:"Style_menuWrapper__CPJGr",menu:"Style_menu__sQY7N",menuItem:"Style_menuItem__h9YDX",checkIconWrapper:"Style_checkIconWrapper__-0p03",name:"Style_name__lSjEP",fullListLinkWrapper:"Style_fullListLinkWrapper__aSwSN"},C=t(46044),h=t(73622),p=t(37109),v=t(30592),B=t(42218),S=t(1413),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},O=N,z=t(36593),A=function(l,i){return e.createElement(z.Z,(0,S.Z)((0,S.Z)({},l),{},{ref:i,icon:O}))};A.displayName="TagOutlined";var M=e.forwardRef(A),k=t(26190),f=t(24874),T=t(31439),Z=t(18440),L=t(565),d=t(65092);function r(c){const l=e.createElement(B.Z,null),i=e.createElement(M,null),m=e.createElement(k.Z,null),E=10,P=10,{branches:b,tagNames:H,visible:K,currentBranchOrTagOrCommitHash:y,onButtonClick:Q,onBranchOrTagClickFactory:V,match:{params:{username:G,repositoryName:U}}}=c,D=b.map(u=>u.name),x=D.includes(y),j=H.includes(y),X=x?l:j?i:m,W=[],F=[];if(x){W.push(y);let u=1;for(const I of D){if(u===P)break;I!==y&&(W.push(I),u++)}}else W.push(...D.slice(0,P));if(j){F.push(y);let u=1;for(const I of H){if(u===E)break;I!==y&&(F.push(I),u++)}}else F.push(...H.slice(0,E));return e.createElement("div",{className:s.BranchOrTagMenu},e.createElement(C.Z,{placement:"bottomLeft",visible:K,trigger:["click"],content:e.createElement("div",{className:s.menuWrapper},e.createElement(h.Z,{defaultOpenKeys:["branch"],selectedKeys:[y],selectable:!1,className:s.menu,mode:"inline",inlineIndent:12,forceSubMenuRender:!0},e.createElement(h.Z.SubMenu,{title:e.createElement("b",null,"\u5206\u652F"),key:"branch",icon:l},b.length===0?e.createElement(p.Z,{description:"\u6682\u65E0\u5206\u652F",image:p.Z.PRESENTED_IMAGE_SIMPLE}):W.map(u=>e.createElement(h.Z.Item,{onClick:V(u),key:u},e.createElement("div",{className:s.menuItem},e.createElement("span",{className:s.checkIconWrapper},y===u?e.createElement(f.Z,null):null),e.createElement("span",{className:s.name},u))))),e.createElement(h.Z.Divider,null),e.createElement(h.Z.Item,null,e.createElement("div",{className:s.fullListLinkWrapper},e.createElement(L.rU,{to:Z.Function.generateRepositoryBranchesRoute({username:G,repositoryName:U})},"\u67E5\u770B\u6240\u6709\u5206\u652F"))),e.createElement(h.Z.Divider,null),e.createElement(h.Z.SubMenu,{title:e.createElement("b",null,"\u6807\u7B7E"),key:"tag",icon:i},H.length===0?e.createElement(p.Z,{description:"\u6682\u65E0\u6807\u7B7E",image:p.Z.PRESENTED_IMAGE_SIMPLE}):F.map(u=>e.createElement(h.Z.Item,{onClick:V(u),key:u},e.createElement("div",{className:s.menuItem},e.createElement("span",{className:s.checkIconWrapper},y===u?e.createElement(f.Z,null):null),e.createElement("span",{className:s.name},u))))),e.createElement(h.Z.Item,null,e.createElement("div",{className:s.fullListLinkWrapper},e.createElement(L.rU,{to:Z.Function.generateRepositoryTagsRoute({username:G,repositoryName:U})},"\u67E5\u770B\u6240\u6709\u6807\u7B7E")))))},e.createElement(v.Z,{onClick:Q},X,y,e.createElement(T.Z,null))))}var n=e.memo((0,d.EN)(r));class a extends e.PureComponent{constructor(l){super(l);this.onButtonClick=()=>{const{visible:i}=this.state;this.setState({visible:!i})},this.onBranchOrTagClickFactory=i=>{const{onBranchOrTagClickFactory:m}=this.props;return E=>{this.setState({visible:!1});const P=m(i);P&&P(E)}},this.state={visible:!1}}render(){const{branches:l,tagNames:i,currentBranchOrTagOrCommitHash:m}=this.props,{visible:E}=this.state;return e.createElement(n,{visible:E,tagNames:i,branches:l,currentBranchOrTagOrCommitHash:m,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory,onButtonClick:this.onButtonClick})}}var o=a},68774:function(R,g,t){t.r(g),t.d(g,{default:function(){return L}});var e=t(89526),s={Commits:"Style_Commits__SDMXd",infoWrapper:"Style_infoWrapper__L28yC",path:"Style_path__LtKNc",timeLineWrapper:"Style_timeLineWrapper__Gl+lV",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__iPdfQ"},C=t(5892),h=t(30592),p=t(60377),v=t(65092),B=t(18440),S=t(29188);class N extends e.PureComponent{constructor(){super(...arguments);this.onBranchOrTagClickFactory=r=>()=>{const{history:n,match:{params:{username:a,repositoryName:o,path:c}}}=this.props;return n.replace(B.Function.generateRepositoryCommitsRoute({username:a,repositoryName:o,commitHash:r,path:c}))}}render(){const{match:{params:{commitHash:r}},branches:n,tagNames:a}=this.props;let o="";if(r===void 0)for(const c of n)c.isDefault&&(o=c.name);return e.createElement(S.Z,{branches:n,tagNames:a,currentBranchOrTagOrCommitHash:r||o,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory})}}var O=(0,v.EN)(N);function z(d){const{branches:r,tagNames:n,loading:a,commits:o,path:c,repository:l,repository:{name:i},onLoadMoreButtonClick:m}=d;return e.createElement("div",{className:s.Commits},e.createElement(C.Z,{spinning:a},e.createElement("div",{className:s.infoWrapper},e.createElement(O,{branches:r,tagNames:n}),typeof c=="string"?e.createElement("div",{className:s.path},i,"/",c):null),e.createElement("div",{className:s.timeLineWrapper},e.createElement(p.Z,{commits:o,repository:l})),e.createElement("div",{className:s.loadMoreButtonWrapper},e.createElement(h.Z,{disabled:a,loading:a,onClick:m},"\u52A0\u8F7D\u66F4\u65E9\u7684\u63D0\u4EA4\u5386\u53F2"))))}var A=e.memo(z),M=t(62371),k=t(24315),f=(d,r,n)=>new Promise((a,o)=>{var c=m=>{try{i(n.next(m))}catch(E){o(E)}},l=m=>{try{i(n.throw(m))}catch(E){o(E)}},i=m=>m.done?a(m.value):Promise.resolve(m.value).then(c,l);i((n=n.apply(d,r)).next())});const T=class extends e.PureComponent{constructor(d){super(d);this.setStatePromise=r=>new Promise(n=>{this.setState(r,()=>{n()})}),this.init=()=>f(this,null,function*(){yield this.setStatePromise({branches:[],tagNames:[],commits:[]})}),this.loadBranches=()=>f(this,null,function*(){const{match:{params:{username:r,repositoryName:n}}}=this.props,a=yield M.CB.branches({username:r,name:n});if(a!==null){const{branches:o}=a;yield this.setStatePromise({branches:o})}}),this.loadTagNames=()=>f(this,null,function*(){const{match:{params:{username:r,repositoryName:n}}}=this.props,a=yield M.CB.tagNames({username:r,name:n});if(a!==null){const{tagNames:o}=a;yield this.setStatePromise({tagNames:o})}}),this.loadMoreCommits=()=>f(this,null,function*(){const{match:{params:{username:r,repositoryName:n,commitHash:a,path:o}}}=this.props;let c;const{commits:l}=this.state;if(typeof o=="string"?c=yield M.CB.fileCommitHistory({username:r,name:n},o,a,l.length,T.COMMIT_AMOUNT_PER_PAGE):c=yield M.CB.commitHistory({username:r,name:n},a,l.length,T.COMMIT_AMOUNT_PER_PAGE),c!==null){const{commits:i}=c;i.length===0?k.Z.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u63D0\u4EA4\u5386\u53F2"}):yield this.setStatePromise({commits:[...l,...i]})}}),this.onLoadMoreButtonClick=()=>f(this,null,function*(){yield this.setStatePromise({loading:!0}),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1})}),this.state={branches:[],tagNames:[],loading:!1,commits:[]}}componentDidMount(){return f(this,null,function*(){yield this.init(),yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadBranches(),this.loadTagNames()]),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1})})}componentDidUpdate(d,r,n){return f(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:c}}}=this.props,{match:{params:{username:l,repositoryName:i,commitHash:m}}}=d;a!==l||o!==i?yield this.componentDidMount():c!==m&&(yield this.setStatePromise({loading:!0,commits:[]}),yield this.loadMoreCommits(),yield this.setStatePromise({loading:!1}))})}render(){const{branches:d,loading:r,commits:n,tagNames:a}=this.state,{match:{params:{repositoryName:o,path:c,username:l}}}=this.props;return e.createElement(A,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:d,loading:r,commits:n,tagNames:a,path:c,repository:{username:l,name:o}})}};let Z=T;Z.COMMIT_AMOUNT_PER_PAGE=50;var L=(0,v.EN)(Z)},26190:function(R,g,t){t.d(g,{Z:function(){return B}});var e=t(1413),s=t(89526),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},h=C,p=t(36593),v=function(N,O){return s.createElement(p.Z,(0,e.Z)((0,e.Z)({},N),{},{ref:O,icon:h}))};v.displayName="BarcodeOutlined";var B=s.forwardRef(v)},42218:function(R,g,t){t.d(g,{Z:function(){return B}});var e=t(1413),s=t(89526),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},h=C,p=t(36593),v=function(N,O){return s.createElement(p.Z,(0,e.Z)((0,e.Z)({},N),{},{ref:O,icon:h}))};v.displayName="BranchesOutlined";var B=s.forwardRef(v)}}]);

//# sourceMappingURL=8774.78796993.chunk.js.map