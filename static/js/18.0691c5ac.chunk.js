(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[18],{1127:function(e,t,a){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",(function(){return r}))},1158:function(e,t,a){(function(e){function a(e,t){for(var a=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),a++):a&&(e.splice(r,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var a=[],r=0;r<e.length;r++)t(e[r],r,e)&&a.push(e[r]);return a}t.resolve=function(){for(var t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,n="/"===i.charAt(0))}return(n?"/":"")+(t=a(r(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),i="/"===n(e,-1);return(e=a(r(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,a){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var n=r(e.split("/")),s=r(a.split("/")),i=Math.min(n.length,s.length),o=i,c=0;c<i;c++)if(n[c]!==s[c]){o=c;break}var m=[];for(c=o;c<n.length;c++)m.push("..");return(m=m.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,r=-1,n=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!n){r=s;break}}else n=!1;return-1===r?a?"/":".":a&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var a=function(e){"string"!==typeof e&&(e+="");var t,a=0,r=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){a=t+1;break}}else-1===r&&(n=!1,r=t+1);return-1===r?"":e.slice(a,r)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,a=0,r=-1,n=!0,s=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===r&&(n=!1,r=i+1),46===o?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!n){a=i+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===a+1?"":e.slice(t,r)};var n="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(84))},1159:function(e,t,a){e.exports={CommitInfoBar:"Style_CommitInfoBar__1-ElH",left:"Style_left__1syWH",right:"Style_right__3RBYJ",avatar:"Style_avatar__290nj",name:"Style_name__3xcxA"}},1164:function(e,t,a){"use strict";a(306);var r=a(138),n=a(0),s=a.n(n),i=a(1159),o=a.n(i),c=a(27),m=a(118),l=a(45),u=a(125);var f=Object(m.f)(s.a.memo((function(e){var t=e.lastCommit,a=t.committerName,n=t.commitHash,i=t.message,m=t.timestamp,f=e.match.params,p=f.username,h=f.repository;return s.a.createElement("div",{className:o.a.CommitInfoBar},s.a.createElement("div",{className:o.a.left},s.a.createElement(c.b,{className:o.a.name,to:l.b.generatePersonalCenterRoute({username:a})},a),s.a.createElement("div",{className:o.a.message},i)),s.a.createElement("div",{className:o.a.right},s.a.createElement("div",{className:o.a.time},u.a.parseTimestampToDifference(m)),s.a.createElement(r.a,{title:n},s.a.createElement("div",{className:o.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",s.a.createElement(c.b,{to:l.b.generateRepositoryCommitRoute({username:p,repository:h,commitHash:n})},n.slice(0,7))))))})));a.d(t,"a",(function(){return f}))},1240:function(e,t,a){e.exports={FileList:"Style_FileList__2OQFJ",lastCommitInfoBar:"Style_lastCommitInfoBar__7Haom",readmeWrapper:"Style_readmeWrapper__3CalM"}},1241:function(e,t,a){e.exports={Item:"Style_Item__2vv2j",icon:"Style_icon__3Brt4",fileName:"Style_fileName__3Xcz8",message:"Style_message__1lvb5",time:"Style_time__1hBMM"}},1242:function(e,t,a){e.exports={Readme:"Style_Readme__1yCKv",title:"Style_title__BO69S",contentWrapper:"Style_contentWrapper__1rwTE"}},1255:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a.n(r),s=a(1127),i=a(5),o=a(20),c=a(21),m=a(40),l=a(39),u=a(41),f=a(0),p=a.n(f),h=(a(1134),a(1133)),d=(a(305),a(91)),v=a(1240),b=a.n(v),g=(a(102),a(11)),y=a(37),_=a(27),E=a(118),x=a(1241),j=a.n(x),w=a(45),S=a(125);var k=Object(E.f)(p.a.memo((function(e){var t=e.fileInfo,a=t.type,r=t.path,n=t.commit,s=n.message,i=n.timestamp,o=n.commitHash,c=e.match.params,m=c.username,l=c.repository,u=c.branch,f=function(e){var t=e.split("/");return t[t.length-1]}(r);return p.a.createElement(h.a.Item,{className:j.a.Item},a===y.a.BLOB?p.a.createElement(g.a,{className:j.a.icon,type:"file-text"}):p.a.createElement(g.a,{className:j.a.icon,type:"folder"}),p.a.createElement("div",{className:j.a.fileName},p.a.createElement(_.b,{to:w.b.generateRepositoryCodeRoute({username:m,repository:l,objectType:a,branch:u||"master",path:r})},f)),p.a.createElement(_.b,{className:j.a.message,to:w.b.generateRepositoryCommitRoute({username:m,repository:l,commitHash:o})},s),p.a.createElement("div",{className:j.a.time},S.a.parseTimestampToDifference(i)))}))),C=(a(154),a(90)),O=a(1242),N=a.n(O),A=a(316);var R=p.a.memo((function(e){var t=e.readme,a=e.exists,r=e.loading;return a?p.a.createElement("div",{className:N.a.Readme},p.a.createElement(C.a,{spinning:r},p.a.createElement("div",{className:N.a.title},"README.md"),p.a.createElement("div",{className:N.a.contentWrapper},p.a.createElement(A.a,{markdown:t})))):null})),I=a(307),H=a(1158),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).readmeExists=Object(i.a)(n.a.mark((function e(){var t,r,s,i,o,c,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.match.params,s=r.username,i=r.repository,o=r.path,c=t.commitHash,e.next=3,I.a.fileInfo({username:s},{name:i},Object(H.join)(o||"","README.md"),c);case 3:return m=e.sent,e.abrupt("return",null!==m&&m.exists);case 5:case"end":return e.stop()}}),e)}))),a.loadRawReadme=Object(i.a)(n.a.mark((function e(){var t,r,s,i,o,c,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,r=t.match.params,s=r.username,i=r.repository,o=r.path,c=t.commitHash,e.next=3,I.a.rawFile({username:s},{name:i},Object(H.join)(o||"","README.md"),c);case 3:if(null===(m=e.sent)){e.next=11;break}return e.t0=a,e.next=8,S.b.transformBlobToString(m);case 8:e.t1=e.sent,e.t2={readme:e.t1,exists:!0},e.t0.setState.call(e.t0,e.t2);case 11:case"end":return e.stop()}}),e)}))),a.state={exists:!1,readme:"",loading:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var s,i,o,c,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props,i=s.match.params.path,o=s.commitHash,c=t.match.params.path,m=t.commitHash,0===o.length||c===i&&m===o){e.next=13;break}return this.setState({loading:!0}),e.next=6,this.readmeExists();case 6:if(!e.sent){e.next=11;break}return e.next=9,this.loadRawReadme();case 9:e.next=12;break;case 11:this.setState({exists:!1});case 12:this.setState({loading:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.readme,a=e.exists,r=e.loading;return p.a.createElement(R,{exists:a,readme:t,loading:r})}}]),t}(f.PureComponent),L=Object(E.f)(B),D=a(1164),T=p.a.lazy((function(){return a.e(38).then(a.bind(null,1279))}));var F=p.a.memo((function(e){var t=e.fileList,a=e.lastCommit,r=e.loading,n=e.showPreviousFolderItem,s=a.commitHash;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:b.a.FileList},p.a.createElement("div",{className:b.a.lastCommitInfoBar},p.a.createElement(D.a,{lastCommit:a})),p.a.createElement(h.a,{locale:{emptyText:p.a.createElement(d.a,{description:"\u6ca1\u6709\u6587\u4ef6"})},loading:r,className:b.a.fileList},n?p.a.createElement(T,null):null,t.map((function(e){return p.a.createElement(k,{fileInfo:e,key:e.path})})))),p.a.createElement("div",{className:b.a.readmeWrapper},p.a.createElement(L,{commitHash:s})))})),M=a(77),W=a(137),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).loadDirectory=Object(i.a)(n.a.mark((function e(){var t,r,i,o,c,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,i=t.repository,o=t.path,c=t.branch,e.next=3,M.g.directory({username:r},{name:i},c||"master",void 0===o?"":o+"/");case 3:null!==(m=e.sent)&&a.setState({fileList:Object(s.a)(m)});case 5:case"end":return e.stop()}}),e)}))),a.loadLastCommit=Object(i.a)(n.a.mark((function e(){var t,r,s,i,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,r=t.username,s=t.repository,i=t.branch,o=t.path,e.next=3,M.g.lastCommit({username:r},{name:s},i||"master",o);case 3:null!==(c=e.sent)&&a.setState({lastCommit:c});case 5:case"end":return e.stop()}}),e)}))),a.state={fileList:[],lastCommit:new W.b("","","",0,"",""),loading:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,Promise.all([this.loadDirectory(),this.loadLastCommit()]);case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var s,i,o,c,m,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.match.params,i=s.branch,o=s.path,c=this.props.match.params,m=c.branch,l=c.path,i===m){e.next=9;break}return this.setState({loading:!0}),e.next=6,Promise.all([this.loadDirectory(),this.loadLastCommit()]);case 6:this.setState({loading:!1}),e.next=14;break;case 9:if(o===l){e.next=14;break}return this.setState({loading:!0}),e.next=13,this.loadDirectory();case 13:this.setState({loading:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.fileList,a=e.lastCommit,r=e.loading,n=this.props.match.params.path;return p.a.createElement(F,{fileList:t,lastCommit:a,loading:r,showPreviousFolderItem:void 0!==n})}}]),t}(f.Component),z=Object(E.f)(P);a.d(t,"default",(function(){return z}))}}]);
//# sourceMappingURL=18.0691c5ac.chunk.js.map