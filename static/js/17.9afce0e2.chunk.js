(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[17],{1008:function(e,a,t){e.exports={SettingLabel:"Style_SettingLabel__3BF7Z"}},1062:function(e,a,t){e.exports={Options:"Style_Options__162uQ",itemWrapper:"Style_itemWrapper__3pX3S"}},1063:function(e,a,t){e.exports={RepositoryName:"Style_RepositoryName__1WTF0",label:"Style_label__K0aLr",input:"Style_input__LnETk"}},1064:function(e,a,t){e.exports={Description:"Style_Description__3N46g",textarea:"Style_textarea__324Su",buttonWrapper:"Style_buttonWrapper__1ug3r"}},1065:function(e,a,t){},1066:function(e,a,t){e.exports={CriticalOperationConfirmModal:"Style_CriticalOperationConfirmModal__1LREa",content:"Style_content__15AF6",warningWrapper:"Style_warningWrapper__1Wnxv",input:"Style_input__dIid9"}},1282:function(e,a,t){"use strict";t.r(a);var n=t(4),r=t.n(n),o=t(39),s=t(54),i=t(117),l=t(116),c=t(118),u=t(0),m=t.n(u),p=t(1062),d=t.n(p),h=t(985),b=(t(104),t(15)),g=(t(1007),t(1009)),f=(t(430),t(133)),y=(t(959),t(961)),v=t(1063),C=t.n(v),w=t(994);function E(e,a){return 0===e.length||a}var k=m.a.memo((function(e){var a=e.repositoryName,t=e.onRenameConfirm,n=e.onRepositoryNameInputChange,r=e.submitting;return m.a.createElement("div",{className:C.a.RepositoryName},m.a.createElement("label",{className:C.a.label},m.a.createElement(w.a,null,"\u4ed3\u5e93\u540d"),m.a.createElement(y.a,{className:C.a.input,value:a,onChange:n,disabled:r}),m.a.createElement(g.a,{title:"\u91cd\u547d\u540d\u4ed3\u5e93\u4f1a\u5bfc\u81f4\u539f\u4ed3\u5e93\u7f51\u5740\u4e0e\u514b\u9686\u8def\u5f84\u5931\u6548\uff0c\u786e\u5b9a\u7ee7\u7eed\uff1f",onConfirm:t},m.a.createElement(f.a,{className:C.a.button,loading:r,disabled:E(a,r)},"\u91cd\u547d\u540d"))))})),S=t(97),N=t(88),x=t(284),O=function(e){function a(e){var t;Object(o.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onRepositoryNameInputChange=function(e){t.setState({repositoryName:e.target.value})},t.onRenameConfirm=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.validateParameters()){e.next=5;break}return t.setState({submitting:!0}),e.next=4,r.a.awrap(t.submit());case 4:t.setState({submitting:!1});case 5:case"end":return e.stop()}}))},t.validateParameters=function(){return 0!==t.state.repositoryName.length||(b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u80fd\u4e3a\u7a7a"}),!1)},t.submit=function(){var e,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=t.state.repositoryName,a=t.props.match.params.repository,n.next=4,r.a.awrap(x.a.setName({name:a},{name:e}));case 4:null!==n.sent&&t.onSubmitSuccess();case 6:case"end":return n.stop()}}))},t.onSubmitSuccess=function(){b.a.success({message:"\u4ed3\u5e93\u91cd\u547d\u540d\u6210\u529f"});var e=t.props.history,a=t.props.match.params.username,n=t.state.repositoryName;e.replace(N.b.generateRepositorySettingsOptionsRoute({username:a,repository:n}))};var n=e.match.params.repository;return t.state={repositoryName:n,submitting:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.repositoryName,t=e.submitting;return m.a.createElement(k,{repositoryName:a,onRenameConfirm:this.onRenameConfirm,onRepositoryNameInputChange:this.onRepositoryNameInputChange,submitting:t})}}]),a}(u.PureComponent),P=Object(S.f)(O),_=(t(979),t(982)),R=t(1064),M=t.n(R);var j=m.a.memo((function(e){var a=e.description,t=e.onSubmit,n=e.onTextareaChange,r=e.loading,o=e.submitting;return m.a.createElement("div",{className:M.a.Description},m.a.createElement("label",null,m.a.createElement(w.a,null,"\u4ed3\u5e93\u63cf\u8ff0"),m.a.createElement(_.a,{spinning:r},m.a.createElement(y.a.TextArea,{disabled:r||o,value:a,className:M.a.textarea,onChange:n}))),m.a.createElement("div",{className:M.a.buttonWrapper},m.a.createElement(f.a,{loading:o,disabled:r||o,className:M.a.button,onClick:t},"\u786e\u5b9a")))})),I=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onTextareaChange=function(e){t.setState({description:e.target.value})},t.onSubmit=function(){var e,a,n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=t.state.description,a=t.props.match.params.repository,t.setState({submitting:!0}),o.next=5,r.a.awrap(x.a.setDescription({name:a,description:e}));case 5:n=o.sent,t.setState({submitting:!1}),null!==n&&b.a.success({message:"\u4ed3\u5e93\u63cf\u8ff0\u4fee\u6539\u6210\u529f"});case 8:case"end":return o.stop()}}))},t.state={description:"",submitting:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,a,t){var n=this.props,r=n.repository.description,o=n.loading;e.loading&&o&&this.setState({description:r})}},{key:"render",value:function(){var e=this.props.loading,a=this.state,t=a.description,n=a.submitting;return m.a.createElement(j,{submitting:n,loading:e,description:t,onTextareaChange:this.onTextareaChange,onSubmit:this.onSubmit})}}]),a}(u.PureComponent),V=Object(S.f)(I),L=(t(998),t(1e3)),T=(t(282),t(22)),W=t(1065),B=t.n(W),D=(t(432),t(291)),F=t(1066),A=t.n(F);var H=m.a.memo((function(e){var a=e.warning,t=e.validateText,n=e.password,r=e.validateInputPlaceholder,o=e.onValidateInputChange,s=e.onPasswordInputChange,i=e.visible,l=e.onOk,c=e.onCancel,u=e.title,p=e.confirmLoading;return m.a.createElement(D.a,{confirmLoading:p,title:u,className:A.a.CriticalOperationConfirmModal,visible:i,onOk:l,onCancel:c},m.a.createElement("div",{className:A.a.content},m.a.createElement("div",{className:A.a.warningWrapper},a),m.a.createElement(y.a,{className:A.a.input,value:t,onChange:o,placeholder:r,autoFocus:!0}),m.a.createElement(y.a,{className:A.a.input,placeholder:"\u8d26\u6237\u5bc6\u7801",type:"password",value:n,onChange:s})))}));var J=m.a.memo((function(e){var a=e.loading,t=e.isPublic,n=e.onSwitchChange,r=e.modalRepositoryName,o=e.modalPassword,s=e.onModalRepositoryNameInputChange,i=e.onModalPasswordInputChange,l=e.modalVisible,c=e.onModalOk,u=e.onModalCancel;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:B.a.AccessibilitySwitch},m.a.createElement(w.a,null,"\u662f\u5426\u516c\u5f00"),m.a.createElement(L.a,{loading:a,checked:t,disabled:a,onChange:n,checkedChildren:m.a.createElement(m.a.Fragment,null,m.a.createElement(T.a,{type:"unlock"})," \u516c\u5f00"),unCheckedChildren:m.a.createElement(m.a.Fragment,null,m.a.createElement(T.a,{type:"lock"})," \u79c1\u6709")})),m.a.createElement(H,{confirmLoading:a,title:"\u53ef\u89c1\u6027\u5207\u6362\u786e\u8ba4",warning:m.a.createElement("strong",null,"\u5c06\u4ed3\u5e93\u6539\u4e3a\u516c\u6709\u5c06\u4f1a\u8ba9",m.a.createElement("span",{style:{color:"red"}},"\u6240\u6709\u4eba"),"\u770b\u5230\u4ed3\u5e93\u5185\u7684\u4ee3\u7801\uff0c\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u672c\u4ed3\u5e93\u7684\u540d\u5b57\u548c\u60a8\u7684\u5bc6\u7801\u4ee5\u786e\u8ba4\u64cd\u4f5c\u3002"),validateInputPlaceholder:"\u4ed3\u5e93\u540d",validateText:r,password:o,visible:l,onPasswordInputChange:i,onValidateInputChange:s,onOk:c,onCancel:u}))})),U=t(210),K=t(283),Q=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onSwitchChange=function(e){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=t.state.isPublic)||!e){n.next=5;break}t.setState({modalVisible:!0}),n.next=8;break;case 5:if(!a||e){n.next=8;break}return n.next=8,r.a.awrap(t.setIsPublic(e));case 8:case"end":return n.stop()}}))},t.onModalRepositoryNameInputChange=function(e){t.setState({modalRepositoryName:e.target.value})},t.onModalPasswordInputChange=function(e){t.setState({modalPassword:e.target.value})},t.onModalOk=function(){var e,a,n,o,s,i,l,c,u;return r.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=t.props.match.params,a=e.repository,n=e.username,o=t.state,s=o.modalRepositoryName,i=o.modalPassword,l=o.isPublic,a===s){m.next=6;break}b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u6b63\u786e"}),m.next=19;break;case 6:return c=K.a.calculateHash(n,i),m.next=9,r.a.awrap(U.a.checkPassword({hash:c}));case 9:if(null===(u=m.sent)){m.next=19;break}if(!u.isCorrect){m.next=18;break}return m.next=15,r.a.awrap(t.setIsPublic(!l));case 15:t.setState({modalVisible:!1,modalRepositoryName:"",modalPassword:""}),m.next=19;break;case 18:b.a.warn({message:"\u5bc6\u7801\u4e0d\u6b63\u786e"});case 19:case"end":return m.stop()}}))},t.onModalCancel=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({modalVisible:!1,modalRepositoryName:"",modalPassword:""});case 1:case"end":return e.stop()}}))},t.setIsPublic=function(e){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.props.match.params.repository,t.state.isPublic===e){n.next=9;break}return t.setState({submitting:!0}),n.next=6,r.a.awrap(U.e.setIsPublic({name:a,isPublic:e}));case 6:null!==n.sent&&window.location.reload(),t.setState({submitting:!1});case 9:case"end":return n.stop()}}))},t.state={submitting:!1,isPublic:!0,modalRepositoryName:"",modalPassword:"",modalVisible:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,a,t){var n=this.props,r=n.repository.isPublic,o=n.loading;e.loading&&o&&this.setState({isPublic:r})}},{key:"render",value:function(){var e=this.state,a=e.submitting,t=e.isPublic,n=e.modalRepositoryName,r=e.modalPassword,o=e.modalVisible,s=this.props.loading;return m.a.createElement(J,{loading:a||s,isPublic:t,modalRepositoryName:n,modalPassword:r,modalVisible:o,onSwitchChange:this.onSwitchChange,onModalOk:this.onModalOk,onModalCancel:this.onModalCancel,onModalPasswordInputChange:this.onModalPasswordInputChange,onModalRepositoryNameInputChange:this.onModalRepositoryNameInputChange})}}]),a}(u.PureComponent),X=Object(S.f)(Q),Z=(t(962),t(960));var q=m.a.memo((function(e){var a=e.title,t=e.description,n=e.onButtonClick;return m.a.createElement(Z.a.Item,{extra:m.a.createElement(f.a,{type:"danger",onClick:n},a)},m.a.createElement(Z.a.Item.Meta,{title:a,description:t}))}));var z=m.a.memo((function(e){var a=e.onButtonClick,t=e.modalRepositoryName,n=e.modalPassword,r=e.onModalRepositoryNameInputChange,o=e.onModalPasswordInputChange,s=e.onModalOk,i=e.onModalCancel,l=e.modalVisible,c=e.modalConfirmLoading;return m.a.createElement(m.a.Fragment,null,m.a.createElement(q,{title:"\u5220\u9664\u4ed3\u5e93",description:"\u5220\u9664\u4ed3\u5e93\u7684\u64cd\u4f5c\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u3002",onButtonClick:a}),m.a.createElement(H,{warning:m.a.createElement("strong",null,"\u5982\u679c\u4ed3\u5e93\u88ab\u5220\u9664\uff0c\u60a8\u5c06\u4e22\u5931\u4ed3\u5e93\u7684\u6587\u4ef6\u3001\u63d0\u4ea4\u8bb0\u5f55\u7b49",m.a.createElement("span",{style:{color:"red"}},"\u6240\u6709\u4fe1\u606f"),"\uff0c\u4e14\u5220\u9664\u6210\u529f\u540e\u6ca1\u6709\u6062\u590d\u7684\u53ef\u80fd\u3002\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u672c\u4ed3\u5e93\u7684\u540d\u5b57\u548c\u60a8\u7684\u5bc6\u7801\u4ee5\u786e\u8ba4\u64cd\u4f5c\u3002"),validateInputPlaceholder:"\u4ed3\u5e93\u7684\u540d\u5b57",title:"\u5220\u9664\u4ed3\u5e93\u786e\u8ba4",validateText:t,password:n,onValidateInputChange:r,onPasswordInputChange:o,onOk:s,onCancel:i,visible:l,confirmLoading:c}))})),G=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).onButtonClick=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({modalRepositoryName:"",modalPassword:"",modalVisible:!0});case 1:case"end":return e.stop()}}))},t.onModalRepositoryNameInputChange=function(e){t.setState({modalRepositoryName:e.target.value})},t.onModalPasswordInputChange=function(e){t.setState({modalPassword:e.target.value})},t.onModalOk=function(){var e,a,n,o,s,i,l,c,u,m;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=t.props,a=e.match.params,n=a.repository,o=a.username,s=e.history,i=t.state,l=i.modalRepositoryName,c=i.modalPassword,n===l){p.next=6;break}b.a.warn({message:"\u4ed3\u5e93\u540d\u4e0d\u6b63\u786e"}),p.next=22;break;case 6:return u=K.a.calculateHash(o,c),t.setState({modalConfirmLoading:!0}),p.next=10,r.a.awrap(U.a.checkPassword({hash:u}));case 10:if(null===(m=p.sent)){p.next=21;break}if(!m.isCorrect){p.next=20;break}return p.next=16,r.a.awrap(U.d.del({name:n}));case 16:null!==p.sent&&(b.a.success({message:"\u4ed3\u5e93\u5220\u9664\u6210\u529f"}),t.setState({modalVisible:!1}),s.replace(N.b.generatePersonalCenterRoute({username:o}))),p.next=21;break;case 20:b.a.warn({message:"\u5bc6\u7801\u4e0d\u6b63\u786e"});case 21:t.setState({modalConfirmLoading:!1});case 22:case"end":return p.stop()}}))},t.onModalCancel=function(){t.setState({modalVisible:!1})},t.state={modalRepositoryName:"",modalPassword:"",modalVisible:!1,modalConfirmLoading:!1},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.state,a=e.modalConfirmLoading,t=e.modalVisible,n=e.modalPassword,r=e.modalRepositoryName;return m.a.createElement(z,{onButtonClick:this.onButtonClick,modalConfirmLoading:a,modalVisible:t,modalPassword:n,modalRepositoryName:r,onModalOk:this.onModalOk,onModalCancel:this.onModalCancel,onModalPasswordInputChange:this.onModalPasswordInputChange,onModalRepositoryNameInputChange:this.onModalRepositoryNameInputChange})}}]),a}(u.PureComponent),Y=Object(S.f)(G);var $=m.a.memo((function(e){var a=e.onButtonClick;return m.a.createElement(q,{title:"\u8f6c\u79fb\u4ed3\u5e93\u6240\u6709\u4eba",description:"\u5c06\u4ed3\u5e93\u6240\u6709\u4eba\u8f6c\u79fb\u4e3a\u5176\u4ed6\u4eba\u3002",onButtonClick:a})})),ee=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(s)))).onButtonClick=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement($,{onButtonClick:this.onButtonClick})}}]),a}(u.PureComponent),ae=Object(S.f)(ee);var te=m.a.memo((function(){return m.a.createElement(Z.a,{bordered:!0,split:!0},m.a.createElement(ae,null),m.a.createElement(Y,null))}));var ne=m.a.memo((function(e){var a=e.repository,t=e.loading;return m.a.createElement("div",{className:d.a.Options},m.a.createElement(h.a,null,"\u9009\u9879"),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(P,null)),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(X,{repository:a,loading:t})),m.a.createElement("div",{className:d.a.itemWrapper},m.a.createElement(V,{repository:a,loading:t})),m.a.createElement(h.a,null,m.a.createElement("span",{style:{color:"red"}},"\u5371\u9669\u533a")),m.a.createElement(te,null))})),re=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(l.a)(a).call(this,e))).loadRepository=function(){var e,a,n,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=t.props.match.params,a=e.repository,n=e.username,s.next=3,r.a.awrap(x.a.repository({username:n},{name:a}));case 3:null!==(o=s.sent)&&t.setState({repository:o});case 5:case"end":return s.stop()}}))},t.state={repository:new K.e("","","",!0),loading:!0},t}return Object(c.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,r.a.awrap(this.loadRepository());case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,a=e.repository,t=e.loading;return m.a.createElement(ne,{repository:a,loading:t})}}]),a}(u.PureComponent),oe=Object(S.f)(re);t.d(a,"default",(function(){return oe}))},983:function(e,a,t){e.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},985:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(983),s=t.n(o);var i=r.a.memo((function(e){var a=e.children;return r.a.createElement("h2",{className:s.a.SettingsTitle},a)}));t.d(a,"a",(function(){return i}))},994:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(1008),s=t.n(o);var i=r.a.memo((function(e){var a=e.children;return r.a.createElement("div",{className:s.a.SettingLabel},a)}));t.d(a,"a",(function(){return i}))}}]);
//# sourceMappingURL=17.9afce0e2.chunk.js.map