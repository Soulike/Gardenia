(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[29],{655:function(e,t,a){e.exports={BranchMenu:"Style_BranchMenu__2s6dB",branchName:"Style_branchName__YisEW",branchTagWrapper:"Style_branchTagWrapper__Cq2Vq",branchNameInButton:"Style_branchNameInButton__2kCc8"}},664:function(e,t,a){"use strict";a(669);var n=a(670),r=(a(87),a(27)),c=(a(163),a(33)),o=(a(133),a(41)),s=a(0),i=a.n(s),u=a(655),m=a.n(u),l=a(604);var p=i.a.memo((function(e){var t=e.branches,a=e.currentBranch,s=e.onBranchClick,u=!1,p=!0,h=!1,f=void 0;try{for(var b,d=t[Symbol.iterator]();!(p=(b=d.next()).done);p=!0){if(b.value.name===a){u=!0;break}}}catch(v){h=!0,f=v}finally{try{p||null==d.return||d.return()}finally{if(h)throw f}}return i.a.createElement(n.a,{trigger:["click"],overlay:i.a.createElement(c.a,{className:m.a.BranchMenu},t.map((function(e){return i.a.createElement(c.a.Item,{key:e.name,onClick:s(e)},i.a.createElement("div",{className:m.a.branchName,style:e.name===a?{fontWeight:"bold"}:{}},e.name),i.a.createElement("div",{className:m.a.branchTagWrapper},e.isDefault?i.a.createElement(o.a,{color:"blue"},"\u9ed8\u8ba4"):null))})))},i.a.createElement(r.a,null,u?"\u5206\u652f\uff1a":"Tree: ",i.a.createElement("div",{className:m.a.branchNameInButton},a),i.a.createElement(l.a,null)))}));a.d(t,"a",(function(){return p}))},723:function(e,t,a){e.exports={Commits:"Style_Commits__2OcSb",infoWrapper:"Style_infoWrapper__Q9Viu",path:"Style_path__34n0j",timeLineWrapper:"Style_timeLineWrapper__2rqq8",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__AZvS9"}},782:function(e,t,a){"use strict";a.r(t);var n=a(20),r=(a(44),a(6)),c=a(1),o=a.n(c),s=a(4),i=a(10),u=a(11),m=a(29),l=a(28),p=a(30),h=a(0),f=a.n(h),b=(a(117),a(59)),d=(a(87),a(27)),v=a(723),y=a.n(v),_=a(79),k=a(32),g=a(664),E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onBranchClick=function(e){return function(){var t=a.props,n=t.history,r=t.match.params,c=r.username,o=r.repository,s=r.path;n.replace(k.Function.generateRepositoryCommitsRoute({username:c,repository:o,branch:e.name,path:s}))}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match.params.branch,a=e.branches,n="";if(void 0===t){var r=!0,c=!1,o=void 0;try{for(var s,i=a[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var u=s.value;u.isDefault&&(n=u.name)}}catch(m){c=!0,o=m}finally{try{r||null==i.return||i.return()}finally{if(c)throw o}}}return f.a.createElement(g.a,{branches:a,currentBranch:t||n,onBranchClick:this.onBranchClick})}}]),t}(h.PureComponent),O=Object(_.f)(E),C=a(219);var M=f.a.memo((function(e){var t=e.branches,a=e.loading,n=e.commits,r=e.path,c=e.repositoryName,o=e.onLoadMoreButtonClick;return f.a.createElement("div",{className:y.a.Commits},f.a.createElement(b.a,{spinning:a},f.a.createElement("div",{className:y.a.infoWrapper},f.a.createElement(O,{branches:t}),"string"===typeof r?f.a.createElement("div",{className:y.a.path},c,"/",r):null),f.a.createElement("div",{className:y.a.timeLineWrapper},f.a.createElement(C.a,{commits:n})),f.a.createElement("div",{className:y.a.loadMoreButtonWrapper},f.a.createElement(d.a,{disabled:a,loading:a,onClick:o},"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"))))})),x=a(39),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(l.a)(t).call(this,e))).init=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){a.setState({branches:[],commits:[]},(function(){return e()}))})));case 1:case"end":return e.stop()}}),e)}))),a.loadBranches=Object(s.a)(o.a.mark((function e(){var t,n,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,e.next=3,x.g.branches({username:n,name:r});case 3:null!==(c=e.sent)&&(s=c.branches,a.setState({branches:s}));case 5:case"end":return e.stop()}}),e)}))),a.loadMoreCommits=Object(s.a)(o.a.mark((function e(){var c,s,i,u,m,l,p,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.props.match.params,s=c.username,i=c.repository,u=c.branch,m=c.path,p=a.state.commits,"string"!==typeof m){e.next=8;break}return e.next=5,x.g.fileCommitHistory({username:s,name:i},m,u,p.length,t.COMMIT_AMOUNT_PER_PAGE);case 5:l=e.sent,e.next=11;break;case 8:return e.next=10,x.g.commitHistory({username:s,name:i},u,p.length,t.COMMIT_AMOUNT_PER_PAGE);case 10:l=e.sent;case 11:null!==l&&(0===(h=l.commits).length?r.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}):a.setState({commits:[].concat(Object(n.a)(p),Object(n.a)(h))}));case 12:case"end":return e.stop()}}),e)}))),a.onLoadMoreButtonClick=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({loading:!0});case 2:return e.next=4,a.loadMoreCommits();case 4:return e.next=6,a.setState({loading:!1});case 6:case"end":return e.stop()}}),e)}))),a.state={branches:[],loading:!1,commits:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.setState({loading:!0}),e.next=5,this.loadBranches();case 5:return e.next=7,this.loadMoreCommits();case 7:this.setState({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(o.a.mark((function e(t,a,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.location.pathname,c=this.props.location.pathname,r===c){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.branches,a=e.loading,n=e.commits,r=this.props.match.params,c=r.repository,o=r.path;return f.a.createElement(M,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:t,loading:a,commits:n,path:o,repositoryName:c})}}]),t}(h.PureComponent);B.COMMIT_AMOUNT_PER_PAGE=50;var j=Object(_.f)(B);a.d(t,"default",(function(){return j}))}}]);
//# sourceMappingURL=29.c69a5681.chunk.js.map