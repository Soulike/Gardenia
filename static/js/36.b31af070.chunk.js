(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[36],{1033:function(e,t,a){e.exports={FileReader:"Style_FileReader__1hW4w",commitInfoBar:"Style_commitInfoBar__2xvVY",contentWrapper:"Style_contentWrapper__3jWFR",fileInfoBar:"Style_fileInfoBar__2iqjb",fileName:"Style_fileName__3GaRF",content:"Style_content__3_Ute"}},1253:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),o=a(7),s=a(31),i=a(34),c=a(90),m=a(89),u=a(91),l=a(0),p=a.n(l),f=(a(889),a(890)),h=(a(925),a(932)),d=(a(413),a(133)),v=a(1033),g=a.n(v),b=(a(942),a(950)),w=a(92),y=a(38),x=a(102);var k=Object(x.f)(p.a.memo((function(e){var t=e.isBinary,a=e.isOversize,n=e.exists,r=e.fileName,o=e.html,s=e.lastCommit,i=e.loading,c=e.onRawFileButtonClick,m=e.match.params,u=m.username,l=m.repository,v=m.branch,x=m.path;return p.a.createElement("div",{className:g.a.FileReader},p.a.createElement(f.a,{spinning:i},p.a.createElement("div",{className:g.a.commitInfoBar},p.a.createElement(b.a,{lastCommit:s})),p.a.createElement("div",{className:g.a.contentWrapper},p.a.createElement("div",{className:g.a.fileInfoBar},p.a.createElement("div",{className:g.a.fileName},r),p.a.createElement(d.a.Group,{className:g.a.buttonWrapper},p.a.createElement(d.a,null,p.a.createElement(y.b,{to:w.b.generateRepositoryCommitsRoute({username:u,repository:l,branch:v,path:x})},"\u5386\u53f2")),p.a.createElement(d.a,{onClick:c},"\u4e0b\u8f7d"))),n?t?p.a.createElement(h.a,{type:"info",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u539f\u6587\u4ef6"}):a?p.a.createElement(h.a,{type:"info",showIcon:!0,message:"\u6587\u4ef6\u592a\u5927",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u539f\u6587\u4ef6"}):p.a.createElement("div",{className:g.a.content,dangerouslySetInnerHTML:{__html:o}}):p.a.createElement(h.a,{type:"error",showIcon:!0,message:"\u6587\u4ef6\u4e0d\u5b58\u5728"}))))}))),_=a(278),S=a(207),C=a(1034),E=a.n(C),O=a(954),j=a.n(O),B=a(949),F=a(900),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).loadLastCommit=Object(o.a)(r.a.mark((function e(){var t,n,o,s,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,o=t.repository,s=t.path,i=t.branch,e.next=3,S.f.lastCommit({username:n},{name:o},i,s);case 3:if(null===(c=e.sent)){e.next=7;break}return e.next=7,a.onLastCommitLoaded(c);case 7:case"end":return e.stop()}}),e)}))),a.onLastCommitLoaded=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({lastCommit:t}),n=t.commitHash,e.next=4,a.loadFileInfo(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.loadFileInfo=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,s,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.match.params,o=n.username,s=n.repository,i=n.path,e.next=3,S.f.fileInfo({username:o},{name:s},i,t);case 3:if(null===(c=e.sent)){e.next=7;break}return e.next=7,a.onFileInfoLoaded(c,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onFileInfoLoaded=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var o,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.exists,s=t.size,i=t.isBinary,a.setState({exists:o}),!o){e.next=11;break}if(a.setState({isBinary:i}),i){e.next=11;break}if(!(s>1048576)){e.next=9;break}a.setState({isOversize:!0}),e.next=11;break;case 9:return e.next=11,a.loadRawContent(n);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.loadRawContent=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,s,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.match.params,o=n.username,s=n.repository,i=n.path,e.next=3,S.f.rawFile({username:o},{name:s},i,t);case 3:if(null===(c=e.sent)){e.next=11;break}return e.t0=a,e.next=8,F.b.transformBlobToString(c);case 8:e.t1=e.sent,e.t2={rawContent:e.t1},e.t0.setState.call(e.t0,e.t2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onRawFileButtonClick=Object(o.a)(r.a.mark((function e(){var t,n,o,s,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,o=t.repository,s=t.path,i=a.state.lastCommit.commitHash,e.next=4,S.f.rawFile({username:n},{name:o},s,i);case 4:null!==(c=e.sent)&&a.startDownload(c);case 6:case"end":return e.stop()}}),e)}))),a.startDownload=function(e){var t=a.props.match.params.path,n=URL.createObjectURL(e);F.b.startDownload(n,Object(O.basename)(t)),URL.revokeObjectURL(n)},a.getFileNameFromPath=function(e){var t=e.split("/");return t[t.length-1]},a.getHighlightedHtml=function(){var e=a.state,t=e.isBinary,n=e.rawContent;if(!t){var r=document.createElement("pre"),o=document.createElement("div");return o.append(r),r.innerText=n,n.length<=51200?(E.a.highlightBlock(r),o.innerHTML):o.innerHTML}return n},a.isMarkdown=function(e){var t=j.a.extname(e);return".md"===t||".markdown"===t},a.state={exists:!0,isBinary:!1,isOversize:!1,lastCommit:new _.b("","","",0,"",""),loading:!0,rawContent:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadLastCommit();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.props.location.pathname,s=t.location.pathname,o===s){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,a=t.isBinary,n=t.exists,r=t.isOversize,o=t.rawContent,s=t.lastCommit,i=t.loading,c=this.getFileNameFromPath(e),m="";return!n||r||a||(m=this.isMarkdown(c)?B.a.makeHtml(o):this.getHighlightedHtml()),p.a.createElement(k,{html:m,exists:n,isBinary:a,isOversize:r,lastCommit:s,fileName:c,loading:i,onRawFileButtonClick:this.onRawFileButtonClick})}}]),t}(l.PureComponent),R=Object(x.f)(N);a.d(t,"default",(function(){return R}))},900:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"transformBlobToString",(function(){return c})),a.d(n,"startDownload",(function(){return u}));var r={};a.r(r),a.d(r,"parseTimestampToDifference",(function(){return l})),a.d(r,"parseTimestampToDate",(function(){return p}));var o=a(4),s=a.n(o),i=a(7);function c(e){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=new FileReader;n.readAsText(t),n.onloadend=function(){e(n.result)},n.onerror=function(e){a(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t){var a=document.createElement("a");a.href=e,a.download=t,a.click()}function l(e){var t=new Date(e),a=new Date,n=a.getFullYear()-t.getFullYear(),r=a.getMonth()-t.getMonth(),o=a.getDate()-t.getDate(),s=a.getHours()-t.getHours(),i=a.getMinutes()-t.getMinutes(),c=a.getSeconds()-t.getSeconds();return Math.abs(n)>=1?"".concat(n," \u5e74\u524d"):Math.abs(r)>=1?"".concat(r," \u4e2a\u6708\u524d"):Math.abs(o)>=1?"".concat(o," \u5929\u524d"):Math.abs(s)>=1?"".concat(s," \u5c0f\u65f6\u524d"):Math.abs(i)>=1?"".concat(i," \u5206\u949f\u524d"):Math.abs(c)>=1?"".concat(c," \u79d2\u524d"):"\u521a\u521a"}function p(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),o=t.getHours(),s=t.getMinutes(),i=t.getSeconds();return"".concat(a,"-").concat(n.toString().padStart(2,"0"),"-").concat(r.toString().padStart(2,"0")," ").concat(o.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"))}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},945:function(e,t,a){e.exports={CommitInfoBar:"Style_CommitInfoBar__1-ElH",left:"Style_left__1syWH",right:"Style_right__3RBYJ",avatar:"Style_avatar__290nj",name:"Style_name__3xcxA"}},949:function(e,t,a){"use strict";var n=a(955),r=new(a.n(n).a.Converter)({tables:!0,strikethrough:!0,tasklists:!0,emoji:!0});a.d(t,"a",(function(){return r}))},950:function(e,t,a){"use strict";a(414);var n=a(277),r=a(0),o=a.n(r),s=a(945),i=a.n(s),c=a(38),m=a(102),u=a(92),l=a(900);var p=Object(m.f)(o.a.memo((function(e){var t=e.lastCommit,a=t.committerName,r=t.commitHash,s=t.message,m=t.timestamp,p=e.match.params,f=p.username,h=p.repository;return o.a.createElement("div",{className:i.a.CommitInfoBar},o.a.createElement("div",{className:i.a.left},o.a.createElement(c.b,{className:i.a.name,to:u.b.generatePersonalCenterRoute({username:a})},a),o.a.createElement("div",{className:i.a.message},s)),o.a.createElement("div",{className:i.a.right},o.a.createElement("div",{className:i.a.time},l.a.parseTimestampToDifference(m)),o.a.createElement(n.a,{title:r},o.a.createElement("div",{className:i.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",o.a.createElement(c.b,{to:u.b.generateRepositoryCommitRoute({username:f,repository:h,commitHash:r})},r.slice(0,7))))))})));a.d(t,"a",(function(){return p}))}}]);
//# sourceMappingURL=36.b31af070.chunk.js.map