(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[29],{1e3:function(e,n,t){"use strict";t.d(n,"b",(function(){return f})),t.d(n,"a",(function(){return M})),t.d(n,"c",(function(){return h}));var r={};t.r(r),t.d(r,"USERNAME",(function(){return w})),t.d(r,"PASSWORD",(function(){return O})),t.d(r,"VERIFICATION_CODE",(function(){return g}));var a={};t.r(a),t.d(a,"NAME",(function(){return N}));var o={};t.r(o),t.d(o,"NICKNAME",(function(){return _})),t.d(o,"EMAIL",(function(){return P}));var s={};t.r(s),t.d(s,"NAME",(function(){return y}));var i={};t.r(i),t.d(i,"CODE",(function(){return j}));var c={};t.r(c),t.d(c,"username",(function(){return I})),t.d(c,"password",(function(){return R})),t.d(c,"verificationCode",(function(){return W}));var u={};t.r(u),t.d(u,"name",(function(){return D}));var m={};t.r(m),t.d(m,"nickname",(function(){return T})),t.d(m,"email",(function(){return U}));var d={};t.r(d),t.d(d,"name",(function(){return L}));var l={};t.r(l),t.d(l,"code",(function(){return $}));var f={};t.r(f),t.d(f,"Account",(function(){return c})),t.d(f,"Group",(function(){return u})),t.d(f,"Profile",(function(){return m})),t.d(f,"Repository",(function(){return d})),t.d(f,"Collaborator",(function(){return l}));var p={};t.r(p),t.d(p,"USERNAME",(function(){return F})),t.d(p,"PASSWORD",(function(){return G}));var v={};t.r(v),t.d(v,"NAME",(function(){return z}));var b={};t.r(b),t.d(b,"NICKNAME",(function(){return K}));var A={};t.r(A),t.d(A,"NAME",(function(){return V}));var h={};t.r(h),t.d(h,"Account",(function(){return p})),t.d(h,"Group",(function(){return v})),t.d(h,"Profile",(function(){return b})),t.d(h,"Repository",(function(){return A}));var x={};t.r(x),t.d(x,"USERNAME",(function(){return B})),t.d(x,"PASSWORD",(function(){return J})),t.d(x,"VERIFICATION_CODE",(function(){return X}));var E={};t.r(E),t.d(E,"NAME",(function(){return Z}));var C={};t.r(C),t.d(C,"NICKNAME",(function(){return q})),t.d(C,"EMAIL",(function(){return Q}));var k={};t.r(k),t.d(k,"NAME",(function(){return H}));var S={};t.r(S),t.d(S,"CODE",(function(){return Y}));var M={};t.r(M),t.d(M,"Account",(function(){return x})),t.d(M,"Group",(function(){return E})),t.d(M,"Profile",(function(){return C})),t.d(M,"Repository",(function(){return k})),t.d(M,"Collaborator",(function(){return S}));var w=/^\w{1,20}$/,O=/^\S{6,}$/,g=/^\d{6}$/,N=/^\S{1,20}$/,_=/^\S{1,20}$/,P=/^([A-z0-9_\-.\u4e00-\u9fa5])+@([A-Za-z0-9_\-.])+\.([A-Za-z]{2,8})$/,y=/^\w{1,20}$/,j=/^\w+_\w+_\d+$/;function I(e){return r.USERNAME.test(e)}function R(e){return r.PASSWORD.test(e)}function W(e){return r.VERIFICATION_CODE.test(e)}function D(e){return a.NAME.test(e)}function T(e){return o.NICKNAME.test(e)}function U(e){return o.EMAIL.test(e)}function L(e){return s.NAME.test(e)}function $(e){return i.CODE.test(e)}var F="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf",G="6 \u4f4d\u4ee5\u4e0a",z="1~20 \u4f4d",K="1~20 \u4f4d",V="1~20 \u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u53ca\u4e0b\u5212\u7ebf",B="\u7528\u6237\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",J="\u5bc6\u7801\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",X="\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e",Z="\u5c0f\u7ec4\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",q="\u6635\u79f0\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",Q="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1",H="\u4ed3\u5e93\u540d\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",Y="\u9080\u8bf7\u7801\u65e0\u6548\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"},1002:function(e,n,t){"use strict";var r=t(999);t.d(n,"a",(function(){return r.a}))},1126:function(e,n,t){e.exports={Members:"Style_Members__1A1TA",topArea:"Style_topArea__2Rqcb",cardContent:"Style_cardContent__3XM0M",titleWrapper:"Style_titleWrapper__30lrm",name:"Style_name__35BXt",isAdminTagWrapper:"Style_isAdminTagWrapper__h56El",isAdminTag:"Style_isAdminTag__3vPt2",avatarWrapper:"Style_avatarWrapper__31DG6",avatar:"Style_avatar__39V_0"}},1127:function(e,n,t){e.exports={modalContent:"Style_modalContent__2QoB9",usernameInput:"Style_usernameInput__2TSrf"}},1211:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return K}));var r={};t.r(r),t.d(r,"addMember",(function(){return U}));var a=t(323),o=t(1),s=t.n(o),i=t(3),c=t(8),u=t(10),m=t(17),d=t(18),l=t(0),f=t.n(l),p=t(67),v=t(1126),b=t.n(v),A=t(973),h=t(1206),x=t(169),E=t(970),C=t(971),k=t(82),S=t(963),M=t(21),w=t(1002),O=t(966),g=t(967),N=t(977),_=t(1127),P=t.n(_);var y=f.a.memo((function(e){var n=e.onClick,t=e.showModal,r=e.username,a=e.loading,o=e.onModalCancelClick,s=e.onModalOkClick,i=e.onUsernameChange;return f.a.createElement(f.a.Fragment,null,f.a.createElement(k.a,{type:"primary",onClick:n,loading:a,disabled:a},f.a.createElement(N.a,null),"\u6dfb\u52a0\u6210\u5458"),f.a.createElement(O.a,{destroyOnClose:!0,width:300,title:"\u6dfb\u52a0\u5c0f\u7ec4\u6210\u5458",visible:t,onOk:s,onCancel:o,confirmLoading:a},f.a.createElement("div",{className:P.a.modalContent},f.a.createElement(g.a,{value:r,onChange:i,autoFocus:!0,placeholder:"\u65b0\u5c0f\u7ec4\u6210\u5458\u7684\u7528\u6237\u540d",className:P.a.usernameInput}))))})),j=t(87),I=t(117),R=t(28),W=t(1e3),D=t(960),T=new(t(248).EventEmitter),U="addMember",L=function(e){Object(d.a)(t,e);var n=Object(m.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).setStatePromise=Object(j.promisify)(a.setState),a.initModal=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setStatePromise({username:""});case 1:case"end":return e.stop()}}),e)}))),a.onClick=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setStatePromise({showModal:!0});case 2:return e.next=4,a.initModal();case 4:case"end":return e.stop()}}),e)}))),a.onModalOkClick=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.match.params.id,t=a.state.username,W.b.Account.username(t)){e.next=6;break}D.a.error({message:"\u7528\u6237 ".concat(t," \u4e0d\u5b58\u5728")}),e.next=18;break;case 6:return e.next=8,a.setStatePromise({loading:!0});case 8:return e.next=10,R.d.addAccounts({id:Number.parseInt(n)},[t]);case 10:if(null===e.sent){e.next=16;break}return D.a.success({message:"\u6dfb\u52a0\u6210\u5458 ".concat(t," \u6210\u529f")}),e.next=15,a.setStatePromise({showModal:!1});case 15:T.emit(r.addMember);case 16:return e.next=18,a.setStatePromise({loading:!1});case 18:case"end":return e.stop()}}),e)}))),a.onModalCancelClick=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setStatePromise({showModal:!1});case 2:case"end":return e.stop()}}),e)}))),a.onUsernameChange=function(e){a.setState({username:e.target.value})},a.state={showModal:!1,username:"",loading:!1},a}return Object(u.a)(t,[{key:"render",value:function(){var e=this.state,n=e.showModal,t=e.username,r=e.loading;return f.a.createElement(y,{loading:r,showModal:n,username:t,onClick:this.onClick,onModalCancelClick:this.onModalCancelClick,onModalOkClick:this.onModalOkClick,onUsernameChange:this.onUsernameChange})}}]),t}(l.PureComponent),$=Object(I.f)(L),F=t(202);var G=f.a.memo((function(e){var n=e.profiles,t=e.loading,r=e.isAdmin,a=e.adminUsernames,o=e.onSetAdminConfirm,s=e.onRemoveAccountConfirm,i=e.onRemoveAdminConfirm;return f.a.createElement("div",{className:b.a.Members},f.a.createElement("div",{className:b.a.topArea},f.a.createElement(A.a,{type:"info",showIcon:!0,message:"\u53ea\u6709\u5c0f\u7ec4\u6210\u5458\u53ef\u5c06\u4ed3\u5e93\u52a0\u5165\u5c0f\u7ec4"}),f.a.createElement("div",{className:b.a.addMemberButtonWrapper},r?f.a.createElement($,null):null)),f.a.createElement(h.a,{loading:t,locale:{emptyText:f.a.createElement(x.a,{description:"\u6ca1\u6709\u6210\u5458"})},dataSource:Object(p.a)(n),renderItem:function(e){if(null!==e){var n=e.nickname,c=e.username,u=e.avatar;return f.a.createElement(E.a,{size:"small",key:c},f.a.createElement("div",{className:b.a.cardContent},f.a.createElement(w.a,{className:b.a.titleWrapper,to:M.Function.generatePersonalCenterRoute({username:c})},f.a.createElement("div",{className:b.a.avatarWrapper},f.a.createElement(F.a,{avatar:u})),f.a.createElement("div",{className:b.a.name},n,"(",c,")"),f.a.createElement("div",{className:b.a.isAdminTagWrapper},a.includes(c)?f.a.createElement(C.a,{color:"blue",className:b.a.isAdminTag},"\u7ba1\u7406\u5458"):null)),r?f.a.createElement("div",{className:b.a.buttonWrapper},f.a.createElement(k.a.Group,null,a.includes(c)?f.a.createElement(S.a,{title:"\u786e\u8ba4\u64a4\u9500\u6210\u5458 ".concat(c," \u7684\u7ba1\u7406\u5458\u6743\u9650\uff1f"),onConfirm:i(c),disabled:t},f.a.createElement(k.a,{loading:t,disabled:t},"\u64a4\u9500\u7ba1\u7406\u5458")):f.a.createElement(S.a,{title:"\u786e\u8ba4\u8bbe\u7f6e\u6210\u5458 ".concat(c," \u4e3a\u7ba1\u7406\u5458\uff1f"),onConfirm:o(c),disabled:t},f.a.createElement(k.a,{type:"primary",loading:t,disabled:t},"\u8bbe\u4e3a\u7ba1\u7406\u5458")),f.a.createElement(S.a,{title:"\u786e\u8ba4\u79fb\u9664\u6210\u5458 ".concat(c,"\uff1f"),onConfirm:s(c),disabled:t},f.a.createElement(k.a,{type:"danger",loading:t,disabled:t},"\u79fb\u9664")))):null))}return null}}))})),z=function(e){Object(d.a)(t,e);var n=Object(m.a)(t);function t(e){var o;return Object(c.a)(this,t),(o=n.call(this,e)).setStatePromise=Object(j.promisify)(o.setState),o.onAddMemberListener=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.componentDidMount();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),o.removeAccount=function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r,a,i,c,u,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.state,r=t.accounts,a=t.profiles,i=t.admins,c=r.filter((function(e){return e.username!==n})),u=a.filter((function(e){return null!==e&&e.username!==n})),m=i.filter((function(e){return e.username!==n})),e.next=6,o.setStatePromise({accounts:c,profiles:u,admins:m});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o.addAdmin=function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r,i,c,u,m,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.state,r=t.accounts,i=t.admins,c=Array.from(i),u=Object(a.a)(r),e.prev=3,u.s();case 5:if((m=u.n()).done){e.next=12;break}if((d=m.value).username!==n){e.next=10;break}return c.push(d),e.abrupt("break",12);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),u.e(e.t0);case 17:return e.prev=17,u.f(),e.finish(17);case 20:return e.next=22,o.setStatePromise({admins:c});case 22:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(n){return e.apply(this,arguments)}}(),o.removeAdmin=function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.state.admins,r=t.filter((function(e){return e.username!==n})),e.next=4,o.setStatePromise({admins:r});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o.loadIsAdmin=Object(i.a)(s.a.mark((function e(){var n,t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.props.match.params.id,e.next=3,R.d.isAdmin({id:Number.parseInt(n)});case 3:if(null===(t=e.sent)){e.next=8;break}return r=t.isAdmin,e.next=8,o.setStatePromise({isAdmin:r});case 8:case"end":return e.stop()}}),e)}))),o.loadAccounts=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.props.match.params.id,e.next=3,R.d.accounts({id:Number.parseInt(n)});case 3:if(null===(t=e.sent)){e.next=7;break}return e.next=7,o.setStatePromise({accounts:t});case 7:case"end":return e.stop()}}),e)}))),o.loadAdmins=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.props.match.params.id,e.next=3,R.d.admins({id:Number.parseInt(n)});case 3:if(null===(t=e.sent)){e.next=7;break}return e.next=7,o.setStatePromise({admins:t});case 7:case"end":return e.stop()}}),e)}))),o.loadProfiles=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.state.accounts,e.next=3,Promise.all(n.map((function(e){var n=e.username;return R.f.get({username:n})})));case 3:return t=e.sent,e.next=6,o.setStatePromise({profiles:t});case 6:case"end":return e.stop()}}),e)}))),o.onRemoveAccountConfirm=function(e){var n=o.props.match.params.id;return Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.setStatePromise({loading:!0});case 2:return t.next=4,R.d.removeAccounts({id:Number.parseInt(n)},[e]);case 4:if(null===t.sent){t.next=9;break}return D.a.success({message:"\u79fb\u9664\u6210\u5458\u6210\u529f"}),t.next=9,o.removeAccount(e);case 9:return t.next=11,o.setStatePromise({loading:!1});case 11:case"end":return t.stop()}}),t)})))},o.onSetAdminConfirm=function(e){var n=o.props.match.params.id;return Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.setStatePromise({loading:!0});case 2:return t.next=4,R.d.addAdmins({id:Number.parseInt(n)},[e]);case 4:if(null===t.sent){t.next=9;break}return D.a.success({message:"\u6210\u529f\u8bbe\u7f6e ".concat(e," \u4e3a\u7ba1\u7406\u5458")}),t.next=9,o.addAdmin(e);case 9:return t.next=11,o.setStatePromise({loading:!1});case 11:case"end":return t.stop()}}),t)})))},o.onRemoveAdminConfirm=function(e){var n=o.props.match.params.id;return Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.setStatePromise({loading:!0});case 2:return t.next=4,R.d.removeAdmins({id:Number.parseInt(n)},[e]);case 4:if(null===t.sent){t.next=9;break}return D.a.success({message:"\u6210\u529f\u64a4\u9500 ".concat(e," \u7684\u7ba1\u7406\u5458\u8eab\u4efd")}),t.next=9,o.removeAdmin(e);case 9:return t.next=11,o.setStatePromise({loading:!1});case 11:case"end":return t.stop()}}),t)})))},o.state={accounts:[],admins:[],profiles:[],loading:!0,isAdmin:!1},T.on(r.addMember,o.onAddMemberListener),o}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadAccounts(),this.loadAdmins(),this.loadIsAdmin()]);case 4:return e.next=6,this.loadProfiles();case 6:return e.next=8,this.setStatePromise({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(s.a.mark((function e(n,t,r){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.match.params.id,o=n.match.params.id,a===o){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(n,t,r){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){T.removeListener(r.addMember,this.onAddMemberListener)}},{key:"render",value:function(){var e=this.state,n=e.profiles,t=e.loading,r=e.isAdmin,a=e.admins;return f.a.createElement(G,{profiles:n,loading:t,isAdmin:r,adminUsernames:a.map((function(e){return e.username})),onRemoveAccountConfirm:this.onRemoveAccountConfirm,onSetAdminConfirm:this.onSetAdminConfirm,onRemoveAdminConfirm:this.onRemoveAdminConfirm})}}]),t}(l.PureComponent),K=Object(I.f)(z)},999:function(e,n,t){"use strict";var r=t(0),a=t.n(r),o=t(15);n.a=a.a.memo((function(e){return a.a.createElement(o.b,Object.assign({},e,{target:"_blank",rel:"noopener norefferrer"}))}))}}]);
//# sourceMappingURL=29.2a7e98ca.chunk.js.map