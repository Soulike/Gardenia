(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[4],{1165:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(1166),o=a.n(r);t.a=i.a.memo((function(e){var t=e.children,a=e.required;return i.a.createElement("div",{className:o.a.InputLabel},t,i.a.createElement("span",{className:o.a.requiredSign},a?" *":""))}))},1166:function(e,t,a){e.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},1167:function(e,t,a){"use strict";var n=a(1165);a.d(t,"a",(function(){return n.a}))},1168:function(e,t,a){e.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},1169:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),r=a(1168),o=a.n(r);var c=i.a.memo((function(e){var t=e.children;return i.a.createElement("h2",{className:o.a.SettingsTitle},t)}))},1293:function(e,t,a){e.exports={Profile:"Style_Profile__1P2aC",item:"Style_item__1F9QO",form:"Style_form__1PS4O",inputWrapper:"Style_inputWrapper__fOuXC",saveButtonWrapper:"Style_saveButtonWrapper__2AiWe",emailForm:"Style_emailForm__7P4eQ"}},1294:function(e,t,a){e.exports={Nickname:"Style_Nickname__3gWvC",form:"Style_form__3g0-l",inputWrapper:"Style_inputWrapper__3jj-P",saveButtonWrapper:"Style_saveButtonWrapper__3Sif2"}},1295:function(e,t,a){e.exports={Email:"Style_Email__2JMj1",form:"Style_form__2tgBD",inputWrapper:"Style_inputWrapper__3g6em",emailInput:"Style_emailInput__3T16m",verificationCodeInput:"Style_verificationCodeInput__1vRUB",getVerificationCodeButton:"Style_getVerificationCodeButton__3OBFz",saveButtonWrapper:"Style_saveButtonWrapper__1JiaX"}},1378:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(1),i=a.n(n),r=a(3),o=a(10),c=a(12),s=a(21),u=a(20),l=a(0),m=a.n(l),f=a(1293),p=a.n(f),d=a(1169),v=a(1167),g=a(1137),C=a(263),b=a(27),k=a(1294),_=a.n(k),E=a(1165),h=a(181),S=a(1131),x=a(110),N=a(161);var P=m.a.memo((function(e){var t=e.nickname,a=e.loading,n=e.onNicknameInputChange,i=e.onNicknameSubmit;return m.a.createElement("div",{className:_.a.Nickname},m.a.createElement(E.a,null,"\u6635\u79f0"),m.a.createElement("div",{className:_.a.form},m.a.createElement("div",{className:_.a.inputWrapper},m.a.createElement(h.a,{title:N.c.Profile.NICKNAME,trigger:"focus"},m.a.createElement(S.a,{onChange:n,value:t,disabled:a}))),m.a.createElement("div",{className:_.a.saveButtonWrapper},m.a.createElement(x.a,{type:"primary",onClick:i,loading:a,disabled:a},"\u4fdd\u5b58"))))})),y=a(68),O=a(337),I=a(334),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(y.promisify)(n.setState),n.onNicknameInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({nickname:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onNicknameSubmit=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.nickname,!N.b.Profile.nickname(t)){e.next=12;break}return e.next=4,n.setStatePromise({loading:!0});case 4:return e.next=6,O.a.setNickname(t);case 6:return null!==e.sent&&I.a.success({message:"\u6635\u79f0\u4fee\u6539\u6210\u529f"}),e.next=10,n.setStatePromise({loading:!1});case 10:e.next=13;break;case 12:I.a.warn({message:N.a.Profile.NICKNAME,description:N.c.Profile.NICKNAME});case 13:case"end":return e.stop()}}),e)}))),n.state={nickname:"",loading:!1},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,a,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.defaultNickname,o=t.defaultNickname,r===o||void 0===r){e.next=5;break}return e.next=5,this.setStatePromise({nickname:r});case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.nickname,a=e.loading,n=this.props.loadingDefaultNickname;return m.a.createElement(P,{nickname:t,loading:a||!!n,onNicknameInputChange:this.onNicknameInputChange,onNicknameSubmit:this.onNicknameSubmit})}}]),a}(l.PureComponent),j=a(1295),w=a.n(j);var V=m.a.memo((function(e){var t=e.email,a=e.loading,n=e.onEmailInputChange,i=e.onEmailSubmit,r=e.disableGetVerificationCodeButton,o=e.getVerificationCodeButtonText,c=e.onGetVerificationCodeButtonClick,s=e.onVerificationCodeInputChange,u=e.verificationCode;return m.a.createElement("div",{className:w.a.Email},m.a.createElement(E.a,null,"\u90ae\u7bb1"),m.a.createElement("div",{className:w.a.form},m.a.createElement("div",{className:w.a.inputWrapper},m.a.createElement(S.a,{type:"email",onChange:n,value:t,disabled:a,className:w.a.emailInput}),m.a.createElement(S.a,{type:"text",onChange:s,value:u,placeholder:"\u90ae\u7bb1\u9a8c\u8bc1\u7801",addonAfter:m.a.createElement(x.a,{type:"link",size:"small",disabled:r||a,className:w.a.getVerificationCodeButton,onClick:c},o),className:w.a.verificationCodeInput})),m.a.createElement("div",{className:w.a.saveButtonWrapper},m.a.createElement(x.a,{type:"primary",onClick:i,loading:a,disabled:a},"\u4fdd\u5b58"))))})),T=N.b.Profile,G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(y.promisify)(n.setState),n.onEmailInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({email:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onVerificationCodeInputChange=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({verificationCode:t.target.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onGetVerificationCodeButtonClick=Object(r.a)(i.a.mark((function e(){var t,a,r,o,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=30,a=n.state,r=a.getVerificationCodeButtonText,o=a.email,T.email(o)){e.next=6;break}I.a.warn({message:N.a.Profile.EMAIL}),e.next=22;break;case 6:return e.next=8,n.setStatePromise({disableGetVerificationCodeButton:!0});case 8:return c=0,s=setInterval((function(){c++,n.setState({getVerificationCodeButtonText:"".concat(t-c," \u79d2\u540e\u518d\u83b7\u53d6")})}),1e3),u=setTimeout((function(){clearInterval(s),n.setState({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r})}),1e3*t),e.next=13,O.a.sendSetEmailVerificationCodeToEmail(o);case 13:if(null===e.sent){e.next=18;break}I.a.success({message:"\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f",description:"\u8bf7\u5230 ".concat(o," \u67e5\u770b")}),e.next=22;break;case 18:return clearInterval(s),clearTimeout(u),e.next=22,n.setStatePromise({disableGetVerificationCodeButton:!1,getVerificationCodeButtonText:r});case 22:case"end":return e.stop()}}),e)}))),n.onEmailSubmit=Object(r.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.email,r=t.verificationCode,N.b.Account.verificationCode(r)){e.next=5;break}I.a.warn({message:N.a.Account.VERIFICATION_CODE}),e.next=20;break;case 5:if(N.b.Profile.email(a)){e.next=9;break}I.a.warn({message:N.a.Profile.EMAIL}),e.next=20;break;case 9:return e.next=11,n.setStatePromise({loading:!0});case 11:return e.next=13,O.a.setEmail(a,r);case 13:if(null===e.sent){e.next=18;break}return I.a.success({message:"\u90ae\u7bb1\u4fee\u6539\u6210\u529f"}),e.next=18,n.setStatePromise({verificationCode:""});case 18:return e.next=20,n.setStatePromise({loading:!1});case 20:case"end":return e.stop()}}),e)}))),n.state={email:"",verificationCode:"",getVerificationCodeButtonText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",disableGetVerificationCodeButton:!1,loading:!1},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,a,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.defaultEmail,o=t.defaultEmail,r===o||void 0===r){e.next=5;break}return e.next=5,this.setStatePromise({email:r});case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.loadingDefaultEmail,t=this.state,a=t.email,n=t.loading,i=t.verificationCode,r=t.disableGetVerificationCodeButton,o=t.getVerificationCodeButtonText;return m.a.createElement(V,{email:a,loading:n||!!e,disableGetVerificationCodeButton:r,getVerificationCodeButtonText:o,onGetVerificationCodeButtonClick:this.onGetVerificationCodeButtonClick,onVerificationCodeInputChange:this.onVerificationCodeInputChange,verificationCode:i,onEmailInputChange:this.onEmailInputChange,onEmailSubmit:this.onEmailSubmit})}}]),a}(l.PureComponent),W=b.CONFIG.PAGE_ID,A=b.CONFIG.PAGE_ID_TO_ROUTE;var D=m.a.memo((function(e){var t=e.defaultNickname,a=e.defaultEmail,n=e.loading;return m.a.createElement("div",{className:p.a.Profile},m.a.createElement(d.a,null,"\u4e2a\u4eba\u8d44\u6599"),m.a.createElement("div",{className:p.a.item},m.a.createElement(B,{defaultNickname:t,loadingDefaultNickname:n})),m.a.createElement("div",{className:p.a.item},m.a.createElement(G,{defaultEmail:a,loadingDefaultEmail:n})),m.a.createElement("div",{className:p.a.item},m.a.createElement(v.a,null,"\u5bc6\u7801"),m.a.createElement(g.a,{type:"info",showIcon:!0,message:m.a.createElement("div",null,"\u524d\u5f80",m.a.createElement(C.a,{to:A[W.CHANGE_PASSWORD]},"\u4fee\u6539\u5bc6\u7801\u9875\u9762"),"\u4fee\u6539\u5bc6\u7801")})))})),F=a(34),M=a(64),L=a(147),U=b.CONFIG.PAGE_ID,J=b.CONFIG.PAGE_ID_TO_ROUTE,R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(y.promisify)(n.setState),n.loadProfile=Object(r.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.g.get();case 2:if(null===(t=e.sent)){e.next=8;break}return e.next=6,n.setStatePromise({currentProfile:t});case 6:e.next=10;break;case 8:return a=n.props.history,e.abrupt("return",a.replace(J[U.NOT_FOUND]));case 10:case"end":return e.stop()}}),e)}))),n.state={currentProfile:new L.g("","","",""),loading:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,this.loadProfile();case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.currentProfile,a=t.nickname,n=t.email,i=e.loading;return m.a.createElement(D,{defaultNickname:a,defaultEmail:n,loading:i})}}]),a}(l.PureComponent),q=Object(M.f)(R)}}]);
//# sourceMappingURL=4.4dc95a27.chunk.js.map