(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[33],{1078:function(y,R,s){y.exports={PullRequests:"Style_PullRequests__2EzEd",list:"Style_list__2Z9aN",header:"Style_header__bLOXb",statusFilter:"Style_statusFilter__3-bE3",tag:"Style_tag__2Esc7",pageButtonWrapper:"Style_pageButtonWrapper__oo2S4"}},1079:function(y,R,s){y.exports={PullRequests:"Style_PullRequests__2-07Q",emptyWrapper:"Style_emptyWrapper__2PVg3"}},1080:function(y,R,s){y.exports={PullRequest:"Style_PullRequest__2fW0b",titleWrapper:"Style_titleWrapper__1oAuA",iconWrapper:"Style_iconWrapper__MP-ds",info:"Style_info__1lTJJ"}},1407:function(y,R,s){"use strict";s.r(R),s.d(R,"default",function(){return $});var f=s(0),e=s.n(f),q=s(1078),d=s.n(q),x=s(955),A=s(972),P=s(103),S=s(971),F=s(17),C=s(47),O=s(49),o=s(22),I=s(1079),B=s.n(I),L=s(1080),N=s.n(L),M=s(68),W=s(101),D=s(986),G=s(983),Z=s(279);function T(r){const{pullRequest:{title:t,status:a,creationTime:n,no:l,sourceRepositoryUsername:u,targetRepositoryUsername:i,targetRepositoryName:c}}=r;return e.a.createElement("div",{className:N.a.PullRequest},e.a.createElement("div",{className:N.a.titleWrapper},e.a.createElement("div",{className:N.a.iconWrapper,style:{color:z(a)}},k(a)),e.a.createElement(Z.a,{to:O.Function.generateRepositoryPullRequestRoute({username:i,repositoryName:c,no:l.toString()})},e.a.createElement("div",{className:N.a.title},t))),e.a.createElement("div",{className:N.a.info},"#",l," \u7531 ",e.a.createElement("b",null,u)," \u4E8E ",M.b.parseTimestampToDifference(n)," \u521B\u5EFA"))}function k(r){switch(r){case o.c.CLOSED:return e.a.createElement(W.a,null);case o.c.MERGED:return e.a.createElement(D.a,null);case o.c.OPEN:return e.a.createElement(G.a,null)}}function z(r){switch(r){case o.c.CLOSED:return"red";case o.c.MERGED:return"purple";case o.c.OPEN:return"green"}}var U=e.a.memo(T),j=s(181);function J(r){const{pullRequests:t}=r;return e.a.createElement("div",{className:B.a.PullRequests},t.length>0?t.map(a=>e.a.createElement(U,{pullRequest:a,key:a.id})):e.a.createElement("div",{className:B.a.emptyWrapper},e.a.createElement(j.a,{description:"\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684 Pull Request"})))}var V=e.a.memo(J),Q=s(275),X=s(506);function H(r){const{branches:t,loading:a,match:{params:{username:n,repositoryName:l}},openAmount:u,closedAmount:i,mergedAmount:c,onStatusButtonClick:m,currentStatus:h,currentPageNumber:w,pullRequests:_,onNextButtonClick:ee,onPrevButtonClick:te,noNextPage:ae}=r;let v="";for(const{isDefault:se,name:ne}of t)se&&(v=ne);return e.a.createElement("div",{className:d.a.PullRequests},e.a.createElement(x.a,{spinning:a},e.a.createElement("div",{className:d.a.list},e.a.createElement("div",{className:d.a.header},e.a.createElement("div",{className:d.a.statusFilter},e.a.createElement(A.b,{size:-1},e.a.createElement(P.a,{size:"small",type:"link",style:{color:"unset",fontWeight:h===void 0?"bolder":"inherit"},onClick:m(void 0)},e.a.createElement(Q.a,null)," \u6240\u6709",e.a.createElement(S.a,{className:d.a.tag},u+i+c)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"green",fontWeight:h===o.c.OPEN?"bolder":"inherit"},onClick:m(o.c.OPEN)},e.a.createElement(G.a,null)," \u5F00\u542F\u7684",e.a.createElement(S.a,{className:d.a.tag},u)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"red",fontWeight:h===o.c.CLOSED?"bolder":"inherit"},onClick:m(o.c.CLOSED)},e.a.createElement(W.a,null)," \u5DF2\u5173\u95ED",e.a.createElement(S.a,{className:d.a.tag},i)),e.a.createElement(P.a,{size:"small",type:"link",style:{color:"purple",fontWeight:h===o.c.MERGED?"bolder":"inherit"},onClick:m(o.c.MERGED)},e.a.createElement(D.a,null)," \u5DF2\u5408\u5E76",e.a.createElement(S.a,{className:d.a.tag},c)))),e.a.createElement("div",{className:d.a.buttonWrapper},e.a.createElement(F.b,{to:O.Function.generateRepositoryCompareRoute({sourceRepositoryUsername:n,sourceRepositoryName:l,sourceRepositoryBranch:v,targetRepositoryBranch:v,repositoryName:l,username:n})},e.a.createElement(P.a,{type:"primary"},e.a.createElement(X.a,null),"\u521B\u5EFA Pull Request")))),e.a.createElement("div",{className:d.a.pullRequestListWrapper},e.a.createElement(V,{pullRequests:_}))),e.a.createElement("div",{className:d.a.pageButtonWrapper},e.a.createElement(A.b,{size:-1},e.a.createElement(P.a,{disabled:w===0,onClick:te},"\u4E0A\u4E00\u9875"),e.a.createElement(P.a,{onClick:ee,disabled:ae},"\u4E0B\u4E00\u9875")))))}var K=Object(C.j)(e.a.memo(H)),Y=s(350),g=s(27),p=(r,t,a)=>new Promise((n,l)=>{var u=m=>{try{c(a.next(m))}catch(h){l(h)}},i=m=>{try{c(a.throw(m))}catch(h){l(h)}},c=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,i);c((a=a.apply(r,t)).next())});const E=class extends f.PureComponent{constructor(r){super(r);this.onStatusButtonClick=t=>()=>p(this,null,function*(){switch(this.setState({currentStatus:t,loading:!0,currentPageNumber:0}),t){case o.c.OPEN:{yield this.loadOpenAmount();break}case o.c.MERGED:{yield this.loadMergedAmount();break}case o.c.CLOSED:{yield this.loadClosedAmount();break}default:{yield Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount()]);break}}yield this.loadPullRequests(t,0,E.SIZE_PER_PAGE),this.setState({loading:!1})}),this.onPrevButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:a}=this.state;t>0&&(this.setState({loading:!0}),yield this.loadPullRequests(a,(t-1)*E.SIZE_PER_PAGE,E.SIZE_PER_PAGE),this.setState({currentPageNumber:t-1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"}))}),this.onNextButtonClick=()=>p(this,null,function*(){const{currentPageNumber:t,currentStatus:a}=this.state;this.setState({loading:!0}),yield this.loadPullRequests(a,(t+1)*E.SIZE_PER_PAGE,E.SIZE_PER_PAGE),this.setState({currentPageNumber:t+1,loading:!1}),window.scrollTo({top:0,behavior:"smooth"})}),this.loadPullRequests=(t,a,n)=>p(this,null,function*(){const{match:{params:{username:l,repositoryName:u}}}=this.props,i=yield g.h.getByRepository({username:l,name:u},t,a,n);if(i!==null){const{pullRequests:c}=i;this.setState({pullRequests:c})}}),this.loadBranches=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield Y.a.branches({username:t,name:a});if(n!==null){const{branches:l}=n;this.setState({branches:l})}}),this.loadOpenAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield g.h.getPullRequestAmount({username:t,name:a},o.c.OPEN);if(n!==null){const{amount:l}=n;this.setState({openAmount:l})}}),this.loadClosedAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield g.h.getPullRequestAmount({username:t,name:a},o.c.CLOSED);if(n!==null){const{amount:l}=n;this.setState({closedAmount:l})}}),this.loadMergedAmount=()=>p(this,null,function*(){const{match:{params:{username:t,repositoryName:a}}}=this.props,n=yield g.h.getPullRequestAmount({username:t,name:a},o.c.MERGED);if(n!==null){const{amount:l}=n;this.setState({mergedAmount:l})}}),this.setNoNextPage=()=>{const{currentStatus:t,currentPageNumber:a,openAmount:n,closedAmount:l,mergedAmount:u}=this.state;switch(t){case o.c.CLOSED:return(a+1)*E.SIZE_PER_PAGE>=l;case o.c.MERGED:return(a+1)*E.SIZE_PER_PAGE>=u;case o.c.OPEN:return(a+1)*E.SIZE_PER_PAGE>=n;default:return(a+1)*E.SIZE_PER_PAGE>=n+l+u}},this.state={branches:[],loading:!1,openAmount:0,closedAmount:0,mergedAmount:0,pullRequests:[],currentStatus:o.c.OPEN,currentPageNumber:0}}componentDidMount(){return p(this,null,function*(){this.setState({loading:!0}),yield Promise.all([this.loadBranches(),this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount(),this.loadPullRequests(o.c.OPEN,0,E.SIZE_PER_PAGE)]),this.setState({loading:!1})})}componentDidUpdate(r,t,a){return p(this,null,function*(){const{match:{params:{username:n,repositoryName:l}}}=this.props,{match:{params:{username:u,repositoryName:i}}}=r;(n!==u||l!==i)&&(yield this.componentDidMount())})}render(){const{branches:r,loading:t,closedAmount:a,mergedAmount:n,openAmount:l,pullRequests:u,currentStatus:i,currentPageNumber:c}=this.state;return e.a.createElement(K,{branches:r,loading:t,closedAmount:a,mergedAmount:n,openAmount:l,pullRequests:u,currentStatus:i,currentPageNumber:c,onStatusButtonClick:this.onStatusButtonClick,onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick,noNextPage:this.setNoNextPage()})}};let b=E;b.SIZE_PER_PAGE=20;var $=Object(C.j)(b)}}]);

//# sourceMappingURL=33.4accb920.chunk.js.map