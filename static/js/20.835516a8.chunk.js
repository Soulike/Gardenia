(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[20],{642:function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,s=arguments.length-1;s>=-1&&!a;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),s=n(r.split("/")),i=Math.min(a.length,s.length),o=i,c=0;c<i;c++)if(a[c]!==s[c]){o=c;break}var u=[];for(c=o;c<a.length;c++)u.push("..");return(u=u.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!a){n=s;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!==typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,s=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===n&&(a=!1,n=i+1),46===o?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!a){r=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(55))},659:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(r);if(!t)return!1;var s=t[1];if(!s)return!1;if(n.test(s)||a.test(s))return!0;return!1};var r=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,a=/^[^\s\.]+\.\S{2,}$/},660:function(e,t,r){e.exports={CommitInfoBar:"Style_CommitInfoBar__1-ElH",left:"Style_left__1syWH",right:"Style_right__3RBYJ",avatar:"Style_avatar__290nj",name:"Style_name__3xcxA"}},666:function(e,t,r){"use strict";r(209);var n=r(94),a=r(0),s=r.n(a),i=r(660),o=r.n(i),c=r(17),u=r(79),l=r(32),m=r(67);var p=Object(u.f)(s.a.memo((function(e){var t=e.lastCommit,r=t.committerName,a=t.commitHash,i=t.message,u=t.timestamp,p=e.match.params,f=p.username,h=p.repository;return s.a.createElement("div",{className:o.a.CommitInfoBar},s.a.createElement("div",{className:o.a.left},s.a.createElement(c.b,{className:o.a.name,to:l.Function.generatePersonalCenterRoute({username:r})},r),s.a.createElement("div",{className:o.a.message},i)),s.a.createElement("div",{className:o.a.right},s.a.createElement("div",{className:o.a.time},m.b.parseTimestampToDifference(u)),s.a.createElement(n.a,{title:a},s.a.createElement("div",{className:o.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",s.a.createElement(c.b,{to:l.Function.generateRepositoryCommitRoute({username:f,repository:h,commitHash:a})},a.slice(0,7))))))})));r.d(t,"a",(function(){return p}))},667:function(e,t,r){"use strict";var n=r(1),a=r.n(n),s=r(4),i=r(10),o=r(11),c=r(25),u=r(24),l=r(26),m=r(0),p=r.n(m),f=r(79),h=r(32),v=r(210),d=r(659),b=r.n(d),y=r(27),g=r(642),k=r.n(g),w=r(108),x=r(220),j=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).objectURLs=[],r.loadMainBranchName=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,s,i,o,c,u,l,m,p,f,h,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.match.params,s=n.username,i=n.repository,e.next=3,v.a.branches({username:s,name:i});case 3:if(null===(o=e.sent)){e.next=33;break}c=o.branches,u=!0,l=!1,m=void 0,e.prev=9,p=c[Symbol.iterator]();case 11:if(u=(f=p.next()).done){e.next=19;break}if(h=f.value,d=h.name,!h.isDefault){e.next=16;break}return r.setState({mainBranchName:d},(function(){return t()})),e.abrupt("break",19);case 16:u=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),l=!0,m=e.t0;case 25:e.prev=25,e.prev=26,u||null==p.return||p.return();case 28:if(e.prev=28,!l){e.next=31;break}throw m;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[9,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.processMarkdownLinks=Object(s.a)(a.a.mark((function e(){var t,n,i,o,c,u,l,m,p,f,h,v,d,b,y,g,k,x,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.props.markdown,n=w.b.makeHtml(t),i=document.implementation.createHTMLDocument(),(o=i.createElement("div")).innerHTML=n,c=o.getElementsByTagName("a"),u=o.getElementsByTagName("img"),l=[],m=!0,p=!1,f=void 0,e.prev=11,h=function(){var e=d.value,t=e.getAttribute("href");null!==t&&l.push(Object(s.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.next=3,r.getCompleteLink(t);case 3:n.t1=n.sent,n.t0.setAttribute.call(n.t0,"href",n.t1);case 5:case"end":return n.stop()}}),n)})))())},v=c[Symbol.iterator]();!(m=(d=v.next()).done);m=!0)h();e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),p=!0,f=e.t0;case 20:e.prev=20,e.prev=21,m||null==v.return||v.return();case 23:if(e.prev=23,!p){e.next=26;break}throw f;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(b=!0,y=!1,g=void 0,e.prev=31,k=function(){var e=j.value,t=e.getAttribute("src");null!==t&&l.push(Object(s.a)(a.a.mark((function n(){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getImageURL(t);case 2:s=n.sent,r.objectURLs.push(s),e.setAttribute("src",s);case 5:case"end":return n.stop()}}),n)})))())},x=u[Symbol.iterator]();!(b=(j=x.next()).done);b=!0)k();e.next=40;break;case 36:e.prev=36,e.t1=e.catch(31),y=!0,g=e.t1;case 40:e.prev=40,e.prev=41,b||null==x.return||x.return();case 43:if(e.prev=43,!y){e.next=46;break}throw g;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.next=50,Promise.all(l);case 50:r.setState({html:o.innerHTML});case 51:case"end":return e.stop()}}),e,null,[[11,16,20,28],[21,,23,27],[31,36,40,48],[41,,43,47]])}))),r.getCompleteLink=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,s,i,o,c,u,l,m,p,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()(t)&&!k.a.isAbsolute(t)&&"#"!==t.at(0)&&"?"!==t.at(0)){e.next=4;break}return e.abrupt("return",t);case 4:return n=r.props.match.params,s=n.username,i=n.repository,o=n.objectType,c=n.branch,u=n.path,l=r.state.mainBranchName,m=u?o===y.a.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,v.a.fileInfo({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=19;break}if(f=p.exists,d=p.type,f&&d!==y.a.BLOB){e.next=16;break}return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.BLOB}));case 16:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.TREE}));case 17:e.next=20;break;case 19:return e.abrupt("return",h.Function.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.BLOB}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getImageURL=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,s,i,o,c,u,l,m,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()(t)&&!k.a.isAbsolute(t)){e.next=4;break}return e.abrupt("return",t);case 4:return n=r.props.match.params,s=n.username,i=n.repository,o=n.objectType,c=n.branch,u=n.path,l=r.state.mainBranchName,m=u?o===y.a.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,v.a.rawFile({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=14;break}return e.abrupt("return",URL.createObjectURL(p));case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.processCodes=function(){var e=r.state.html;r.setState({loading:!0});var t=document.createElement("div");t.innerHTML=e,t.querySelectorAll("pre code").forEach((function(e){return w.a.highlightBlock(e)})),r.setState({html:t.innerHTML,loading:!1})},r.state={mainBranchName:"",loading:!1,html:""},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.branch,this.setState({loading:!0}),"string"===typeof t){e.next=5;break}return e.next=5,this.loadMainBranchName();case 5:return e.next=7,this.processMarkdownLinks();case 7:this.processCodes(),this.setState({loading:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.markdown,i=t.markdown,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.objectURLs.forEach((function(e){return URL.revokeObjectURL(e)}))}},{key:"render",value:function(){var e=this.state,t=e.html,r=e.loading;return p.a.createElement(x.a,{html:t,processing:r})}}]),t}(m.PureComponent),_=Object(f.f)(j);r.d(t,"a",(function(){return _}))},763:function(e,t,r){e.exports={FileReader:"Style_FileReader__1hW4w",commitInfoBar:"Style_commitInfoBar__2xvVY",contentWrapper:"Style_contentWrapper__3jWFR",fileInfoBar:"Style_fileInfoBar__2iqjb",fileName:"Style_fileName__3GaRF",readerWrapper:"Style_readerWrapper__13RMn",content:"Style_content__3_Ute"}},764:function(e,t,r){e.exports={CodeReader:"Style_CodeReader__yNPpi",line:"Style_line__2xQ8V",lineNumber:"Style_lineNumber__nX9YT",code:"Style_code__19ilK"}},765:function(e,t,r){e.exports={MarkdownReader:"Style_MarkdownReader__2Af6z"}},778:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(4),i=r(10),o=r(11),c=r(25),u=r(24),l=r(26),m=r(0),p=r.n(m),f=(r(117),r(59)),h=(r(87),r(30)),v=r(763),d=r.n(v),b=r(666),y=r(32),g=r(17),k=r(79),w=(r(316),r(136));var x=p.a.memo((function(){return p.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})}));var j=p.a.memo((function(){return p.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u6587\u4ef6\u8fc7\u5927\uff0c\u4e0d\u80fd\u76f4\u63a5\u67e5\u770b",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})})),_=r(642),O=r(764),E=r.n(O),C=r(67);var N=p.a.memo((function(e){var t=e.code,r=C.a.getHighlightedCodeLines(t);return p.a.createElement("table",{className:"".concat(E.a.CodeReader," hljs")},p.a.createElement("tbody",null,r.map((function(e,t){return p.a.createElement("tr",{key:t,className:E.a.line},p.a.createElement("td",null,p.a.createElement("div",{className:E.a.lineNumber},t+1)),p.a.createElement("td",null,p.a.createElement("pre",{className:E.a.code},p.a.createElement("code",{dangerouslySetInnerHTML:{__html:e}}))))}))))})),R=r(765),B=r.n(R),S=r(667);var L=p.a.memo((function(e){var t=e.markdown;return p.a.createElement("div",{className:B.a.MarkdownReader},p.a.createElement(S.a,{markdown:t}))}));var F=Object(k.f)(p.a.memo((function(e){var t=[".json"],r=[".md",".markdown",".mdwn"],n=e.isBinary,a=e.isOversize,s=e.fileName,i=e.lastCommit,o=e.loading,c=e.onRawFileButtonClick,u=e.fileContent,l=e.match.params,m=l.username,v=l.repository,k=l.branch,w=l.path,O=Object(_.extname)(s).toLowerCase();return p.a.createElement("div",{className:d.a.FileReader},p.a.createElement(f.a,{spinning:o},p.a.createElement("div",{className:d.a.commitInfoBar},p.a.createElement(b.a,{lastCommit:i})),p.a.createElement("div",{className:d.a.contentWrapper},p.a.createElement("div",{className:d.a.fileInfoBar},p.a.createElement("div",{className:d.a.fileName},s),p.a.createElement(h.a.Group,{className:d.a.buttonWrapper},p.a.createElement(h.a,null,p.a.createElement(g.b,{to:y.Function.generateRepositoryCommitsRoute({username:m,repository:v,branch:k,path:w})},"\u5386\u53f2")),p.a.createElement(h.a,{onClick:c},"\u4e0b\u8f7d"))),p.a.createElement("div",{className:d.a.readerWrapper},n?p.a.createElement(x,null):a?p.a.createElement(j,null):t.includes(O)?p.a.createElement(N,{code:u}):r.includes(O)?p.a.createElement(L,{markdown:u}):p.a.createElement(N,{code:u})))))}))),T=r(93),A=r(39),I=y.CONFIG.PAGE_ID_TO_ROUTE,M=y.CONFIG.PAGE_ID,U=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).loadLastCommit=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,s,i,o,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.match.params,s=n.username,i=n.repository,o=n.path,c=n.branch,e.next=3,A.g.lastCommit({username:s},{name:i},c,o);case 3:null!==(u=e.sent)&&r.setState({lastCommit:u},(function(){return t()}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.loadFileInfo=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,s,i,o,c,u,l,m,p,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state.lastCommit.commitHash,s=r.props,i=s.match.params,o=i.username,c=i.repository,u=i.path,l=s.history,e.next=4,A.g.fileInfo({username:o},{name:c},u,n);case 4:null!==(m=e.sent)&&(p=m.exists,f=m.size,h=m.isBinary,p?!h&&f>1048576?r.setState({isOversize:!0,isBinary:h},(function(){return t()})):r.setState({isOversize:!1,isBinary:h},(function(){return t()})):l.replace(I[M.NOT_FOUND]));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.loadFileContent=Object(s.a)(a.a.mark((function e(){var t,n,s,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,n=t.username,s=t.repository,i=t.path,o=r.state.lastCommit.commitHash,e.next=4,A.g.rawFile({username:n},{name:s},i,o);case 4:if(null===(c=e.sent)){e.next=12;break}return e.t0=r,e.next=9,C.c.transformBlobToString(c);case 9:e.t1=e.sent,e.t2={fileContent:e.t1},e.t0.setState.call(e.t0,e.t2);case 12:case"end":return e.stop()}}),e)}))),r.onRawFileButtonClick=Object(s.a)(a.a.mark((function e(){var t,n,s,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,n=t.username,s=t.repository,i=t.path,o=r.state.lastCommit.commitHash,e.next=4,A.g.rawFile({username:n},{name:s},i,o);case 4:null!==(c=e.sent)&&r.startDownload(c);case 6:case"end":return e.stop()}}),e)}))),r.startDownload=function(e){var t=r.props.match.params.path,n=URL.createObjectURL(e);C.c.startDownload(n,Object(_.basename)(t)),URL.revokeObjectURL(n)},r.getFileNameFromPath=function(e){var t=e.split("/");return t[t.length-1]},r.state={isBinary:!1,isOversize:!1,lastCommit:new T.b("","","",0,"",""),loading:!0,fileContent:""},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadLastCommit();case 3:return e.next=5,this.loadFileInfo();case 5:if(t=this.state,r=t.isBinary,n=t.isOversize,r||n){e.next=9;break}return e.next=9,this.loadFileContent();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.location.pathname,i=t.location.pathname,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,r=t.isBinary,n=t.isOversize,a=t.lastCommit,s=t.loading,i=t.fileContent,o=this.getFileNameFromPath(e);return p.a.createElement(F,{fileContent:i,isBinary:r,isOversize:n,lastCommit:a,fileName:o,loading:s,onRawFileButtonClick:this.onRawFileButtonClick})}}]),t}(m.PureComponent),H=Object(k.f)(U);r.d(t,"default",(function(){return H}))}}]);
//# sourceMappingURL=20.835516a8.chunk.js.map