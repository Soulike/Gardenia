(window["webpackJsonpsoulike-git"]=window["webpackJsonpsoulike-git"]||[]).push([[17],{1004:function(e,t,a){e.exports={FileReader:"Style_FileReader__QjXGC",commitInfoBar:"Style_commitInfoBar__1wdIs",committerName:"Style_committerName__26A7i",fileName:"Style_fileName__n8s_W",message:"Style_message__2wYwJ",commitHash:"Style_commitHash__On3Pw",time:"Style_time__CbnVM",contentWrapper:"Style_contentWrapper__1S8gM",fileInfoBar:"Style_fileInfoBar__z7f2-",content:"Style_content__26MOE"}},1207:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),i=a(28),s=a(54),o=a(72),c=a(221),m=a(220),l=a(222),u=a(0),f=a.n(u),p=(a(801),a(803)),d=(a(1002),a(1195)),h=(a(770),a(773)),v=a(1004),b=a.n(v);a(1005);var w=f.a.memo((function(e){var t=e.isBinary,a=e.isOversize,n=e.exists,r=e.fileName,i=e.html,s=e.lastCommit,o=s.committerName,c=s.message,m=s.time,l=s.commitHash,u=e.loading,v=e.onRawFileButtonClick;return f.a.createElement("div",{className:b.a.FileReader},f.a.createElement(p.a,{spinning:u},f.a.createElement("div",{className:b.a.commitInfoBar},f.a.createElement("div",{className:b.a.committerName},o),f.a.createElement("div",{className:b.a.message},c),f.a.createElement("div",{className:b.a.time},m),f.a.createElement("div",{className:b.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",l.slice(0,7))),f.a.createElement("div",{className:b.a.contentWrapper},f.a.createElement("div",{className:b.a.fileInfoBar},f.a.createElement("div",{className:b.a.fileName},r),f.a.createElement("div",{className:b.a.buttonWrapper},f.a.createElement(h.a,{onClick:v},"\u4e0b\u8f7d"))),n?t?f.a.createElement(d.a,{type:"info",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u539f\u6587\u4ef6"}):a?f.a.createElement(d.a,{type:"info",showIcon:!0,message:"\u6587\u4ef6\u592a\u5927",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u539f\u6587\u4ef6"}):f.a.createElement("div",{className:b.a.content,dangerouslySetInnerHTML:{__html:i}}):f.a.createElement(d.a,{type:"error",showIcon:!0,message:"\u6587\u4ef6\u4e0d\u5b58\u5728"}))))})),y=a(84),_=a(223),g=a(137),k=a(1006),x=a.n(k),E=a(888),S=a(848),O=a(810),N=a(171),B=a(775),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onRawFileButtonClick=Object(i.a)(r.a.mark((function e(){var t,n,i,s,o,c,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,i=t.repository,s=t.path,o=a.state.lastCommit.commitHash,e.next=4,g.d.rawFile(n,i,s,o);case 4:c=e.sent,m=URL.createObjectURL(c),B.b.startDownload(m,Object(E.basename)(s)),URL.revokeObjectURL(m);case 8:case"end":return e.stop()}}),e)}))),a.state={exists:!0,isBinary:!1,isOversize:!1,lastCommit:new _.a("","","","",""),loading:!0,rawContent:""},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,i,s,o,c,m,l,u,f,p,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,a=t.username,n=t.repository,i=t.path,s=t.branch,this.setState({loading:!0}),e.next=4,g.d.lastCommit(a,n,s,i);case 4:if(o=e.sent,this.setState({loading:!1}),null===o){e.next=38;break}return this.setState({lastCommit:o}),c=o.commitHash,this.setState({loading:!0}),e.next=12,g.d.fileInfo(a,n,i,c);case 12:if(m=e.sent,this.setState({loading:!1}),null===m){e.next=38;break}if(l=m.exists,u=m.size,f=m.type,p=m.isBinary,this.setState({exists:l}),!l){e.next=38;break}if(f!==O.a.TREE){e.next=21;break}return N.Function.generateRepositoryRoute({username:a,repository:n,objectType:O.a.TREE,branch:s,path:i}),e.abrupt("return");case 21:if(this.setState({isBinary:p}),p||!(u>1048576)){e.next=26;break}this.setState({isOversize:!0}),e.next=38;break;case 26:return this.setState({loading:!0}),e.next=29,g.d.rawFile(a,n,i,c);case 29:if(d=e.sent,this.setState({loading:!1}),null===d){e.next=38;break}return e.t0=this,e.next=35,B.b.transformBlobToString(d);case 35:e.t1=e.sent,e.t2={rawContent:e.t1},e.t0.setState.call(e.t0,e.t2);case 38:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.props.location.pathname,s=t.location.pathname,i===s){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,a=t.isBinary,n=t.exists,r=t.isOversize,i=t.rawContent,s=t.lastCommit,o=t.loading,c=e.split("/"),m=c[c.length-1],l="";if(n&&!r){var u=Object(E.extname)(m);if(".md"===u||".markdown"===u)l=S.a.makeHtml(i);else{var p=document.createElement("pre"),d=document.createElement("div");d.append(p),p.innerText=i,a||(i.length<=51200?(x.a.highlightBlock(p),l=d.innerHTML):l=d.innerHTML)}}return f.a.createElement(w,{html:l,exists:n,isBinary:a,isOversize:r,lastCommit:s,fileName:m,loading:o,onRawFileButtonClick:this.onRawFileButtonClick})}}]),t}(u.PureComponent),j=Object(y.f)(C);a.d(t,"default",(function(){return j}))},775:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"sha256",(function(){return o}));var r={};a.r(r),a.d(r,"transformBlobToString",(function(){return u})),a.d(r,"startDownload",(function(){return p}));var i=a(791),s=a.n(i);function o(e){var t=s.a.createHash("sha256");return t.update(e),t.digest("hex")}var c=a(14),m=a.n(c),l=a(28);function u(e){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=new FileReader;n.readAsText(t),n.onloadend=function(){e(n.result)},n.onerror=function(e){a(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){var a=document.createElement("a");a.href=e,a.download=t,a.click()}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}))},793:function(e,t){},794:function(e,t){},797:function(e,t){},798:function(e,t){},848:function(e,t,a){"use strict";var n=a(889),r=new(a.n(n).a.Converter)({tables:!0,strikethrough:!0,tasklists:!0,emoji:!0});a.d(t,"a",(function(){return r}))}}]);
//# sourceMappingURL=17.88b200aa.chunk.js.map