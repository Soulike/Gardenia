(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{1009:function(e,t,n){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1010:function(e,t,n){},1293:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return X}));var a,r=n(2),s=n.n(r),c=n(6),o=n(60),i=n(0),u=n.n(i),l=n(1009),m=n.n(l),b=n(325),d=n(837),j=n(899),f=n(23),p=n(56);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(a||(a={}));var O=a,h=n(15),x=n(16),S=n(39),v=n(38),y=n(1010),g=n.n(y),k=n(838),N=n(109),E=n(173),_=n(72),A=n(849),R=n(1);function w(e){var t=e.onClick,n=e.forkAmount,a=e.loading;return Object(R.jsxs)(k.b,{className:g.a.ForkButton,size:-1,children:[Object(R.jsxs)(N.a,{onClick:t,disabled:a,loading:a,size:"small",children:[Object(R.jsx)(A.a,{}),"Fork"]}),Object(R.jsx)(E.a,{title:n,children:Object(R.jsx)(N.a,{disabled:a,size:"small",children:_.d.getNumberAbbreviation(n)})})]})}var C=u.a.memo(w),P=n(34),T=n(54),I=n(327),L=function(e){Object(S.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).loadForkAmount=Object(c.a)(s.a.mark((function e(){var t,n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repositoryName,e.next=3,P.j.forkAmount({username:n,name:r});case 3:null!==(c=e.sent)&&(o=c.amount,a.setState({forkAmount:o}));case 5:case"end":return e.stop()}}),e)}))),a.onClick=Object(c.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=a.props.match.params,n=t.username,r=t.repositoryName,e.next=4,P.i.fork({username:n,name:r});case 4:null!==e.sent&&I.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),a.setState({loading:!1});case 7:case"end":return e.stop()}}),e)}))),a.state={forkAmount:0,loading:!1},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadForkAmount();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forkAmount,n=e.loading;return Object(R.jsx)(C,{onClick:this.onClick,forkAmount:t,loading:n})}}]),n}(i.PureComponent),F=Object(T.j)(L),U=n(850),D=n(151),z=n(852),G=n(846),Q=n(866),q=n(102),K=function(e){Object(S.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).setStatePromise=Object(q.promisify)(a.setState),a.loadHasStared=Object(c.a)(s.a.mark((function e(){var t,n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repositoryName,e.next=3,P.k.isStaredRepository({username:n,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.isStared,e.next=8,a.setStatePromise({hasStared:o});case 8:case"end":return e.stop()}}),e)}))),a.loadStarAmount=Object(c.a)(s.a.mark((function e(){var t,n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repositoryName,e.next=3,P.k.getRepositoryStarAmount({username:n,name:r});case 3:if(null===(c=e.sent)){e.next=8;break}return o=c.amount,e.next=8,a.setStatePromise({starAmount:o});case 8:case"end":return e.stop()}}),e)}))),a.onClick=Object(c.a)(s.a.mark((function e(){var t,n,r,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.hasStared,r=t.starAmount,c=a.props.match.params,o=c.username,i=c.repositoryName,e.next=4,a.setStatePromise({loading:!0});case 4:if(!n){e.next=13;break}return e.next=7,P.k.remove({username:o,name:i});case 7:if(null===e.sent){e.next=11;break}return e.next=11,a.setStatePromise({hasStared:!1,starAmount:r-1});case 11:e.next=19;break;case 13:return e.next=15,P.k.add({username:o,name:i});case 15:if(null===e.sent){e.next=19;break}return e.next=19,a.setStatePromise({hasStared:!0,starAmount:r+1});case 19:return e.next=21,a.setStatePromise({loading:!1});case 21:case"end":return e.stop()}}),e)}))),a.state={hasStared:!1,starAmount:0,loading:!1},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadHasStared(),this.loadStarAmount()]);case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(s.a.mark((function e(t,n,a){var r,c,o,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match.params,c=r.username,o=r.repositoryName,i=t.match.params,u=i.username,l=i.repositoryName,c===u&&o===l){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasStared,n=e.loading,a=e.starAmount;return Object(R.jsx)(Q.a,{hasStared:t,loading:n,starAmount:a,onClick:this.onClick})}}]),n}(i.PureComponent),M=Object(T.j)(K),B=n(46);var W=u.a.memo(Object(B.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))((function(e){var t=e.repository,n=t.username,a=t.name,r=t.isPublic,s=e.forkFrom,c=e.loading,o=e.onTabChange,i=e.tabActiveKey,u=e.showSettings,l=e.children,h=e.openPullRequestAmount,x=e.openIssueAmount,S=e.isLoggedIn;return c?null:Object(R.jsxs)("div",{className:m.a.Repository,children:[Object(R.jsxs)("div",{className:m.a.header,children:[Object(R.jsxs)("div",{className:m.a.basicInfo,children:[Object(R.jsxs)("div",{className:m.a.tagAndRepository,children:[Object(R.jsx)("div",{className:m.a.tag,children:Object(R.jsx)(j.a,{isPublic:r})}),Object(R.jsxs)("div",{className:m.a.usernameAndName,children:[Object(R.jsx)(f.b,{to:p.Function.generatePersonalCenterRoute({username:n}),children:n})," / ",Object(R.jsx)(f.b,{to:p.Function.generateRepositoryCodeRoute({username:n,repositoryName:a}),children:Object(R.jsx)("b",{children:a})})]})]}),null===s?null:Object(R.jsxs)("div",{className:m.a.forkFrom,children:[Object(R.jsx)("div",{className:m.a.text,children:"fork \u81ea"}),Object(R.jsx)(f.b,{to:p.Function.generatePersonalCenterRoute({username:s.username}),children:s.username})," / ",Object(R.jsx)(f.b,{to:p.Function.generateRepositoryCodeRoute({username:s.username,repositoryName:s.name}),children:Object(R.jsx)("b",{children:s.name})})]})]}),Object(R.jsx)("div",{className:m.a.buttonArea,children:S?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{className:m.a.buttonWrapper,children:Object(R.jsx)(M,{})}),Object(R.jsx)("div",{className:m.a.buttonWrapper,children:Object(R.jsx)(F,{})})]}):null})]}),Object(R.jsxs)(b.a,{defaultActiveKey:O.CODE,type:"card",className:m.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:o,activeKey:i,children:[Object(R.jsx)(b.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(U.a,{}),"\u4ee3\u7801"]}),children:Object(R.jsx)("div",{className:m.a.tabContent,children:l})},O.CODE),Object(R.jsx)(b.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(D.a,{}),"Issues ",Object(R.jsx)(d.a,{className:m.a.tag,children:x})]}),children:Object(R.jsx)("div",{className:m.a.tabContent,children:l})},O.ISSUES),Object(R.jsx)(b.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(z.a,{}),"Pull Requests ",Object(R.jsx)(d.a,{className:m.a.tag,children:h})]}),children:Object(R.jsx)("div",{className:m.a.tabContent,children:l})},O.PULL_REQUESTS),u?Object(R.jsx)(b.a.TabPane,{tab:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(G.a,{}),"\u8bbe\u7f6e"]}),children:Object(R.jsx)("div",{className:m.a.tabContent,children:l})},O.SETTINGS):null]})]})}))),H=n(134),J=n(3),Y=n(29);function V(e){var t=Object(i.useState)(new H.i("","","",!0)),n=Object(o.a)(t,2),a=n[0],r=n[1],u=Object(i.useState)(!1),l=Object(o.a)(u,2),m=l[0],b=l[1],d=Object(i.useState)(O.CODE),j=Object(o.a)(d,2),f=j[0],h=j[1],x=Object(i.useState)(null),S=Object(o.a)(x,2),v=S[0],y=S[1],g=Object(i.useState)(0),k=Object(o.a)(g,2),N=k[0],E=k[1],_=Object(i.useState)(0),A=Object(o.a)(_,2),w=A[0],C=A[1],I=Object(i.useState)(!1),L=Object(o.a)(I,2),F=L[0],U=L[1],D=Object(T.f)(),z=Object(T.h)(),G=z.objectType,Q=z.commitHash,q=z.username,K=z.repositoryName,M=Object(T.i)().path,V=Object(B.d)((function(e){return e.Root})).isLoggedIn;Object(i.useEffect)((function(){void 0!==G&&void 0===Q&&D.replace(J.d[J.b.NOT_FOUND])}),[G,Q,D]),Object(i.useEffect)((function(){document.title="".concat(q,"/").concat(K," - ").concat(J.a)}),[q,K]),Object(i.useLayoutEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.i.shouldShowOptions({username:q,name:K});case 2:null!==(t=e.sent)&&(n=t.showOptions,U(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b(!0),e().finally((function(){return b(!1)}))}),[q,K,V]),Object(i.useLayoutEffect)((function(){var e=J.b.REPOSITORY,t=e.REPOSITORY,n=e.CODE,a=e.ISSUES,r=e.ISSUE,s=e.CREATE_ISSUE,c=e.PULL_REQUESTS,o=e.PULL_REQUEST,i=e.SETTINGS,u=e.CONFLICT;switch(M){case J.d[n]:case J.d[t]:h(O.CODE);break;case J.d[s]:case J.d[r]:case J.d[a]:h(O.ISSUES);break;case J.d[o]:case J.d[c]:case J.d[u]:h(O.PULL_REQUESTS);break;case J.d[i.SETTINGS]:h(O.SETTINGS)}}),[M]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.repository({username:q},{name:K});case 2:if(null===(t=e.sent)){e.next=7;break}r(t),e.next=8;break;case 7:return e.abrupt("return",D.replace(J.d[J.b.NOT_FOUND]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b(!0),e().finally((function(){return b(!1)}))}),[q,K,D]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.j.forkFrom({username:q,name:K});case 2:null!==(t=e.sent)&&(n=t.repository,y(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b(!0),e().finally((function(){return b(!1)}))}),[q,K]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.h.getPullRequestAmount({username:q,name:K},Y.c.OPEN);case 2:null!==(t=e.sent)&&(n=t.amount,E(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b(!0),e().finally((function(){return b(!1)}))}),[q,K]),Object(i.useEffect)((function(){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.e.getAmountByRepository({username:q,name:K},Y.a.OPEN);case 2:null!==(t=e.sent)&&(n=t.amount,C(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();b(!0),e().finally((function(){return b(!1)}))}),[q,K]);var X=e.children;return Object(R.jsx)(W,{showSettings:F,repository:a,loading:m,onTabChange:function(e){switch(e){case O.CODE:return D.push(p.Function.generateRepositoryCodeRoute({username:q,repositoryName:K}));case O.ISSUES:return D.push(p.Function.generateRepositoryIssuesRoute({username:q,repositoryName:K}));case O.PULL_REQUESTS:return D.push(p.Function.generateRepositoryPullRequestsRoute({username:q,repositoryName:K}));case O.SETTINGS:return D.push(p.Function.generateRepositorySettingsRoute({username:q,repositoryName:K}));default:return}},tabActiveKey:f,forkFrom:v,openPullRequestAmount:N,openIssueAmount:w,children:X})}var X=u.a.memo(V)},860:function(e,t,n){"use strict";var a=n(19),r=n(213),s=n(0),c=n.n(s),o=n(837),i=n(863),u=n.n(i),l=n(1);function m(e){var t=e.isPublic,n=Object(r.a)(e,["isPublic"]);return t?Object(l.jsx)(o.a,Object(a.a)(Object(a.a)({className:u.a.AccessibilityTag,color:"blue"},n),{},{children:"\u516c\u5f00"})):Object(l.jsx)(o.a,Object(a.a)(Object(a.a)({className:u.a.AccessibilityTag,color:"gold"},n),{},{children:"\u79c1\u4eba"}))}t.a=c.a.memo(m)},863:function(e,t,n){e.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},866:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(2),r=n.n(a),s=n(6),c=n(0),o=n.n(c),i=n(838),u=n(109),l=n(173),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},b=n(13),d=function(e,t){return c.createElement(b.a,Object.assign({},e,{ref:t,icon:m}))};d.displayName="StarFilled";var j=c.forwardRef(d),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},p=function(e,t){return c.createElement(b.a,Object.assign({},e,{ref:t,icon:f}))};p.displayName="StarOutlined";var O=c.forwardRef(p),h=n(72),x=n(1);function S(e){var t=e.hasStared,n=e.starAmount,a=e.loading,c=e.onClick;return Object(x.jsxs)(i.b,{size:-1,children:[Object(x.jsx)(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"function"!==typeof c){e.next=4;break}return e.next=4,c(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loading:a,disabled:a,children:t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(j,{})," Unstar"]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O,{})," Star"]})}),Object(x.jsx)(l.a,{title:n,children:Object(x.jsx)(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preventDefault());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:h.d.getNumberAbbreviation(n)})})]})}var v=o.a.memo(S)},899:function(e,t,n){"use strict";var a=n(860);n.d(t,"a",(function(){return a.a}))}}]);
//# sourceMappingURL=26.7353ecbd.chunk.js.map