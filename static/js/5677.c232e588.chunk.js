(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[5677],{83538:function(I,P,i){"use strict";i.d(P,{Z:function(){return l}});var a=i(89526),C={CommitInfoBar:"Style_CommitInfoBar__pCbNv",left:"Style_left__A3Sb6",right:"Style_right__HAMLz",message:"Style_message__YDsy6"},u=i(565),e=i(65092),t=i(18440),s=i(34267),r=i(14006),o=i(55291);function n(c){const{lastCommit:{committerName:F,commitHash:A,message:d,timestamp:H,committerEmail:f},match:{params:{username:L,repositoryName:S}}}=c;return a.createElement("div",{className:C.CommitInfoBar},a.createElement("div",{className:C.left},a.createElement(o.Z,{committerEmail:f,committerName:F}),a.createElement("div",{className:C.message},d)),a.createElement("div",{className:C.right},a.createElement("div",{className:C.time},r.Ej.parseTimestampToDifference(H)),a.createElement(s.Z,{title:A},a.createElement("div",{className:C.commitHash},"\u6700\u540E\u63D0\u4EA4\uFF1A",a.createElement(u.rU,{to:t.Function.generateRepositoryCommitRoute({username:L,repositoryName:S,commitHash:A})},A.slice(0,7))))))}var l=(0,e.EN)(a.memo(n))},95677:function(I,P,i){"use strict";i.r(P),i.d(P,{default:function(){return re}});var a=i(89526),C={FileList:"Style_FileList__Pscg4",lastCommitInfoBar:"Style_lastCommitInfoBar__movyy",readmeWrapper:"Style_readmeWrapper__HaVmF"},u=i(39207),e=i(37109),t=i(76320),s=i(565),r=i(65092),o={Item:"Style_Item__bynUQ",icon:"Style_icon__vDJZh",fileName:"Style_fileName__n3FcM",message:"Style_message__Mzp+P",time:"Style_time__MwpBl"},n=i(18440),l=i(14006),c=i(57132),F=i(1413),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},d=A,H=i(36593),f=function(v,m){return a.createElement(H.Z,(0,F.Z)((0,F.Z)({},v),{},{ref:m,icon:d}))};f.displayName="FolderOutlined";var L=a.forwardRef(f),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},b=S,R=function(v,m){return a.createElement(H.Z,(0,F.Z)((0,F.Z)({},v),{},{ref:m,icon:b}))};R.displayName="ContainerOutlined";var M=a.forwardRef(R);function E(O){const{masterBranchName:v,fileInfo:{type:m,path:y,commit:{message:N,timestamp:g,commitHash:B}},match:{params:{username:p,repositoryName:h,commitHash:D}}}=O,U=T(y);return a.createElement(u.ZP.Item,{className:o.Item},m===t.LP.BLOB?a.createElement(c.Z,{className:o.icon}):m===t.LP.TREE?a.createElement(L,{className:o.icon}):a.createElement(M,{className:o.icon}),a.createElement("div",{className:o.fileName},m===t.LP.COMMIT?U:a.createElement(s.rU,{to:n.Function.generateRepositoryCodeRoute({username:p,repositoryName:h,objectType:m,commitHash:D||v,path:y})},U)),a.createElement(s.rU,{className:o.message,to:n.Function.generateRepositoryCommitRoute({username:p,repositoryName:h,commitHash:B})},N),a.createElement("div",{className:o.time},l.Ej.parseTimestampToDifference(g)))}function T(O){const v=O.split("/");return v[v.length-1]}var j=(0,r.EN)(a.memo(E)),Z={Readme:"Style_Readme__TrBOn",titleWrapper:"Style_titleWrapper__i7wGx",title:"Style_title__V3Xe8",contentWrapper:"Style_contentWrapper__cOZYp"},J=i(5892),G=i(55327);function Y(O){const{readme:v,exists:m,loading:y}=O;return m?a.createElement("div",{className:Z.Readme},a.createElement(J.Z,{spinning:y},a.createElement("div",{className:Z.titleWrapper},a.createElement(c.Z,null),a.createElement("div",{className:Z.title},"README.md")),a.createElement("div",{className:Z.contentWrapper},a.createElement(G.Z,{markdown:v})))):null}var Q=a.memo(Y),V=i(19237),W=i(89368),x=(O,v,m)=>new Promise((y,N)=>{var g=h=>{try{p(m.next(h))}catch(D){N(D)}},B=h=>{try{p(m.throw(h))}catch(D){N(D)}},p=h=>h.done?y(h.value):Promise.resolve(h.value).then(g,B);p((m=m.apply(O,v)).next())});class X extends a.PureComponent{constructor(v){super(v);this.setStatePromise=m=>new Promise(y=>{this.setState(m,()=>{y()})}),this.loadRawReadme=()=>x(this,null,function*(){yield this.setStatePromise({exists:!1});const m=["README.md","readme.md","readMe.md","ReadMe.md","README.MD","readme.MD","readMe.MD","ReadMe.MD"],{match:{params:{username:y,repositoryName:N,path:g}},commitHash:B}=this.props;for(const p of m){const h=yield V.C.fileInfo({username:y},{name:N},(0,W.join)(g||"",p),B);if(h!==null&&h.objectType===t.LP.BLOB){const D=yield V.C.rawFile({username:y},{name:N},(0,W.join)(g||"",p),B);D!==null&&(yield this.setStatePromise({readme:yield l.$B.transformBlobToString(D),exists:!0}));break}}}),this.state={exists:!1,readme:"",loading:!1}}componentDidMount(){return x(this,null,function*(){const{commitHash:v}=this.props;v&&(yield this.setStatePromise({loading:!0}),yield this.loadRawReadme(),yield this.setStatePromise({loading:!1}))})}componentDidUpdate(v,m,y){return x(this,null,function*(){const{location:{pathname:N},commitHash:g}=this.props,{location:{pathname:B},commitHash:p}=v;(N!==B||g!==p)&&(yield this.componentDidMount())})}render(){const{readme:v,exists:m,loading:y}=this.state;return a.createElement(Q,{exists:m,readme:v,loading:y})}}var K=(0,r.EN)(X),k=i(83538);const q=a.lazy(()=>i.e(5298).then(i.bind(i,55298)));function _(O){const{fileList:v,lastCommit:m,loading:y,showPreviousFolderItem:N,masterBranchName:g}=O,{commitHash:B}=m;return a.createElement(a.Fragment,null,a.createElement("div",{className:C.FileList},a.createElement("div",{className:C.lastCommitInfoBar},a.createElement(k.Z,{lastCommit:m})),a.createElement(u.ZP,{locale:{emptyText:a.createElement(e.Z,{description:"\u6CA1\u6709\u6587\u4EF6"})},loading:y,className:C.fileList},N?a.createElement(q,null):null,v.map(p=>a.createElement(j,{masterBranchName:g,fileInfo:p,key:p.path})))),a.createElement("div",{className:C.readmeWrapper},a.createElement(K,{commitHash:B})))}var ee=a.memo(_),z=i(62371),te=i(60269),$=i(36393),w=(O,v,m)=>new Promise((y,N)=>{var g=h=>{try{p(m.next(h))}catch(D){N(D)}},B=h=>{try{p(m.throw(h))}catch(D){N(D)}},p=h=>h.done?y(h.value):Promise.resolve(h.value).then(g,B);p((m=m.apply(O,v)).next())});class ne extends a.Component{constructor(v){super(v);this.loadMasterBranchName=()=>w(this,null,function*(){return new Promise(m=>w(this,null,function*(){const{match:{params:{username:y,repositoryName:N}}}=this.props,g=yield z.CB.branches({username:y,name:N});if(g!==null){const{branches:B}=g;let p="";for(const{name:h,isDefault:D}of B)if(D){p=h;break}this.setState({masterBranchName:p},()=>m())}}))}),this.loadLastCommit=()=>w(this,null,function*(){return new Promise(m=>w(this,null,function*(){const{match:{params:{username:y,repositoryName:N,commitHash:g,path:B}}}=this.props,{masterBranchName:p}=this.state,h=yield z.CB.lastBranchCommit({username:y},{name:N},g||p,B);h!==null?this.setState({lastCommit:h},()=>m()):m()}))}),this.loadDirectory=()=>w(this,null,function*(){const{match:{params:{username:m,repositoryName:y,path:N,commitHash:g}},history:B}=this.props,{masterBranchName:p}=this.state,h=yield z.CB.directory({username:m},{name:y},g||p,N===void 0?"":N+"/");h!==null?yield this.setStatePromise({fileList:[...h]}):B.replace($.yt[$.DV.NOT_FOUND])}),this.setStatePromise=m=>new Promise(y=>{this.setState(m,()=>{y()})}),this.state={fileList:[],lastCommit:new te.HL("","","",0,"",""),loading:!0,masterBranchName:""}}componentDidMount(){return w(this,null,function*(){this.setState({loading:!0}),yield this.loadMasterBranchName(),yield this.loadLastCommit(),yield this.loadDirectory(),this.setState({loading:!1})})}componentDidUpdate(v,m,y){return w(this,null,function*(){const{match:{params:{username:N,repositoryName:g,commitHash:B,path:p}}}=v,{match:{params:{username:h,repositoryName:D,commitHash:U,path:ae}}}=this.props;N!==h||g!==D?yield this.componentDidMount():B!==U?(this.setState({loading:!0}),yield Promise.all([this.loadDirectory(),this.loadLastCommit()]),this.setState({loading:!1})):p!==ae&&(this.setState({loading:!0}),yield this.loadDirectory(),this.setState({loading:!1}))})}render(){const{fileList:v,lastCommit:m,loading:y,masterBranchName:N}=this.state,{match:{params:{path:g}}}=this.props;return a.createElement(ee,{fileList:v,masterBranchName:N,lastCommit:m,loading:y,showPreviousFolderItem:g!==void 0&&g!=="."})}}var re=(0,r.EN)(ne)},55327:function(I,P,i){"use strict";i.d(P,{Z:function(){return A}});var a=i(89526),C=i(65092),u=i(18440),e=i(19237),t=i(84143),s=i.n(t),r=i(76320),o=i(89368),n=i.n(o),l=i(47365),c=(d,H,f)=>new Promise((L,S)=>{var b=E=>{try{M(f.next(E))}catch(T){S(T)}},R=E=>{try{M(f.throw(E))}catch(T){S(T)}},M=E=>E.done?L(E.value):Promise.resolve(E.value).then(b,R);M((f=f.apply(d,H)).next())});class F extends a.PureComponent{constructor(H){super(H);this.objectURLs=[],this.loadMainBranchName=()=>c(this,null,function*(){return new Promise(f=>c(this,null,function*(){const{match:{params:{username:L,repositoryName:S}}}=this.props,b=yield e.C.branches({username:L,name:S});if(b!==null){const{branches:R}=b;for(const{name:M,isDefault:E}of R)if(E){this.setState({mainBranchName:M},()=>f());break}}}))}),this.processHTML=f=>c(this,null,function*(){const S=document.implementation.createHTMLDocument().createElement("div");S.innerHTML=f;const b=S.getElementsByTagName("a"),R=S.getElementsByTagName("img"),M=[];for(const E of b){const T=E.getAttribute("href");T!==null&&M.push((()=>c(this,null,function*(){E.setAttribute("href",yield this.getCompleteLink(T))}))())}for(const E of R){const T=E.getAttribute("src");T!==null&&M.push((()=>c(this,null,function*(){const j=yield this.getImageURL(T);this.objectURLs.push(j),E.setAttribute("src",j)}))())}return yield Promise.all(M),S.innerHTML}),this.getCompleteLink=f=>c(this,null,function*(){if(f.length===0||s()(f)||n().isAbsolute(f)||f.charAt(0)==="#"||f.charAt(0)==="?")return f;{const{match:{params:{username:L,repositoryName:S,objectType:b,commitHash:R,path:M}}}=this.props,{mainBranchName:E}=this.state,T=M?b===r.LP.BLOB?n().join(n().dirname(M),f):n().join(M,f):n().join("",f),j=yield e.C.fileInfo({username:L},{name:S},T,R||E);if(j!==null){const{objectType:Z}=j;return Z===r.LP.BLOB?u.Function.generateRepositoryCodeRoute({username:L,repositoryName:S,commitHash:R||E,path:T,objectType:r.LP.BLOB}):Z===r.LP.TREE?u.Function.generateRepositoryCodeRoute({username:L,repositoryName:S,commitHash:R||E,path:T,objectType:r.LP.TREE}):u.Function.generateRepositoryCodeRoute({username:L,repositoryName:S,commitHash:R||E,path:T,objectType:r.LP.COMMIT})}else return u.Function.generateRepositoryCodeRoute({username:L,repositoryName:S,commitHash:R||E,path:T,objectType:r.LP.BLOB})}}),this.getImageURL=f=>c(this,null,function*(){if(s()(f)||n().isAbsolute(f))return f;{const{match:{params:{username:L,repositoryName:S,objectType:b,commitHash:R,path:M}}}=this.props,{mainBranchName:E}=this.state,T=M?b===r.LP.BLOB?n().join(n().dirname(M),f):n().join(M,f):n().join("",f),j=yield e.C.rawFile({username:L},{name:S},T,R||E);return j!==null?URL.createObjectURL(j):f}}),this.state={mainBranchName:"",loading:!1}}componentDidMount(){return c(this,null,function*(){const{match:{params:{commitHash:H}}}=this.props;this.setState({loading:!0}),typeof H!="string"&&(yield this.loadMainBranchName()),this.setState({loading:!1})})}componentDidUpdate(H,f,L){return c(this,null,function*(){const{markdown:S}=this.props,{markdown:b}=H;S!==b&&(yield this.componentDidMount())})}componentWillUnmount(){this.objectURLs.forEach(H=>URL.revokeObjectURL(H))}render(){const{loading:H}=this.state,{markdown:f}=this.props;return a.createElement(l.Z,{markdown:f,processHTML:this.processHTML,loading:H})}}var A=(0,C.EN)(F)},57132:function(I,P,i){"use strict";i.d(P,{Z:function(){return r}});var a=i(1413),C=i(89526),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},e=u,t=i(36593),s=function(n,l){return C.createElement(t.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:l,icon:e}))};s.displayName="FileTextOutlined";var r=C.forwardRef(s)},84143:function(I){I.exports=C;var P=/^(?:\w+:)?\/\/(\S+)$/,i=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,a=/^[^\s\.]+\.\S{2,}$/;function C(u){if(typeof u!="string")return!1;var e=u.match(P);if(!e)return!1;var t=e[1];return t?!!(i.test(t)||a.test(t)):!1}},89368:function(I){"use strict";function P(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function i(u,e){for(var t="",s=0,r=-1,o=0,n,l=0;l<=u.length;++l){if(l<u.length)n=u.charCodeAt(l);else{if(n===47)break;n=47}if(n===47){if(!(r===l-1||o===1))if(r!==l-1&&o===2){if(t.length<2||s!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var c=t.lastIndexOf("/");if(c!==t.length-1){c===-1?(t="",s=0):(t=t.slice(0,c),s=t.length-1-t.lastIndexOf("/")),r=l,o=0;continue}}else if(t.length===2||t.length===1){t="",s=0,r=l,o=0;continue}}e&&(t.length>0?t+="/..":t="..",s=2)}else t.length>0?t+="/"+u.slice(r+1,l):t=u.slice(r+1,l),s=l-r-1;r=l,o=0}else n===46&&o!==-1?++o:o=-1}return t}function a(u,e){var t=e.dir||e.root,s=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+s:t+u+s:s}var C={resolve:function(){for(var e="",t=!1,s,r=arguments.length-1;r>=-1&&!t;r--){var o;r>=0?o=arguments[r]:(s===void 0&&(s=process.cwd()),o=s),P(o),o.length!==0&&(e=o+"/"+e,t=o.charCodeAt(0)===47)}return e=i(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(P(e),e.length===0)return".";var t=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return e=i(e,!t),e.length===0&&!t&&(e="."),e.length>0&&s&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return P(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var s=arguments[t];P(s),s.length>0&&(e===void 0?e=s:e+="/"+s)}return e===void 0?".":C.normalize(e)},relative:function(e,t){if(P(e),P(t),e===t||(e=C.resolve(e),t=C.resolve(t),e===t))return"";for(var s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var r=e.length,o=r-s,n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var l=t.length,c=l-n,F=o<c?o:c,A=-1,d=0;d<=F;++d){if(d===F){if(c>F){if(t.charCodeAt(n+d)===47)return t.slice(n+d+1);if(d===0)return t.slice(n+d)}else o>F&&(e.charCodeAt(s+d)===47?A=d:d===0&&(A=0));break}var H=e.charCodeAt(s+d),f=t.charCodeAt(n+d);if(H!==f)break;H===47&&(A=d)}var L="";for(d=s+A+1;d<=r;++d)(d===r||e.charCodeAt(d)===47)&&(L.length===0?L+="..":L+="/..");return L.length>0?L+t.slice(n+A):(n+=A,t.charCodeAt(n)===47&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(P(e),e.length===0)return".";for(var t=e.charCodeAt(0),s=t===47,r=-1,o=!0,n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!o){r=n;break}}else o=!1;return r===-1?s?"/":".":s&&r===1?"//":e.slice(0,r)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');P(e);var s=0,r=-1,o=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var F=e.charCodeAt(n);if(F===47){if(!o){s=n+1;break}}else c===-1&&(o=!1,c=n+1),l>=0&&(F===t.charCodeAt(l)?--l===-1&&(r=n):(l=-1,r=c))}return s===r?r=c:r===-1&&(r=e.length),e.slice(s,r)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!o){s=n+1;break}}else r===-1&&(o=!1,r=n+1);return r===-1?"":e.slice(s,r)}},extname:function(e){P(e);for(var t=-1,s=0,r=-1,o=!0,n=0,l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(c===47){if(!o){s=l+1;break}continue}r===-1&&(o=!1,r=l+1),c===46?t===-1?t=l:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===s+1?"":e.slice(t,r)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return a("/",e)},parse:function(e){P(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var s=e.charCodeAt(0),r=s===47,o;r?(t.root="/",o=1):o=0;for(var n=-1,l=0,c=-1,F=!0,A=e.length-1,d=0;A>=o;--A){if(s=e.charCodeAt(A),s===47){if(!F){l=A+1;break}continue}c===-1&&(F=!1,c=A+1),s===46?n===-1?n=A:d!==1&&(d=1):n!==-1&&(d=-1)}return n===-1||c===-1||d===0||d===1&&n===c-1&&n===l+1?c!==-1&&(l===0&&r?t.base=t.name=e.slice(1,c):t.base=t.name=e.slice(l,c)):(l===0&&r?(t.name=e.slice(1,n),t.base=e.slice(1,c)):(t.name=e.slice(l,n),t.base=e.slice(l,c)),t.ext=e.slice(n,c)),l>0?t.dir=e.slice(0,l-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};C.posix=C,I.exports=C}}]);

//# sourceMappingURL=5677.c232e588.chunk.js.map