(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[34],{1160:function(e,t,a){e.exports={Commit:"Style_Commit__2zoHX",diffWrapper:"Style_diffWrapper__1KC3f",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__3y0ov"}},1161:function(e,t,a){e.exports={CommitInfoCard:"Style_CommitInfoCard__3p5cW",messageWrapper:"Style_messageWrapper__3vDtK",message:"Style_message__eetCx",body:"Style_body__1nKa8",infoWrapper:"Style_infoWrapper__cIV36",info:"Style_info__3rELz",username:"Style_username__268Ed"}},1215:function(e,t,a){"use strict";a.r(t);var n=a(28),r=(a(70),a(7)),o=a(1),i=a.n(o),s=a(5),m=a(12),c=a(14),u=a(37),f=a(36),l=a(38),p=a(0),d=a.n(p),h=(a(166),a(90)),_=(a(130),a(43)),v=a(1160),b=a.n(v),E=a(1161),g=a.n(E),y=a(102),C=a(24),k=a(122),w=a(46),x=a(40);var O=Object(k.f)(d.a.memo((function(e){var t=e.commit,a=t.message,n=t.body,r=t.committerName,o=t.timestamp,i=t.commitHash,s=e.match.params,m=s.username,c=s.repository;return d.a.createElement("div",{className:g.a.CommitInfoCard},d.a.createElement("div",{className:g.a.messageWrapper},d.a.createElement("div",{className:g.a.message},a),n.length?d.a.createElement("pre",{className:g.a.body},n):null),d.a.createElement("div",{className:g.a.infoWrapper},d.a.createElement("div",{className:g.a.info},d.a.createElement(C.b,{to:w.b.generatePersonalCenterRoute({username:r}),className:g.a.username},r),"\u5728 ",y.b.parseTimestampToDifference(o),"\u63d0\u4ea4"),d.a.createElement("div",{className:g.a.hashWrapper},d.a.createElement(C.b,{className:g.a.hash,to:w.b.generateRepositoryCodeRoute({username:m,repository:c,branch:i,objectType:x.a.TREE})},d.a.createElement(_.a,{size:"small"},d.a.createElement("code",null,i))))))}))),S=a(331);var j=d.a.memo((function(e){var t=e.loading,a=e.diff,n=e.commit,r=e.diffAmount,o=e.onLoadMoreButtonClick;return d.a.createElement("div",{className:b.a.Commit},d.a.createElement(h.a,{spinning:t},d.a.createElement("div",{className:b.a.commitInfoCardWrapper},d.a.createElement(O,{commit:n})),d.a.createElement("div",{className:b.a.diffWrapper},d.a.createElement(S.a,{fileDiffs:a,fileDiffAmount:r}),d.a.createElement("div",{className:b.a.loadMoreButtonWrapper},d.a.createElement(_.a,{disabled:t,loading:t,onClick:o,size:"large",type:"primary"},"\u52a0\u8f7d\u66f4\u591a\u6587\u4ef6\u66f4\u6539")))))})),D=a(140),N=a(62),W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(f.a)(t).call(this,e))).init=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){a.setState({diff:[]},(function(){return e()}))})));case 1:case"end":return e.stop()}}),e)}))),a.loadCommit=Object(s.a)(i.a.mark((function e(){var t,n,r,o,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,o=t.commitHash,e.next=3,N.g.commit({username:n,name:r},o);case 3:null!==(s=e.sent)&&(m=s.commit,a.setState({commit:m}));case 5:case"end":return e.stop()}}),e)}))),a.loadMoreCommitDiff=Object(s.a)(i.a.mark((function e(){var o,s,m,c,u,f,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.props.match.params,s=o.username,m=o.repository,c=o.commitHash,u=a.state.diff,e.next=4,N.g.commitDiff({username:s,name:m},c,u.length,t.FILE_DIFF_AMOUNT_PER_PAGE);case 4:null!==(f=e.sent)&&(0===(l=f.diff).length?r.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u88ab\u4fee\u6539\u6587\u4ef6"}):a.setState({diff:[].concat(Object(n.a)(u),Object(n.a)(l))}));case 6:case"end":return e.stop()}}),e)}))),a.loadCommitDiffAmount=Object(s.a)(i.a.mark((function e(){var t,n,r,o,s,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params,n=t.username,r=t.repository,o=t.commitHash,e.next=3,N.g.commitDiffAmount({username:n,name:r},o);case 3:null!==(s=e.sent)&&(m=s.amount,a.setState({diffAmount:m}));case 5:case"end":return e.stop()}}),e)}))),a.onLoadMoreButtonClick=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,a.loadMoreCommitDiff();case 3:a.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),a.state={commit:new D.b("","","a@b.com",0,"",""),diff:[],diffAmount:0,loading:!1},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.setState({loading:!0}),e.next=5,Promise.all([this.loadCommit(),this.loadCommitDiffAmount(),this.loadMoreCommitDiff()]);case 5:this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(i.a.mark((function e(t,a,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.location.pathname,o=t.location.pathname,r===o){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.commit,a=e.diff,n=e.loading,r=e.diffAmount;return d.a.createElement(j,{commit:t,diff:a,loading:n,diffAmount:r,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}}]),t}(p.PureComponent);W.FILE_DIFF_AMOUNT_PER_PAGE=10;var M=Object(k.f)(W);a.d(t,"default",(function(){return M}))}}]);
//# sourceMappingURL=34.7f2da92a.chunk.js.map