(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[22],{1188:function(e,t,a){"use strict";var n=a(225),r=a(0),s=a.n(r),o=a(1156),c=a(1189),i=a.n(c);t.a=s.a.memo((function(e){var t=e.isPublic,a=Object(n.a)(e,["isPublic"]);return t?s.a.createElement(o.a,Object.assign({className:i.a.AccessibilityTag,color:"blue"},a),"\u516c\u5171"):s.a.createElement(o.a,Object.assign({className:i.a.AccessibilityTag,color:"gold"},a),"\u79c1\u4eba")}))},1189:function(e,t,a){e.exports={AccessibilityTag:"Style_AccessibilityTag__4cAHc"}},1196:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(1),r=a.n(n),s=a(3),o=a(0),c=a.n(o),i=a(1143),u=a(115),l=a(189),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},p=a(22),d=function(e,t){return o.createElement(p.a,Object.assign({},e,{ref:t,icon:m}))};d.displayName="StarFilled";var f=o.forwardRef(d),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},h=function(e,t){return o.createElement(p.a,Object.assign({},e,{ref:t,icon:b}))};h.displayName="StarOutlined";var v=o.forwardRef(h),S=a(108);var E=c.a.memo((function(e){var t=e.hasStared,a=e.starAmount,n=e.loading,o=e.onClick;return c.a.createElement(i.a,{size:-1},c.a.createElement(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"function"!==typeof o){e.next=4;break}return e.next=4,o(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),loading:n,disabled:n},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(f,null)," Unstar"):c.a.createElement(c.a.Fragment,null,c.a.createElement(v,null)," Star")),c.a.createElement(l.a,{title:a},c.a.createElement(u.a,{size:"small",onClick:function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preventDefault());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S.d.getNumberAbbreviation(a))))}))},1214:function(e,t,a){"use strict";var n=a(1188);a.d(t,"a",(function(){return n.a}))},1316:function(e,t,a){e.exports={Repository:"Style_Repository__3C5oN",header:"Style_header__2LCJa",tabContent:"Style_tabContent__1JPyK",basicInfo:"Style_basicInfo__1CY_5",tagAndRepository:"Style_tagAndRepository__Vlrba",tag:"Style_tag__2txb4",usernameAndName:"Style_usernameAndName__21Dhj",forkFrom:"Style_forkFrom__gove8",text:"Style_text__3RKOo",buttonArea:"Style_buttonArea__WAwmq",buttonWrapper:"Style_buttonWrapper__3rI5T",tab:"Style_tab__2Ycb5"}},1317:function(e,t,a){},1382:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},s=a(22),o=function(e,t){return n.createElement(s.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName="ExclamationCircleOutlined";t.a=n.forwardRef(o)},1399:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Y}));var n,r=a(1),s=a.n(r),o=a(3),c=a(13),i=a(14),u=a(30),l=a(29),m=a(0),p=a.n(m),d=a(1316),f=a.n(d),b=a(344),h=a(1156),v=a(1214),S=a(26),E=a(37);!function(e){e.CODE="CODE",e.ISSUES="ISSUES",e.PULL_REQUESTS="PULL_REQUESTS",e.SETTINGS="SETTINGS"}(n||(n={}));var y=n,g=a(1317),k=a.n(g),O=a(1143),x=a(115),A=a(189),N=a(108),P=a(1169);var R=p.a.memo((function(e){var t=e.onClick,a=e.forkAmount,n=e.loading;return p.a.createElement(O.a,{className:k.a.ForkButton,size:-1},p.a.createElement(x.a,{onClick:t,disabled:n,loading:n,size:"small"},p.a.createElement(P.a,null),"Fork"),p.a.createElement(A.a,{title:a},p.a.createElement(x.a,{disabled:n,size:"small"},N.d.getNumberAbbreviation(a))))})),_=a(42),w=a(69),C=a(347),T=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).loadForkAmount=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.j.forkAmount({username:a,name:r});case 3:null!==(o=e.sent)&&(c=o.amount,n.setState({forkAmount:c}));case 5:case"end":return e.stop()}}),e)}))),n.onClick=Object(o.a)(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=4,_.i.fork({username:a,name:r});case 4:null!==e.sent&&C.a.success({message:"fork \u6210\u529f",description:"\u53ef\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3\u4ed3\u5e93\u5217\u8868\u67e5\u770b"}),n.setState({loading:!1});case 7:case"end":return e.stop()}}),e)}))),n.state={forkAmount:0,loading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadForkAmount();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.forkAmount,a=e.loading;return p.a.createElement(R,{onClick:this.onClick,forkAmount:t,loading:a})}}]),a}(m.PureComponent),j=Object(w.f)(T),I=a(1171),F=a(1382),L=a(1175),U=a(1164),D=a(1196),K=a(74),z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(K.promisify)(n.setState),n.loadHasStared=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.k.isStaredRepository({username:a,name:r});case 3:if(null===(o=e.sent)){e.next=8;break}return c=o.isStared,e.next=8,n.setStatePromise({hasStared:c});case 8:case"end":return e.stop()}}),e)}))),n.loadStarAmount=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.k.getRepositoryStarAmount({username:a,name:r});case 3:if(null===(o=e.sent)){e.next=8;break}return c=o.amount,e.next=8,n.setStatePromise({starAmount:c});case 8:case"end":return e.stop()}}),e)}))),n.onClick=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.hasStared,r=t.starAmount,o=n.props.match.params,c=o.username,i=o.repositoryName,e.next=4,n.setStatePromise({loading:!0});case 4:if(!a){e.next=13;break}return e.next=7,_.k.remove({username:c,name:i});case 7:if(null===e.sent){e.next=11;break}return e.next=11,n.setStatePromise({hasStared:!1,starAmount:r-1});case 11:e.next=19;break;case 13:return e.next=15,_.k.add({username:c,name:i});case 15:if(null===e.sent){e.next=19;break}return e.next=19,n.setStatePromise({hasStared:!0,starAmount:r+1});case 19:return e.next=21,n.setStatePromise({loading:!1});case 21:case"end":return e.stop()}}),e)}))),n.state={hasStared:!1,starAmount:0,loading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStatePromise({loading:!0});case 2:return e.next=4,Promise.all([this.loadHasStared(),this.loadStarAmount()]);case 4:return e.next=6,this.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(s.a.mark((function e(t,a,n){var r,o,c,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props.match.params,o=r.username,c=r.repositoryName,i=t.match.params,u=i.username,l=i.repositoryName,o===u&&c===l){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasStared,a=e.loading,n=e.starAmount;return p.a.createElement(D.a,{hasStared:t,loading:a,starAmount:n,onClick:this.onClick})}}]),a}(m.PureComponent),q=Object(w.f)(z),G=a(62);var M=p.a.memo(Object(G.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))((function(e){var t=e.repository,a=t.username,n=t.name,r=t.isPublic,s=e.forkFrom,o=e.loading,c=e.onTabChange,i=e.tabActiveKey,u=e.showSettings,l=e.children,m=e.openPullRequestAmount,d=e.openIssueAmount,g=e.isLoggedIn;return o?null:p.a.createElement("div",{className:f.a.Repository},p.a.createElement("div",{className:f.a.header},p.a.createElement("div",{className:f.a.basicInfo},p.a.createElement("div",{className:f.a.tagAndRepository},p.a.createElement("div",{className:f.a.tag},p.a.createElement(v.a,{isPublic:r})),p.a.createElement("div",{className:f.a.usernameAndName},p.a.createElement(S.b,{to:E.Function.generatePersonalCenterRoute({username:a})},a)," / ",p.a.createElement(S.b,{to:E.Function.generateRepositoryCodeRoute({username:a,repositoryName:n})},p.a.createElement("b",null,n)))),null===s?null:p.a.createElement("div",{className:f.a.forkFrom},p.a.createElement("div",{className:f.a.text},"fork \u81ea"),p.a.createElement(S.b,{to:E.Function.generatePersonalCenterRoute({username:s.username})},s.username)," / ",p.a.createElement(S.b,{to:E.Function.generateRepositoryCodeRoute({username:s.username,repositoryName:s.name})},p.a.createElement("b",null,s.name)))),p.a.createElement("div",{className:f.a.buttonArea},g?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:f.a.buttonWrapper},p.a.createElement(q,null)),p.a.createElement("div",{className:f.a.buttonWrapper},p.a.createElement(j,null))):null)),p.a.createElement(b.a,{defaultActiveKey:y.CODE,type:"card",className:f.a.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:c,activeKey:i},p.a.createElement(b.a.TabPane,{tab:p.a.createElement(p.a.Fragment,null,p.a.createElement(I.a,null),"\u4ee3\u7801"),key:y.CODE},p.a.createElement("div",{className:f.a.tabContent},l)),p.a.createElement(b.a.TabPane,{tab:p.a.createElement(p.a.Fragment,null,p.a.createElement(F.a,null),"Issues ",p.a.createElement(h.a,{className:f.a.tag},d)),key:y.ISSUES},p.a.createElement("div",{className:f.a.tabContent},l)),p.a.createElement(b.a.TabPane,{tab:p.a.createElement(p.a.Fragment,null,p.a.createElement(L.a,null),"Pull Requests ",p.a.createElement(h.a,{className:f.a.tag},m)),key:y.PULL_REQUESTS},p.a.createElement("div",{className:f.a.tabContent},l)),u?p.a.createElement(b.a.TabPane,{tab:p.a.createElement(p.a.Fragment,null,p.a.createElement(U.a,null),"\u8bbe\u7f6e"),key:y.SETTINGS},p.a.createElement("div",{className:f.a.tabContent},l)):null))}))),Q=a(154),B=a(224),V=a(35),W=E.CONFIG.PAGE_ID,H=E.CONFIG.PAGE_ID_TO_ROUTE,J=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).checkURLParameter=function(){var e=n.props,t=e.history,a=e.match.params,r=a.objectType,s=a.commitHash;void 0!==r&&void 0===s&&t.replace(H[W.NOT_FOUND])},n.setTitle=function(){var e=n.props.match.params,t=e.username,a=e.repositoryName;document.title="".concat(t,"/").concat(a," - ").concat(B.a.NAME)},n.loadOpenIssueAmount=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.e.getAmountByRepository({username:a,name:r},V.a.OPEN);case 3:null!==(o=e.sent)&&(c=o.amount,n.setState({openIssueAmount:c}));case 5:case"end":return e.stop()}}),e)}))),n.loadOpenPullRequestAmount=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.h.getPullRequestAmount({username:a,name:r},V.c.OPEN);case 3:null!==(o=e.sent)&&(c=o.amount,n.setState({openPullRequestAmount:c}));case 5:case"end":return e.stop()}}),e)}))),n.loadRepository=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.match.params,r=a.username,o=a.repositoryName,c=t.history,e.next=3,_.j.repository({username:r},{name:o});case 3:if(null===(i=e.sent)){e.next=8;break}n.setState({repository:i}),e.next=9;break;case 8:return e.abrupt("return",c.replace(H[W.NOT_FOUND]));case 9:case"end":return e.stop()}}),e)}))),n.loadForkFrom=Object(o.a)(s.a.mark((function e(){var t,a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,_.j.forkFrom({username:a,name:r});case 3:null!==(o=e.sent)&&(c=o.repository,n.setState({forkFrom:c}));case 5:case"end":return e.stop()}}),e)}))),n.loadVisitorProfile=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.g.get();case 2:null!==(t=e.sent)&&n.setState({visitorProfile:t});case 4:case"end":return e.stop()}}),e)}))),n.setTabActiveKey=function(){var e=n.props.match.path,t=W.REPOSITORY,a=t.REPOSITORY,r=t.CODE,s=t.ISSUES,o=t.ISSUE,c=t.CREATE_ISSUE,i=t.PULL_REQUESTS,u=t.PULL_REQUEST,l=t.SETTINGS,m=t.CONFLICT;switch(e){case H[r]:case H[a]:n.setState({tabActiveKey:y.CODE});break;case H[c]:case H[o]:case H[s]:n.setState({tabActiveKey:y.ISSUES});break;case H[u]:case H[i]:case H[m]:n.setState({tabActiveKey:y.PULL_REQUESTS});break;case H[l.SETTINGS]:n.setState({tabActiveKey:y.SETTINGS})}},n.onTabChange=function(e){var t=n.props.history,a=n.state.repository,r=a.username,s=a.name;switch(e){case y.CODE:return t.push(E.Function.generateRepositoryCodeRoute({username:r,repositoryName:s}));case y.ISSUES:return t.push(E.Function.generateRepositoryIssuesRoute({username:r,repositoryName:s}));case y.PULL_REQUESTS:return t.push(E.Function.generateRepositoryPullRequestsRoute({username:r,repositoryName:s}));case y.SETTINGS:return t.push(E.Function.generateRepositorySettingsRoute({username:r,repositoryName:s}));default:return}},n.checkURLParameter(),n.state={repository:new Q.i("","","",!0),loading:!0,tabActiveKey:y.CODE,visitorProfile:null,forkFrom:null,openPullRequestAmount:0,openIssueAmount:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.isLoggedIn,this.setTitle(),this.setTabActiveKey(),this.setState({loading:!0}),e.next=6,Promise.all([this.loadRepository(),this.loadForkFrom(),this.loadOpenPullRequestAmount(),this.loadOpenIssueAmount()]);case 6:if(!t){e.next=9;break}return e.next=9,this.loadVisitorProfile();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(s.a.mark((function e(t,a,n){var r,o,c,i,u,l,m,p,d,f,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,o=r.location.pathname,c=r.isLoggedIn,i=r.match.params,u=i.repositoryName,l=i.username,m=t.location.pathname,p=t.isLoggedIn,d=t.match.params,f=d.repositoryName,b=d.username,u===f&&l===b){e.next=5;break}return e.next=5,this.componentDidMount();case 5:if(o!==m&&this.setTabActiveKey(),!c||p){e.next=9;break}return e.next=9,this.loadVisitorProfile();case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.repository,a=e.loading,n=e.tabActiveKey,r=e.visitorProfile,s=e.forkFrom,o=e.openPullRequestAmount,c=e.openIssueAmount,i=this.props,u=i.children,l=i.isLoggedIn;return p.a.createElement(M,{showSettings:l&&null!==r&&t.username===r.username,repository:t,loading:a,onTabChange:this.onTabChange,tabActiveKey:n,forkFrom:s,openPullRequestAmount:o,openIssueAmount:c},u)}}]),a}(m.PureComponent),Y=Object(G.b)((function(e){return{isLoggedIn:e.Root.isLoggedIn}}))(J)}}]);
//# sourceMappingURL=22.324c17a0.chunk.js.map