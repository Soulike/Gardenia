(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[12],{654:function(e,t,a){e.exports={PageTitle:"Style_PageTitle__3R_vY"}},655:function(e,t,a){"use strict";var o=a(0),s=a.n(o),r=a(654),n=a.n(r);var i=function(e){const{children:t}=e;return s.a.createElement("h1",{className:n.a.PageTitle},t)};a.d(t,"a",(function(){return i}))},673:function(e,t,a){e.exports={TopicPoster:"Style_TopicPoster__3QRvq",commentPosterWrapper:"Style_commentPosterWrapper__7KgUY"}},682:function(e,t,a){"use strict";a(324);var o=a(211),s=(a(323),a(209)),r=a(0),n=a.n(r),i=a(673),c=a.n(i),l=a(224);var m=n.a.memo((function(e){const{title:t,onTitleChange:a,content:r,onContentChange:i,onTabChange:m,contentToPreview:p,submitting:u,onSubmitButtonClick:h,buttonText:d}=e;return n.a.createElement(o.a,{size:"small"},n.a.createElement("div",{className:c.a.TopicPoster},n.a.createElement("div",{className:c.a.titleWrapper},n.a.createElement(s.a,{placeholder:"\u6807\u9898\uff08\u5fc5\u586b\uff09",size:"large",autoFocus:!0,value:t,onChange:a,disabled:u,maxLength:255})),n.a.createElement("div",{className:c.a.commentPosterWrapper},n.a.createElement(l.a,{placeholder:"\u8865\u5145\u8bf4\u660e\uff08\u9009\u586b\uff09",content:r,buttonText:d,onContentChange:i,onSubmitButtonClick:h,onTabChange:m,submitting:u,contentToPreview:p}))))}));a.d(t,"a",(function(){return m}))},727:function(e,t,a){e.exports={Compare:"Style_Compare__39h1m",detailWrapper:"Style_detailWrapper__2Azv5",detailTabs:"Style_detailTabs__2XZoZ",pullRequestCommitsWrapper:"Style_pullRequestCommitsWrapper__3A57w",tag:"Style_tag__97nnJ"}},728:function(e,t,a){e.exports={CompareCard:"Style_CompareCard__tE84-",selectorWrapper:"Style_selectorWrapper__zgG0r",repositoriesSelectorWrapper:"Style_repositoriesSelectorWrapper__2Dvff",isMergeableIndicatorWrapper:"Style_isMergeableIndicatorWrapper__1W1oO"}},729:function(e,t,a){e.exports={RepositoriesSelector:"Style_RepositoriesSelector__2lAeB",arrow:"Style_arrow__15L4a",target:"Style_target__2vqYE",source:"Style_source__2RAOj",targetRepositorySelectWrapper:"Style_targetRepositorySelectWrapper__DxL1j",sourceRepository:"Style_sourceRepository__1i5O8"}},730:function(e,t,a){},731:function(e,t,a){e.exports={PullRequestCommits:"Style_PullRequestCommits__22rzd",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__3ig_5"}},732:function(e,t,a){e.exports={PullRequestDiffs:"Style_PullRequestDiffs__2UqKE",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__2hqbq"}},783:function(e,t,a){"use strict";a.r(t);var o=a(0),s=a.n(o),r=(a(84),a(37)),n=(a(162),a(48)),i=(a(118),a(30)),c=(a(210),a(58)),l=a(727),m=a.n(l),p=a(655),u=(a(324),a(211)),h=a(728),d=a.n(h),g=(a(687),a(679)),y=a(729),f=a.n(y),R=a(76),E={name:"arrow-left",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]}},S=a(6),C=function(e,t){return s.a.createElement(S.a,Object.assign({},e,{ref:t,icon:E}))};C.displayName="ArrowLeftOutlined";var _=s.a.forwardRef(C);var v=Object(R.f)(s.a.memo((function(e){const{sourceRepositoryBranchNames:t,targetRepositoryBranchNames:a,onSourceRepositoryBranchSelectorChange:o,onTargetRepositoryBranchSelectorChange:r,loading:n,targetRepositories:i,onTargetRepositorySelectorChange:c,match:{params:{sourceRepositoryUsername:l,sourceRepositoryName:m,sourceRepositoryBranch:p,targetRepositoryBranch:u,username:h,repository:d}}}=e;return s.a.createElement("div",{className:f.a.RepositoriesSelector},s.a.createElement("div",{className:f.a.target},s.a.createElement("div",{className:f.a.targetRepositorySelectWrapper},s.a.createElement(g.a,{loading:n,disabled:n,onChange:c,value:"".concat(h,"/").concat(d)},i.map(({username:e,name:t})=>s.a.createElement(g.a.Option,{value:"".concat(e,"/").concat(t),key:"".concat(e,"/").concat(t)},e," / ",t)))),s.a.createElement(g.a,{loading:n,disabled:n,onChange:r,value:u},a.map(e=>s.a.createElement(g.a.Option,{value:e,key:e},e)))),s.a.createElement("div",{className:f.a.arrow},s.a.createElement(_,null)),s.a.createElement("div",{className:f.a.source},s.a.createElement("div",{className:f.a.sourceRepository},l," / ",m),s.a.createElement(g.a,{loading:n,disabled:n,onChange:o,value:p},t.map(e=>s.a.createElement(g.a.Option,{value:e,key:e},e)))))}))),N=a(20),B=a(23);class b extends o.PureComponent{constructor(e){super(e),this.loadSourceRepositoryBranchNames=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t}}}=this.props,a={username:e,name:t},o=await B.h.branchNames(a);if(null!==o){const{branchNames:e}=o;this.setState({sourceRepositoryBranchNames:e})}},this.loadTargetRepositories=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t}}}=this.props,a={username:e,name:t},o=await B.h.forkFrom(a);if(null!==o){const{repository:e}=o;null!==e?this.setState({targetRepositories:[e,a]}):this.setState({targetRepositories:[a]})}},this.loadTargetRepositoryBranchNames=async()=>{const{match:{params:{repository:e,username:t}}}=this.props,a={username:t,name:e},o=await B.h.branchNames(a);if(null!==o){const{branchNames:e}=o;this.setState({targetRepositoryBranchNames:e})}},this.onTargetRepositorySelectorChange=e=>{const{match:{params:t},history:a}=this.props,[o,s]=e.toString().split("/");a.push(N.Function.generateRepositoryCompareRoute({...t,username:o,repository:s}))},this.onSourceRepositoryBranchSelectorChange=e=>{const{match:{params:t},history:a}=this.props;a.push(N.Function.generateRepositoryCompareRoute({...t,sourceRepositoryBranch:e.toString()}))},this.onTargetRepositoryBranchSelectorChange=e=>{const{match:{params:t},history:a}=this.props;a.push(N.Function.generateRepositoryCompareRoute({...t,targetRepositoryBranch:e.toString()}))},this.state={sourceRepositoryBranchNames:[],targetRepositoryBranchNames:[],targetRepositories:[],loading:!1}}async componentDidMount(){this.setState({loading:!0}),await Promise.all([this.loadSourceRepositoryBranchNames(),this.loadTargetRepositories(),this.loadTargetRepositoryBranchNames()]),this.setState({loading:!1})}render(){const{sourceRepositoryBranchNames:e,targetRepositoryBranchNames:t,loading:a,targetRepositories:o}=this.state;return s.a.createElement(v,{sourceRepositoryBranchNames:e,targetRepositoryBranchNames:t,loading:a,targetRepositories:o,onTargetRepositorySelectorChange:this.onTargetRepositorySelectorChange,onSourceRepositoryBranchSelectorChange:this.onSourceRepositoryBranchSelectorChange,onTargetRepositoryBranchSelectorChange:this.onTargetRepositoryBranchSelectorChange})}}var D=Object(R.f)(b),P=(a(214),a(97)),M=a(730),T=a.n(M),w=a(623);var A=s.a.memo((function(e){const{isMergeable:t,loading:a}=e;return s.a.createElement("div",{className:T.a.IsMergeableIndicator},a?s.a.createElement(P.a,{showIcon:!0,icon:s.a.createElement(w.a,null),type:"info",message:"\u6b63\u5728\u68c0\u67e5\u662f\u5426\u53ef\u81ea\u52a8\u5408\u5e76"}):t?s.a.createElement(P.a,{showIcon:!0,type:"success",message:"\u53ef\u4ee5\u81ea\u52a8\u5408\u5e76"}):s.a.createElement(P.a,{showIcon:!0,type:"error",message:"\u4e0d\u80fd\u81ea\u52a8\u5408\u5e76\uff0c\u4f46\u60a8\u4ecd\u53ef\u521b\u5efa Pull Request"}))}));class W extends o.PureComponent{constructor(e){super(e),this.loadIsMergeable=async()=>{const{match:{params:{username:e,repository:t,targetRepositoryBranch:a,sourceRepositoryUsername:o,sourceRepositoryName:s,sourceRepositoryBranch:r}}}=this.props,n=await B.g.isMergeable({username:o,name:s},r,{username:e,name:t},a);if(null!==n){const{isMergeable:e}=n;this.setState({isMergeable:e})}},this.state={isMergeable:!0,loading:!1}}async componentDidMount(){this.setState({loading:!0}),await this.loadIsMergeable(),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{match:{params:{username:o,repository:s,targetRepositoryBranch:r,sourceRepositoryUsername:n,sourceRepositoryName:i,sourceRepositoryBranch:c}}}=this.props,{match:{params:{username:l,repository:m,targetRepositoryBranch:p,sourceRepositoryUsername:u,sourceRepositoryName:h,sourceRepositoryBranch:d}}}=e;o===l&&s===m&&r===p&&n===u&&i===h&&c===d||await this.componentDidMount()}render(){const{isMergeable:e,loading:t}=this.state;return s.a.createElement(A,{isMergeable:e,loading:t})}}var k=Object(R.f)(W),U=a(640);var O=Object(R.f)(s.a.memo((function(e){const{match:{params:{sourceRepositoryUsername:t,sourceRepositoryName:a,sourceRepositoryBranch:o,username:r,repository:n,targetRepositoryBranch:i}}}=e,c=t===r&&a===n&&o===i;return s.a.createElement(u.a,{size:"small"},s.a.createElement("div",{className:d.a.CompareCard},s.a.createElement("div",{className:d.a.selectorWrapper},s.a.createElement("div",{className:d.a.iconWrapper},s.a.createElement(U.a,null)),s.a.createElement("div",{className:d.a.repositoriesSelectorWrapper},s.a.createElement(D,null))),c?null:s.a.createElement("div",{className:d.a.isMergeableIndicatorWrapper},s.a.createElement(k,null))))})));class F extends o.PureComponent{render(){return s.a.createElement(O,null)}}var q=F,x=(a(52),a(22)),I=a(682);class L extends o.PureComponent{constructor(e){super(e),this.onTitleChange=e=>{this.setState({title:e.target.value})},this.onContentChange=e=>{this.setState({content:e.target.value})},this.onTabChange=e=>{if("preview"===e){const{content:e}=this.state;this.setState({contentToPreview:e})}},this.onSubmitButtonClick=async()=>{const{title:e,content:t}=this.state;if(0===e.length)x.a.warn({message:"\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a"});else{const{history:a,match:{params:{sourceRepositoryUsername:o,sourceRepositoryName:s,sourceRepositoryBranch:r,repository:n,username:i,targetRepositoryBranch:c}}}=this.props;this.setState({submitting:!0}),null!==await B.f.add({title:e,content:t,sourceRepositoryUsername:o,sourceRepositoryName:s,sourceRepositoryBranchName:r,targetRepositoryUsername:i,targetRepositoryName:n,targetRepositoryBranchName:c})&&(x.a.success({message:"\u521b\u5efa Pull Request \u6210\u529f"}),a.replace(N.Function.generateRepositoryPullRequestsRoute({username:i,repository:n}))),this.setState({submitting:!1})}},this.state={title:"",content:"",contentToPreview:"",submitting:!1}}render(){const{title:e,content:t,contentToPreview:a,submitting:o}=this.state;return s.a.createElement(I.a,{title:e,content:t,contentToPreview:a,onTitleChange:this.onTitleChange,onContentChange:this.onContentChange,onTabChange:this.onTabChange,submitting:o,onSubmitButtonClick:this.onSubmitButtonClick,buttonText:"\u521b\u5efa Pull Request"})}}var j=Object(R.f)(L),z=(a(51),a(14)),G=a(222),H=a(731),J=a.n(H);var K=s.a.memo((function(e){const{commits:t,loading:a,onLoadMoreButtonClick:o}=e;return s.a.createElement("div",{className:J.a.PullRequestCommits},s.a.createElement(r.a,{spinning:a},s.a.createElement(G.a,{commits:t}),s.a.createElement("div",{className:J.a.loadMoreButtonWrapper},s.a.createElement(z.a,{disabled:a,loading:a,onClick:o},"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"))))}));class Y extends o.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({commits:[]},()=>e())}),this.loadMoreCommits=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,username:o,repository:s,targetRepositoryBranch:r}}}=this.props,{commits:n}=this.state,i=await B.h.forkCommitHistory({username:e,name:t},a,{username:o,name:s},r,n.length,Y.COMMIT_AMOUNT_PER_PAGE);if(null!==i){const{commits:e}=i;0===e.length?x.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}):this.setState({commits:[...n,...e]})}},this.onLoadMoreButtonClick=async()=>{await this.setState({loading:!0}),await this.loadMoreCommits(),await this.setState({loading:!1})},this.state={commits:[],loading:!1}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await this.loadMoreCommits(),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{location:{pathname:o}}=e,{location:{pathname:s}}=this.props;o!==s&&await this.componentDidMount()}render(){const{commits:e,loading:t}=this.state;return s.a.createElement(K,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,commits:e,loading:t})}}Y.COMMIT_AMOUNT_PER_PAGE=50;var Z=Object(R.f)(Y),Q=a(221),X=a(732),V=a.n(X);var $=s.a.memo((function(e){const{fileDiffs:t,loading:a,fileDiffAmount:o,onLoadMoreButtonClick:n}=e;return s.a.createElement("div",{className:V.a.PullRequestDiffs},s.a.createElement(r.a,{spinning:a},s.a.createElement(Q.a,{fileDiffs:t,fileDiffAmount:o}),s.a.createElement("div",{className:V.a.loadMoreButtonWrapper},s.a.createElement(z.a,{disabled:a,loading:a,onClick:n,size:"large",type:"primary"},"\u52a0\u8f7d\u66f4\u591a\u6587\u4ef6\u66f4\u6539"))))}));class ee extends o.PureComponent{constructor(e){super(e),this.init=async()=>new Promise(e=>{this.setState({fileDiffs:[]},()=>e())}),this.loadFileDiffAmount=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,username:o,repository:s,targetRepositoryBranch:r}}}=this.props,n=await B.h.forkFileDiffAmount({username:e,name:t},a,{username:o,name:s},r);if(null!==n){const{amount:e}=n;this.setState({fileDiffAmount:e})}},this.loadMoreFileDiffs=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,username:o,repository:s,targetRepositoryBranch:r}}}=this.props,{fileDiffs:n}=this.state,i=await B.h.forkFileDiff({username:e,name:t},a,{username:o,name:s},r,n.length,ee.FILE_DIFF_AMOUNT_PER_PAGE);if(null!==i){const{fileDiffs:e}=i;0===e.length?x.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u88ab\u4fee\u6539\u6587\u4ef6"}):this.setState({fileDiffs:[...n,...e]})}},this.onLoadMoreButtonClick=async()=>{this.setState({loading:!0}),await this.loadMoreFileDiffs(),this.setState({loading:!1})},this.state={fileDiffs:[],fileDiffAmount:0,loading:!1}}async componentDidMount(){await this.init(),this.setState({loading:!0}),await Promise.all([this.loadFileDiffAmount(),this.loadMoreFileDiffs()]),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{location:{pathname:o}}=this.props,{location:{pathname:s}}=e;o!==s&&await this.componentDidMount()}render(){const{fileDiffs:e,loading:t,fileDiffAmount:a}=this.state;return s.a.createElement($,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,fileDiffs:e,loading:t,fileDiffAmount:a})}}ee.FILE_DIFF_AMOUNT_PER_PAGE=10;var te=Object(R.f)(ee);var ae=Object(R.f)(s.a.memo((function(e){const{match:{params:{sourceRepositoryUsername:t,sourceRepositoryName:a,sourceRepositoryBranch:o,username:l,repository:u,targetRepositoryBranch:h}},commitAmount:d,fileDiffAmount:g,loading:y}=e,f=t===l&&a===u&&o===h;return s.a.createElement("div",{className:m.a.Compare},s.a.createElement(p.a,null,"\u521b\u5efa Pull Request"),s.a.createElement("div",{className:m.a.compareCardWrapper},s.a.createElement(q,null)),s.a.createElement("div",{className:m.a.detailWrapper},s.a.createElement(r.a,{spinning:y},f?s.a.createElement(c.a,{description:"\u5fc5\u987b\u662f\u4e0d\u540c\u5206\u652f\u624d\u53ef\u521b\u5efa Pull Request"}):s.a.createElement("div",{className:m.a.detail},s.a.createElement("div",{className:m.a.commentPosterWrapper},s.a.createElement(j,null)),s.a.createElement("div",{className:m.a.detailTabs},s.a.createElement(n.a,{defaultActiveKey:"commits",type:"card"},s.a.createElement(n.a.TabPane,{tab:s.a.createElement(s.a.Fragment,null,"\u63d0\u4ea4",s.a.createElement(i.a,{className:m.a.tag},d)),key:"commits"},s.a.createElement("div",{className:m.a.pullRequestCommitsWrapper},s.a.createElement(Z,null))),s.a.createElement(n.a.TabPane,{tab:s.a.createElement(s.a.Fragment,null,"\u4fee\u6539\u7684\u6587\u4ef6",s.a.createElement(i.a,{className:m.a.tag},g)),key:"fileChanged"},s.a.createElement("div",{className:m.a.pullRequestFileDiffsWrapper},s.a.createElement(te,null)))))))))})));const{PAGE_ID_TO_ROUTE:oe,PAGE_ID:se}=N.CONFIG;class re extends o.PureComponent{constructor(e){super(e),this.checkURLParameters=()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,targetRepositoryBranch:o}},history:s}=this.props;void 0!==e&&void 0!==t&&void 0!==a&&void 0!==o||s.replace(oe[se.NOT_FOUND])},this.loadCommitAmount=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,username:o,repository:s,targetRepositoryBranch:r}}}=this.props;if(e===o&&t===s&&a===r)this.setState({commitAmount:0});else{const n=await B.h.forkCommitAmount({username:e,name:t},a,{username:o,name:s},r);if(null!==n){const{commitAmount:e}=n;this.setState({commitAmount:e})}}},this.loadFileDiffAmount=async()=>{const{match:{params:{sourceRepositoryUsername:e,sourceRepositoryName:t,sourceRepositoryBranch:a,username:o,repository:s,targetRepositoryBranch:r}}}=this.props;if(e===o&&t===s&&a===r)this.setState({fileDiffAmount:0});else{const n=await B.h.forkFileDiffAmount({username:e,name:t},a,{username:o,name:s},r);if(null!==n){const{amount:e}=n;this.setState({fileDiffAmount:e})}}},this.state={commitAmount:0,fileDiffAmount:0,loading:!1}}async componentDidMount(){this.checkURLParameters(),this.setState({loading:!0}),await Promise.all([this.loadCommitAmount(),this.loadFileDiffAmount()]),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{location:{pathname:o}}=this.props,{location:{pathname:s}}=e;o!==s&&await this.componentDidMount()}render(){const{commitAmount:e,fileDiffAmount:t,loading:a}=this.state;return s.a.createElement(ae,{fileDiffAmount:t,loading:a,commitAmount:e})}}var ne=Object(R.f)(re);a.d(t,"default",(function(){return ne}))}}]);
//# sourceMappingURL=12.67af1416.chunk.js.map