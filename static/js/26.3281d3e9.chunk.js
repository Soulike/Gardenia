(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[26],{1111:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r=a(13);var l=n.a.memo((function(e){return n.a.createElement(r.b,Object.assign({},e,{target:"_blank",rel:"noopener norefferrer"}))}));a.d(t,"a",(function(){return l}))},1193:function(e,t,a){e.exports={PullRequests:"Style_PullRequests__2EzEd",list:"Style_list__2Z9aN",header:"Style_header__bLOXb",statusFilter:"Style_statusFilter__3-bE3",tag:"Style_tag__2Esc7",pageButtonWrapper:"Style_pageButtonWrapper__oo2S4"}},1194:function(e,t,a){e.exports={PullRequests:"Style_PullRequests__2-07Q",emptyWrapper:"Style_emptyWrapper__2PVg3"}},1195:function(e,t,a){e.exports={PullRequest:"Style_PullRequest__2fW0b",titleWrapper:"Style_titleWrapper__1oAuA",iconWrapper:"Style_iconWrapper__MP-ds",info:"Style_info__1lTJJ"}},1250:function(e,t,a){"use strict";var s=a(0),n=a.n(s),r={name:"ellipsis",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]}},l=a(11),o=function(e,t){return n.a.createElement(l.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName="EllipsisOutlined";t.a=n.a.forwardRef(o)},1262:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=(a(140),a(74)),l=(a(93),a(25)),o=(a(180),a(55)),u=a(1193),c=a.n(u),i=a(13),m=a(131),p=a(36),E=a(18),d=(a(339),a(101)),h=a(1194),P=a.n(h),g=a(1195),R=a.n(g),y=a(95),_=a(1094),S=a(1102),N=a(1096),f=a(1111);function A(e){switch(e){case E.c.CLOSED:return"red";case E.c.MERGED:return"purple";case E.c.OPEN:return"green"}}var b=n.a.memo((function(e){const{pullRequest:{title:t,status:a,creationTime:s,no:r,sourceRepositoryUsername:l,targetRepositoryUsername:o,targetRepositoryName:u}}=e;return n.a.createElement("div",{className:R.a.PullRequest},n.a.createElement("div",{className:R.a.titleWrapper},n.a.createElement("div",{className:R.a.iconWrapper,style:{color:A(a)}},function(e){switch(e){case E.c.CLOSED:return n.a.createElement(_.a,null);case E.c.MERGED:return n.a.createElement(S.a,null);case E.c.OPEN:return n.a.createElement(N.a,null)}}(a)),n.a.createElement(f.a,{to:p.Function.generateRepositoryPullRequestRoute({username:o,repository:u,no:r.toString()})},n.a.createElement("div",{className:R.a.title},t))),n.a.createElement("div",{className:R.a.info},"#",r," \u7531 ",n.a.createElement("b",null,l)," \u4e8e ",y.b.parseTimestampToDifference(s)," \u521b\u5efa"))}));var k=n.a.memo((function(e){const{pullRequests:t}=e;return n.a.createElement("div",{className:P.a.PullRequests},t.length>0?t.map(e=>n.a.createElement(b,{pullRequest:e,key:e.id})):n.a.createElement("div",{className:P.a.emptyWrapper},n.a.createElement(d.a,{description:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684 Pull Request"})))})),q=a(1250),C=a(1088);var v=Object(m.f)(n.a.memo((function(e){const{branches:t,loading:a,match:{params:{username:s,repository:u}},openAmount:m,closedAmount:d,mergedAmount:h,onStatusButtonClick:P,currentStatus:g,currentPageNumber:R,pullRequests:y,onNextButtonClick:f,onPrevButtonClick:A,noNextPage:b}=e;let v="";for(const{isDefault:n,name:r}of t)n&&(v=r);return n.a.createElement("div",{className:c.a.PullRequests},n.a.createElement(r.a,{spinning:a},n.a.createElement("div",{className:c.a.list},n.a.createElement("div",{className:c.a.header},n.a.createElement("div",{className:c.a.statusFilter},n.a.createElement(l.a.Group,{size:"small"},n.a.createElement(l.a,{type:"link",style:{color:"unset",fontWeight:void 0===g?"bolder":"inherit"},onClick:P(void 0)},n.a.createElement(q.a,null)," \u6240\u6709",n.a.createElement(o.a,{className:c.a.tag},m+d+h)),n.a.createElement(l.a,{type:"link",style:{color:"green",fontWeight:g===E.c.OPEN?"bolder":"inherit"},onClick:P(E.c.OPEN)},n.a.createElement(N.a,null)," \u5f00\u542f\u7684",n.a.createElement(o.a,{className:c.a.tag},m)),n.a.createElement(l.a,{type:"link",style:{color:"red",fontWeight:g===E.c.CLOSED?"bolder":"inherit"},onClick:P(E.c.CLOSED)},n.a.createElement(_.a,null)," \u5df2\u5173\u95ed",n.a.createElement(o.a,{className:c.a.tag},d)),n.a.createElement(l.a,{type:"link",style:{color:"purple",fontWeight:g===E.c.MERGED?"bolder":"inherit"},onClick:P(E.c.MERGED)},n.a.createElement(S.a,null)," \u5df2\u5408\u5e76",n.a.createElement(o.a,{className:c.a.tag},h)))),n.a.createElement("div",{className:c.a.buttonWrapper},n.a.createElement(i.b,{to:p.Function.generateRepositoryCompareRoute({sourceRepositoryUsername:s,sourceRepositoryName:u,sourceRepositoryBranch:v,targetRepositoryBranch:v,repository:u,username:s})},n.a.createElement(l.a,{type:"primary"},n.a.createElement(C.a,null),"\u521b\u5efa Pull Request")))),n.a.createElement("div",{className:c.a.pullRequestListWrapper},n.a.createElement(k,{pullRequests:y}))),n.a.createElement("div",{className:c.a.pageButtonWrapper},n.a.createElement(l.a.Group,null,n.a.createElement(l.a,{disabled:0===R,onClick:A},"\u4e0a\u4e00\u9875"),n.a.createElement(l.a,{onClick:f,disabled:b},"\u4e0b\u4e00\u9875")))))}))),O=a(343),w=a(43);class B extends s.PureComponent{constructor(e){super(e),this.onStatusButtonClick=e=>async()=>{switch(this.setState({currentStatus:e,loading:!0,currentPageNumber:0}),e){case E.c.OPEN:await this.loadOpenAmount();break;case E.c.MERGED:await this.loadMergedAmount();break;case E.c.CLOSED:await this.loadClosedAmount();break;default:await Promise.all([this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount()])}await this.loadPullRequests(e,0,B.SIZE_PER_PAGE),this.setState({loading:!1})},this.onPrevButtonClick=async()=>{const{currentPageNumber:e,currentStatus:t}=this.state;e>0&&(this.setState({loading:!0}),await this.loadPullRequests(t,(e-1)*B.SIZE_PER_PAGE,B.SIZE_PER_PAGE),this.setState({currentPageNumber:e-1,loading:!1}))},this.onNextButtonClick=async()=>{const{currentPageNumber:e,currentStatus:t}=this.state;this.setState({loading:!0}),await this.loadPullRequests(t,(e+1)*B.SIZE_PER_PAGE,B.SIZE_PER_PAGE),this.setState({currentPageNumber:e+1,loading:!1})},this.loadPullRequests=async(e,t,a)=>{const{match:{params:{username:s,repository:n}}}=this.props,r=await w.f.getByRepository({username:s,name:n},e,t,a);if(null!==r){const{pullRequests:e}=r;this.setState({pullRequests:e})}},this.loadBranches=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await O.a.branches({username:e,name:t});if(null!==a){const{branches:e}=a;this.setState({branches:e})}},this.loadOpenAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await w.f.getPullRequestAmount({username:e,name:t},E.c.OPEN);if(null!==a){const{amount:e}=a;this.setState({openAmount:e})}},this.loadClosedAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await w.f.getPullRequestAmount({username:e,name:t},E.c.CLOSED);if(null!==a){const{amount:e}=a;this.setState({closedAmount:e})}},this.loadMergedAmount=async()=>{const{match:{params:{username:e,repository:t}}}=this.props,a=await w.f.getPullRequestAmount({username:e,name:t},E.c.MERGED);if(null!==a){const{amount:e}=a;this.setState({mergedAmount:e})}},this.setNoNextPage=()=>{const{currentStatus:e,currentPageNumber:t,openAmount:a,closedAmount:s,mergedAmount:n}=this.state;switch(e){case E.c.CLOSED:return(t+1)*B.SIZE_PER_PAGE>=s;case E.c.MERGED:return(t+1)*B.SIZE_PER_PAGE>=n;case E.c.OPEN:return(t+1)*B.SIZE_PER_PAGE>=a;default:return(t+1)*B.SIZE_PER_PAGE>=a+s+n}},this.state={branches:[],loading:!1,openAmount:0,closedAmount:0,mergedAmount:0,pullRequests:[],currentStatus:E.c.OPEN,currentPageNumber:0}}async componentDidMount(){this.setState({loading:!0}),await Promise.all([this.loadBranches(),this.loadOpenAmount(),this.loadClosedAmount(),this.loadMergedAmount(),this.loadPullRequests(E.c.OPEN,0,B.SIZE_PER_PAGE)]),this.setState({loading:!1})}async componentDidUpdate(e,t,a){const{match:{params:{username:s,repository:n}}}=this.props,{match:{params:{username:r,repository:l}}}=e;s===r&&n===l||await this.componentDidMount()}render(){const{branches:e,loading:t,closedAmount:a,mergedAmount:s,openAmount:r,pullRequests:l,currentStatus:o,currentPageNumber:u}=this.state;return n.a.createElement(v,{branches:e,loading:t,closedAmount:a,mergedAmount:s,openAmount:r,pullRequests:l,currentStatus:o,currentPageNumber:u,onStatusButtonClick:this.onStatusButtonClick,onNextButtonClick:this.onNextButtonClick,onPrevButtonClick:this.onPrevButtonClick,noNextPage:this.setNoNextPage()})}}B.SIZE_PER_PAGE=20;var G=Object(m.f)(B);a.d(t,"default",(function(){return G}))}}]);
//# sourceMappingURL=26.3281d3e9.chunk.js.map