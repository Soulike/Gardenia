(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[42],{1089:function(d,p,e){d.exports={Commit:"Style_Commit__1ccZI",diffWrapper:"Style_diffWrapper__1Xmub",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__-rw5j"}},1090:function(d,p,e){d.exports={CommitInfoCard:"Style_CommitInfoCard__1hAXa",messageWrapper:"Style_messageWrapper__3JI_C",message:"Style_message__2pxOG",body:"Style_body__bWu93",infoWrapper:"Style_infoWrapper__1ZWk5",info:"Style_info__29oAa",committerWrapper:"Style_committerWrapper__vzZYZ"}},1409:function(d,p,e){"use strict";e.r(p),e.d(p,"default",function(){return Z});var y=e(0),t=e.n(y),D=e(1089),h=e.n(D),g=e(953),E=e(102),W=e(1090),r=e.n(W),F=e(68),M=e(17),S=e(47),I=e(49),P=e(22),j=e(349);function B(s){const{commit:{message:a,body:o,committerName:n,timestamp:i,commitHash:m,committerEmail:f},match:{params:{username:u,repositoryName:l}}}=s;return t.a.createElement("div",{className:r.a.CommitInfoCard},t.a.createElement("div",{className:r.a.messageWrapper},t.a.createElement("div",{className:r.a.message},a),o.length?t.a.createElement("pre",{className:r.a.body},o):null),t.a.createElement("div",{className:r.a.infoWrapper},t.a.createElement("div",{className:r.a.info},t.a.createElement("div",{className:r.a.committerWrapper},t.a.createElement(j.a,{committerEmail:f,committerName:n})),"\u5728 ",F.b.parseTimestampToDifference(i),"\u63D0\u4EA4"),t.a.createElement("div",{className:r.a.hashWrapper},t.a.createElement(M.b,{className:r.a.hash,to:I.Function.generateRepositoryCodeRoute({username:u,repositoryName:l,commitHash:m,objectType:P.b.TREE})},t.a.createElement(E.a,{size:"small"},t.a.createElement("code",null,m))))))}var T=Object(S.j)(t.a.memo(B)),L=e(354);function O(s){const{loading:a,diff:o,commit:n,diffAmount:i,onLoadMoreButtonClick:m}=s;return t.a.createElement("div",{className:h.a.Commit},t.a.createElement(g.a,{spinning:a},t.a.createElement("div",{className:h.a.commitInfoCardWrapper},t.a.createElement(T,{commit:n})),t.a.createElement("div",{className:h.a.diffWrapper},t.a.createElement(L.a,{fileDiffs:o,fileDiffAmount:i}),t.a.createElement("div",{className:h.a.loadMoreButtonWrapper},t.a.createElement(E.a,{disabled:a,loading:a,onClick:m,size:"large",type:"primary"},"\u52A0\u8F7D\u66F4\u591A\u6587\u4EF6\u66F4\u6539")))))}var R=t.a.memo(O),x=e(134),v=e(27),H=e(345),c=(s,a,o)=>new Promise((n,i)=>{var m=l=>{try{u(o.next(l))}catch(C){i(C)}},f=l=>{try{u(o.throw(l))}catch(C){i(C)}},u=l=>l.done?n(l.value):Promise.resolve(l.value).then(m,f);u((o=o.apply(s,a)).next())});const N=class extends y.PureComponent{constructor(s){super(s);this.init=()=>c(this,null,function*(){return new Promise(a=>{this.setState({diff:[]},()=>a())})}),this.loadCommit=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,i=yield v.j.commit({username:a,name:o},n);if(i!==null){const{commit:m}=i;this.setState({commit:m})}}),this.loadMoreCommitDiff=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,{diff:i}=this.state,m=yield v.j.commitDiff({username:a,name:o},n,i.length,N.FILE_DIFF_AMOUNT_PER_PAGE);if(m!==null){const{diff:f}=m;f.length===0?H.a.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u88AB\u4FEE\u6539\u6587\u4EF6"}):this.setState({diff:[...i,...f]})}}),this.loadCommitDiffAmount=()=>c(this,null,function*(){const{match:{params:{username:a,repositoryName:o,commitHash:n}}}=this.props,i=yield v.j.commitDiffAmount({username:a,name:o},n);if(i!==null){const{amount:m}=i;this.setState({diffAmount:m})}}),this.onLoadMoreButtonClick=()=>c(this,null,function*(){this.setState({loading:!0}),yield this.loadMoreCommitDiff(),this.setState({loading:!1})}),this.state={commit:new x.b("","","a@b.com",0,"",""),diff:[],diffAmount:0,loading:!1}}componentDidMount(){return c(this,null,function*(){yield this.init(),this.setState({loading:!0}),yield Promise.all([this.loadCommit(),this.loadCommitDiffAmount(),this.loadMoreCommitDiff()]),this.setState({loading:!1})})}componentDidUpdate(s,a,o){return c(this,null,function*(){const{location:{pathname:n}}=this.props,{location:{pathname:i}}=s;n!==i&&(yield this.componentDidMount())})}render(){const{commit:s,diff:a,loading:o,diffAmount:n}=this.state;return t.a.createElement(R,{commit:s,diff:a,loading:o,diffAmount:n,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}};let A=N;A.FILE_DIFF_AMOUNT_PER_PAGE=10;var Z=Object(S.j)(A)}}]);

//# sourceMappingURL=42.429172e5.chunk.js.map