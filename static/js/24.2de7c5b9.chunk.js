(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[24],{1008:function(r,i,t){"use strict";i.a=t.p+"static/media/developing_code.ac8fbd80.svg"},1031:function(r,i,t){"use strict";var l=t(3),e=t(0),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},o=h,d=t(9),m=function(y,I){return e.createElement(d.a,Object(l.a)(Object(l.a)({},y),{},{ref:I,icon:o}))};m.displayName="LockOutlined";var v=i.a=e.forwardRef(m)},1055:function(r,i,t){r.exports={Login:"Style_Login__2bEsG",registerTip:"Style_registerTip__10XWI",form:"Style_form__1Yzdr",inputWrapper:"Style_inputWrapper__2aFQQ",logo:"Style_logo__3bWtv",button:"Style_button__3L0sa"}},1415:function(r,i,t){"use strict";t.r(i);var l=t(0),e=t.n(l),h=t(1055),o=t.n(h),d=t(960),m=t(102),v=t(1008),g=t(989),y=t(17),I=t(977),N=t(1031),A=t(999),a=t(1);function b(f){const{username:u,password:n,onUsernameInputChange:s,onPasswordInputChange:c,onLoginFormSubmit:E,loading:L}=f;return e.a.createElement("main",{className:o.a.Login},e.a.createElement("form",{action:"#",className:o.a.form,onSubmit:E},e.a.createElement("img",{className:o.a.logo,src:v.a,alt:"web_developer_logo"}),e.a.createElement("div",{className:o.a.registerTip},"\u6CA1\u6709\u8D26\u53F7\uFF1F",e.a.createElement(y.b,{to:a.d[a.b.REGISTER]},"\u70B9\u6B64\u6CE8\u518C")),e.a.createElement("div",{className:o.a.inputWrapper},e.a.createElement(g.a,null,"\u7528\u6237\u540D"),e.a.createElement(d.a,{type:"text",size:"large",onChange:s,autoFocus:!0,value:u,disabled:L,prefix:e.a.createElement(I.a,null)})),e.a.createElement("div",{className:o.a.inputWrapper},e.a.createElement(g.a,null,"\u5BC6\u7801"),e.a.createElement(d.a,{type:"password",size:"large",onChange:c,value:n,disabled:L,prefix:e.a.createElement(N.a,null)}),e.a.createElement(A.a,null,"\u5FD8\u8BB0\u5BC6\u7801\uFF1F",e.a.createElement(y.b,{to:a.d[a.b.CHANGE_PASSWORD]},"\u70B9\u6B64\u4FEE\u6539\u5BC6\u7801"))),e.a.createElement(m.a,{htmlType:"submit",className:o.a.button,size:"large",type:"primary",disabled:L,loading:L,block:!0},"\u767B\u5F55")))}var M=e.a.memo(b),R=t(47),F=t(27),P=t(345),T=t(145),W=t(41),D=t(134),V=t(213),x=t.n(V),U=t(150),S=(f,u,n)=>new Promise((s,c)=>{var E=p=>{try{O(n.next(p))}catch(C){c(C)}},L=p=>{try{O(n.throw(p))}catch(C){c(C)}},O=p=>p.done?s(p.value):Promise.resolve(p.value).then(E,L);O((n=n.apply(f,u)).next())});const{Account:B}=U.b;class z extends l.PureComponent{constructor(u){super(u);this.setTitle=()=>{document.title=`\u767B\u5F55 - ${a.a}`},this.checkSession=()=>S(this,null,function*(){const{setLoggedOut:n,setLoggedIn:s}=this.props,c=yield F.a.checkSession();if(c!==null){const{isValid:E}=c;E?yield s():yield n()}else yield n()}),this.onUsernameInputChange=n=>{this.setState({username:n.target.value})},this.onPasswordInputChange=n=>{this.setState({password:n.target.value})},this.onLoginFormSubmit=n=>S(this,null,function*(){n.preventDefault(),this.loginFormInputCheck()&&(yield this.submitLoginForm())}),this.loginFormInputCheck=()=>{const{username:n,password:s}=this.state;return!B.username(n)||!B.password(s)?(P.a.warn({message:"\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"}),!1):!0},this.submitLoginForm=()=>S(this,null,function*(){const{username:n,password:s}=this.state,c=D.a.calculateHash(n,s);this.setState({loading:!0}),(yield F.a.login(new D.a(n,c)))&&(yield this.onLoginSuccess()),this.setState({loading:!1})}),this.onLoginSuccess=()=>S(this,null,function*(){const{setLoggedIn:n}=this.props;n(),P.a.success({message:"\u767B\u5F55\u6210\u529F"}),this.returnToPreviousPage()}),this.returnToPreviousPage=()=>{const{location:{search:n}}=this.props,{prev:s}=x.a.parse(n.slice(1));return typeof s=="string"&&s!==a.d[a.b.LOGIN]&&s!==a.d[a.b.REGISTER]&&s!==a.d[a.b.NOT_FOUND]&&s!==a.d[a.b.CHANGE_PASSWORD]?this.props.history.push(s):this.props.history.push(a.d[a.b.INDEX])},this.state={username:"",password:"",loading:!1}}componentDidMount(){return S(this,null,function*(){this.setTitle(),yield this.checkSession();const{isLoggedIn:u}=this.props;if(u)return this.props.history.push(a.d[a.b.INDEX])})}render(){const{username:u,password:n,loading:s}=this.state;return e.a.createElement(M,{username:u,password:n,loading:s,onLoginFormSubmit:this.onLoginFormSubmit,onPasswordInputChange:this.onPasswordInputChange,onUsernameInputChange:this.onUsernameInputChange})}}const G=f=>{const{Root:{isLoggedIn:u}}=f;return{isLoggedIn:u}},j={setLoggedIn:T.setLoggedInAction,setLoggedOut:T.setLoggedOutAction};var H=Object(R.j)(Object(W.b)(G,j)(z)),K=i.default=H},989:function(r,i,t){"use strict";var l=t(0),e=t.n(l),h=t(990),o=t.n(h);function d(m){const{children:v,required:g}=m;return e.a.createElement("div",{className:o.a.InputLabel},v,e.a.createElement("span",{className:o.a.requiredSign},g?" *":""))}i.a=e.a.memo(d)},990:function(r,i,t){r.exports={InputLabel:"Style_InputLabel__3wLmK",requiredSign:"Style_requiredSign__3lJIr"}},996:function(r,i,t){r.exports={InputTip:"Style_InputTip__KsPY_"}},999:function(r,i,t){"use strict";t.d(i,"a",function(){return m});var l=t(0),e=t.n(l),h=t(996),o=t.n(h);function d(v){const{children:g}=v;return e.a.createElement("div",{className:o.a.InputTip},g)}var m=e.a.memo(d)}}]);

//# sourceMappingURL=24.2de7c5b9.chunk.js.map