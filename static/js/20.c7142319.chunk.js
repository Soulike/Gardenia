(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[20],{1003:function(A,u,t){(function(O){function r(e,a){for(var n=0,s=e.length-1;s>=0;s--){var i=e[s];i==="."?e.splice(s,1):i===".."?(e.splice(s,1),n++):n&&(e.splice(s,1),n--)}if(a)for(;n--;n)e.unshift("..");return e}u.resolve=function(){for(var e="",a=!1,n=arguments.length-1;n>=-1&&!a;n--){var s=n>=0?arguments[n]:O.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)continue;e=s+"/"+e,a=s.charAt(0)==="/"}return e=r(v(e.split("/"),function(i){return!!i}),!a).join("/"),(a?"/":"")+e||"."},u.normalize=function(e){var a=u.isAbsolute(e),n=M(e,-1)==="/";return e=r(v(e.split("/"),function(s){return!!s}),!a).join("/"),!e&&!a&&(e="."),e&&n&&(e+="/"),(a?"/":"")+e},u.isAbsolute=function(e){return e.charAt(0)==="/"},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(v(e,function(a,n){if(typeof a!="string")throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},u.relative=function(e,a){e=u.resolve(e).substr(1),a=u.resolve(a).substr(1);function n(H){for(var S=0;S<H.length&&H[S]==="";S++);for(var o=H.length-1;o>=0&&H[o]==="";o--);return S>o?[]:H.slice(S,o-S+1)}for(var s=n(e.split("/")),i=n(a.split("/")),p=Math.min(s.length,i.length),y=p,F=0;F<p;F++)if(s[F]!==i[F]){y=F;break}for(var I=[],F=y;F<s.length;F++)I.push("..");return I=I.concat(i.slice(y)),I.join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){if(typeof e!="string"&&(e=e+""),e.length===0)return".";for(var a=e.charCodeAt(0),n=a===47,s=-1,i=!0,p=e.length-1;p>=1;--p)if(a=e.charCodeAt(p),a===47){if(!i){s=p;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"/":e.slice(0,s)};function D(e){typeof e!="string"&&(e=e+"");var a=0,n=-1,s=!0,i;for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===47){if(!s){a=i+1;break}}else n===-1&&(s=!1,n=i+1);return n===-1?"":e.slice(a,n)}u.basename=function(e,a){var n=D(e);return a&&n.substr(-1*a.length)===a&&(n=n.substr(0,n.length-a.length)),n},u.extname=function(e){typeof e!="string"&&(e=e+"");for(var a=-1,n=0,s=-1,i=!0,p=0,y=e.length-1;y>=0;--y){var F=e.charCodeAt(y);if(F===47){if(!i){n=y+1;break}continue}s===-1&&(i=!1,s=y+1),F===46?a===-1?a=y:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||s===-1||p===0||p===1&&a===s-1&&a===n+1?"":e.slice(a,s)};function v(e,a){if(e.filter)return e.filter(a);for(var n=[],s=0;s<e.length;s++)a(e[s],s,e)&&n.push(e[s]);return n}var M="ab".substr(-1)==="b"?function(e,a,n){return e.substr(a,n)}:function(e,a,n){return a<0&&(a=e.length+a),e.substr(a,n)}}).call(this,t(45))},1026:function(A,u){A.exports=D;var t=/^(?:\w+:)?\/\/(\S+)$/,O=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,r=/^[^\s\.]+\.\S{2,}$/;function D(v){if(typeof v!="string")return!1;var M=v.match(t);if(!M)return!1;var e=M[1];return e?!!(O.test(e)||r.test(e)):!1}},1027:function(A,u,t){A.exports={CommitInfoBar:"Style_CommitInfoBar__AogMa",left:"Style_left__3aqnY",right:"Style_right__XNYqn",message:"Style_message__3Jq3M"}},1039:function(A,u,t){"use strict";t.d(u,"a",function(){return y});var O=t(0),r=t.n(O),D=t(1027),v=t.n(D),M=t(17),e=t(47),a=t(49),n=t(174),s=t(68),i=t(353);function p(F){const{lastCommit:{committerName:I,commitHash:H,message:S,timestamp:o,committerEmail:L},match:{params:{username:E,repositoryName:B}}}=F;return r.a.createElement("div",{className:v.a.CommitInfoBar},r.a.createElement("div",{className:v.a.left},r.a.createElement(i.a,{committerEmail:L,committerName:I}),r.a.createElement("div",{className:v.a.message},S)),r.a.createElement("div",{className:v.a.right},r.a.createElement("div",{className:v.a.time},s.b.parseTimestampToDifference(o)),r.a.createElement(n.a,{title:H},r.a.createElement("div",{className:v.a.commitHash},"\u6700\u540E\u63D0\u4EA4\uFF1A",r.a.createElement(M.b,{to:a.Function.generateRepositoryCommitRoute({username:E,repositoryName:B,commitHash:H})},H.slice(0,7))))))}var y=Object(e.j)(r.a.memo(p))},1040:function(A,u,t){"use strict";t.d(u,"a",function(){return I});var O=t(0),r=t.n(O),D=t(47),v=t(49),M=t(350),e=t(1026),a=t.n(e),n=t(22),s=t(1003),i=t.n(s),p=t(252),y=(H,S,o)=>new Promise((L,E)=>{var B=h=>{try{b(o.next(h))}catch(j){E(j)}},C=h=>{try{b(o.throw(h))}catch(j){E(j)}},b=h=>h.done?L(h.value):Promise.resolve(h.value).then(B,C);b((o=o.apply(H,S)).next())});class F extends O.PureComponent{constructor(S){super(S);this.objectURLs=[],this.loadMainBranchName=()=>y(this,null,function*(){return new Promise(o=>y(this,null,function*(){const{match:{params:{username:L,repositoryName:E}}}=this.props,B=yield M.a.branches({username:L,name:E});if(B!==null){const{branches:C}=B;for(const{name:b,isDefault:h}of C)if(h){this.setState({mainBranchName:b},()=>o());break}}}))}),this.processHTML=o=>y(this,null,function*(){const E=document.implementation.createHTMLDocument().createElement("div");E.innerHTML=o;const B=E.getElementsByTagName("a"),C=E.getElementsByTagName("img"),b=[];for(const h of B){const j=h.getAttribute("href");j!==null&&b.push((()=>y(this,null,function*(){h.setAttribute("href",yield this.getCompleteLink(j))}))())}for(const h of C){const j=h.getAttribute("src");j!==null&&b.push((()=>y(this,null,function*(){const U=yield this.getImageURL(j);this.objectURLs.push(U),h.setAttribute("src",U)}))())}return yield Promise.all(b),E.innerHTML}),this.getCompleteLink=o=>y(this,null,function*(){if(o.length===0||a()(o)||i.a.isAbsolute(o)||o.charAt(0)==="#"||o.charAt(0)==="?")return o;{const{match:{params:{username:L,repositoryName:E,objectType:B,commitHash:C,path:b}}}=this.props,{mainBranchName:h}=this.state,j=b?B===n.b.BLOB?i.a.join(i.a.dirname(b),o):i.a.join(b,o):i.a.join("",o),U=yield M.a.fileInfo({username:L},{name:E},j,C||h);if(U!==null){const{objectType:V}=U;return V===n.b.BLOB?v.Function.generateRepositoryCodeRoute({username:L,repositoryName:E,commitHash:C||h,path:j,objectType:n.b.BLOB}):V===n.b.TREE?v.Function.generateRepositoryCodeRoute({username:L,repositoryName:E,commitHash:C||h,path:j,objectType:n.b.TREE}):v.Function.generateRepositoryCodeRoute({username:L,repositoryName:E,commitHash:C||h,path:j,objectType:n.b.COMMIT})}else return v.Function.generateRepositoryCodeRoute({username:L,repositoryName:E,commitHash:C||h,path:j,objectType:n.b.BLOB})}}),this.getImageURL=o=>y(this,null,function*(){if(a()(o)||i.a.isAbsolute(o))return o;{const{match:{params:{username:L,repositoryName:E,objectType:B,commitHash:C,path:b}}}=this.props,{mainBranchName:h}=this.state,j=b?B===n.b.BLOB?i.a.join(i.a.dirname(b),o):i.a.join(b,o):i.a.join("",o),U=yield M.a.rawFile({username:L},{name:E},j,C||h);return U!==null?URL.createObjectURL(U):o}}),this.state={mainBranchName:"",loading:!1}}componentDidMount(){return y(this,null,function*(){const{match:{params:{commitHash:S}}}=this.props;this.setState({loading:!0}),typeof S!="string"&&(yield this.loadMainBranchName()),this.setState({loading:!1})})}componentDidUpdate(S,o,L){return y(this,null,function*(){const{markdown:E}=this.props,{markdown:B}=S;E!==B&&(yield this.componentDidMount())})}componentWillUnmount(){this.objectURLs.forEach(S=>URL.revokeObjectURL(S))}render(){const{loading:S}=this.state,{markdown:o}=this.props;return r.a.createElement(p.a,{markdown:o,processHTML:this.processHTML,loading:S})}}var I=Object(D.j)(F)},1320:function(A,u,t){A.exports={FileList:"Style_FileList__3rWIg",lastCommitInfoBar:"Style_lastCommitInfoBar__2XW39",readmeWrapper:"Style_readmeWrapper__25GwL"}},1321:function(A,u,t){A.exports={Item:"Style_Item__2qcqg",icon:"Style_icon__1TlO4",fileName:"Style_fileName__zs9qY",message:"Style_message__1rBHL",time:"Style_time__2cJ9G"}},1322:function(A,u,t){A.exports={Readme:"Style_Readme__2e1Tq",titleWrapper:"Style_titleWrapper__2ExlZ",title:"Style_title__2mCc5",contentWrapper:"Style_contentWrapper__3fQZA"}},1386:function(A,u,t){"use strict";var O=t(3),r=t(0),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},v=D,M=t(9),e=function(s,i){return r.createElement(M.a,Object(O.a)(Object(O.a)({},s),{},{ref:i,icon:v}))};e.displayName="FileTextOutlined";var a=u.a=r.forwardRef(e)},1395:function(A,u,t){"use strict";t.r(u),t.d(u,"default",function(){return le});var O=t(0),r=t.n(O),D=t(1320),v=t.n(D),M=t(1429),e=t(181),a=t(22),n=t(17),s=t(47),i=t(1321),p=t.n(i),y=t(49),F=t(68),I=t(1386),H=t(3),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},o=S,L=t(9),E=function(c,l){return O.createElement(L.a,Object(H.a)(Object(H.a)({},c),{},{ref:l,icon:o}))};E.displayName="FolderOutlined";var B=O.forwardRef(E),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},b=C,h=function(c,l){return O.createElement(L.a,Object(H.a)(Object(H.a)({},c),{},{ref:l,icon:b}))};h.displayName="ContainerOutlined";var j=O.forwardRef(h);function U(P){const{masterBranchName:c,fileInfo:{type:l,path:g,commit:{message:N,timestamp:d,commitHash:R}},match:{params:{username:f,repositoryName:m,commitHash:T}}}=P,W=V(g);return r.a.createElement(M.b.Item,{className:p.a.Item},l===a.b.BLOB?r.a.createElement(I.a,{className:p.a.icon}):l===a.b.TREE?r.a.createElement(B,{className:p.a.icon}):r.a.createElement(j,{className:p.a.icon}),r.a.createElement("div",{className:p.a.fileName},l===a.b.COMMIT?W:r.a.createElement(n.b,{to:y.Function.generateRepositoryCodeRoute({username:f,repositoryName:m,objectType:l,commitHash:T||c,path:g})},W)),r.a.createElement(n.b,{className:p.a.message,to:y.Function.generateRepositoryCommitRoute({username:f,repositoryName:m,commitHash:R})},N),r.a.createElement("div",{className:p.a.time},F.b.parseTimestampToDifference(d)))}function V(P){const c=P.split("/");return c[c.length-1]}var Z=Object(s.j)(r.a.memo(U)),Q=t(1322),x=t.n(Q),K=t(955),k=t(1040);function q(P){const{readme:c,exists:l,loading:g}=P;return l?r.a.createElement("div",{className:x.a.Readme},r.a.createElement(K.a,{spinning:g},r.a.createElement("div",{className:x.a.titleWrapper},r.a.createElement(I.a,null),r.a.createElement("div",{className:x.a.title},"README.md")),r.a.createElement("div",{className:x.a.contentWrapper},r.a.createElement(k.a,{markdown:c})))):null}var _=r.a.memo(q),G=t(350),Y=t(1003),$=t(98),w=(P,c,l)=>new Promise((g,N)=>{var d=m=>{try{f(l.next(m))}catch(T){N(T)}},R=m=>{try{f(l.throw(m))}catch(T){N(T)}},f=m=>m.done?g(m.value):Promise.resolve(m.value).then(d,R);f((l=l.apply(P,c)).next())});class ee extends O.PureComponent{constructor(c){super(c);this.setStatePromise=Object($.promisify)(this.setState),this.loadRawReadme=()=>w(this,null,function*(){yield this.setStatePromise({exists:!1});const l=["README.md","readme.md","readMe.md","ReadMe.md","README.MD","readme.MD","readMe.MD","ReadMe.MD"],{match:{params:{username:g,repositoryName:N,path:d}},commitHash:R}=this.props;for(const f of l){const m=yield G.a.fileInfo({username:g},{name:N},Object(Y.join)(d||"",f),R);if(m!==null&&m.objectType===a.b.BLOB){const T=yield G.a.rawFile({username:g},{name:N},Object(Y.join)(d||"",f),R);T!==null&&(yield this.setStatePromise({readme:yield F.c.transformBlobToString(T),exists:!0}));break}}}),this.state={exists:!1,readme:"",loading:!1}}componentDidMount(){return w(this,null,function*(){const{commitHash:c}=this.props;c&&(yield this.setStatePromise({loading:!0}),yield this.loadRawReadme(),yield this.setStatePromise({loading:!1}))})}componentDidUpdate(c,l,g){return w(this,null,function*(){const{location:{pathname:N},commitHash:d}=this.props,{location:{pathname:R},commitHash:f}=c;(N!==R||d!==f)&&(yield this.componentDidMount())})}render(){const{readme:c,exists:l,loading:g}=this.state;return r.a.createElement(_,{exists:l,readme:c,loading:g})}}var te=Object(s.j)(ee),ae=t(1039);const ne=r.a.lazy(()=>t.e(49).then(t.bind(null,1428)));function re(P){const{fileList:c,lastCommit:l,loading:g,showPreviousFolderItem:N,masterBranchName:d}=P,{commitHash:R}=l;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:v.a.FileList},r.a.createElement("div",{className:v.a.lastCommitInfoBar},r.a.createElement(ae.a,{lastCommit:l})),r.a.createElement(M.b,{locale:{emptyText:r.a.createElement(e.a,{description:"\u6CA1\u6709\u6587\u4EF6"})},loading:g,className:v.a.fileList},N?r.a.createElement(ne,null):null,c.map(f=>r.a.createElement(Z,{masterBranchName:d,fileInfo:f,key:f.path})))),r.a.createElement("div",{className:v.a.readmeWrapper},r.a.createElement(te,{commitHash:R})))}var se=r.a.memo(re),J=t(27),oe=t(134),X=t(1),z=(P,c,l)=>new Promise((g,N)=>{var d=m=>{try{f(l.next(m))}catch(T){N(T)}},R=m=>{try{f(l.throw(m))}catch(T){N(T)}},f=m=>m.done?g(m.value):Promise.resolve(m.value).then(d,R);f((l=l.apply(P,c)).next())});class ie extends O.Component{constructor(c){super(c);this.setStatePromise=Object($.promisify)(this.setState),this.loadMasterBranchName=()=>z(this,null,function*(){return new Promise(l=>z(this,null,function*(){const{match:{params:{username:g,repositoryName:N}}}=this.props,d=yield J.j.branches({username:g,name:N});if(d!==null){const{branches:R}=d;let f="";for(const{name:m,isDefault:T}of R)if(T){f=m;break}this.setState({masterBranchName:f},()=>l())}}))}),this.loadDirectory=()=>z(this,null,function*(){const{match:{params:{username:l,repositoryName:g,path:N,commitHash:d}},history:R}=this.props,{masterBranchName:f}=this.state,m=yield J.j.directory({username:l},{name:g},d||f,N===void 0?"":N+"/");m!==null?yield this.setStatePromise({fileList:[...m]}):R.replace(X.d[X.b.NOT_FOUND])}),this.loadLastCommit=()=>z(this,null,function*(){return new Promise(l=>z(this,null,function*(){const{match:{params:{username:g,repositoryName:N,commitHash:d,path:R}}}=this.props,{masterBranchName:f}=this.state,m=yield J.j.lastBranchCommit({username:g},{name:N},d||f,R);m!==null?this.setState({lastCommit:m},()=>l()):l()}))}),this.state={fileList:[],lastCommit:new oe.b("","","",0,"",""),loading:!0,masterBranchName:""}}componentDidMount(){return z(this,null,function*(){this.setState({loading:!0}),yield this.loadMasterBranchName(),yield this.loadLastCommit(),yield this.loadDirectory(),this.setState({loading:!1})})}componentDidUpdate(c,l,g){return z(this,null,function*(){const{match:{params:{username:N,repositoryName:d,commitHash:R,path:f}}}=c,{match:{params:{username:m,repositoryName:T,commitHash:W,path:me}}}=this.props;N!==m||d!==T?yield this.componentDidMount():R!==W?(this.setState({loading:!0}),yield Promise.all([this.loadDirectory(),this.loadLastCommit()]),this.setState({loading:!1})):f!==me&&(this.setState({loading:!0}),yield this.loadDirectory(),this.setState({loading:!1}))})}render(){const{fileList:c,lastCommit:l,loading:g,masterBranchName:N}=this.state,{match:{params:{path:d}}}=this.props;return r.a.createElement(se,{fileList:c,masterBranchName:N,lastCommit:l,loading:g,showPreviousFolderItem:d!==void 0&&d!=="."})}}var le=Object(s.j)(ie)}}]);

//# sourceMappingURL=20.c7142319.chunk.js.map