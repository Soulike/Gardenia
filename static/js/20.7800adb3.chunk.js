(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[20],{1076:function(e,t,r){(function(e){function r(e,t){for(var r=0,a=e.length-1;a>=0;a--){var n=e[a];"."===n?e.splice(a,1):".."===n?(e.splice(a,1),r++):r&&(e.splice(a,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function a(e,t){if(e.filter)return e.filter(t);for(var r=[],a=0;a<e.length;a++)t(e[a],a,e)&&r.push(e[a]);return r}t.resolve=function(){for(var t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,n="/"===i.charAt(0))}return(n?"/":"")+(t=r(a(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var s=t.isAbsolute(e),i="/"===n(e,-1);return(e=r(a(e.split("/"),(function(e){return!!e})),!s).join("/"))||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=a(e.split("/")),s=a(r.split("/")),i=Math.min(n.length,s.length),o=i,c=0;c<i;c++)if(n[c]!==s[c]){o=c;break}var u=[];for(c=o;c<n.length;c++)u.push("..");return(u=u.concat(s.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,a=-1,n=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!n){a=s;break}}else n=!1;return-1===a?r?"/":".":r&&1===a?"/":e.slice(0,a)},t.basename=function(e,t){var r=function(e){"string"!==typeof e&&(e+="");var t,r=0,a=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){r=t+1;break}}else-1===a&&(n=!1,a=t+1);return-1===a?"":e.slice(r,a)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,a=-1,n=!0,s=0,i=e.length-1;i>=0;--i){var o=e.charCodeAt(i);if(47!==o)-1===a&&(n=!1,a=i+1),46===o?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!n){r=i+1;break}}return-1===t||-1===a||0===s||1===s&&t===a-1&&t===r+1?"":e.slice(t,a)};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(85))},1093:function(e,t){e.exports=function(e){if("string"!==typeof e)return!1;var t=e.match(r);if(!t)return!1;var s=t[1];if(!s)return!1;if(a.test(s)||n.test(s))return!0;return!1};var r=/^(?:\w+:)?\/\/(\S+)$/,a=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,n=/^[^\s\.]+\.\S{2,}$/},1094:function(e,t,r){e.exports={CommitInfoBar:"Style_CommitInfoBar__1-ElH",left:"Style_left__1syWH",right:"Style_right__3RBYJ",avatar:"Style_avatar__290nj",name:"Style_name__3xcxA"}},1100:function(e,t,r){"use strict";r(322);var a=r(141),n=r(0),s=r.n(n),i=r(1094),o=r.n(i),c=r(24),u=r(122),l=r(46),m=r(102);var p=Object(u.f)(s.a.memo((function(e){var t=e.lastCommit,r=t.committerName,n=t.commitHash,i=t.message,u=t.timestamp,p=e.match.params,f=p.username,h=p.repository;return s.a.createElement("div",{className:o.a.CommitInfoBar},s.a.createElement("div",{className:o.a.left},s.a.createElement(c.b,{className:o.a.name,to:l.b.generatePersonalCenterRoute({username:r})},r),s.a.createElement("div",{className:o.a.message},i)),s.a.createElement("div",{className:o.a.right},s.a.createElement("div",{className:o.a.time},m.b.parseTimestampToDifference(u)),s.a.createElement(a.a,{title:n},s.a.createElement("div",{className:o.a.commitHash},"\u6700\u540e\u63d0\u4ea4\uff1a",s.a.createElement(c.b,{to:l.b.generateRepositoryCommitRoute({username:f,repository:h,commitHash:n})},n.slice(0,7))))))})));r.d(t,"a",(function(){return p}))},1101:function(e,t,r){"use strict";var a=r(1),n=r.n(a),s=r(5),i=r(12),o=r(14),c=r(37),u=r(36),l=r(38),m=r(0),p=r.n(m),f=r(122),h=r(46),v=r(323),d=r(1093),b=r.n(d),y=r(40),g=r(1076),k=r.n(g),w=r(157),x=r(333),j=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).objectURLs=[],r.loadMainBranchName=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,i,o,c,u,l,m,p,f,h,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.match.params,s=a.username,i=a.repository,e.next=3,v.a.branches({username:s,name:i});case 3:if(null===(o=e.sent)){e.next=33;break}c=o.branches,u=!0,l=!1,m=void 0,e.prev=9,p=c[Symbol.iterator]();case 11:if(u=(f=p.next()).done){e.next=19;break}if(h=f.value,d=h.name,!h.isDefault){e.next=16;break}return r.setState({mainBranchName:d},(function(){return t()})),e.abrupt("break",19);case 16:u=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),l=!0,m=e.t0;case 25:e.prev=25,e.prev=26,u||null==p.return||p.return();case 28:if(e.prev=28,!l){e.next=31;break}throw m;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[9,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.processMarkdownLinks=Object(s.a)(n.a.mark((function e(){var t,a,i,o,c,u,l,m,p,f,h,v,d,b,y,g,k,x,j;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=r.props.markdown,a=w.b.makeHtml(t),i=document.implementation.createHTMLDocument(),(o=i.createElement("div")).innerHTML=a,c=o.getElementsByTagName("a"),u=o.getElementsByTagName("img"),l=[],m=!0,p=!1,f=void 0,e.prev=11,h=function(){var e=d.value,t=e.getAttribute("href");null!==t&&l.push(Object(s.a)(n.a.mark((function a(){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=e,a.next=3,r.getCompleteLink(t);case 3:a.t1=a.sent,a.t0.setAttribute.call(a.t0,"href",a.t1);case 5:case"end":return a.stop()}}),a)})))())},v=c[Symbol.iterator]();!(m=(d=v.next()).done);m=!0)h();e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),p=!0,f=e.t0;case 20:e.prev=20,e.prev=21,m||null==v.return||v.return();case 23:if(e.prev=23,!p){e.next=26;break}throw f;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(b=!0,y=!1,g=void 0,e.prev=31,k=function(){var e=j.value,t=e.getAttribute("src");null!==t&&l.push(Object(s.a)(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.getImageURL(t);case 2:s=a.sent,r.objectURLs.push(s),e.setAttribute("src",s);case 5:case"end":return a.stop()}}),a)})))())},x=u[Symbol.iterator]();!(b=(j=x.next()).done);b=!0)k();e.next=40;break;case 36:e.prev=36,e.t1=e.catch(31),y=!0,g=e.t1;case 40:e.prev=40,e.prev=41,b||null==x.return||x.return();case 43:if(e.prev=43,!y){e.next=46;break}throw g;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.next=50,Promise.all(l);case 50:r.setState({html:o.innerHTML});case 51:case"end":return e.stop()}}),e,null,[[11,16,20,28],[21,,23,27],[31,36,40,48],[41,,43,47]])}))),r.getCompleteLink=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,i,o,c,u,l,m,p,f,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()(t)&&!k.a.isAbsolute(t)&&"#"!==t.at(0)&&"?"!==t.at(0)){e.next=4;break}return e.abrupt("return",t);case 4:return a=r.props.match.params,s=a.username,i=a.repository,o=a.objectType,c=a.branch,u=a.path,l=r.state.mainBranchName,m=u?o===y.a.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,v.a.fileInfo({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=19;break}if(f=p.exists,d=p.type,f&&d!==y.a.BLOB){e.next=16;break}return e.abrupt("return",h.b.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.BLOB}));case 16:return e.abrupt("return",h.b.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.TREE}));case 17:e.next=20;break;case 19:return e.abrupt("return",h.b.generateRepositoryCodeRoute({username:s,repository:i,branch:c||l,path:m,objectType:y.a.BLOB}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getImageURL=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,i,o,c,u,l,m,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b()(t)&&!k.a.isAbsolute(t)){e.next=4;break}return e.abrupt("return",t);case 4:return a=r.props.match.params,s=a.username,i=a.repository,o=a.objectType,c=a.branch,u=a.path,l=r.state.mainBranchName,m=u?o===y.a.BLOB?k.a.join(k.a.dirname(u),t):k.a.join(u,t):k.a.join("",t),e.next=9,v.a.rawFile({username:s},{name:i},m,c||l);case 9:if(null===(p=e.sent)){e.next=14;break}return e.abrupt("return",URL.createObjectURL(p));case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.processCodes=function(){var e=r.state.html;r.setState({loading:!0});var t=document.createElement("div");t.innerHTML=e,t.querySelectorAll("pre code").forEach((function(e){return w.a.highlightBlock(e)})),r.setState({html:t.innerHTML,loading:!1})},r.state={mainBranchName:"",loading:!1,html:""},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.branch,this.setState({loading:!0}),"string"===typeof t){e.next=5;break}return e.next=5,this.loadMainBranchName();case 5:return e.next=7,this.processMarkdownLinks();case 7:this.processCodes(),this.setState({loading:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(n.a.mark((function e(t,r,a){var s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.markdown,i=t.markdown,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.objectURLs.forEach((function(e){return URL.revokeObjectURL(e)}))}},{key:"render",value:function(){var e=this.state,t=e.html,r=e.loading;return p.a.createElement(x.a,{html:t,processing:r})}}]),t}(m.PureComponent),_=Object(f.f)(j);r.d(t,"a",(function(){return _}))},1197:function(e,t,r){e.exports={FileReader:"Style_FileReader__1hW4w",commitInfoBar:"Style_commitInfoBar__2xvVY",contentWrapper:"Style_contentWrapper__3jWFR",fileInfoBar:"Style_fileInfoBar__2iqjb",fileName:"Style_fileName__3GaRF",readerWrapper:"Style_readerWrapper__13RMn",content:"Style_content__3_Ute"}},1198:function(e,t,r){e.exports={CodeReader:"Style_CodeReader__yNPpi",line:"Style_line__2xQ8V",lineNumber:"Style_lineNumber__nX9YT",code:"Style_code__19ilK"}},1199:function(e,t,r){e.exports={MarkdownReader:"Style_MarkdownReader__2Af6z"}},1212:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),s=r(5),i=r(12),o=r(14),c=r(37),u=r(36),l=r(38),m=r(0),p=r.n(m),f=(r(166),r(90)),h=(r(130),r(43)),v=r(1197),d=r.n(v),b=r(1100),y=r(46),g=r(24),k=r(122),w=(r(481),r(203));var x=p.a.memo((function(){return p.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u4e8c\u8fdb\u5236\u6587\u4ef6\u65e0\u6cd5\u663e\u793a",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})}));var j=p.a.memo((function(){return p.a.createElement(w.a,{type:"warning",showIcon:!0,message:"\u6587\u4ef6\u8fc7\u5927\uff0c\u4e0d\u80fd\u76f4\u63a5\u67e5\u770b",description:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d\u67e5\u770b\u539f\u6587\u4ef6"})})),_=r(1076),E=r(1198),O=r.n(E),C=r(102);var R=p.a.memo((function(e){var t=e.code,r=C.a.getHighlightedCodeLines(t);return p.a.createElement("table",{className:"".concat(O.a.CodeReader," hljs")},p.a.createElement("tbody",null,r.map((function(e,t){return p.a.createElement("tr",{key:t,className:O.a.line},p.a.createElement("td",null,p.a.createElement("div",{className:O.a.lineNumber},t+1)),p.a.createElement("td",null,p.a.createElement("pre",{className:O.a.code},p.a.createElement("code",{dangerouslySetInnerHTML:{__html:e}}))))}))))})),B=r(1199),N=r.n(B),S=r(1101);var L=p.a.memo((function(e){var t=e.markdown;return p.a.createElement("div",{className:N.a.MarkdownReader},p.a.createElement(S.a,{markdown:t}))}));var T=Object(k.f)(p.a.memo((function(e){var t=[".json"],r=[".md",".markdown",".mdwn"],a=e.isBinary,n=e.isOversize,s=e.fileName,i=e.lastCommit,o=e.loading,c=e.onRawFileButtonClick,u=e.fileContent,l=e.match.params,m=l.username,v=l.repository,k=l.branch,w=l.path,E=Object(_.extname)(s).toLowerCase();return p.a.createElement("div",{className:d.a.FileReader},p.a.createElement(f.a,{spinning:o},p.a.createElement("div",{className:d.a.commitInfoBar},p.a.createElement(b.a,{lastCommit:i})),p.a.createElement("div",{className:d.a.contentWrapper},p.a.createElement("div",{className:d.a.fileInfoBar},p.a.createElement("div",{className:d.a.fileName},s),p.a.createElement(h.a.Group,{className:d.a.buttonWrapper},p.a.createElement(h.a,null,p.a.createElement(g.b,{to:y.b.generateRepositoryCommitsRoute({username:m,repository:v,branch:k,path:w})},"\u5386\u53f2")),p.a.createElement(h.a,{onClick:c},"\u4e0b\u8f7d"))),p.a.createElement("div",{className:d.a.readerWrapper},a?p.a.createElement(x,null):n?p.a.createElement(j,null):t.includes(E)?p.a.createElement(R,{code:u}):r.includes(E)?p.a.createElement(L,{markdown:u}):p.a.createElement(R,{code:u})))))}))),A=r(140),F=r(62),I=y.a.PAGE_ID_TO_ROUTE,M=y.a.PAGE_ID,U=function(e){function t(e){var r;return Object(i.a)(this,t),(r=Object(c.a)(this,Object(u.a)(t).call(this,e))).loadLastCommit=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,i,o,c,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.match.params,s=a.username,i=a.repository,o=a.path,c=a.branch,e.next=3,F.g.lastCommit({username:s},{name:i},c,o);case 3:null!==(u=e.sent)&&r.setState({lastCommit:u},(function(){return t()}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.loadFileInfo=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,i,o,c,u,l,m,p,f,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.state.lastCommit.commitHash,s=r.props,i=s.match.params,o=i.username,c=i.repository,u=i.path,l=s.history,e.next=4,F.g.fileInfo({username:o},{name:c},u,a);case 4:null!==(m=e.sent)&&(p=m.exists,f=m.size,h=m.isBinary,p?!h&&f>1048576?r.setState({isOversize:!0,isBinary:h},(function(){return t()})):r.setState({isOversize:!1,isBinary:h},(function(){return t()})):l.replace(I[M.NOT_FOUND]));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),r.loadFileContent=Object(s.a)(n.a.mark((function e(){var t,a,s,i,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,s=t.repository,i=t.path,o=r.state.lastCommit.commitHash,e.next=4,F.g.rawFile({username:a},{name:s},i,o);case 4:if(null===(c=e.sent)){e.next=12;break}return e.t0=r,e.next=9,C.c.transformBlobToString(c);case 9:e.t1=e.sent,e.t2={fileContent:e.t1},e.t0.setState.call(e.t0,e.t2);case 12:case"end":return e.stop()}}),e)}))),r.onRawFileButtonClick=Object(s.a)(n.a.mark((function e(){var t,a,s,i,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,s=t.repository,i=t.path,o=r.state.lastCommit.commitHash,e.next=4,F.g.rawFile({username:a},{name:s},i,o);case 4:null!==(c=e.sent)&&r.startDownload(c);case 6:case"end":return e.stop()}}),e)}))),r.startDownload=function(e){var t=r.props.match.params.path,a=URL.createObjectURL(e);C.c.startDownload(a,Object(_.basename)(t)),URL.revokeObjectURL(a)},r.getFileNameFromPath=function(e){var t=e.split("/");return t[t.length-1]},r.state={isBinary:!1,isOversize:!1,lastCommit:new A.b("","","",0,"",""),loading:!0,fileContent:""},r}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.loadLastCommit();case 3:return e.next=5,this.loadFileInfo();case 5:if(t=this.state,r=t.isBinary,a=t.isOversize,r||a){e.next=9;break}return e.next=9,this.loadFileContent();case 9:this.setState({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(n.a.mark((function e(t,r,a){var s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props.location.pathname,i=t.location.pathname,s===i){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.params.path,t=this.state,r=t.isBinary,a=t.isOversize,n=t.lastCommit,s=t.loading,i=t.fileContent,o=this.getFileNameFromPath(e);return p.a.createElement(T,{fileContent:i,isBinary:r,isOversize:a,lastCommit:n,fileName:o,loading:s,onRawFileButtonClick:this.onRawFileButtonClick})}}]),t}(m.PureComponent),H=Object(k.f)(U);r.d(t,"default",(function(){return H}))}}]);
//# sourceMappingURL=20.7800adb3.chunk.js.map