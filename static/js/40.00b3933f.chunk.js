(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[40],{1062:function(p,y,e){p.exports={Notifications:"Style_Notifications__D-xOu",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__3BI5A"}},1063:function(p,y,e){p.exports={Notification:"Style_Notification__2Atwy",left:"Style_left__2q6SK",right:"Style_right__jEYSy",unconfirmedDotWrapper:"Style_unconfirmedDotWrapper__2Vdk3",unconfirmedDot:"Style_unconfirmedDot__3iNX4",iconWrapper:"Style_iconWrapper__2S6sF",contentWrapper:"Style_contentWrapper__lH-PF",typeWrapper:"Style_typeWrapper__3XsAt",timeWrapper:"Style_timeWrapper__1qIiV",buttonWrapper:"Style_buttonWrapper__23C0M"}},1399:function(p,y,e){"use strict";e.r(y),e.d(y,"default",function(){return Q});var h=e(0),t=e.n(h),D=e(1062),S=e.n(D),M=e(959),I=e(947),F=e(1423),C=e(101),T=e(177),R=e(1063),r=e.n(R),N=e(170),U=e(964),L=e(980),k=e(948),A=e(3),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},j=x,z=e(9),O=function(n,a){return h.createElement(z.a,Object(A.a)(Object(A.a)({},n),{},{ref:a,icon:j}))};O.displayName="ReloadOutlined";var G=h.forwardRef(O),P=e(67);function V(l){const{notification:{id:n,confirmed:a,content:c,type:s,timestamp:d},onConfirmButtonClickFactory:o,onUnconfirmButtonClickFactory:i}=l;return t.a.createElement(F.b.Item,null,t.a.createElement("div",{className:r.a.Notification},t.a.createElement("div",{className:r.a.left},t.a.createElement("div",{className:r.a.unconfirmedDotWrapper},a?null:t.a.createElement("span",{className:r.a.unconfirmedDot})),t.a.createElement("div",{className:r.a.iconWrapper},t.a.createElement(L.a,null)),t.a.createElement("div",{className:r.a.contentWrapper},c)),t.a.createElement("div",{className:r.a.right},t.a.createElement("div",{className:r.a.typeWrapper},s),t.a.createElement("div",{className:r.a.timeWrapper},t.a.createElement(N.a,{title:P.b.parseTimestampToDate(d)},t.a.createElement("span",null,P.b.parseTimestampToDifference(d)))),t.a.createElement("div",{className:r.a.buttonWrapper},t.a.createElement(U.b,{size:-1},t.a.createElement(N.a,{title:"\u786E\u8BA4\u6D88\u606F"},t.a.createElement(C.a,{onClick:o(n),size:"small",disabled:a},t.a.createElement(k.a,null))),t.a.createElement(N.a,{title:"\u64A4\u9500\u786E\u8BA4\u6D88\u606F"},t.a.createElement(C.a,{onClick:i(n),size:"small",disabled:!a},t.a.createElement(G,null))))))))}var J=t.a.memo(V);function X(l){const{notifications:n,unconfirmedNotificationCount:a,onConfirmButtonClickFactory:c,onUnconfirmButtonClickFactory:s,onLoadMoreButtonClick:d,loading:o}=l;return t.a.createElement("div",{className:S.a.Notifications},t.a.createElement(M.a,{title:t.a.createElement("div",null,"\u6D88\u606F (",a," \u6761\u672A\u786E\u8BA4)")},t.a.createElement(I.a,{spinning:o},n.length>0?t.a.createElement(t.a.Fragment,null,t.a.createElement(F.b,{bordered:!0,size:"small"},n.map(i=>t.a.createElement(J,{notification:i,onConfirmButtonClickFactory:c,onUnconfirmButtonClickFactory:s,key:i.id}))),t.a.createElement("div",{className:S.a.loadMoreButtonWrapper},t.a.createElement(C.a,{type:"primary",disabled:o,loading:o,onClick:d},"\u52A0\u8F7D\u66F4\u591A"))):t.a.createElement(T.a,{description:"\u6CA1\u6709\u6D88\u606F"}))))}var H=t.a.memo(X),K=e(132),E=e(27),Y=e(96),B=e(339),g,w=typeof g!="undefined"?g:l=>{throw new Error('Dynamic require of "'+l+'" is not supported')},m=(l,n,a)=>new Promise((c,s)=>{var d=u=>{try{i(a.next(u))}catch(f){s(f)}},o=u=>{try{i(a.throw(u))}catch(f){s(f)}},i=u=>u.done?c(u.value):Promise.resolve(u.value).then(d,o);i((a=a.apply(l,n)).next())});const v=class extends h.PureComponent{constructor(l){super(l);this.setStatePromise=Object(Y.promisify)(this.setState),this.loadNotificationCount=()=>m(this,null,function*(){const n=yield E.f.getCount({confirmed:!1});if(n!==null){const{count:a}=n;yield this.setStatePromise({unconfirmedNotificationCount:a})}}),this.onSetConfirmedButtonClickFactory=(n,a)=>()=>m(this,null,function*(){if(yield this.setStatePromise({loading:!0}),(yield E.f.setConfirmed([{id:n}],a))!==null){const{notifications:s,unconfirmedNotificationCount:d}=this.state,o=[...s];for(let i=0;i<o.length;i++)if(o[i].id===n){const{id:u,timestamp:f,content:Z,type:$,username:b}=o[i];o[i]=new K.f(u,b,Z,$,f,a);break}yield this.setStatePromise({notifications:o,unconfirmedNotificationCount:d+(a?-1:1)})}yield this.setStatePromise({loading:!1})}),this.onConfirmButtonClickFactory=n=>this.onSetConfirmedButtonClickFactory(n,!0),this.onUnconfirmButtonClickFactory=n=>this.onSetConfirmedButtonClickFactory(n,!1),this.onLoadMoreButtonClick=()=>m(this,null,function*(){yield this.loadMoreNotifications()}),this.loadMoreNotifications=()=>m(this,null,function*(){const{loadEnd:n,lastLoadPosition:a}=this.state;if(n)B.a.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u6D88\u606F"});else{yield this.setStatePromise({loading:!0});const c=yield E.f.get({},a,v.NOTIFICATION_AMOUNT_PER_PAGE);if(c!==null){const{notifications:s}=c;s.length<v.NOTIFICATION_AMOUNT_PER_PAGE&&(B.a.success({message:"\u5DF2\u52A0\u8F7D\u6240\u6709\u6D88\u606F"}),yield this.setStatePromise({loadEnd:!0})),yield this.setStatePromise({notifications:[...this.state.notifications,...s],loading:!1,lastLoadPosition:a+v.NOTIFICATION_AMOUNT_PER_PAGE})}}}),this.state={notifications:[],loading:!1,lastLoadPosition:0,loadEnd:!1,unconfirmedNotificationCount:0}}componentDidMount(){return m(this,null,function*(){yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadNotificationCount(),this.loadMoreNotifications()]),yield this.setStatePromise({loading:!1})})}render(){const{notifications:l,loading:n,unconfirmedNotificationCount:a}=this.state;return t.a.createElement(H,{notifications:l,unconfirmedNotificationCount:a,loading:n,onConfirmButtonClickFactory:this.onConfirmButtonClickFactory,onUnconfirmButtonClickFactory:this.onUnconfirmButtonClickFactory,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}};let W=v;W.NOTIFICATION_AMOUNT_PER_PAGE=20;var Q=W}}]);

//# sourceMappingURL=40.00b3933f.chunk.js.map