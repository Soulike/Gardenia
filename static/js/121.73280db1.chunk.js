"use strict";(self.webpackChunksoulike_git=self.webpackChunksoulike_git||[]).push([[121],{23782:function(K,L,e){e.d(L,{Z:function(){return z}});var t=e(89526),l=e(75113),O={AccessibilityTag:"Style_AccessibilityTag__GwIoI"},V=Object.defineProperty,F=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,D=(i,u,d)=>u in i?V(i,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[u]=d,m=(i,u)=>{for(var d in u||(u={}))U.call(u,d)&&D(i,d,u[d]);if(F)for(var d of F(u))R.call(u,d)&&D(i,d,u[d]);return i},W=(i,u)=>{var d={};for(var S in i)U.call(i,S)&&u.indexOf(S)<0&&(d[S]=i[S]);if(i!=null&&F)for(var S of F(i))u.indexOf(S)<0&&R.call(i,S)&&(d[S]=i[S]);return d};function j(i){const u=i,{isPublic:d}=u,S=W(u,["isPublic"]);return d?t.createElement(l.Z,m({className:O.AccessibilityTag,color:"blue"},S),"\u516C\u5F00"):t.createElement(l.Z,m({className:O.AccessibilityTag,color:"gold"},S),"\u79C1\u4EBA")}var z=t.memo(j)},18503:function(K,L,e){e.d(L,{Z:function(){return t.Z}});var t=e(23782)},66049:function(K,L,e){e.d(L,{Z:function(){return A}});var t=e(89526),l=e(65293),O=e(30592),V=e(43546),F=e(1413),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},R=U,D=e(36593),m=function(b,P){return t.createElement(D.Z,(0,F.Z)((0,F.Z)({},b),{},{ref:P,icon:R}))};m.displayName="StarFilled";var W=t.forwardRef(m),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},z=j,i=function(b,P){return t.createElement(D.Z,(0,F.Z)((0,F.Z)({},b),{},{ref:P,icon:z}))};i.displayName="StarOutlined";var u=t.forwardRef(i),d=e(14006),S=(T,b,P)=>new Promise((G,x)=>{var k=I=>{try{M(P.next(I))}catch(Q){x(Q)}},X=I=>{try{M(P.throw(I))}catch(Q){x(Q)}},M=I=>I.done?G(I.value):Promise.resolve(I.value).then(k,X);M((P=P.apply(T,b)).next())});function w(T){const{hasStared:b,starAmount:P,loading:G,onClick:x}=T;return t.createElement(l.Z,{size:-1},t.createElement(O.Z,{size:"small",onClick:k=>S(this,null,function*(){k.preventDefault(),typeof x=="function"&&(yield x(k))}),loading:G,disabled:G},b?t.createElement(t.Fragment,null,t.createElement(W,null)," Unstar"):t.createElement(t.Fragment,null,t.createElement(u,null)," Star")),t.createElement(V.Z,{title:P},t.createElement(O.Z,{size:"small",onClick:k=>S(this,null,function*(){return k.preventDefault()})},d.Ld.getNumberAbbreviation(P))))}var A=t.memo(w)},60121:function(K,L,e){e.r(L),e.d(L,{default:function(){return dt}});var t=e(89526),l={Repository:"Style_Repository__HpNaH",header:"Style_header__VlSao",tabContent:"Style_tabContent__Z5P69",basicInfo:"Style_basicInfo__31xCv",tagAndRepository:"Style_tagAndRepository__hOkJ0",tag:"Style_tag__MWOhO",usernameAndName:"Style_usernameAndName__tz1oX",forkFrom:"Style_forkFrom__s4HrK",text:"Style_text__NaGtX",buttonArea:"Style_buttonArea__zmkkC",buttonWrapper:"Style_buttonWrapper__1Ov2+",tab:"Style_tab__LgAV6"},O=e(26447),V=e(75113),F=e(18503),U=e(565),R=e(18440),D=(c=>(c.CODE="CODE",c.ISSUES="ISSUES",c.PULL_REQUESTS="PULL_REQUESTS",c.SETTINGS="SETTINGS",c))(D||{}),m=D,W={},j=e(65293),z=e(30592),i=e(43546),u=e(14006),d=e(70281);function S(c){const{onClick:r,forkAmount:a,loading:s}=c;return t.createElement(j.Z,{className:W.ForkButton,size:-1},t.createElement(z.Z,{onClick:r,disabled:s,loading:s,size:"small"},t.createElement(d.Z,null),"Fork"),t.createElement(i.Z,{title:a},t.createElement(z.Z,{disabled:s,size:"small"},u.Ld.getNumberAbbreviation(a))))}var w=t.memo(S),A=e(62371),T=e(65092),b=e(24315),P=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});class G extends t.PureComponent{constructor(r){super(r);this.loadForkAmount=()=>P(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.CB.forkAmount({username:a,name:s});if(n!==null){const{amount:f}=n;this.setState({forkAmount:f})}}),this.onClick=()=>P(this,null,function*(){this.setState({loading:!0});const{match:{params:{username:a,repositoryName:s}}}=this.props;(yield A._j.fork({username:a,name:s}))!==null&&b.Z.success({message:"fork \u6210\u529F",description:"\u53EF\u524D\u5F80\u4E2A\u4EBA\u4E2D\u5FC3\u4ED3\u5E93\u5217\u8868\u67E5\u770B"}),this.setState({loading:!1})}),this.state={forkAmount:0,loading:!1}}componentDidMount(){return P(this,null,function*(){this.setState({loading:!0}),yield this.loadForkAmount(),this.setState({loading:!1})})}render(){const{forkAmount:r,loading:a}=this.state;return t.createElement(w,{onClick:this.onClick,forkAmount:r,loading:a})}}var x=(0,T.EN)(G),k=e(49645),X=e(30431),M=e(90566),I=e(48425),Q=e(66049),st=e(85663),H=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});class ot extends t.PureComponent{constructor(r){super(r);this.setStatePromise=(0,st.promisify)(this.setState),this.loadHasStared=()=>H(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.Ux.isStaredRepository({username:a,name:s});if(n!==null){const{isStared:f}=n;yield this.setStatePromise({hasStared:f})}}),this.loadStarAmount=()=>H(this,null,function*(){const{match:{params:{username:a,repositoryName:s}}}=this.props,n=yield A.Ux.getRepositoryStarAmount({username:a,name:s});if(n!==null){const{amount:f}=n;yield this.setStatePromise({starAmount:f})}}),this.onClick=()=>H(this,null,function*(){const{hasStared:a,starAmount:s}=this.state,{match:{params:{username:n,repositoryName:f}}}=this.props;yield this.setStatePromise({loading:!0}),a?(yield A.Ux.remove({username:n,name:f}))!==null&&(yield this.setStatePromise({hasStared:!1,starAmount:s-1})):(yield A.Ux.add({username:n,name:f}))!==null&&(yield this.setStatePromise({hasStared:!0,starAmount:s+1})),yield this.setStatePromise({loading:!1})}),this.state={hasStared:!1,starAmount:0,loading:!1}}componentDidMount(){return H(this,null,function*(){yield this.setStatePromise({loading:!0}),yield Promise.all([this.loadHasStared(),this.loadStarAmount()]),yield this.setStatePromise({loading:!1})})}componentDidUpdate(r,a,s){return H(this,null,function*(){const{match:{params:{username:n,repositoryName:f}}}=this.props,{match:{params:{username:v,repositoryName:E}}}=r;(n!==v||f!==E)&&(yield this.componentDidMount())})}render(){const{hasStared:r,loading:a,starAmount:s}=this.state;return t.createElement(Q.Z,{hasStared:r,loading:a,starAmount:s,onClick:this.onClick})}}var rt=(0,T.EN)(ot),_=e(92070);function lt(c){const{repository:{username:r,name:a,isPublic:s},forkFrom:n,loading:f,onTabChange:v,tabActiveKey:E,showSettings:o,children:y,openPullRequestAmount:J,openIssueAmount:Y,isLoggedIn:q}=c;return f?null:t.createElement("div",{className:l.Repository},t.createElement("div",{className:l.header},t.createElement("div",{className:l.basicInfo},t.createElement("div",{className:l.tagAndRepository},t.createElement("div",{className:l.tag},t.createElement(F.Z,{isPublic:s})),t.createElement("div",{className:l.usernameAndName},t.createElement(U.rU,{to:R.Function.generatePersonalCenterRoute({username:r})},r)," / ",t.createElement(U.rU,{to:R.Function.generateRepositoryCodeRoute({username:r,repositoryName:a})},t.createElement("b",null,a)))),n===null?null:t.createElement("div",{className:l.forkFrom},t.createElement("div",{className:l.text},"fork \u81EA"),t.createElement(U.rU,{to:R.Function.generatePersonalCenterRoute({username:n.username})},n.username)," / ",t.createElement(U.rU,{to:R.Function.generateRepositoryCodeRoute({username:n.username,repositoryName:n.name})},t.createElement("b",null,n.name)))),t.createElement("div",{className:l.buttonArea},q?t.createElement(t.Fragment,null,t.createElement("div",{className:l.buttonWrapper},t.createElement(rt,null)),t.createElement("div",{className:l.buttonWrapper},t.createElement(x,null))):null)),t.createElement(O.Z,{defaultActiveKey:m.CODE,type:"card",className:l.tab,tabBarStyle:{padding:"0 calc(50% - 500px)",margin:"0"},onChange:v,activeKey:E},t.createElement(O.Z.TabPane,{tab:t.createElement(t.Fragment,null,t.createElement(k.Z,null),"\u4EE3\u7801"),key:m.CODE},t.createElement("div",{className:l.tabContent},y)),t.createElement(O.Z.TabPane,{tab:t.createElement(t.Fragment,null,t.createElement(X.Z,null),"Issues ",t.createElement(V.Z,{className:l.tag},Y)),key:m.ISSUES},t.createElement("div",{className:l.tabContent},y)),t.createElement(O.Z.TabPane,{tab:t.createElement(t.Fragment,null,t.createElement(M.Z,null),"Pull Requests ",t.createElement(V.Z,{className:l.tag},J)),key:m.PULL_REQUESTS},t.createElement("div",{className:l.tabContent},y)),o?t.createElement(O.Z.TabPane,{tab:t.createElement(t.Fragment,null,t.createElement(I.Z,null),"\u8BBE\u7F6E"),key:m.SETTINGS},t.createElement("div",{className:l.tabContent},y)):null))}const it=c=>{const{Root:{isLoggedIn:r}}=c;return{isLoggedIn:r}};var ut=t.memo((0,_.$j)(it)(lt)),ct=e(60269),C=e(36393),tt=e(76320),$=(c,r,a)=>new Promise((s,n)=>{var f=o=>{try{E(a.next(o))}catch(y){n(y)}},v=o=>{try{E(a.throw(o))}catch(y){n(y)}},E=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,v);E((a=a.apply(c,r)).next())});function mt(c){const[r,a]=(0,t.useState)(new ct._j("","","",!0)),[s,n]=(0,t.useState)(!1),[f,v]=(0,t.useState)(m.CODE),[E,o]=(0,t.useState)(null),[y,J]=(0,t.useState)(0),[Y,q]=(0,t.useState)(0),[ft,yt]=(0,t.useState)(!1),B=(0,T.k6)(),{objectType:et,commitHash:nt,username:h,repositoryName:p}=(0,T.UO)(),{path:at}=(0,T.$B)(),{isLoggedIn:St}=(0,_.v9)(({Root:g})=>g);(0,t.useEffect)(()=>{(()=>{et!==void 0&&nt===void 0&&B.replace(C.yt[C.DV.NOT_FOUND])})()},[et,nt,B]),(0,t.useEffect)(()=>{document.title=`${h}/${p} - ${C.A1}`},[h,p]),(0,t.useLayoutEffect)(()=>{const g=()=>$(this,null,function*(){const N=yield A._j.shouldShowOptions({username:h,name:p});if(N!==null){const{showOptions:Z}=N;yt(Z)}});n(!0),g().finally(()=>n(!1))},[h,p,St]),(0,t.useLayoutEffect)(()=>{const{REPOSITORY:{REPOSITORY:g,CODE:N,ISSUES:Z,ISSUE:ht,CREATE_ISSUE:pt,PULL_REQUESTS:gt,PULL_REQUEST:Nt,SETTINGS:Pt,CONFLICT:Ct}}=C.DV;switch(at){case C.yt[N]:case C.yt[g]:{v(m.CODE);break}case C.yt[pt]:case C.yt[ht]:case C.yt[Z]:{v(m.ISSUES);break}case C.yt[Nt]:case C.yt[gt]:case C.yt[Ct]:{v(m.PULL_REQUESTS);break}case C.yt[Pt.SETTINGS]:{v(m.SETTINGS);break}}},[at]),(0,t.useEffect)(()=>{const g=()=>$(this,null,function*(){const N=yield A.CB.repository({username:h},{name:p});if(N!==null)a(N);else return B.replace(C.yt[C.DV.NOT_FOUND])});n(!0),g().finally(()=>n(!1))},[h,p,B]),(0,t.useEffect)(()=>{const g=()=>$(this,null,function*(){const N=yield A.CB.forkFrom({username:h,name:p});if(N!==null){const{repository:Z}=N;o(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]),(0,t.useEffect)(()=>{const g=()=>$(this,null,function*(){const N=yield A.i7.getPullRequestAmount({username:h,name:p},tt.El.OPEN);if(N!==null){const{amount:Z}=N;J(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]),(0,t.useEffect)(()=>{const g=()=>$(this,null,function*(){const N=yield A.$9.getAmountByRepository({username:h,name:p},tt.dG.OPEN);if(N!==null){const{amount:Z}=N;q(Z)}});n(!0),g().finally(()=>n(!1))},[h,p]);const Et=g=>{switch(g){case m.CODE:return B.push(R.Function.generateRepositoryCodeRoute({username:h,repositoryName:p}));case m.ISSUES:return B.push(R.Function.generateRepositoryIssuesRoute({username:h,repositoryName:p}));case m.PULL_REQUESTS:return B.push(R.Function.generateRepositoryPullRequestsRoute({username:h,repositoryName:p}));case m.SETTINGS:return B.push(R.Function.generateRepositorySettingsRoute({username:h,repositoryName:p}));default:return}},{children:vt}=c;return t.createElement(ut,{showSettings:ft,repository:r,loading:s,onTabChange:Et,tabActiveKey:f,forkFrom:E,openPullRequestAmount:y,openIssueAmount:Y},vt)}var dt=t.memo(mt)}}]);

//# sourceMappingURL=121.73280db1.chunk.js.map