(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[36],{1135:function(e,t,a){e.exports={Commit:"Style_Commit__1ccZI",diffWrapper:"Style_diffWrapper__1Xmub",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__-rw5j"}},1136:function(e,t,a){e.exports={CommitInfoCard:"Style_CommitInfoCard__1hAXa",messageWrapper:"Style_messageWrapper__3JI_C",message:"Style_message__2pxOG",body:"Style_body__bWu93",infoWrapper:"Style_infoWrapper__1ZWk5",info:"Style_info__29oAa",committerWrapper:"Style_committerWrapper__vzZYZ"}},1236:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var r=a(74),n=(a(62),a(29)),o=a(1),i=a.n(o),m=a(3),s=a(9),c=a(10),u=a(17),f=a(18),l=a(0),p=a.n(l),d=(a(108),a(45)),h=(a(73),a(21)),_=a(1135),v=a.n(_),b=a(1136),E=a.n(b),y=a(84),g=a(15),C=a(126),k=a(22),w=a(19),W=a(343);var x=Object(C.f)(p.a.memo((function(e){var t=e.commit,a=t.message,r=t.body,n=t.committerName,o=t.timestamp,i=t.commitHash,m=t.committerEmail,s=e.match.params,c=s.username,u=s.repository;return p.a.createElement("div",{className:E.a.CommitInfoCard},p.a.createElement("div",{className:E.a.messageWrapper},p.a.createElement("div",{className:E.a.message},a),r.length?p.a.createElement("pre",{className:E.a.body},r):null),p.a.createElement("div",{className:E.a.infoWrapper},p.a.createElement("div",{className:E.a.info},p.a.createElement("div",{className:E.a.committerWrapper},p.a.createElement(W.a,{committerEmail:m,committerName:n})),"\u5728 ",y.b.parseTimestampToDifference(o),"\u63d0\u4ea4"),p.a.createElement("div",{className:E.a.hashWrapper},p.a.createElement(g.b,{className:E.a.hash,to:k.Function.generateRepositoryCodeRoute({username:c,repository:u,branch:i,objectType:w.b.TREE})},p.a.createElement(h.a,{size:"small"},p.a.createElement("code",null,i))))))}))),O=a(348);var S=p.a.memo((function(e){var t=e.loading,a=e.diff,r=e.commit,n=e.diffAmount,o=e.onLoadMoreButtonClick;return p.a.createElement("div",{className:v.a.Commit},p.a.createElement(d.a,{spinning:t},p.a.createElement("div",{className:v.a.commitInfoCardWrapper},p.a.createElement(x,{commit:r})),p.a.createElement("div",{className:v.a.diffWrapper},p.a.createElement(O.a,{fileDiffs:a,fileDiffAmount:n}),p.a.createElement("div",{className:v.a.loadMoreButtonWrapper},p.a.createElement(h.a,{disabled:t,loading:t,onClick:o,size:"large",type:"primary"},"\u52a0\u8f7d\u66f4\u591a\u6587\u4ef6\u66f4\u6539")))))})),j=a(134),N=a(28),A=function(e){Object(f.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).init=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){o.setState({diff:[]},(function(){return e()}))})));case 1:case"end":return e.stop()}}),e)}))),o.loadCommit=Object(m.a)(i.a.mark((function e(){var t,a,r,n,m,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props.match.params,a=t.username,r=t.repository,n=t.commitHash,e.next=3,N.h.commit({username:a,name:r},n);case 3:null!==(m=e.sent)&&(s=m.commit,o.setState({commit:s}));case 5:case"end":return e.stop()}}),e)}))),o.loadMoreCommitDiff=Object(m.a)(i.a.mark((function e(){var t,m,s,c,u,f,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props.match.params,m=t.username,s=t.repository,c=t.commitHash,u=o.state.diff,e.next=4,N.h.commitDiff({username:m,name:s},c,u.length,a.FILE_DIFF_AMOUNT_PER_PAGE);case 4:null!==(f=e.sent)&&(0===(l=f.diff).length?n.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u88ab\u4fee\u6539\u6587\u4ef6"}):o.setState({diff:[].concat(Object(r.a)(u),Object(r.a)(l))}));case 6:case"end":return e.stop()}}),e)}))),o.loadCommitDiffAmount=Object(m.a)(i.a.mark((function e(){var t,a,r,n,m,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.props.match.params,a=t.username,r=t.repository,n=t.commitHash,e.next=3,N.h.commitDiffAmount({username:a,name:r},n);case 3:null!==(m=e.sent)&&(s=m.amount,o.setState({diffAmount:s}));case 5:case"end":return e.stop()}}),e)}))),o.onLoadMoreButtonClick=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({loading:!0}),e.next=3,o.loadMoreCommitDiff();case 3:o.setState({loading:!1});case 4:case"end":return e.stop()}}),e)}))),o.state={commit:new j.b("","","a@b.com",0,"",""),diff:[],diffAmount:0,loading:!1},o}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.setState({loading:!0}),e.next=5,Promise.all([this.loadCommit(),this.loadCommitDiffAmount(),this.loadMoreCommitDiff()]);case 5:this.setState({loading:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(i.a.mark((function e(t,a,r){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.location.pathname,o=t.location.pathname,n===o){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.commit,a=e.diff,r=e.loading,n=e.diffAmount;return p.a.createElement(S,{commit:t,diff:a,loading:r,diffAmount:n,onLoadMoreButtonClick:this.onLoadMoreButtonClick})}}]),a}(l.PureComponent);A.FILE_DIFF_AMOUNT_PER_PAGE=10;var D=Object(C.f)(A)}}]);
//# sourceMappingURL=36.2bdb6ea2.chunk.js.map