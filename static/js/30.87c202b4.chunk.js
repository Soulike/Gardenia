(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[30],{1027:function(e,t,a){e.exports={Commits:"Style_Commits__2OB1b",infoWrapper:"Style_infoWrapper__1B-0-",path:"Style_path__3KqyH",timeLineWrapper:"Style_timeLineWrapper__3aFXu",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__MQq-F"}},1302:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var r=a(89),n=a(2),c=a.n(n),s=a(6),i=a(15),o=a(16),m=a(39),u=a(38),l=a(0),h=a.n(l),p=a(1027),b=a.n(p),j=a(821),d=a(109),f=a(336),O=a(212),v=a(54),x=a(56),g=a(922),y=a(1),k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onBranchOrTagClickFactory=function(t){return function(){var a=e.props,r=a.history,n=a.match.params,c=n.username,s=n.repositoryName,i=n.path;return r.replace(x.Function.generateRepositoryCommitsRoute({username:c,repositoryName:s,commitHash:t,path:i}))}},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.match.params.commitHash,a=e.branches,r=e.tagNames,n="";if(void 0===t){var c,s=Object(O.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i.isDefault&&(n=i.name)}}catch(o){s.e(o)}finally{s.f()}}return Object(y.jsx)(g.a,{branches:a,tagNames:r,currentBranchOrTagOrCommitHash:t||n,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory})}}]),a}(l.PureComponent),N=Object(v.j)(k);function _(e){var t=e.branches,a=e.tagNames,r=e.loading,n=e.commits,c=e.path,s=e.repository,i=e.repository.name,o=e.onLoadMoreButtonClick;return Object(y.jsx)("div",{className:b.a.Commits,children:Object(y.jsxs)(j.a,{spinning:r,children:[Object(y.jsxs)("div",{className:b.a.infoWrapper,children:[Object(y.jsx)(N,{branches:t,tagNames:a}),"string"===typeof c?Object(y.jsxs)("div",{className:b.a.path,children:[i,"/",c]}):null]}),Object(y.jsx)("div",{className:b.a.timeLineWrapper,children:Object(y.jsx)(f.a,{commits:n,repository:s})}),Object(y.jsx)("div",{className:b.a.loadMoreButtonWrapper,children:Object(y.jsx)(d.a,{disabled:r,loading:r,onClick:o,children:"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"})})]})})}var C=h.a.memo(_),M=a(34),B=a(328),S=a(102),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setStatePromise=Object(S.promisify)(n.setState),n.init=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({branches:[],tagNames:[],commits:[]});case 2:case"end":return e.stop()}}),e)}))),n.loadBranches=Object(s.a)(c.a.mark((function e(){var t,a,r,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,M.j.branches({username:a,name:r});case 3:if(null===(s=e.sent)){e.next=8;break}return i=s.branches,e.next=8,n.setStatePromise({branches:i});case 8:case"end":return e.stop()}}),e)}))),n.loadTagNames=Object(s.a)(c.a.mark((function e(){var t,a,r,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params,a=t.username,r=t.repositoryName,e.next=3,M.j.tagNames({username:a,name:r});case 3:if(null===(s=e.sent)){e.next=8;break}return i=s.tagNames,e.next=8,n.setStatePromise({tagNames:i});case 8:case"end":return e.stop()}}),e)}))),n.loadMoreCommits=Object(s.a)(c.a.mark((function e(){var t,s,i,o,m,u,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.match.params,s=t.username,i=t.repositoryName,o=t.commitHash,m=t.path,l=n.state.commits,"string"!==typeof m){e.next=8;break}return e.next=5,M.j.fileCommitHistory({username:s,name:i},m,o,l.length,a.COMMIT_AMOUNT_PER_PAGE);case 5:u=e.sent,e.next=11;break;case 8:return e.next=10,M.j.commitHistory({username:s,name:i},o,l.length,a.COMMIT_AMOUNT_PER_PAGE);case 10:u=e.sent;case 11:if(null===u){e.next=19;break}if(0!==(h=u.commits).length){e.next=17;break}B.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}),e.next=19;break;case 17:return e.next=19,n.setStatePromise({commits:[].concat(Object(r.a)(l),Object(r.a)(h))});case 19:case"end":return e.stop()}}),e)}))),n.onLoadMoreButtonClick=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setStatePromise({loading:!0});case 2:return e.next=4,n.loadMoreCommits();case 4:return e.next=6,n.setStatePromise({loading:!1});case 6:case"end":return e.stop()}}),e)}))),n.state={branches:[],tagNames:[],loading:!1,commits:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return e.next=4,this.setStatePromise({loading:!0});case 4:return e.next=6,Promise.all([this.loadBranches(),this.loadTagNames()]);case 6:return e.next=8,this.loadMoreCommits();case 8:return e.next=10,this.setStatePromise({loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(c.a.mark((function e(t,a,r){var n,s,i,o,m,u,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.match.params,s=n.username,i=n.repositoryName,o=n.commitHash,m=t.match.params,u=m.username,l=m.repositoryName,h=m.commitHash,s===u&&i===l){e.next=7;break}return e.next=5,this.componentDidMount();case 5:e.next=14;break;case 7:if(o===h){e.next=14;break}return e.next=10,this.setStatePromise({loading:!0,commits:[]});case 10:return e.next=12,this.loadMoreCommits();case 12:return e.next=14,this.setStatePromise({loading:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.branches,a=e.loading,r=e.commits,n=e.tagNames,c=this.props.match.params,s=c.repositoryName,i=c.path,o=c.username;return Object(y.jsx)(C,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:t,loading:a,commits:r,tagNames:n,path:i,repository:{username:o,name:s}})}}]),a}(l.PureComponent);P.COMMIT_AMOUNT_PER_PAGE=50;var T=Object(v.j)(P)},897:function(e,t,a){e.exports={menuWrapper:"Style_menuWrapper__2m-La",menu:"Style_menu__1IHB3",menuItem:"Style_menuItem__3fZXi",checkIconWrapper:"Style_checkIconWrapper__e6U-7",name:"Style_name__1yAds",fullListLinkWrapper:"Style_fullListLinkWrapper__11lpU"}},922:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a(15),n=a(16),c=a(39),s=a(38),i=a(0),o=a.n(i),m=a(89),u=a(212),l=a(897),h=a.n(l),p=a(458),b=a(830),j=a(181),d=a(109),f=a(988),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},v=a(13),x=function(e,t){return i.createElement(v.a,Object.assign({},e,{ref:t,icon:O}))};x.displayName="TagOutlined";var g=i.forwardRef(x),y=a(924),k=a(822),N=a(840),_=a(56),C=a(23),M=a(54),B=a(1);var S=o.a.memo(Object(M.j)((function(e){var t=Object(B.jsx)(f.a,{}),a=Object(B.jsx)(g,{}),r=Object(B.jsx)(y.a,{}),n=e.branches,c=e.tagNames,s=e.visible,i=e.currentBranchOrTagOrCommitHash,o=e.onButtonClick,l=e.onBranchOrTagClickFactory,O=e.match.params,v=O.username,x=O.repositoryName,M=n.map((function(e){return e.name})),S=M.includes(i),P=c.includes(i),T=S?t:P?a:r,w=[],L=[];if(S){w.push(i);var I,W=1,E=Object(u.a)(M);try{for(E.s();!(I=E.n()).done;){var z=I.value;if(10===W)break;z!==i&&(w.push(z),W++)}}catch(V){E.e(V)}finally{E.f()}}else w.push.apply(w,Object(m.a)(M.slice(0,10)));if(P){L.push(i);var H,R=1,F=Object(u.a)(c);try{for(F.s();!(H=F.n()).done;){var A=H.value;if(10===R)break;A!==i&&(L.push(A),R++)}}catch(V){F.e(V)}finally{F.f()}}else L.push.apply(L,Object(m.a)(c.slice(0,10)));return Object(B.jsx)("div",{className:h.a.BranchOrTagMenu,children:Object(B.jsx)(p.a,{placement:"bottomLeft",visible:s,trigger:["click"],content:Object(B.jsx)("div",{className:h.a.menuWrapper,children:Object(B.jsxs)(b.a,{defaultOpenKeys:["branch"],selectedKeys:[i],selectable:!1,className:h.a.menu,mode:"inline",inlineIndent:12,forceSubMenuRender:!0,children:[Object(B.jsx)(b.a.SubMenu,{title:Object(B.jsx)("b",{children:"\u5206\u652f"}),icon:t,children:0===n.length?Object(B.jsx)(j.a,{description:"\u6682\u65e0\u5206\u652f",image:j.a.PRESENTED_IMAGE_SIMPLE}):w.map((function(e){return Object(B.jsx)(b.a.Item,{onClick:l(e),children:Object(B.jsxs)("div",{className:h.a.menuItem,children:[Object(B.jsx)("span",{className:h.a.checkIconWrapper,children:i===e?Object(B.jsx)(k.a,{}):null}),Object(B.jsx)("span",{className:h.a.name,children:e})]})},e)}))},"branch"),Object(B.jsx)(b.a.Divider,{}),Object(B.jsx)(b.a.Item,{children:Object(B.jsx)("div",{className:h.a.fullListLinkWrapper,children:Object(B.jsx)(C.b,{to:_.Function.generateRepositoryBranchesRoute({username:v,repositoryName:x}),children:"\u67e5\u770b\u6240\u6709\u5206\u652f"})})}),Object(B.jsx)(b.a.Divider,{}),Object(B.jsx)(b.a.SubMenu,{title:Object(B.jsx)("b",{children:"\u6807\u7b7e"}),icon:a,children:0===c.length?Object(B.jsx)(j.a,{description:"\u6682\u65e0\u6807\u7b7e",image:j.a.PRESENTED_IMAGE_SIMPLE}):L.map((function(e){return Object(B.jsx)(b.a.Item,{onClick:l(e),children:Object(B.jsxs)("div",{className:h.a.menuItem,children:[Object(B.jsx)("span",{className:h.a.checkIconWrapper,children:i===e?Object(B.jsx)(k.a,{}):null}),Object(B.jsx)("span",{className:h.a.name,children:e})]})},e)}))},"tag"),Object(B.jsx)(b.a.Item,{children:Object(B.jsx)("div",{className:h.a.fullListLinkWrapper,children:Object(B.jsx)(C.b,{to:_.Function.generateRepositoryTagsRoute({username:v,repositoryName:x}),children:"\u67e5\u770b\u6240\u6709\u6807\u7b7e"})})})]})}),children:Object(B.jsxs)(d.a,{onClick:o,children:[T,i,Object(B.jsx)(N.a,{})]})})})}))),P=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onButtonClick=function(){var e=n.state.visible;n.setState({visible:!e})},n.onBranchOrTagClickFactory=function(e){var t=n.props.onBranchOrTagClickFactory;return function(a){n.setState({visible:!1});var r=t(e);r&&r(a)}},n.state={visible:!1},n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props,t=e.branches,a=e.tagNames,r=e.currentBranchOrTagOrCommitHash,n=this.state.visible;return Object(B.jsx)(S,{visible:n,tagNames:a,branches:t,currentBranchOrTagOrCommitHash:r,onBranchOrTagClickFactory:this.onBranchOrTagClickFactory,onButtonClick:this.onButtonClick})}}]),a}(i.PureComponent)},924:function(e,t,a){"use strict";var r=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 160H72c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zm833 0h-48c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8zM200 736h112c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H200c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm321 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm126 0h178c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8H647c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-255 0h48c4.4 0 8-3.6 8-8V168c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v560c0 4.4 3.6 8 8 8zm-79 64H201c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm257 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm256 0H648c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h178c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-385 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"barcode",theme:"outlined"},c=a(13),s=function(e,t){return r.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="BarcodeOutlined";t.a=r.forwardRef(s)},988:function(e,t,a){"use strict";var r=a(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},c=a(13),s=function(e,t){return r.createElement(c.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="BranchesOutlined";t.a=r.forwardRef(s)}}]);
//# sourceMappingURL=30.87c202b4.chunk.js.map