(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[43],{1092:function(e,t,a){e.exports={Commits:"Style_Commits__2OB1b",infoWrapper:"Style_infoWrapper__1B-0-",path:"Style_path__3KqyH",timeLineWrapper:"Style_timeLineWrapper__3aFXu",loadMoreButtonWrapper:"Style_loadMoreButtonWrapper__MQq-F"}},1199:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var n=a(72),r=a(1),o=a.n(r),c=a(3),s=a(9),i=a(10),u=a(17),m=a(18),p=a(0),l=a.n(p),h=a(1092),f=a.n(h),d=a(322),b=a(118),v=a(23),y=a(1046),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onBranchClick=function(t){return function(){var a=e.props,n=a.history,r=a.match.params,o=r.username,c=r.repository,s=r.path;return n.replace(v.Function.generateRepositoryCommitsRoute({username:o,repository:c,branch:t.name,path:s}))}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.match.params.branch,a=e.branches,n="";if(void 0===t){var r,o=Object(d.a)(a);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.isDefault&&(n=c.name)}}catch(s){o.e(s)}finally{o.f()}}return l.a.createElement(y.a,{branches:a,currentBranch:t||n,onBranchClick:this.onBranchClick})}}]),a}(p.PureComponent),k=Object(b.f)(O),_=a(952),M=a(86),C=a(328);var g=l.a.memo((function(e){var t=e.branches,a=e.loading,n=e.commits,r=e.path,o=e.repositoryName,c=e.onLoadMoreButtonClick;return l.a.createElement("div",{className:f.a.Commits},l.a.createElement(_.a,{spinning:a},l.a.createElement("div",{className:f.a.infoWrapper},l.a.createElement(k,{branches:t}),"string"===typeof r?l.a.createElement("div",{className:f.a.path},o,"/",r):null),l.a.createElement("div",{className:f.a.timeLineWrapper},l.a.createElement(C.a,{commits:n})),l.a.createElement("div",{className:f.a.loadMoreButtonWrapper},l.a.createElement(M.a,{disabled:a,loading:a,onClick:c},"\u52a0\u8f7d\u66f4\u65e9\u7684\u63d0\u4ea4\u5386\u53f2"))))})),x=a(31),j=a(951),E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).init=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){r.setState({branches:[],commits:[]},(function(){return e()}))})));case 1:case"end":return e.stop()}}),e)}))),r.loadBranches=Object(c.a)(o.a.mark((function e(){var t,a,n,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params,a=t.username,n=t.repository,e.next=3,x.h.branches({username:a,name:n});case 3:null!==(c=e.sent)&&(s=c.branches,r.setState({branches:s}));case 5:case"end":return e.stop()}}),e)}))),r.loadMoreCommits=Object(c.a)(o.a.mark((function e(){var t,c,s,i,u,m,p,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.match.params,c=t.username,s=t.repository,i=t.branch,u=t.path,p=r.state.commits,"string"!==typeof u){e.next=8;break}return e.next=5,x.h.fileCommitHistory({username:c,name:s},u,i,p.length,a.COMMIT_AMOUNT_PER_PAGE);case 5:m=e.sent,e.next=11;break;case 8:return e.next=10,x.h.commitHistory({username:c,name:s},i,p.length,a.COMMIT_AMOUNT_PER_PAGE);case 10:m=e.sent;case 11:null!==m&&(0===(l=m.commits).length?j.a.success({message:"\u5df2\u52a0\u8f7d\u6240\u6709\u63d0\u4ea4\u5386\u53f2"}):r.setState({commits:[].concat(Object(n.a)(p),Object(n.a)(l))}));case 12:case"end":return e.stop()}}),e)}))),r.onLoadMoreButtonClick=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setState({loading:!0});case 2:return e.next=4,r.loadMoreCommits();case 4:return e.next=6,r.setState({loading:!1});case 6:case"end":return e.stop()}}),e)}))),r.state={branches:[],loading:!1,commits:[]},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.setState({loading:!0}),e.next=5,this.loadBranches();case 5:return e.next=7,this.loadMoreCommits();case 7:this.setState({loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(o.a.mark((function e(t,a,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.location.pathname,c=this.props.location.pathname,r===c){e.next=5;break}return e.next=5,this.componentDidMount();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.branches,a=e.loading,n=e.commits,r=this.props.match.params,o=r.repository,c=r.path;return l.a.createElement(g,{onLoadMoreButtonClick:this.onLoadMoreButtonClick,branches:t,loading:a,commits:n,path:c,repositoryName:o})}}]),a}(p.PureComponent);E.COMMIT_AMOUNT_PER_PAGE=50;var w=Object(b.f)(E)}}]);
//# sourceMappingURL=43.a40fee25.chunk.js.map