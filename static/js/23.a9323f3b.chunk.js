(this["webpackJsonpsoulike-git"]=this["webpackJsonpsoulike-git"]||[]).push([[23],{659:function(a,t,e){a.exports={SettingsTitle:"Style_SettingsTitle__rgD4i"}},660:function(a,t,e){"use strict";var n=e(0),l=e.n(n),i=e(659),r=e.n(i);var s=l.a.memo((function(a){const{children:t}=a;return l.a.createElement("h2",{className:r.a.SettingsTitle},t)}));e.d(t,"a",(function(){return s}))},665:function(a,t,e){a.exports={DefaultAvatar:"Style_DefaultAvatar__1F6EL",img:"Style_img__2bePj"}},666:function(a,t,e){"use strict";var n=e(0),l=e.n(n),i=e(665),r=e.n(i),s=e(216),o=e.n(s);var c=l.a.memo((function(){return l.a.createElement("div",{className:r.a.DefaultAvatar},l.a.createElement("img",{src:o.a,alt:"default_avatar",className:r.a.img}))}));e.d(t,"a",(function(){return c}))},761:function(a,t,e){a.exports={Avatar:"Style_Avatar__2TmQb",body:"Style_body__eN9Pm",avatarWrapper:"Style_avatarWrapper__3wqvg",avatar:"Style_avatar__hT7wZ",fileInput:"Style_fileInput__1gSjB",buttonWrapper:"Style_buttonWrapper__1rFvY"}},814:function(a,t,e){"use strict";e.r(t);e(52);var n=e(22),l=e(0),i=e.n(l),r=(e(51),e(14)),s=(e(84),e(37)),o=(e(212),e(96)),c=e(761),u=e.n(c),p=e(660),v=e(666);var m=i.a.memo((function(a){const{avatar:t,loading:e,fileInputRef:n,onAvatarClick:l,onAvatarInputChange:c,fileChanged:m,onUploadButtonClick:f}=a;return i.a.createElement("div",{className:u.a.Avatar},i.a.createElement(p.a,null,"\u5934\u50cf"),i.a.createElement("div",{className:u.a.body},i.a.createElement(s.a,{spinning:e},i.a.createElement(o.a,{title:"\u70b9\u51fb\u66f4\u6362\u5934\u50cf"},i.a.createElement("div",{className:u.a.avatarWrapper,onClick:l},t?i.a.createElement("img",{src:t,alt:"avatar",className:u.a.avatar}):i.a.createElement(v.a,null)))),i.a.createElement("input",{type:"file",accept:"image/*",multiple:!1,className:u.a.fileInput,ref:n,onChange:c}),i.a.createElement("div",{className:u.a.buttonWrapper},i.a.createElement(r.a,{type:"primary",block:!0,disabled:e||!m,loading:e,onClick:f},"\u4e0a\u4f20"))))})),f=e(23);class d extends l.PureComponent{constructor(a){super(a),this.fileInputRef=i.a.createRef(),this.loadAvatar=async()=>{const a=await f.e.get();if(null!==a){const{avatar:t}=a;this.setState({avatar:t})}},this.onAvatarClick=()=>{const a=this.fileInputRef.current;null!==a&&a.click()},this.onAvatarInputChange=a=>{const{files:t}=a.target;if(null!==t&&t.length>0){const a=t[0];this.setState({file:a,avatar:URL.createObjectURL(a)})}},this.onUploadButtonClick=async()=>{const{file:a}=this.state;if(null===a)n.a.warn({message:"\u8bf7\u5148\u9009\u62e9\u5934\u50cf"});else{this.setState({loading:!0}),null!==await f.e.uploadAvatar(a)&&(n.a.success({message:"\u4e0a\u4f20\u5934\u50cf\u6210\u529f"}),setTimeout(()=>{window.location.reload()},1e3)),this.setState({loading:!1})}},this.state={avatar:"",loading:!1,file:null}}async componentDidMount(){this.setState({loading:!0}),await this.loadAvatar(),this.setState({loading:!1})}render(){const{avatar:a,loading:t,file:e}=this.state;return i.a.createElement(m,{onAvatarInputChange:this.onAvatarInputChange,onAvatarClick:this.onAvatarClick,fileInputRef:this.fileInputRef,avatar:a,loading:t,fileChanged:null!==e,onUploadButtonClick:this.onUploadButtonClick})}}var g=d;e.d(t,"default",(function(){return g}))}}]);
//# sourceMappingURL=23.a9323f3b.chunk.js.map